function e6(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var di=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Yx={exports:{}},Np={},Xx={exports:{}},Ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zc=Symbol.for("react.element"),t6=Symbol.for("react.portal"),n6=Symbol.for("react.fragment"),r6=Symbol.for("react.strict_mode"),i6=Symbol.for("react.profiler"),s6=Symbol.for("react.provider"),a6=Symbol.for("react.context"),o6=Symbol.for("react.forward_ref"),u6=Symbol.for("react.suspense"),l6=Symbol.for("react.memo"),c6=Symbol.for("react.lazy"),JT=Symbol.iterator;function f6(e){return e===null||typeof e!="object"?null:(e=JT&&e[JT]||e["@@iterator"],typeof e=="function"?e:null)}var Zx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},e$=Object.assign,t$={};function Fu(e,t,n){this.props=e,this.context=t,this.refs=t$,this.updater=n||Zx}Fu.prototype.isReactComponent={};Fu.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Fu.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function n$(){}n$.prototype=Fu.prototype;function hS(e,t,n){this.props=e,this.context=t,this.refs=t$,this.updater=n||Zx}var pS=hS.prototype=new n$;pS.constructor=hS;e$(pS,Fu.prototype);pS.isPureReactComponent=!0;var YT=Array.isArray,r$=Object.prototype.hasOwnProperty,vS={current:null},i$={key:!0,ref:!0,__self:!0,__source:!0};function s$(e,t,n){var r,i={},s=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)r$.call(t,r)&&!i$.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),f=0;f<l;f++)u[f]=arguments[f+2];i.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:zc,type:e,key:s,ref:a,props:i,_owner:vS.current}}function d6(e,t){return{$$typeof:zc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function gS(e){return typeof e=="object"&&e!==null&&e.$$typeof===zc}function h6(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var XT=/\/+/g;function wm(e,t){return typeof e=="object"&&e!==null&&e.key!=null?h6(""+e.key):t.toString(36)}function Th(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case zc:case t6:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+wm(a,0):r,YT(i)?(n="",e!=null&&(n=e.replace(XT,"$&/")+"/"),Th(i,t,n,"",function(f){return f})):i!=null&&(gS(i)&&(i=d6(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(XT,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",YT(e))for(var l=0;l<e.length;l++){s=e[l];var u=r+wm(s,l);a+=Th(s,t,n,u,i)}else if(u=f6(e),typeof u=="function")for(e=u.call(e),l=0;!(s=e.next()).done;)s=s.value,u=r+wm(s,l++),a+=Th(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Id(e,t,n){if(e==null)return e;var r=[],i=0;return Th(e,r,"","",function(s){return t.call(n,s,i++)}),r}function p6(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Hn={current:null},Eh={transition:null},v6={ReactCurrentDispatcher:Hn,ReactCurrentBatchConfig:Eh,ReactCurrentOwner:vS};function a$(){throw Error("act(...) is not supported in production builds of React.")}Ke.Children={map:Id,forEach:function(e,t,n){Id(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Id(e,function(){t++}),t},toArray:function(e){return Id(e,function(t){return t})||[]},only:function(e){if(!gS(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ke.Component=Fu;Ke.Fragment=n6;Ke.Profiler=i6;Ke.PureComponent=hS;Ke.StrictMode=r6;Ke.Suspense=u6;Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v6;Ke.act=a$;Ke.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=e$({},e.props),i=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=vS.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)r$.call(t,u)&&!i$.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&l!==void 0?l[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var f=0;f<u;f++)l[f]=arguments[f+2];r.children=l}return{$$typeof:zc,type:e.type,key:i,ref:s,props:r,_owner:a}};Ke.createContext=function(e){return e={$$typeof:a6,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:s6,_context:e},e.Consumer=e};Ke.createElement=s$;Ke.createFactory=function(e){var t=s$.bind(null,e);return t.type=e,t};Ke.createRef=function(){return{current:null}};Ke.forwardRef=function(e){return{$$typeof:o6,render:e}};Ke.isValidElement=gS;Ke.lazy=function(e){return{$$typeof:c6,_payload:{_status:-1,_result:e},_init:p6}};Ke.memo=function(e,t){return{$$typeof:l6,type:e,compare:t===void 0?null:t}};Ke.startTransition=function(e){var t=Eh.transition;Eh.transition={};try{e()}finally{Eh.transition=t}};Ke.unstable_act=a$;Ke.useCallback=function(e,t){return Hn.current.useCallback(e,t)};Ke.useContext=function(e){return Hn.current.useContext(e)};Ke.useDebugValue=function(){};Ke.useDeferredValue=function(e){return Hn.current.useDeferredValue(e)};Ke.useEffect=function(e,t){return Hn.current.useEffect(e,t)};Ke.useId=function(){return Hn.current.useId()};Ke.useImperativeHandle=function(e,t,n){return Hn.current.useImperativeHandle(e,t,n)};Ke.useInsertionEffect=function(e,t){return Hn.current.useInsertionEffect(e,t)};Ke.useLayoutEffect=function(e,t){return Hn.current.useLayoutEffect(e,t)};Ke.useMemo=function(e,t){return Hn.current.useMemo(e,t)};Ke.useReducer=function(e,t,n){return Hn.current.useReducer(e,t,n)};Ke.useRef=function(e){return Hn.current.useRef(e)};Ke.useState=function(e){return Hn.current.useState(e)};Ke.useSyncExternalStore=function(e,t,n){return Hn.current.useSyncExternalStore(e,t,n)};Ke.useTransition=function(){return Hn.current.useTransition()};Ke.version="18.3.1";Xx.exports=Ke;var lt=Xx.exports;const g6=Jx(lt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m6=lt,y6=Symbol.for("react.element"),_6=Symbol.for("react.fragment"),w6=Object.prototype.hasOwnProperty,S6=m6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,b6={key:!0,ref:!0,__self:!0,__source:!0};function o$(e,t,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)w6.call(t,r)&&!b6.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:y6,type:e,key:s,ref:a,props:i,_owner:S6.current}}Np.Fragment=_6;Np.jsx=o$;Np.jsxs=o$;Yx.exports=Np;var me=Yx.exports,c_={},u$={exports:{}},Ir={},l$={exports:{}},c$={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(J,fe){var be=J.length;J.push(fe);e:for(;0<be;){var G=be-1>>>1,Qe=J[G];if(0<i(Qe,fe))J[G]=fe,J[be]=Qe,be=G;else break e}}function n(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var fe=J[0],be=J.pop();if(be!==fe){J[0]=be;e:for(var G=0,Qe=J.length,Tn=Qe>>>1;G<Tn;){var ze=2*(G+1)-1,ht=J[ze],B=ze+1,pe=J[B];if(0>i(ht,be))B<Qe&&0>i(pe,ht)?(J[G]=pe,J[B]=be,G=B):(J[G]=ht,J[ze]=be,G=ze);else if(B<Qe&&0>i(pe,be))J[G]=pe,J[B]=be,G=B;else break e}}return fe}function i(J,fe){var be=J.sortIndex-fe.sortIndex;return be!==0?be:J.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],f=[],d=1,p=null,v=3,m=!1,y=!1,E=!1,b=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(J){for(var fe=n(f);fe!==null;){if(fe.callback===null)r(f);else if(fe.startTime<=J)r(f),fe.sortIndex=fe.expirationTime,t(u,fe);else break;fe=n(f)}}function M(J){if(E=!1,x(J),!y)if(n(u)!==null)y=!0,we(W);else{var fe=n(f);fe!==null&&ve(M,fe.startTime-J)}}function W(J,fe){y=!1,E&&(E=!1,w(A),A=-1),m=!0;var be=v;try{for(x(fe),p=n(u);p!==null&&(!(p.expirationTime>fe)||J&&!oe());){var G=p.callback;if(typeof G=="function"){p.callback=null,v=p.priorityLevel;var Qe=G(p.expirationTime<=fe);fe=e.unstable_now(),typeof Qe=="function"?p.callback=Qe:p===n(u)&&r(u),x(fe)}else r(u);p=n(u)}if(p!==null)var Tn=!0;else{var ze=n(f);ze!==null&&ve(M,ze.startTime-fe),Tn=!1}return Tn}finally{p=null,v=be,m=!1}}var z=!1,K=null,A=-1,ne=5,X=-1;function oe(){return!(e.unstable_now()-X<ne)}function he(){if(K!==null){var J=e.unstable_now();X=J;var fe=!0;try{fe=K(!0,J)}finally{fe?ye():(z=!1,K=null)}}else z=!1}var ye;if(typeof T=="function")ye=function(){T(he)};else if(typeof MessageChannel<"u"){var Se=new MessageChannel,Ie=Se.port2;Se.port1.onmessage=he,ye=function(){Ie.postMessage(null)}}else ye=function(){b(he,0)};function we(J){K=J,z||(z=!0,ye())}function ve(J,fe){A=b(function(){J(e.unstable_now())},fe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(J){J.callback=null},e.unstable_continueExecution=function(){y||m||(y=!0,we(W))},e.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<J?Math.floor(1e3/J):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(J){switch(v){case 1:case 2:case 3:var fe=3;break;default:fe=v}var be=v;v=fe;try{return J()}finally{v=be}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(J,fe){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var be=v;v=J;try{return fe()}finally{v=be}},e.unstable_scheduleCallback=function(J,fe,be){var G=e.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?G+be:G):be=G,J){case 1:var Qe=-1;break;case 2:Qe=250;break;case 5:Qe=1073741823;break;case 4:Qe=1e4;break;default:Qe=5e3}return Qe=be+Qe,J={id:d++,callback:fe,priorityLevel:J,startTime:be,expirationTime:Qe,sortIndex:-1},be>G?(J.sortIndex=be,t(f,J),n(u)===null&&J===n(f)&&(E?(w(A),A=-1):E=!0,ve(M,be-G))):(J.sortIndex=Qe,t(u,J),y||m||(y=!0,we(W))),J},e.unstable_shouldYield=oe,e.unstable_wrapCallback=function(J){var fe=v;return function(){var be=v;v=fe;try{return J.apply(this,arguments)}finally{v=be}}}})(c$);l$.exports=c$;var T6=l$.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E6=lt,Tr=T6;function le(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f$=new Set,_c={};function so(e,t){Tu(e,t),Tu(e+"Capture",t)}function Tu(e,t){for(_c[e]=t,e=0;e<t.length;e++)f$.add(t[e])}var cs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f_=Object.prototype.hasOwnProperty,k6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ZT={},eE={};function I6(e){return f_.call(eE,e)?!0:f_.call(ZT,e)?!1:k6.test(e)?eE[e]=!0:(ZT[e]=!0,!1)}function C6(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function R6(e,t,n,r){if(t===null||typeof t>"u"||C6(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Vn(e,t,n,r,i,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var Sn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Sn[e]=new Vn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Sn[t]=new Vn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Sn[e]=new Vn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Sn[e]=new Vn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Sn[e]=new Vn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Sn[e]=new Vn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Sn[e]=new Vn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Sn[e]=new Vn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Sn[e]=new Vn(e,5,!1,e.toLowerCase(),null,!1,!1)});var mS=/[\-:]([a-z])/g;function yS(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(mS,yS);Sn[t]=new Vn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(mS,yS);Sn[t]=new Vn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(mS,yS);Sn[t]=new Vn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Sn[e]=new Vn(e,1,!1,e.toLowerCase(),null,!1,!1)});Sn.xlinkHref=new Vn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Sn[e]=new Vn(e,1,!1,e.toLowerCase(),null,!0,!0)});function _S(e,t,n,r){var i=Sn.hasOwnProperty(t)?Sn[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(R6(t,n,i,r)&&(n=null),r||i===null?I6(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ys=E6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cd=Symbol.for("react.element"),Go=Symbol.for("react.portal"),Ko=Symbol.for("react.fragment"),wS=Symbol.for("react.strict_mode"),d_=Symbol.for("react.profiler"),d$=Symbol.for("react.provider"),h$=Symbol.for("react.context"),SS=Symbol.for("react.forward_ref"),h_=Symbol.for("react.suspense"),p_=Symbol.for("react.suspense_list"),bS=Symbol.for("react.memo"),Us=Symbol.for("react.lazy"),p$=Symbol.for("react.offscreen"),tE=Symbol.iterator;function Rl(e){return e===null||typeof e!="object"?null:(e=tE&&e[tE]||e["@@iterator"],typeof e=="function"?e:null)}var Bt=Object.assign,Sm;function Xl(e){if(Sm===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Sm=t&&t[1]||""}return`
`+Sm+e}var bm=!1;function Tm(e,t){if(!e||bm)return"";bm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var r=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){r=f}e.call(t.prototype)}else{try{throw Error()}catch(f){r=f}e()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,l=s.length-1;1<=a&&0<=l&&i[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==s[l]){var u=`
`+i[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=a&&0<=l);break}}}finally{bm=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Xl(e):""}function x6(e){switch(e.tag){case 5:return Xl(e.type);case 16:return Xl("Lazy");case 13:return Xl("Suspense");case 19:return Xl("SuspenseList");case 0:case 2:case 15:return e=Tm(e.type,!1),e;case 11:return e=Tm(e.type.render,!1),e;case 1:return e=Tm(e.type,!0),e;default:return""}}function v_(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ko:return"Fragment";case Go:return"Portal";case d_:return"Profiler";case wS:return"StrictMode";case h_:return"Suspense";case p_:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case h$:return(e.displayName||"Context")+".Consumer";case d$:return(e._context.displayName||"Context")+".Provider";case SS:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case bS:return t=e.displayName||null,t!==null?t:v_(e.type)||"Memo";case Us:t=e._payload,e=e._init;try{return v_(e(t))}catch{}}return null}function $6(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return v_(t);case 8:return t===wS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function sa(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function v$(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function P6(e){var t=v$(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Rd(e){e._valueTracker||(e._valueTracker=P6(e))}function g$(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=v$(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Gh(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function g_(e,t){var n=t.checked;return Bt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function nE(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=sa(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function m$(e,t){t=t.checked,t!=null&&_S(e,"checked",t,!1)}function m_(e,t){m$(e,t);var n=sa(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?y_(e,t.type,n):t.hasOwnProperty("defaultValue")&&y_(e,t.type,sa(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function rE(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function y_(e,t,n){(t!=="number"||Gh(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Zl=Array.isArray;function uu(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+sa(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function __(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(le(91));return Bt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function iE(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(le(92));if(Zl(n)){if(1<n.length)throw Error(le(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:sa(n)}}function y$(e,t){var n=sa(t.value),r=sa(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function sE(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function _$(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function w_(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?_$(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var xd,w$=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(xd=xd||document.createElement("div"),xd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=xd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function wc(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ac={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},A6=["Webkit","ms","Moz","O"];Object.keys(ac).forEach(function(e){A6.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ac[t]=ac[e]})});function S$(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ac.hasOwnProperty(e)&&ac[e]?(""+t).trim():t+"px"}function b$(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=S$(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var O6=Bt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function S_(e,t){if(t){if(O6[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(le(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(le(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(le(61))}if(t.style!=null&&typeof t.style!="object")throw Error(le(62))}}function b_(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var T_=null;function TS(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var E_=null,lu=null,cu=null;function aE(e){if(e=qc(e)){if(typeof E_!="function")throw Error(le(280));var t=e.stateNode;t&&(t=jp(t),E_(e.stateNode,e.type,t))}}function T$(e){lu?cu?cu.push(e):cu=[e]:lu=e}function E$(){if(lu){var e=lu,t=cu;if(cu=lu=null,aE(e),t)for(e=0;e<t.length;e++)aE(t[e])}}function k$(e,t){return e(t)}function I$(){}var Em=!1;function C$(e,t,n){if(Em)return e(t,n);Em=!0;try{return k$(e,t,n)}finally{Em=!1,(lu!==null||cu!==null)&&(I$(),E$())}}function Sc(e,t){var n=e.stateNode;if(n===null)return null;var r=jp(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(le(231,t,typeof n));return n}var k_=!1;if(cs)try{var xl={};Object.defineProperty(xl,"passive",{get:function(){k_=!0}}),window.addEventListener("test",xl,xl),window.removeEventListener("test",xl,xl)}catch{k_=!1}function N6(e,t,n,r,i,s,a,l,u){var f=Array.prototype.slice.call(arguments,3);try{t.apply(n,f)}catch(d){this.onError(d)}}var oc=!1,Kh=null,Qh=!1,I_=null,M6={onError:function(e){oc=!0,Kh=e}};function L6(e,t,n,r,i,s,a,l,u){oc=!1,Kh=null,N6.apply(M6,arguments)}function D6(e,t,n,r,i,s,a,l,u){if(L6.apply(this,arguments),oc){if(oc){var f=Kh;oc=!1,Kh=null}else throw Error(le(198));Qh||(Qh=!0,I_=f)}}function ao(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function R$(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function oE(e){if(ao(e)!==e)throw Error(le(188))}function F6(e){var t=e.alternate;if(!t){if(t=ao(e),t===null)throw Error(le(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return oE(i),e;if(s===r)return oE(i),t;s=s.sibling}throw Error(le(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(le(189))}}if(n.alternate!==r)throw Error(le(190))}if(n.tag!==3)throw Error(le(188));return n.stateNode.current===n?e:t}function x$(e){return e=F6(e),e!==null?$$(e):null}function $$(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=$$(e);if(t!==null)return t;e=e.sibling}return null}var P$=Tr.unstable_scheduleCallback,uE=Tr.unstable_cancelCallback,j6=Tr.unstable_shouldYield,U6=Tr.unstable_requestPaint,Kt=Tr.unstable_now,B6=Tr.unstable_getCurrentPriorityLevel,ES=Tr.unstable_ImmediatePriority,A$=Tr.unstable_UserBlockingPriority,Jh=Tr.unstable_NormalPriority,W6=Tr.unstable_LowPriority,O$=Tr.unstable_IdlePriority,Mp=null,Mi=null;function z6(e){if(Mi&&typeof Mi.onCommitFiberRoot=="function")try{Mi.onCommitFiberRoot(Mp,e,void 0,(e.current.flags&128)===128)}catch{}}var vi=Math.clz32?Math.clz32:q6,H6=Math.log,V6=Math.LN2;function q6(e){return e>>>=0,e===0?32:31-(H6(e)/V6|0)|0}var $d=64,Pd=4194304;function ec(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Yh(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~i;l!==0?r=ec(l):(s&=a,s!==0&&(r=ec(s)))}else a=n&~i,a!==0?r=ec(a):s!==0&&(r=ec(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-vi(t),i=1<<n,r|=e[n],t&=~i;return r}function G6(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function K6(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-vi(s),l=1<<a,u=i[a];u===-1?(!(l&n)||l&r)&&(i[a]=G6(l,t)):u<=t&&(e.expiredLanes|=l),s&=~l}}function C_(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function N$(){var e=$d;return $d<<=1,!($d&4194240)&&($d=64),e}function km(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Hc(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-vi(t),e[t]=n}function Q6(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-vi(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function kS(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-vi(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var mt=0;function M$(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var L$,IS,D$,F$,j$,R_=!1,Ad=[],Ks=null,Qs=null,Js=null,bc=new Map,Tc=new Map,Ws=[],J6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lE(e,t){switch(e){case"focusin":case"focusout":Ks=null;break;case"dragenter":case"dragleave":Qs=null;break;case"mouseover":case"mouseout":Js=null;break;case"pointerover":case"pointerout":bc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tc.delete(t.pointerId)}}function $l(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=qc(t),t!==null&&IS(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Y6(e,t,n,r,i){switch(t){case"focusin":return Ks=$l(Ks,e,t,n,r,i),!0;case"dragenter":return Qs=$l(Qs,e,t,n,r,i),!0;case"mouseover":return Js=$l(Js,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return bc.set(s,$l(bc.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Tc.set(s,$l(Tc.get(s)||null,e,t,n,r,i)),!0}return!1}function U$(e){var t=ja(e.target);if(t!==null){var n=ao(t);if(n!==null){if(t=n.tag,t===13){if(t=R$(n),t!==null){e.blockedOn=t,j$(e.priority,function(){D$(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function kh(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=x_(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);T_=r,n.target.dispatchEvent(r),T_=null}else return t=qc(n),t!==null&&IS(t),e.blockedOn=n,!1;t.shift()}return!0}function cE(e,t,n){kh(e)&&n.delete(t)}function X6(){R_=!1,Ks!==null&&kh(Ks)&&(Ks=null),Qs!==null&&kh(Qs)&&(Qs=null),Js!==null&&kh(Js)&&(Js=null),bc.forEach(cE),Tc.forEach(cE)}function Pl(e,t){e.blockedOn===t&&(e.blockedOn=null,R_||(R_=!0,Tr.unstable_scheduleCallback(Tr.unstable_NormalPriority,X6)))}function Ec(e){function t(i){return Pl(i,e)}if(0<Ad.length){Pl(Ad[0],e);for(var n=1;n<Ad.length;n++){var r=Ad[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Ks!==null&&Pl(Ks,e),Qs!==null&&Pl(Qs,e),Js!==null&&Pl(Js,e),bc.forEach(t),Tc.forEach(t),n=0;n<Ws.length;n++)r=Ws[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ws.length&&(n=Ws[0],n.blockedOn===null);)U$(n),n.blockedOn===null&&Ws.shift()}var fu=ys.ReactCurrentBatchConfig,Xh=!0;function Z6(e,t,n,r){var i=mt,s=fu.transition;fu.transition=null;try{mt=1,CS(e,t,n,r)}finally{mt=i,fu.transition=s}}function e5(e,t,n,r){var i=mt,s=fu.transition;fu.transition=null;try{mt=4,CS(e,t,n,r)}finally{mt=i,fu.transition=s}}function CS(e,t,n,r){if(Xh){var i=x_(e,t,n,r);if(i===null)Mm(e,t,r,Zh,n),lE(e,r);else if(Y6(i,e,t,n,r))r.stopPropagation();else if(lE(e,r),t&4&&-1<J6.indexOf(e)){for(;i!==null;){var s=qc(i);if(s!==null&&L$(s),s=x_(e,t,n,r),s===null&&Mm(e,t,r,Zh,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Mm(e,t,r,null,n)}}var Zh=null;function x_(e,t,n,r){if(Zh=null,e=TS(r),e=ja(e),e!==null)if(t=ao(e),t===null)e=null;else if(n=t.tag,n===13){if(e=R$(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Zh=e,null}function B$(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(B6()){case ES:return 1;case A$:return 4;case Jh:case W6:return 16;case O$:return 536870912;default:return 16}default:return 16}}var Hs=null,RS=null,Ih=null;function W$(){if(Ih)return Ih;var e,t=RS,n=t.length,r,i="value"in Hs?Hs.value:Hs.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[s-r];r++);return Ih=i.slice(e,1<r?1-r:void 0)}function Ch(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Od(){return!0}function fE(){return!1}function Cr(e){function t(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Od:fE,this.isPropagationStopped=fE,this}return Bt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Od)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Od)},persist:function(){},isPersistent:Od}),t}var ju={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xS=Cr(ju),Vc=Bt({},ju,{view:0,detail:0}),t5=Cr(Vc),Im,Cm,Al,Lp=Bt({},Vc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$S,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Al&&(Al&&e.type==="mousemove"?(Im=e.screenX-Al.screenX,Cm=e.screenY-Al.screenY):Cm=Im=0,Al=e),Im)},movementY:function(e){return"movementY"in e?e.movementY:Cm}}),dE=Cr(Lp),n5=Bt({},Lp,{dataTransfer:0}),r5=Cr(n5),i5=Bt({},Vc,{relatedTarget:0}),Rm=Cr(i5),s5=Bt({},ju,{animationName:0,elapsedTime:0,pseudoElement:0}),a5=Cr(s5),o5=Bt({},ju,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),u5=Cr(o5),l5=Bt({},ju,{data:0}),hE=Cr(l5),c5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},f5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},d5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function h5(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=d5[e])?!!t[e]:!1}function $S(){return h5}var p5=Bt({},Vc,{key:function(e){if(e.key){var t=c5[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ch(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?f5[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$S,charCode:function(e){return e.type==="keypress"?Ch(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ch(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),v5=Cr(p5),g5=Bt({},Lp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pE=Cr(g5),m5=Bt({},Vc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$S}),y5=Cr(m5),_5=Bt({},ju,{propertyName:0,elapsedTime:0,pseudoElement:0}),w5=Cr(_5),S5=Bt({},Lp,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),b5=Cr(S5),T5=[9,13,27,32],PS=cs&&"CompositionEvent"in window,uc=null;cs&&"documentMode"in document&&(uc=document.documentMode);var E5=cs&&"TextEvent"in window&&!uc,z$=cs&&(!PS||uc&&8<uc&&11>=uc),vE=" ",gE=!1;function H$(e,t){switch(e){case"keyup":return T5.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function V$(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qo=!1;function k5(e,t){switch(e){case"compositionend":return V$(t);case"keypress":return t.which!==32?null:(gE=!0,vE);case"textInput":return e=t.data,e===vE&&gE?null:e;default:return null}}function I5(e,t){if(Qo)return e==="compositionend"||!PS&&H$(e,t)?(e=W$(),Ih=RS=Hs=null,Qo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return z$&&t.locale!=="ko"?null:t.data;default:return null}}var C5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!C5[e.type]:t==="textarea"}function q$(e,t,n,r){T$(r),t=ep(t,"onChange"),0<t.length&&(n=new xS("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var lc=null,kc=null;function R5(e){rP(e,0)}function Dp(e){var t=Xo(e);if(g$(t))return e}function x5(e,t){if(e==="change")return t}var G$=!1;if(cs){var xm;if(cs){var $m="oninput"in document;if(!$m){var yE=document.createElement("div");yE.setAttribute("oninput","return;"),$m=typeof yE.oninput=="function"}xm=$m}else xm=!1;G$=xm&&(!document.documentMode||9<document.documentMode)}function _E(){lc&&(lc.detachEvent("onpropertychange",K$),kc=lc=null)}function K$(e){if(e.propertyName==="value"&&Dp(kc)){var t=[];q$(t,kc,e,TS(e)),C$(R5,t)}}function $5(e,t,n){e==="focusin"?(_E(),lc=t,kc=n,lc.attachEvent("onpropertychange",K$)):e==="focusout"&&_E()}function P5(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Dp(kc)}function A5(e,t){if(e==="click")return Dp(t)}function O5(e,t){if(e==="input"||e==="change")return Dp(t)}function N5(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var yi=typeof Object.is=="function"?Object.is:N5;function Ic(e,t){if(yi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f_.call(t,i)||!yi(e[i],t[i]))return!1}return!0}function wE(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function SE(e,t){var n=wE(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=wE(n)}}function Q$(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Q$(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function J$(){for(var e=window,t=Gh();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Gh(e.document)}return t}function AS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function M5(e){var t=J$(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Q$(n.ownerDocument.documentElement,n)){if(r!==null&&AS(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=SE(n,s);var a=SE(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var L5=cs&&"documentMode"in document&&11>=document.documentMode,Jo=null,$_=null,cc=null,P_=!1;function bE(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;P_||Jo==null||Jo!==Gh(r)||(r=Jo,"selectionStart"in r&&AS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),cc&&Ic(cc,r)||(cc=r,r=ep($_,"onSelect"),0<r.length&&(t=new xS("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Jo)))}function Nd(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Yo={animationend:Nd("Animation","AnimationEnd"),animationiteration:Nd("Animation","AnimationIteration"),animationstart:Nd("Animation","AnimationStart"),transitionend:Nd("Transition","TransitionEnd")},Pm={},Y$={};cs&&(Y$=document.createElement("div").style,"AnimationEvent"in window||(delete Yo.animationend.animation,delete Yo.animationiteration.animation,delete Yo.animationstart.animation),"TransitionEvent"in window||delete Yo.transitionend.transition);function Fp(e){if(Pm[e])return Pm[e];if(!Yo[e])return e;var t=Yo[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Y$)return Pm[e]=t[n];return e}var X$=Fp("animationend"),Z$=Fp("animationiteration"),eP=Fp("animationstart"),tP=Fp("transitionend"),nP=new Map,TE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function la(e,t){nP.set(e,t),so(t,[e])}for(var Am=0;Am<TE.length;Am++){var Om=TE[Am],D5=Om.toLowerCase(),F5=Om[0].toUpperCase()+Om.slice(1);la(D5,"on"+F5)}la(X$,"onAnimationEnd");la(Z$,"onAnimationIteration");la(eP,"onAnimationStart");la("dblclick","onDoubleClick");la("focusin","onFocus");la("focusout","onBlur");la(tP,"onTransitionEnd");Tu("onMouseEnter",["mouseout","mouseover"]);Tu("onMouseLeave",["mouseout","mouseover"]);Tu("onPointerEnter",["pointerout","pointerover"]);Tu("onPointerLeave",["pointerout","pointerover"]);so("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));so("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));so("onBeforeInput",["compositionend","keypress","textInput","paste"]);so("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));so("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));so("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),j5=new Set("cancel close invalid load scroll toggle".split(" ").concat(tc));function EE(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,D6(r,t,void 0,e),e.currentTarget=null}function rP(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],u=l.instance,f=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;EE(i,l,f),s=u}else for(a=0;a<r.length;a++){if(l=r[a],u=l.instance,f=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;EE(i,l,f),s=u}}}if(Qh)throw e=I_,Qh=!1,I_=null,e}function xt(e,t){var n=t[L_];n===void 0&&(n=t[L_]=new Set);var r=e+"__bubble";n.has(r)||(iP(t,e,2,!1),n.add(r))}function Nm(e,t,n){var r=0;t&&(r|=4),iP(n,e,r,t)}var Md="_reactListening"+Math.random().toString(36).slice(2);function Cc(e){if(!e[Md]){e[Md]=!0,f$.forEach(function(n){n!=="selectionchange"&&(j5.has(n)||Nm(n,!1,e),Nm(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Md]||(t[Md]=!0,Nm("selectionchange",!1,t))}}function iP(e,t,n,r){switch(B$(t)){case 1:var i=Z6;break;case 4:i=e5;break;default:i=CS}n=i.bind(null,t,n,e),i=void 0,!k_||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Mm(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;a=a.return}for(;l!==null;){if(a=ja(l),a===null)return;if(u=a.tag,u===5||u===6){r=s=a;continue e}l=l.parentNode}}r=r.return}C$(function(){var f=s,d=TS(n),p=[];e:{var v=nP.get(e);if(v!==void 0){var m=xS,y=e;switch(e){case"keypress":if(Ch(n)===0)break e;case"keydown":case"keyup":m=v5;break;case"focusin":y="focus",m=Rm;break;case"focusout":y="blur",m=Rm;break;case"beforeblur":case"afterblur":m=Rm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=dE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=r5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=y5;break;case X$:case Z$:case eP:m=a5;break;case tP:m=w5;break;case"scroll":m=t5;break;case"wheel":m=b5;break;case"copy":case"cut":case"paste":m=u5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=pE}var E=(t&4)!==0,b=!E&&e==="scroll",w=E?v!==null?v+"Capture":null:v;E=[];for(var T=f,x;T!==null;){x=T;var M=x.stateNode;if(x.tag===5&&M!==null&&(x=M,w!==null&&(M=Sc(T,w),M!=null&&E.push(Rc(T,M,x)))),b)break;T=T.return}0<E.length&&(v=new m(v,y,null,n,d),p.push({event:v,listeners:E}))}}if(!(t&7)){e:{if(v=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",v&&n!==T_&&(y=n.relatedTarget||n.fromElement)&&(ja(y)||y[fs]))break e;if((m||v)&&(v=d.window===d?d:(v=d.ownerDocument)?v.defaultView||v.parentWindow:window,m?(y=n.relatedTarget||n.toElement,m=f,y=y?ja(y):null,y!==null&&(b=ao(y),y!==b||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=f),m!==y)){if(E=dE,M="onMouseLeave",w="onMouseEnter",T="mouse",(e==="pointerout"||e==="pointerover")&&(E=pE,M="onPointerLeave",w="onPointerEnter",T="pointer"),b=m==null?v:Xo(m),x=y==null?v:Xo(y),v=new E(M,T+"leave",m,n,d),v.target=b,v.relatedTarget=x,M=null,ja(d)===f&&(E=new E(w,T+"enter",y,n,d),E.target=x,E.relatedTarget=b,M=E),b=M,m&&y)t:{for(E=m,w=y,T=0,x=E;x;x=Do(x))T++;for(x=0,M=w;M;M=Do(M))x++;for(;0<T-x;)E=Do(E),T--;for(;0<x-T;)w=Do(w),x--;for(;T--;){if(E===w||w!==null&&E===w.alternate)break t;E=Do(E),w=Do(w)}E=null}else E=null;m!==null&&kE(p,v,m,E,!1),y!==null&&b!==null&&kE(p,b,y,E,!0)}}e:{if(v=f?Xo(f):window,m=v.nodeName&&v.nodeName.toLowerCase(),m==="select"||m==="input"&&v.type==="file")var W=x5;else if(mE(v))if(G$)W=O5;else{W=P5;var z=$5}else(m=v.nodeName)&&m.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(W=A5);if(W&&(W=W(e,f))){q$(p,W,n,d);break e}z&&z(e,v,f),e==="focusout"&&(z=v._wrapperState)&&z.controlled&&v.type==="number"&&y_(v,"number",v.value)}switch(z=f?Xo(f):window,e){case"focusin":(mE(z)||z.contentEditable==="true")&&(Jo=z,$_=f,cc=null);break;case"focusout":cc=$_=Jo=null;break;case"mousedown":P_=!0;break;case"contextmenu":case"mouseup":case"dragend":P_=!1,bE(p,n,d);break;case"selectionchange":if(L5)break;case"keydown":case"keyup":bE(p,n,d)}var K;if(PS)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Qo?H$(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(z$&&n.locale!=="ko"&&(Qo||A!=="onCompositionStart"?A==="onCompositionEnd"&&Qo&&(K=W$()):(Hs=d,RS="value"in Hs?Hs.value:Hs.textContent,Qo=!0)),z=ep(f,A),0<z.length&&(A=new hE(A,e,null,n,d),p.push({event:A,listeners:z}),K?A.data=K:(K=V$(n),K!==null&&(A.data=K)))),(K=E5?k5(e,n):I5(e,n))&&(f=ep(f,"onBeforeInput"),0<f.length&&(d=new hE("onBeforeInput","beforeinput",null,n,d),p.push({event:d,listeners:f}),d.data=K))}rP(p,t)})}function Rc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ep(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Sc(e,n),s!=null&&r.unshift(Rc(e,s,i)),s=Sc(e,t),s!=null&&r.push(Rc(e,s,i))),e=e.return}return r}function Do(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function kE(e,t,n,r,i){for(var s=t._reactName,a=[];n!==null&&n!==r;){var l=n,u=l.alternate,f=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&f!==null&&(l=f,i?(u=Sc(n,s),u!=null&&a.unshift(Rc(n,u,l))):i||(u=Sc(n,s),u!=null&&a.push(Rc(n,u,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var U5=/\r\n?/g,B5=/\u0000|\uFFFD/g;function IE(e){return(typeof e=="string"?e:""+e).replace(U5,`
`).replace(B5,"")}function Ld(e,t,n){if(t=IE(t),IE(e)!==t&&n)throw Error(le(425))}function tp(){}var A_=null,O_=null;function N_(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var M_=typeof setTimeout=="function"?setTimeout:void 0,W5=typeof clearTimeout=="function"?clearTimeout:void 0,CE=typeof Promise=="function"?Promise:void 0,z5=typeof queueMicrotask=="function"?queueMicrotask:typeof CE<"u"?function(e){return CE.resolve(null).then(e).catch(H5)}:M_;function H5(e){setTimeout(function(){throw e})}function Lm(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Ec(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ec(t)}function Ys(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function RE(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Uu=Math.random().toString(36).slice(2),Oi="__reactFiber$"+Uu,xc="__reactProps$"+Uu,fs="__reactContainer$"+Uu,L_="__reactEvents$"+Uu,V5="__reactListeners$"+Uu,q5="__reactHandles$"+Uu;function ja(e){var t=e[Oi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fs]||n[Oi]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=RE(e);e!==null;){if(n=e[Oi])return n;e=RE(e)}return t}e=n,n=e.parentNode}return null}function qc(e){return e=e[Oi]||e[fs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Xo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(le(33))}function jp(e){return e[xc]||null}var D_=[],Zo=-1;function ca(e){return{current:e}}function $t(e){0>Zo||(e.current=D_[Zo],D_[Zo]=null,Zo--)}function kt(e,t){Zo++,D_[Zo]=e.current,e.current=t}var aa={},On=ca(aa),ir=ca(!1),Ya=aa;function Eu(e,t){var n=e.type.contextTypes;if(!n)return aa;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function sr(e){return e=e.childContextTypes,e!=null}function np(){$t(ir),$t(On)}function xE(e,t,n){if(On.current!==aa)throw Error(le(168));kt(On,t),kt(ir,n)}function sP(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(le(108,$6(e)||"Unknown",i));return Bt({},n,r)}function rp(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||aa,Ya=On.current,kt(On,e),kt(ir,ir.current),!0}function $E(e,t,n){var r=e.stateNode;if(!r)throw Error(le(169));n?(e=sP(e,t,Ya),r.__reactInternalMemoizedMergedChildContext=e,$t(ir),$t(On),kt(On,e)):$t(ir),kt(ir,n)}var rs=null,Up=!1,Dm=!1;function aP(e){rs===null?rs=[e]:rs.push(e)}function G5(e){Up=!0,aP(e)}function fa(){if(!Dm&&rs!==null){Dm=!0;var e=0,t=mt;try{var n=rs;for(mt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}rs=null,Up=!1}catch(i){throw rs!==null&&(rs=rs.slice(e+1)),P$(ES,fa),i}finally{mt=t,Dm=!1}}return null}var eu=[],tu=0,ip=null,sp=0,Wr=[],zr=0,Xa=null,os=1,us="";function La(e,t){eu[tu++]=sp,eu[tu++]=ip,ip=e,sp=t}function oP(e,t,n){Wr[zr++]=os,Wr[zr++]=us,Wr[zr++]=Xa,Xa=e;var r=os;e=us;var i=32-vi(r)-1;r&=~(1<<i),n+=1;var s=32-vi(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,os=1<<32-vi(t)+i|n<<i|r,us=s+e}else os=1<<s|n<<i|r,us=e}function OS(e){e.return!==null&&(La(e,1),oP(e,1,0))}function NS(e){for(;e===ip;)ip=eu[--tu],eu[tu]=null,sp=eu[--tu],eu[tu]=null;for(;e===Xa;)Xa=Wr[--zr],Wr[zr]=null,us=Wr[--zr],Wr[zr]=null,os=Wr[--zr],Wr[zr]=null}var br=null,wr=null,Mt=!1,ci=null;function uP(e,t){var n=Vr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function PE(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,br=e,wr=Ys(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,br=e,wr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Xa!==null?{id:os,overflow:us}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Vr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,br=e,wr=null,!0):!1;default:return!1}}function F_(e){return(e.mode&1)!==0&&(e.flags&128)===0}function j_(e){if(Mt){var t=wr;if(t){var n=t;if(!PE(e,t)){if(F_(e))throw Error(le(418));t=Ys(n.nextSibling);var r=br;t&&PE(e,t)?uP(r,n):(e.flags=e.flags&-4097|2,Mt=!1,br=e)}}else{if(F_(e))throw Error(le(418));e.flags=e.flags&-4097|2,Mt=!1,br=e}}}function AE(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;br=e}function Dd(e){if(e!==br)return!1;if(!Mt)return AE(e),Mt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!N_(e.type,e.memoizedProps)),t&&(t=wr)){if(F_(e))throw lP(),Error(le(418));for(;t;)uP(e,t),t=Ys(t.nextSibling)}if(AE(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(le(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){wr=Ys(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}wr=null}}else wr=br?Ys(e.stateNode.nextSibling):null;return!0}function lP(){for(var e=wr;e;)e=Ys(e.nextSibling)}function ku(){wr=br=null,Mt=!1}function MS(e){ci===null?ci=[e]:ci.push(e)}var K5=ys.ReactCurrentBatchConfig;function Ol(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(le(309));var r=n.stateNode}if(!r)throw Error(le(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var l=i.refs;a===null?delete l[s]:l[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(le(284));if(!n._owner)throw Error(le(290,e))}return e}function Fd(e,t){throw e=Object.prototype.toString.call(t),Error(le(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function OE(e){var t=e._init;return t(e._payload)}function cP(e){function t(w,T){if(e){var x=w.deletions;x===null?(w.deletions=[T],w.flags|=16):x.push(T)}}function n(w,T){if(!e)return null;for(;T!==null;)t(w,T),T=T.sibling;return null}function r(w,T){for(w=new Map;T!==null;)T.key!==null?w.set(T.key,T):w.set(T.index,T),T=T.sibling;return w}function i(w,T){return w=ta(w,T),w.index=0,w.sibling=null,w}function s(w,T,x){return w.index=x,e?(x=w.alternate,x!==null?(x=x.index,x<T?(w.flags|=2,T):x):(w.flags|=2,T)):(w.flags|=1048576,T)}function a(w){return e&&w.alternate===null&&(w.flags|=2),w}function l(w,T,x,M){return T===null||T.tag!==6?(T=Hm(x,w.mode,M),T.return=w,T):(T=i(T,x),T.return=w,T)}function u(w,T,x,M){var W=x.type;return W===Ko?d(w,T,x.props.children,M,x.key):T!==null&&(T.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Us&&OE(W)===T.type)?(M=i(T,x.props),M.ref=Ol(w,T,x),M.return=w,M):(M=Nh(x.type,x.key,x.props,null,w.mode,M),M.ref=Ol(w,T,x),M.return=w,M)}function f(w,T,x,M){return T===null||T.tag!==4||T.stateNode.containerInfo!==x.containerInfo||T.stateNode.implementation!==x.implementation?(T=Vm(x,w.mode,M),T.return=w,T):(T=i(T,x.children||[]),T.return=w,T)}function d(w,T,x,M,W){return T===null||T.tag!==7?(T=qa(x,w.mode,M,W),T.return=w,T):(T=i(T,x),T.return=w,T)}function p(w,T,x){if(typeof T=="string"&&T!==""||typeof T=="number")return T=Hm(""+T,w.mode,x),T.return=w,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Cd:return x=Nh(T.type,T.key,T.props,null,w.mode,x),x.ref=Ol(w,null,T),x.return=w,x;case Go:return T=Vm(T,w.mode,x),T.return=w,T;case Us:var M=T._init;return p(w,M(T._payload),x)}if(Zl(T)||Rl(T))return T=qa(T,w.mode,x,null),T.return=w,T;Fd(w,T)}return null}function v(w,T,x,M){var W=T!==null?T.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return W!==null?null:l(w,T,""+x,M);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Cd:return x.key===W?u(w,T,x,M):null;case Go:return x.key===W?f(w,T,x,M):null;case Us:return W=x._init,v(w,T,W(x._payload),M)}if(Zl(x)||Rl(x))return W!==null?null:d(w,T,x,M,null);Fd(w,x)}return null}function m(w,T,x,M,W){if(typeof M=="string"&&M!==""||typeof M=="number")return w=w.get(x)||null,l(T,w,""+M,W);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Cd:return w=w.get(M.key===null?x:M.key)||null,u(T,w,M,W);case Go:return w=w.get(M.key===null?x:M.key)||null,f(T,w,M,W);case Us:var z=M._init;return m(w,T,x,z(M._payload),W)}if(Zl(M)||Rl(M))return w=w.get(x)||null,d(T,w,M,W,null);Fd(T,M)}return null}function y(w,T,x,M){for(var W=null,z=null,K=T,A=T=0,ne=null;K!==null&&A<x.length;A++){K.index>A?(ne=K,K=null):ne=K.sibling;var X=v(w,K,x[A],M);if(X===null){K===null&&(K=ne);break}e&&K&&X.alternate===null&&t(w,K),T=s(X,T,A),z===null?W=X:z.sibling=X,z=X,K=ne}if(A===x.length)return n(w,K),Mt&&La(w,A),W;if(K===null){for(;A<x.length;A++)K=p(w,x[A],M),K!==null&&(T=s(K,T,A),z===null?W=K:z.sibling=K,z=K);return Mt&&La(w,A),W}for(K=r(w,K);A<x.length;A++)ne=m(K,w,A,x[A],M),ne!==null&&(e&&ne.alternate!==null&&K.delete(ne.key===null?A:ne.key),T=s(ne,T,A),z===null?W=ne:z.sibling=ne,z=ne);return e&&K.forEach(function(oe){return t(w,oe)}),Mt&&La(w,A),W}function E(w,T,x,M){var W=Rl(x);if(typeof W!="function")throw Error(le(150));if(x=W.call(x),x==null)throw Error(le(151));for(var z=W=null,K=T,A=T=0,ne=null,X=x.next();K!==null&&!X.done;A++,X=x.next()){K.index>A?(ne=K,K=null):ne=K.sibling;var oe=v(w,K,X.value,M);if(oe===null){K===null&&(K=ne);break}e&&K&&oe.alternate===null&&t(w,K),T=s(oe,T,A),z===null?W=oe:z.sibling=oe,z=oe,K=ne}if(X.done)return n(w,K),Mt&&La(w,A),W;if(K===null){for(;!X.done;A++,X=x.next())X=p(w,X.value,M),X!==null&&(T=s(X,T,A),z===null?W=X:z.sibling=X,z=X);return Mt&&La(w,A),W}for(K=r(w,K);!X.done;A++,X=x.next())X=m(K,w,A,X.value,M),X!==null&&(e&&X.alternate!==null&&K.delete(X.key===null?A:X.key),T=s(X,T,A),z===null?W=X:z.sibling=X,z=X);return e&&K.forEach(function(he){return t(w,he)}),Mt&&La(w,A),W}function b(w,T,x,M){if(typeof x=="object"&&x!==null&&x.type===Ko&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Cd:e:{for(var W=x.key,z=T;z!==null;){if(z.key===W){if(W=x.type,W===Ko){if(z.tag===7){n(w,z.sibling),T=i(z,x.props.children),T.return=w,w=T;break e}}else if(z.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Us&&OE(W)===z.type){n(w,z.sibling),T=i(z,x.props),T.ref=Ol(w,z,x),T.return=w,w=T;break e}n(w,z);break}else t(w,z);z=z.sibling}x.type===Ko?(T=qa(x.props.children,w.mode,M,x.key),T.return=w,w=T):(M=Nh(x.type,x.key,x.props,null,w.mode,M),M.ref=Ol(w,T,x),M.return=w,w=M)}return a(w);case Go:e:{for(z=x.key;T!==null;){if(T.key===z)if(T.tag===4&&T.stateNode.containerInfo===x.containerInfo&&T.stateNode.implementation===x.implementation){n(w,T.sibling),T=i(T,x.children||[]),T.return=w,w=T;break e}else{n(w,T);break}else t(w,T);T=T.sibling}T=Vm(x,w.mode,M),T.return=w,w=T}return a(w);case Us:return z=x._init,b(w,T,z(x._payload),M)}if(Zl(x))return y(w,T,x,M);if(Rl(x))return E(w,T,x,M);Fd(w,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,T!==null&&T.tag===6?(n(w,T.sibling),T=i(T,x),T.return=w,w=T):(n(w,T),T=Hm(x,w.mode,M),T.return=w,w=T),a(w)):n(w,T)}return b}var Iu=cP(!0),fP=cP(!1),ap=ca(null),op=null,nu=null,LS=null;function DS(){LS=nu=op=null}function FS(e){var t=ap.current;$t(ap),e._currentValue=t}function U_(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function du(e,t){op=e,LS=nu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(nr=!0),e.firstContext=null)}function Qr(e){var t=e._currentValue;if(LS!==e)if(e={context:e,memoizedValue:t,next:null},nu===null){if(op===null)throw Error(le(308));nu=e,op.dependencies={lanes:0,firstContext:e}}else nu=nu.next=e;return t}var Ua=null;function jS(e){Ua===null?Ua=[e]:Ua.push(e)}function dP(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,jS(t)):(n.next=i.next,i.next=n),t.interleaved=n,ds(e,r)}function ds(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Bs=!1;function US(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hP(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ls(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Xs(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,at&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,ds(e,n)}return i=r.interleaved,i===null?(t.next=t,jS(r)):(t.next=i.next,i.next=t),r.interleaved=t,ds(e,n)}function Rh(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,kS(e,n)}}function NE(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function up(e,t,n,r){var i=e.updateQueue;Bs=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,f=u.next;u.next=null,a===null?s=f:a.next=f,a=u;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=f:l.next=f,d.lastBaseUpdate=u))}if(s!==null){var p=i.baseState;a=0,d=f=u=null,l=s;do{var v=l.lane,m=l.eventTime;if((r&v)===v){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=e,E=l;switch(v=t,m=n,E.tag){case 1:if(y=E.payload,typeof y=="function"){p=y.call(m,p,v);break e}p=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=E.payload,v=typeof y=="function"?y.call(m,p,v):y,v==null)break e;p=Bt({},p,v);break e;case 2:Bs=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,v=i.effects,v===null?i.effects=[l]:v.push(l))}else m={eventTime:m,lane:v,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(f=d=m,u=p):d=d.next=m,a|=v;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;v=l,l=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(!0);if(d===null&&(u=p),i.baseState=u,i.firstBaseUpdate=f,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);eo|=a,e.lanes=a,e.memoizedState=p}}function ME(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(le(191,i));i.call(r)}}}var Gc={},Li=ca(Gc),$c=ca(Gc),Pc=ca(Gc);function Ba(e){if(e===Gc)throw Error(le(174));return e}function BS(e,t){switch(kt(Pc,t),kt($c,e),kt(Li,Gc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:w_(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=w_(t,e)}$t(Li),kt(Li,t)}function Cu(){$t(Li),$t($c),$t(Pc)}function pP(e){Ba(Pc.current);var t=Ba(Li.current),n=w_(t,e.type);t!==n&&(kt($c,e),kt(Li,n))}function WS(e){$c.current===e&&($t(Li),$t($c))}var jt=ca(0);function lp(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Fm=[];function zS(){for(var e=0;e<Fm.length;e++)Fm[e]._workInProgressVersionPrimary=null;Fm.length=0}var xh=ys.ReactCurrentDispatcher,jm=ys.ReactCurrentBatchConfig,Za=0,Ut=null,sn=null,dn=null,cp=!1,fc=!1,Ac=0,Q5=0;function Cn(){throw Error(le(321))}function HS(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!yi(e[n],t[n]))return!1;return!0}function VS(e,t,n,r,i,s){if(Za=s,Ut=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,xh.current=e===null||e.memoizedState===null?Z5:e8,e=n(r,i),fc){s=0;do{if(fc=!1,Ac=0,25<=s)throw Error(le(301));s+=1,dn=sn=null,t.updateQueue=null,xh.current=t8,e=n(r,i)}while(fc)}if(xh.current=fp,t=sn!==null&&sn.next!==null,Za=0,dn=sn=Ut=null,cp=!1,t)throw Error(le(300));return e}function qS(){var e=Ac!==0;return Ac=0,e}function Pi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?Ut.memoizedState=dn=e:dn=dn.next=e,dn}function Jr(){if(sn===null){var e=Ut.alternate;e=e!==null?e.memoizedState:null}else e=sn.next;var t=dn===null?Ut.memoizedState:dn.next;if(t!==null)dn=t,sn=e;else{if(e===null)throw Error(le(310));sn=e,e={memoizedState:sn.memoizedState,baseState:sn.baseState,baseQueue:sn.baseQueue,queue:sn.queue,next:null},dn===null?Ut.memoizedState=dn=e:dn=dn.next=e}return dn}function Oc(e,t){return typeof t=="function"?t(e):t}function Um(e){var t=Jr(),n=t.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=e;var r=sn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=a=null,u=null,f=s;do{var d=f.lane;if((Za&d)===d)u!==null&&(u=u.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:e(r,f.action);else{var p={lane:d,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};u===null?(l=u=p,a=r):u=u.next=p,Ut.lanes|=d,eo|=d}f=f.next}while(f!==null&&f!==s);u===null?a=r:u.next=l,yi(r,t.memoizedState)||(nr=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Ut.lanes|=s,eo|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Bm(e){var t=Jr(),n=t.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=e(s,a.action),a=a.next;while(a!==i);yi(s,t.memoizedState)||(nr=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function vP(){}function gP(e,t){var n=Ut,r=Jr(),i=t(),s=!yi(r.memoizedState,i);if(s&&(r.memoizedState=i,nr=!0),r=r.queue,GS(_P.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||dn!==null&&dn.memoizedState.tag&1){if(n.flags|=2048,Nc(9,yP.bind(null,n,r,i,t),void 0,null),pn===null)throw Error(le(349));Za&30||mP(n,t,i)}return i}function mP(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ut.updateQueue,t===null?(t={lastEffect:null,stores:null},Ut.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function yP(e,t,n,r){t.value=n,t.getSnapshot=r,wP(t)&&SP(e)}function _P(e,t,n){return n(function(){wP(t)&&SP(e)})}function wP(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!yi(e,n)}catch{return!0}}function SP(e){var t=ds(e,1);t!==null&&gi(t,e,1,-1)}function LE(e){var t=Pi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oc,lastRenderedState:e},t.queue=e,e=e.dispatch=X5.bind(null,Ut,e),[t.memoizedState,e]}function Nc(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ut.updateQueue,t===null?(t={lastEffect:null,stores:null},Ut.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function bP(){return Jr().memoizedState}function $h(e,t,n,r){var i=Pi();Ut.flags|=e,i.memoizedState=Nc(1|t,n,void 0,r===void 0?null:r)}function Bp(e,t,n,r){var i=Jr();r=r===void 0?null:r;var s=void 0;if(sn!==null){var a=sn.memoizedState;if(s=a.destroy,r!==null&&HS(r,a.deps)){i.memoizedState=Nc(t,n,s,r);return}}Ut.flags|=e,i.memoizedState=Nc(1|t,n,s,r)}function DE(e,t){return $h(8390656,8,e,t)}function GS(e,t){return Bp(2048,8,e,t)}function TP(e,t){return Bp(4,2,e,t)}function EP(e,t){return Bp(4,4,e,t)}function kP(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function IP(e,t,n){return n=n!=null?n.concat([e]):null,Bp(4,4,kP.bind(null,t,e),n)}function KS(){}function CP(e,t){var n=Jr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&HS(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function RP(e,t){var n=Jr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&HS(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function xP(e,t,n){return Za&21?(yi(n,t)||(n=N$(),Ut.lanes|=n,eo|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,nr=!0),e.memoizedState=n)}function J5(e,t){var n=mt;mt=n!==0&&4>n?n:4,e(!0);var r=jm.transition;jm.transition={};try{e(!1),t()}finally{mt=n,jm.transition=r}}function $P(){return Jr().memoizedState}function Y5(e,t,n){var r=ea(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},PP(e))AP(t,n);else if(n=dP(e,t,n,r),n!==null){var i=Wn();gi(n,e,r,i),OP(n,t,r)}}function X5(e,t,n){var r=ea(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(PP(e))AP(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,l=s(a,n);if(i.hasEagerState=!0,i.eagerState=l,yi(l,a)){var u=t.interleaved;u===null?(i.next=i,jS(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=dP(e,t,i,r),n!==null&&(i=Wn(),gi(n,e,r,i),OP(n,t,r))}}function PP(e){var t=e.alternate;return e===Ut||t!==null&&t===Ut}function AP(e,t){fc=cp=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function OP(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,kS(e,n)}}var fp={readContext:Qr,useCallback:Cn,useContext:Cn,useEffect:Cn,useImperativeHandle:Cn,useInsertionEffect:Cn,useLayoutEffect:Cn,useMemo:Cn,useReducer:Cn,useRef:Cn,useState:Cn,useDebugValue:Cn,useDeferredValue:Cn,useTransition:Cn,useMutableSource:Cn,useSyncExternalStore:Cn,useId:Cn,unstable_isNewReconciler:!1},Z5={readContext:Qr,useCallback:function(e,t){return Pi().memoizedState=[e,t===void 0?null:t],e},useContext:Qr,useEffect:DE,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,$h(4194308,4,kP.bind(null,t,e),n)},useLayoutEffect:function(e,t){return $h(4194308,4,e,t)},useInsertionEffect:function(e,t){return $h(4,2,e,t)},useMemo:function(e,t){var n=Pi();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Pi();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Y5.bind(null,Ut,e),[r.memoizedState,e]},useRef:function(e){var t=Pi();return e={current:e},t.memoizedState=e},useState:LE,useDebugValue:KS,useDeferredValue:function(e){return Pi().memoizedState=e},useTransition:function(){var e=LE(!1),t=e[0];return e=J5.bind(null,e[1]),Pi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ut,i=Pi();if(Mt){if(n===void 0)throw Error(le(407));n=n()}else{if(n=t(),pn===null)throw Error(le(349));Za&30||mP(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,DE(_P.bind(null,r,s,e),[e]),r.flags|=2048,Nc(9,yP.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Pi(),t=pn.identifierPrefix;if(Mt){var n=us,r=os;n=(r&~(1<<32-vi(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ac++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Q5++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},e8={readContext:Qr,useCallback:CP,useContext:Qr,useEffect:GS,useImperativeHandle:IP,useInsertionEffect:TP,useLayoutEffect:EP,useMemo:RP,useReducer:Um,useRef:bP,useState:function(){return Um(Oc)},useDebugValue:KS,useDeferredValue:function(e){var t=Jr();return xP(t,sn.memoizedState,e)},useTransition:function(){var e=Um(Oc)[0],t=Jr().memoizedState;return[e,t]},useMutableSource:vP,useSyncExternalStore:gP,useId:$P,unstable_isNewReconciler:!1},t8={readContext:Qr,useCallback:CP,useContext:Qr,useEffect:GS,useImperativeHandle:IP,useInsertionEffect:TP,useLayoutEffect:EP,useMemo:RP,useReducer:Bm,useRef:bP,useState:function(){return Bm(Oc)},useDebugValue:KS,useDeferredValue:function(e){var t=Jr();return sn===null?t.memoizedState=e:xP(t,sn.memoizedState,e)},useTransition:function(){var e=Bm(Oc)[0],t=Jr().memoizedState;return[e,t]},useMutableSource:vP,useSyncExternalStore:gP,useId:$P,unstable_isNewReconciler:!1};function oi(e,t){if(e&&e.defaultProps){t=Bt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function B_(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Bt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Wp={isMounted:function(e){return(e=e._reactInternals)?ao(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Wn(),i=ea(e),s=ls(r,i);s.payload=t,n!=null&&(s.callback=n),t=Xs(e,s,i),t!==null&&(gi(t,e,i,r),Rh(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Wn(),i=ea(e),s=ls(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Xs(e,s,i),t!==null&&(gi(t,e,i,r),Rh(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Wn(),r=ea(e),i=ls(n,r);i.tag=2,t!=null&&(i.callback=t),t=Xs(e,i,r),t!==null&&(gi(t,e,r,n),Rh(t,e,r))}};function FE(e,t,n,r,i,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,a):t.prototype&&t.prototype.isPureReactComponent?!Ic(n,r)||!Ic(i,s):!0}function NP(e,t,n){var r=!1,i=aa,s=t.contextType;return typeof s=="object"&&s!==null?s=Qr(s):(i=sr(t)?Ya:On.current,r=t.contextTypes,s=(r=r!=null)?Eu(e,i):aa),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Wp,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function jE(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Wp.enqueueReplaceState(t,t.state,null)}function W_(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},US(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Qr(s):(s=sr(t)?Ya:On.current,i.context=Eu(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(B_(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Wp.enqueueReplaceState(i,i.state,null),up(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Ru(e,t){try{var n="",r=t;do n+=x6(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Wm(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function z_(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var n8=typeof WeakMap=="function"?WeakMap:Map;function MP(e,t,n){n=ls(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){hp||(hp=!0,Z_=r),z_(e,t)},n}function LP(e,t,n){n=ls(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){z_(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){z_(e,t),typeof r!="function"&&(Zs===null?Zs=new Set([this]):Zs.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function UE(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new n8;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=g8.bind(null,e,t,n),t.then(e,e))}function BE(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function WE(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ls(-1,1),t.tag=2,Xs(n,t,1))),n.lanes|=1),e)}var r8=ys.ReactCurrentOwner,nr=!1;function Un(e,t,n,r){t.child=e===null?fP(t,null,n,r):Iu(t,e.child,n,r)}function zE(e,t,n,r,i){n=n.render;var s=t.ref;return du(t,i),r=VS(e,t,n,r,s,i),n=qS(),e!==null&&!nr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,hs(e,t,i)):(Mt&&n&&OS(t),t.flags|=1,Un(e,t,r,i),t.child)}function HE(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!n0(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,DP(e,t,s,r,i)):(e=Nh(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ic,n(a,r)&&e.ref===t.ref)return hs(e,t,i)}return t.flags|=1,e=ta(s,r),e.ref=t.ref,e.return=t,t.child=e}function DP(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(Ic(s,r)&&e.ref===t.ref)if(nr=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(nr=!0);else return t.lanes=e.lanes,hs(e,t,i)}return H_(e,t,n,r,i)}function FP(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},kt(iu,_r),_r|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,kt(iu,_r),_r|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,kt(iu,_r),_r|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,kt(iu,_r),_r|=r;return Un(e,t,i,n),t.child}function jP(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function H_(e,t,n,r,i){var s=sr(n)?Ya:On.current;return s=Eu(t,s),du(t,i),n=VS(e,t,n,r,s,i),r=qS(),e!==null&&!nr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,hs(e,t,i)):(Mt&&r&&OS(t),t.flags|=1,Un(e,t,n,i),t.child)}function VE(e,t,n,r,i){if(sr(n)){var s=!0;rp(t)}else s=!1;if(du(t,i),t.stateNode===null)Ph(e,t),NP(t,n,r),W_(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var u=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=Qr(f):(f=sr(n)?Ya:On.current,f=Eu(t,f));var d=n.getDerivedStateFromProps,p=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||u!==f)&&jE(t,a,r,f),Bs=!1;var v=t.memoizedState;a.state=v,up(t,r,a,i),u=t.memoizedState,l!==r||v!==u||ir.current||Bs?(typeof d=="function"&&(B_(t,n,d,r),u=t.memoizedState),(l=Bs||FE(t,n,l,r,v,u,f))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=f,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,hP(e,t),l=t.memoizedProps,f=t.type===t.elementType?l:oi(t.type,l),a.props=f,p=t.pendingProps,v=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Qr(u):(u=sr(n)?Ya:On.current,u=Eu(t,u));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==p||v!==u)&&jE(t,a,r,u),Bs=!1,v=t.memoizedState,a.state=v,up(t,r,a,i);var y=t.memoizedState;l!==p||v!==y||ir.current||Bs?(typeof m=="function"&&(B_(t,n,m,r),y=t.memoizedState),(f=Bs||FE(t,n,f,r,v,y,u)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,y,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,y,u)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=y),a.props=r,a.state=y,a.context=u,r=f):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),r=!1)}return V_(e,t,n,r,s,i)}function V_(e,t,n,r,i,s){jP(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&$E(t,n,!1),hs(e,t,s);r=t.stateNode,r8.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Iu(t,e.child,null,s),t.child=Iu(t,null,l,s)):Un(e,t,l,s),t.memoizedState=r.state,i&&$E(t,n,!0),t.child}function UP(e){var t=e.stateNode;t.pendingContext?xE(e,t.pendingContext,t.pendingContext!==t.context):t.context&&xE(e,t.context,!1),BS(e,t.containerInfo)}function qE(e,t,n,r,i){return ku(),MS(i),t.flags|=256,Un(e,t,n,r),t.child}var q_={dehydrated:null,treeContext:null,retryLane:0};function G_(e){return{baseLanes:e,cachePool:null,transitions:null}}function BP(e,t,n){var r=t.pendingProps,i=jt.current,s=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),kt(jt,i&1),e===null)return j_(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,s?(r=t.mode,s=t.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Vp(a,r,0,null),e=qa(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=G_(n),t.memoizedState=q_,e):QS(t,a));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return i8(e,t,a,r,l,i,n);if(s){s=r.fallback,a=t.mode,i=e.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=ta(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=ta(l,s):(s=qa(s,a,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,a=e.child.memoizedState,a=a===null?G_(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~n,t.memoizedState=q_,r}return s=e.child,e=s.sibling,r=ta(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function QS(e,t){return t=Vp({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function jd(e,t,n,r){return r!==null&&MS(r),Iu(t,e.child,null,n),e=QS(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function i8(e,t,n,r,i,s,a){if(n)return t.flags&256?(t.flags&=-257,r=Wm(Error(le(422))),jd(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Vp({mode:"visible",children:r.children},i,0,null),s=qa(s,i,a,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Iu(t,e.child,null,a),t.child.memoizedState=G_(a),t.memoizedState=q_,s);if(!(t.mode&1))return jd(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(le(419)),r=Wm(s,r,void 0),jd(e,t,a,r)}if(l=(a&e.childLanes)!==0,nr||l){if(r=pn,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ds(e,i),gi(r,e,i,-1))}return t0(),r=Wm(Error(le(421))),jd(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=m8.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,wr=Ys(i.nextSibling),br=t,Mt=!0,ci=null,e!==null&&(Wr[zr++]=os,Wr[zr++]=us,Wr[zr++]=Xa,os=e.id,us=e.overflow,Xa=t),t=QS(t,r.children),t.flags|=4096,t)}function GE(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),U_(e.return,t,n)}function zm(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function WP(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Un(e,t,r.children,n),r=jt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&GE(e,n,t);else if(e.tag===19)GE(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(kt(jt,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&lp(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zm(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&lp(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zm(t,!0,n,null,s);break;case"together":zm(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ph(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function hs(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),eo|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(le(153));if(t.child!==null){for(e=t.child,n=ta(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ta(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function s8(e,t,n){switch(t.tag){case 3:UP(t),ku();break;case 5:pP(t);break;case 1:sr(t.type)&&rp(t);break;case 4:BS(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;kt(ap,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(kt(jt,jt.current&1),t.flags|=128,null):n&t.child.childLanes?BP(e,t,n):(kt(jt,jt.current&1),e=hs(e,t,n),e!==null?e.sibling:null);kt(jt,jt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return WP(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),kt(jt,jt.current),r)break;return null;case 22:case 23:return t.lanes=0,FP(e,t,n)}return hs(e,t,n)}var zP,K_,HP,VP;zP=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};K_=function(){};HP=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ba(Li.current);var s=null;switch(n){case"input":i=g_(e,i),r=g_(e,r),s=[];break;case"select":i=Bt({},i,{value:void 0}),r=Bt({},r,{value:void 0}),s=[];break;case"textarea":i=__(e,i),r=__(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=tp)}S_(n,r);var a;n=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var l=i[f];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(_c.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var u=r[f];if(l=i!=null?i[f]:void 0,r.hasOwnProperty(f)&&u!==l&&(u!=null||l!=null))if(f==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(s||(s=[]),s.push(f,n)),n=u;else f==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(f,u)):f==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(f,""+u):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(_c.hasOwnProperty(f)?(u!=null&&f==="onScroll"&&xt("scroll",e),s||l===u||(s=[])):(s=s||[]).push(f,u))}n&&(s=s||[]).push("style",n);var f=s;(t.updateQueue=f)&&(t.flags|=4)}};VP=function(e,t,n,r){n!==r&&(t.flags|=4)};function Nl(e,t){if(!Mt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Rn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function a8(e,t,n){var r=t.pendingProps;switch(NS(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rn(t),null;case 1:return sr(t.type)&&np(),Rn(t),null;case 3:return r=t.stateNode,Cu(),$t(ir),$t(On),zS(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Dd(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ci!==null&&(nw(ci),ci=null))),K_(e,t),Rn(t),null;case 5:WS(t);var i=Ba(Pc.current);if(n=t.type,e!==null&&t.stateNode!=null)HP(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(le(166));return Rn(t),null}if(e=Ba(Li.current),Dd(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Oi]=t,r[xc]=s,e=(t.mode&1)!==0,n){case"dialog":xt("cancel",r),xt("close",r);break;case"iframe":case"object":case"embed":xt("load",r);break;case"video":case"audio":for(i=0;i<tc.length;i++)xt(tc[i],r);break;case"source":xt("error",r);break;case"img":case"image":case"link":xt("error",r),xt("load",r);break;case"details":xt("toggle",r);break;case"input":nE(r,s),xt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},xt("invalid",r);break;case"textarea":iE(r,s),xt("invalid",r)}S_(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Ld(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Ld(r.textContent,l,e),i=["children",""+l]):_c.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&xt("scroll",r)}switch(n){case"input":Rd(r),rE(r,s,!0);break;case"textarea":Rd(r),sE(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=tp)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=_$(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Oi]=t,e[xc]=r,zP(e,t,!1,!1),t.stateNode=e;e:{switch(a=b_(n,r),n){case"dialog":xt("cancel",e),xt("close",e),i=r;break;case"iframe":case"object":case"embed":xt("load",e),i=r;break;case"video":case"audio":for(i=0;i<tc.length;i++)xt(tc[i],e);i=r;break;case"source":xt("error",e),i=r;break;case"img":case"image":case"link":xt("error",e),xt("load",e),i=r;break;case"details":xt("toggle",e),i=r;break;case"input":nE(e,r),i=g_(e,r),xt("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Bt({},r,{value:void 0}),xt("invalid",e);break;case"textarea":iE(e,r),i=__(e,r),xt("invalid",e);break;default:i=r}S_(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?b$(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&w$(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&wc(e,u):typeof u=="number"&&wc(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(_c.hasOwnProperty(s)?u!=null&&s==="onScroll"&&xt("scroll",e):u!=null&&_S(e,s,u,a))}switch(n){case"input":Rd(e),rE(e,r,!1);break;case"textarea":Rd(e),sE(e);break;case"option":r.value!=null&&e.setAttribute("value",""+sa(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?uu(e,!!r.multiple,s,!1):r.defaultValue!=null&&uu(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=tp)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Rn(t),null;case 6:if(e&&t.stateNode!=null)VP(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(le(166));if(n=Ba(Pc.current),Ba(Li.current),Dd(t)){if(r=t.stateNode,n=t.memoizedProps,r[Oi]=t,(s=r.nodeValue!==n)&&(e=br,e!==null))switch(e.tag){case 3:Ld(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ld(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Oi]=t,t.stateNode=r}return Rn(t),null;case 13:if($t(jt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Mt&&wr!==null&&t.mode&1&&!(t.flags&128))lP(),ku(),t.flags|=98560,s=!1;else if(s=Dd(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(le(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(le(317));s[Oi]=t}else ku(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Rn(t),s=!1}else ci!==null&&(nw(ci),ci=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||jt.current&1?un===0&&(un=3):t0())),t.updateQueue!==null&&(t.flags|=4),Rn(t),null);case 4:return Cu(),K_(e,t),e===null&&Cc(t.stateNode.containerInfo),Rn(t),null;case 10:return FS(t.type._context),Rn(t),null;case 17:return sr(t.type)&&np(),Rn(t),null;case 19:if($t(jt),s=t.memoizedState,s===null)return Rn(t),null;if(r=(t.flags&128)!==0,a=s.rendering,a===null)if(r)Nl(s,!1);else{if(un!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=lp(e),a!==null){for(t.flags|=128,Nl(s,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return kt(jt,jt.current&1|2),t.child}e=e.sibling}s.tail!==null&&Kt()>xu&&(t.flags|=128,r=!0,Nl(s,!1),t.lanes=4194304)}else{if(!r)if(e=lp(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Nl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Mt)return Rn(t),null}else 2*Kt()-s.renderingStartTime>xu&&n!==1073741824&&(t.flags|=128,r=!0,Nl(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(n=s.last,n!==null?n.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Kt(),t.sibling=null,n=jt.current,kt(jt,r?n&1|2:n&1),t):(Rn(t),null);case 22:case 23:return e0(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?_r&1073741824&&(Rn(t),t.subtreeFlags&6&&(t.flags|=8192)):Rn(t),null;case 24:return null;case 25:return null}throw Error(le(156,t.tag))}function o8(e,t){switch(NS(t),t.tag){case 1:return sr(t.type)&&np(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Cu(),$t(ir),$t(On),zS(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return WS(t),null;case 13:if($t(jt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(le(340));ku()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return $t(jt),null;case 4:return Cu(),null;case 10:return FS(t.type._context),null;case 22:case 23:return e0(),null;case 24:return null;default:return null}}var Ud=!1,Pn=!1,u8=typeof WeakSet=="function"?WeakSet:Set,ke=null;function ru(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ht(e,t,r)}else n.current=null}function Q_(e,t,n){try{n()}catch(r){Ht(e,t,r)}}var KE=!1;function l8(e,t){if(A_=Xh,e=J$(),AS(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,f=0,d=0,p=e,v=null;t:for(;;){for(var m;p!==n||i!==0&&p.nodeType!==3||(l=a+i),p!==s||r!==0&&p.nodeType!==3||(u=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(m=p.firstChild)!==null;)v=p,p=m;for(;;){if(p===e)break t;if(v===n&&++f===i&&(l=a),v===s&&++d===r&&(u=a),(m=p.nextSibling)!==null)break;p=v,v=p.parentNode}p=m}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(O_={focusedElem:e,selectionRange:n},Xh=!1,ke=t;ke!==null;)if(t=ke,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ke=e;else for(;ke!==null;){t=ke;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var E=y.memoizedProps,b=y.memoizedState,w=t.stateNode,T=w.getSnapshotBeforeUpdate(t.elementType===t.type?E:oi(t.type,E),b);w.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(le(163))}}catch(M){Ht(t,t.return,M)}if(e=t.sibling,e!==null){e.return=t.return,ke=e;break}ke=t.return}return y=KE,KE=!1,y}function dc(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&Q_(t,n,s)}i=i.next}while(i!==r)}}function zp(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function J_(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function qP(e){var t=e.alternate;t!==null&&(e.alternate=null,qP(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Oi],delete t[xc],delete t[L_],delete t[V5],delete t[q5])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function GP(e){return e.tag===5||e.tag===3||e.tag===4}function QE(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||GP(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Y_(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=tp));else if(r!==4&&(e=e.child,e!==null))for(Y_(e,t,n),e=e.sibling;e!==null;)Y_(e,t,n),e=e.sibling}function X_(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(X_(e,t,n),e=e.sibling;e!==null;)X_(e,t,n),e=e.sibling}var yn=null,li=!1;function Ls(e,t,n){for(n=n.child;n!==null;)KP(e,t,n),n=n.sibling}function KP(e,t,n){if(Mi&&typeof Mi.onCommitFiberUnmount=="function")try{Mi.onCommitFiberUnmount(Mp,n)}catch{}switch(n.tag){case 5:Pn||ru(n,t);case 6:var r=yn,i=li;yn=null,Ls(e,t,n),yn=r,li=i,yn!==null&&(li?(e=yn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):yn.removeChild(n.stateNode));break;case 18:yn!==null&&(li?(e=yn,n=n.stateNode,e.nodeType===8?Lm(e.parentNode,n):e.nodeType===1&&Lm(e,n),Ec(e)):Lm(yn,n.stateNode));break;case 4:r=yn,i=li,yn=n.stateNode.containerInfo,li=!0,Ls(e,t,n),yn=r,li=i;break;case 0:case 11:case 14:case 15:if(!Pn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Q_(n,t,a),i=i.next}while(i!==r)}Ls(e,t,n);break;case 1:if(!Pn&&(ru(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ht(n,t,l)}Ls(e,t,n);break;case 21:Ls(e,t,n);break;case 22:n.mode&1?(Pn=(r=Pn)||n.memoizedState!==null,Ls(e,t,n),Pn=r):Ls(e,t,n);break;default:Ls(e,t,n)}}function JE(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new u8),t.forEach(function(r){var i=y8.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function si(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:yn=l.stateNode,li=!1;break e;case 3:yn=l.stateNode.containerInfo,li=!0;break e;case 4:yn=l.stateNode.containerInfo,li=!0;break e}l=l.return}if(yn===null)throw Error(le(160));KP(s,a,i),yn=null,li=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(f){Ht(i,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)QP(t,e),t=t.sibling}function QP(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(si(t,e),Ri(e),r&4){try{dc(3,e,e.return),zp(3,e)}catch(E){Ht(e,e.return,E)}try{dc(5,e,e.return)}catch(E){Ht(e,e.return,E)}}break;case 1:si(t,e),Ri(e),r&512&&n!==null&&ru(n,n.return);break;case 5:if(si(t,e),Ri(e),r&512&&n!==null&&ru(n,n.return),e.flags&32){var i=e.stateNode;try{wc(i,"")}catch(E){Ht(e,e.return,E)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,a=n!==null?n.memoizedProps:s,l=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&m$(i,s),b_(l,a);var f=b_(l,s);for(a=0;a<u.length;a+=2){var d=u[a],p=u[a+1];d==="style"?b$(i,p):d==="dangerouslySetInnerHTML"?w$(i,p):d==="children"?wc(i,p):_S(i,d,p,f)}switch(l){case"input":m_(i,s);break;case"textarea":y$(i,s);break;case"select":var v=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?uu(i,!!s.multiple,m,!1):v!==!!s.multiple&&(s.defaultValue!=null?uu(i,!!s.multiple,s.defaultValue,!0):uu(i,!!s.multiple,s.multiple?[]:"",!1))}i[xc]=s}catch(E){Ht(e,e.return,E)}}break;case 6:if(si(t,e),Ri(e),r&4){if(e.stateNode===null)throw Error(le(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(E){Ht(e,e.return,E)}}break;case 3:if(si(t,e),Ri(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ec(t.containerInfo)}catch(E){Ht(e,e.return,E)}break;case 4:si(t,e),Ri(e);break;case 13:si(t,e),Ri(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(XS=Kt())),r&4&&JE(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Pn=(f=Pn)||d,si(t,e),Pn=f):si(t,e),Ri(e),r&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!d&&e.mode&1)for(ke=e,d=e.child;d!==null;){for(p=ke=d;ke!==null;){switch(v=ke,m=v.child,v.tag){case 0:case 11:case 14:case 15:dc(4,v,v.return);break;case 1:ru(v,v.return);var y=v.stateNode;if(typeof y.componentWillUnmount=="function"){r=v,n=v.return;try{t=r,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(E){Ht(r,n,E)}}break;case 5:ru(v,v.return);break;case 22:if(v.memoizedState!==null){XE(p);continue}}m!==null?(m.return=v,ke=m):XE(p)}d=d.sibling}e:for(d=null,p=e;;){if(p.tag===5){if(d===null){d=p;try{i=p.stateNode,f?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=p.stateNode,u=p.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=S$("display",a))}catch(E){Ht(e,e.return,E)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=f?"":p.memoizedProps}catch(E){Ht(e,e.return,E)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:si(t,e),Ri(e),r&4&&JE(e);break;case 21:break;default:si(t,e),Ri(e)}}function Ri(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(GP(n)){var r=n;break e}n=n.return}throw Error(le(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(wc(i,""),r.flags&=-33);var s=QE(e);X_(e,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,l=QE(e);Y_(e,l,a);break;default:throw Error(le(161))}}catch(u){Ht(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function c8(e,t,n){ke=e,JP(e)}function JP(e,t,n){for(var r=(e.mode&1)!==0;ke!==null;){var i=ke,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Ud;if(!a){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Pn;l=Ud;var f=Pn;if(Ud=a,(Pn=u)&&!f)for(ke=i;ke!==null;)a=ke,u=a.child,a.tag===22&&a.memoizedState!==null?ZE(i):u!==null?(u.return=a,ke=u):ZE(i);for(;s!==null;)ke=s,JP(s),s=s.sibling;ke=i,Ud=l,Pn=f}YE(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ke=s):YE(e)}}function YE(e){for(;ke!==null;){var t=ke;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Pn||zp(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Pn)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:oi(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&ME(t,s,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}ME(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var d=f.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&Ec(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(le(163))}Pn||t.flags&512&&J_(t)}catch(v){Ht(t,t.return,v)}}if(t===e){ke=null;break}if(n=t.sibling,n!==null){n.return=t.return,ke=n;break}ke=t.return}}function XE(e){for(;ke!==null;){var t=ke;if(t===e){ke=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ke=n;break}ke=t.return}}function ZE(e){for(;ke!==null;){var t=ke;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{zp(4,t)}catch(u){Ht(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){Ht(t,i,u)}}var s=t.return;try{J_(t)}catch(u){Ht(t,s,u)}break;case 5:var a=t.return;try{J_(t)}catch(u){Ht(t,a,u)}}}catch(u){Ht(t,t.return,u)}if(t===e){ke=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ke=l;break}ke=t.return}}var f8=Math.ceil,dp=ys.ReactCurrentDispatcher,JS=ys.ReactCurrentOwner,Gr=ys.ReactCurrentBatchConfig,at=0,pn=null,Zt=null,wn=0,_r=0,iu=ca(0),un=0,Mc=null,eo=0,Hp=0,YS=0,hc=null,er=null,XS=0,xu=1/0,Xi=null,hp=!1,Z_=null,Zs=null,Bd=!1,Vs=null,pp=0,pc=0,ew=null,Ah=-1,Oh=0;function Wn(){return at&6?Kt():Ah!==-1?Ah:Ah=Kt()}function ea(e){return e.mode&1?at&2&&wn!==0?wn&-wn:K5.transition!==null?(Oh===0&&(Oh=N$()),Oh):(e=mt,e!==0||(e=window.event,e=e===void 0?16:B$(e.type)),e):1}function gi(e,t,n,r){if(50<pc)throw pc=0,ew=null,Error(le(185));Hc(e,n,r),(!(at&2)||e!==pn)&&(e===pn&&(!(at&2)&&(Hp|=n),un===4&&zs(e,wn)),ar(e,r),n===1&&at===0&&!(t.mode&1)&&(xu=Kt()+500,Up&&fa()))}function ar(e,t){var n=e.callbackNode;K6(e,t);var r=Yh(e,e===pn?wn:0);if(r===0)n!==null&&uE(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&uE(n),t===1)e.tag===0?G5(ek.bind(null,e)):aP(ek.bind(null,e)),z5(function(){!(at&6)&&fa()}),n=null;else{switch(M$(r)){case 1:n=ES;break;case 4:n=A$;break;case 16:n=Jh;break;case 536870912:n=O$;break;default:n=Jh}n=iA(n,YP.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function YP(e,t){if(Ah=-1,Oh=0,at&6)throw Error(le(327));var n=e.callbackNode;if(hu()&&e.callbackNode!==n)return null;var r=Yh(e,e===pn?wn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=vp(e,r);else{t=r;var i=at;at|=2;var s=ZP();(pn!==e||wn!==t)&&(Xi=null,xu=Kt()+500,Va(e,t));do try{p8();break}catch(l){XP(e,l)}while(!0);DS(),dp.current=s,at=i,Zt!==null?t=0:(pn=null,wn=0,t=un)}if(t!==0){if(t===2&&(i=C_(e),i!==0&&(r=i,t=tw(e,i))),t===1)throw n=Mc,Va(e,0),zs(e,r),ar(e,Kt()),n;if(t===6)zs(e,r);else{if(i=e.current.alternate,!(r&30)&&!d8(i)&&(t=vp(e,r),t===2&&(s=C_(e),s!==0&&(r=s,t=tw(e,s))),t===1))throw n=Mc,Va(e,0),zs(e,r),ar(e,Kt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(le(345));case 2:Da(e,er,Xi);break;case 3:if(zs(e,r),(r&130023424)===r&&(t=XS+500-Kt(),10<t)){if(Yh(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Wn(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=M_(Da.bind(null,e,er,Xi),t);break}Da(e,er,Xi);break;case 4:if(zs(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-vi(r);s=1<<a,a=t[a],a>i&&(i=a),r&=~s}if(r=i,r=Kt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*f8(r/1960))-r,10<r){e.timeoutHandle=M_(Da.bind(null,e,er,Xi),r);break}Da(e,er,Xi);break;case 5:Da(e,er,Xi);break;default:throw Error(le(329))}}}return ar(e,Kt()),e.callbackNode===n?YP.bind(null,e):null}function tw(e,t){var n=hc;return e.current.memoizedState.isDehydrated&&(Va(e,t).flags|=256),e=vp(e,t),e!==2&&(t=er,er=n,t!==null&&nw(t)),e}function nw(e){er===null?er=e:er.push.apply(er,e)}function d8(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!yi(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zs(e,t){for(t&=~YS,t&=~Hp,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-vi(t),r=1<<n;e[n]=-1,t&=~r}}function ek(e){if(at&6)throw Error(le(327));hu();var t=Yh(e,0);if(!(t&1))return ar(e,Kt()),null;var n=vp(e,t);if(e.tag!==0&&n===2){var r=C_(e);r!==0&&(t=r,n=tw(e,r))}if(n===1)throw n=Mc,Va(e,0),zs(e,t),ar(e,Kt()),n;if(n===6)throw Error(le(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Da(e,er,Xi),ar(e,Kt()),null}function ZS(e,t){var n=at;at|=1;try{return e(t)}finally{at=n,at===0&&(xu=Kt()+500,Up&&fa())}}function to(e){Vs!==null&&Vs.tag===0&&!(at&6)&&hu();var t=at;at|=1;var n=Gr.transition,r=mt;try{if(Gr.transition=null,mt=1,e)return e()}finally{mt=r,Gr.transition=n,at=t,!(at&6)&&fa()}}function e0(){_r=iu.current,$t(iu)}function Va(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,W5(n)),Zt!==null)for(n=Zt.return;n!==null;){var r=n;switch(NS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&np();break;case 3:Cu(),$t(ir),$t(On),zS();break;case 5:WS(r);break;case 4:Cu();break;case 13:$t(jt);break;case 19:$t(jt);break;case 10:FS(r.type._context);break;case 22:case 23:e0()}n=n.return}if(pn=e,Zt=e=ta(e.current,null),wn=_r=t,un=0,Mc=null,YS=Hp=eo=0,er=hc=null,Ua!==null){for(t=0;t<Ua.length;t++)if(n=Ua[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Ua=null}return e}function XP(e,t){do{var n=Zt;try{if(DS(),xh.current=fp,cp){for(var r=Ut.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}cp=!1}if(Za=0,dn=sn=Ut=null,fc=!1,Ac=0,JS.current=null,n===null||n.return===null){un=1,Mc=t,Zt=null;break}e:{var s=e,a=n.return,l=n,u=t;if(t=wn,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var f=u,d=l,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var v=d.alternate;v?(d.updateQueue=v.updateQueue,d.memoizedState=v.memoizedState,d.lanes=v.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=BE(a);if(m!==null){m.flags&=-257,WE(m,a,l,s,t),m.mode&1&&UE(s,f,t),t=m,u=f;var y=t.updateQueue;if(y===null){var E=new Set;E.add(u),t.updateQueue=E}else y.add(u);break e}else{if(!(t&1)){UE(s,f,t),t0();break e}u=Error(le(426))}}else if(Mt&&l.mode&1){var b=BE(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),WE(b,a,l,s,t),MS(Ru(u,l));break e}}s=u=Ru(u,l),un!==4&&(un=2),hc===null?hc=[s]:hc.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var w=MP(s,u,t);NE(s,w);break e;case 1:l=u;var T=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof T.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Zs===null||!Zs.has(x)))){s.flags|=65536,t&=-t,s.lanes|=t;var M=LP(s,l,t);NE(s,M);break e}}s=s.return}while(s!==null)}tA(n)}catch(W){t=W,Zt===n&&n!==null&&(Zt=n=n.return);continue}break}while(!0)}function ZP(){var e=dp.current;return dp.current=fp,e===null?fp:e}function t0(){(un===0||un===3||un===2)&&(un=4),pn===null||!(eo&268435455)&&!(Hp&268435455)||zs(pn,wn)}function vp(e,t){var n=at;at|=2;var r=ZP();(pn!==e||wn!==t)&&(Xi=null,Va(e,t));do try{h8();break}catch(i){XP(e,i)}while(!0);if(DS(),at=n,dp.current=r,Zt!==null)throw Error(le(261));return pn=null,wn=0,un}function h8(){for(;Zt!==null;)eA(Zt)}function p8(){for(;Zt!==null&&!j6();)eA(Zt)}function eA(e){var t=rA(e.alternate,e,_r);e.memoizedProps=e.pendingProps,t===null?tA(e):Zt=t,JS.current=null}function tA(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=o8(n,t),n!==null){n.flags&=32767,Zt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{un=6,Zt=null;return}}else if(n=a8(n,t,_r),n!==null){Zt=n;return}if(t=t.sibling,t!==null){Zt=t;return}Zt=t=e}while(t!==null);un===0&&(un=5)}function Da(e,t,n){var r=mt,i=Gr.transition;try{Gr.transition=null,mt=1,v8(e,t,n,r)}finally{Gr.transition=i,mt=r}return null}function v8(e,t,n,r){do hu();while(Vs!==null);if(at&6)throw Error(le(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(le(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(Q6(e,s),e===pn&&(Zt=pn=null,wn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Bd||(Bd=!0,iA(Jh,function(){return hu(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Gr.transition,Gr.transition=null;var a=mt;mt=1;var l=at;at|=4,JS.current=null,l8(e,n),QP(n,e),M5(O_),Xh=!!A_,O_=A_=null,e.current=n,c8(n),U6(),at=l,mt=a,Gr.transition=s}else e.current=n;if(Bd&&(Bd=!1,Vs=e,pp=i),s=e.pendingLanes,s===0&&(Zs=null),z6(n.stateNode),ar(e,Kt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(hp)throw hp=!1,e=Z_,Z_=null,e;return pp&1&&e.tag!==0&&hu(),s=e.pendingLanes,s&1?e===ew?pc++:(pc=0,ew=e):pc=0,fa(),null}function hu(){if(Vs!==null){var e=M$(pp),t=Gr.transition,n=mt;try{if(Gr.transition=null,mt=16>e?16:e,Vs===null)var r=!1;else{if(e=Vs,Vs=null,pp=0,at&6)throw Error(le(331));var i=at;for(at|=4,ke=e.current;ke!==null;){var s=ke,a=s.child;if(ke.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var f=l[u];for(ke=f;ke!==null;){var d=ke;switch(d.tag){case 0:case 11:case 15:dc(8,d,s)}var p=d.child;if(p!==null)p.return=d,ke=p;else for(;ke!==null;){d=ke;var v=d.sibling,m=d.return;if(qP(d),d===f){ke=null;break}if(v!==null){v.return=m,ke=v;break}ke=m}}}var y=s.alternate;if(y!==null){var E=y.child;if(E!==null){y.child=null;do{var b=E.sibling;E.sibling=null,E=b}while(E!==null)}}ke=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,ke=a;else e:for(;ke!==null;){if(s=ke,s.flags&2048)switch(s.tag){case 0:case 11:case 15:dc(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,ke=w;break e}ke=s.return}}var T=e.current;for(ke=T;ke!==null;){a=ke;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,ke=x;else e:for(a=T;ke!==null;){if(l=ke,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:zp(9,l)}}catch(W){Ht(l,l.return,W)}if(l===a){ke=null;break e}var M=l.sibling;if(M!==null){M.return=l.return,ke=M;break e}ke=l.return}}if(at=i,fa(),Mi&&typeof Mi.onPostCommitFiberRoot=="function")try{Mi.onPostCommitFiberRoot(Mp,e)}catch{}r=!0}return r}finally{mt=n,Gr.transition=t}}return!1}function tk(e,t,n){t=Ru(n,t),t=MP(e,t,1),e=Xs(e,t,1),t=Wn(),e!==null&&(Hc(e,1,t),ar(e,t))}function Ht(e,t,n){if(e.tag===3)tk(e,e,n);else for(;t!==null;){if(t.tag===3){tk(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Zs===null||!Zs.has(r))){e=Ru(n,e),e=LP(t,e,1),t=Xs(t,e,1),e=Wn(),t!==null&&(Hc(t,1,e),ar(t,e));break}}t=t.return}}function g8(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Wn(),e.pingedLanes|=e.suspendedLanes&n,pn===e&&(wn&n)===n&&(un===4||un===3&&(wn&130023424)===wn&&500>Kt()-XS?Va(e,0):YS|=n),ar(e,t)}function nA(e,t){t===0&&(e.mode&1?(t=Pd,Pd<<=1,!(Pd&130023424)&&(Pd=4194304)):t=1);var n=Wn();e=ds(e,t),e!==null&&(Hc(e,t,n),ar(e,n))}function m8(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),nA(e,n)}function y8(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(le(314))}r!==null&&r.delete(t),nA(e,n)}var rA;rA=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ir.current)nr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return nr=!1,s8(e,t,n);nr=!!(e.flags&131072)}else nr=!1,Mt&&t.flags&1048576&&oP(t,sp,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ph(e,t),e=t.pendingProps;var i=Eu(t,On.current);du(t,n),i=VS(null,t,r,e,i,n);var s=qS();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,sr(r)?(s=!0,rp(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,US(t),i.updater=Wp,t.stateNode=i,i._reactInternals=t,W_(t,r,e,n),t=V_(null,t,r,!0,s,n)):(t.tag=0,Mt&&s&&OS(t),Un(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ph(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=w8(r),e=oi(r,e),i){case 0:t=H_(null,t,r,e,n);break e;case 1:t=VE(null,t,r,e,n);break e;case 11:t=zE(null,t,r,e,n);break e;case 14:t=HE(null,t,r,oi(r.type,e),n);break e}throw Error(le(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:oi(r,i),H_(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:oi(r,i),VE(e,t,r,i,n);case 3:e:{if(UP(t),e===null)throw Error(le(387));r=t.pendingProps,s=t.memoizedState,i=s.element,hP(e,t),up(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Ru(Error(le(423)),t),t=qE(e,t,r,n,i);break e}else if(r!==i){i=Ru(Error(le(424)),t),t=qE(e,t,r,n,i);break e}else for(wr=Ys(t.stateNode.containerInfo.firstChild),br=t,Mt=!0,ci=null,n=fP(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ku(),r===i){t=hs(e,t,n);break e}Un(e,t,r,n)}t=t.child}return t;case 5:return pP(t),e===null&&j_(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,a=i.children,N_(r,i)?a=null:s!==null&&N_(r,s)&&(t.flags|=32),jP(e,t),Un(e,t,a,n),t.child;case 6:return e===null&&j_(t),null;case 13:return BP(e,t,n);case 4:return BS(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Iu(t,null,r,n):Un(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:oi(r,i),zE(e,t,r,i,n);case 7:return Un(e,t,t.pendingProps,n),t.child;case 8:return Un(e,t,t.pendingProps.children,n),t.child;case 12:return Un(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,kt(ap,r._currentValue),r._currentValue=a,s!==null)if(yi(s.value,a)){if(s.children===i.children&&!ir.current){t=hs(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=ls(-1,n&-n),u.tag=2;var f=s.updateQueue;if(f!==null){f=f.shared;var d=f.pending;d===null?u.next=u:(u.next=d.next,d.next=u),f.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),U_(s.return,n,t),l.lanes|=n;break}u=u.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(le(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),U_(a,n,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Un(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,du(t,n),i=Qr(i),r=r(i),t.flags|=1,Un(e,t,r,n),t.child;case 14:return r=t.type,i=oi(r,t.pendingProps),i=oi(r.type,i),HE(e,t,r,i,n);case 15:return DP(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:oi(r,i),Ph(e,t),t.tag=1,sr(r)?(e=!0,rp(t)):e=!1,du(t,n),NP(t,r,i),W_(t,r,i,n),V_(null,t,r,!0,e,n);case 19:return WP(e,t,n);case 22:return FP(e,t,n)}throw Error(le(156,t.tag))};function iA(e,t){return P$(e,t)}function _8(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vr(e,t,n,r){return new _8(e,t,n,r)}function n0(e){return e=e.prototype,!(!e||!e.isReactComponent)}function w8(e){if(typeof e=="function")return n0(e)?1:0;if(e!=null){if(e=e.$$typeof,e===SS)return 11;if(e===bS)return 14}return 2}function ta(e,t){var n=e.alternate;return n===null?(n=Vr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Nh(e,t,n,r,i,s){var a=2;if(r=e,typeof e=="function")n0(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Ko:return qa(n.children,i,s,t);case wS:a=8,i|=8;break;case d_:return e=Vr(12,n,t,i|2),e.elementType=d_,e.lanes=s,e;case h_:return e=Vr(13,n,t,i),e.elementType=h_,e.lanes=s,e;case p_:return e=Vr(19,n,t,i),e.elementType=p_,e.lanes=s,e;case p$:return Vp(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case d$:a=10;break e;case h$:a=9;break e;case SS:a=11;break e;case bS:a=14;break e;case Us:a=16,r=null;break e}throw Error(le(130,e==null?e:typeof e,""))}return t=Vr(a,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function qa(e,t,n,r){return e=Vr(7,e,r,t),e.lanes=n,e}function Vp(e,t,n,r){return e=Vr(22,e,r,t),e.elementType=p$,e.lanes=n,e.stateNode={isHidden:!1},e}function Hm(e,t,n){return e=Vr(6,e,null,t),e.lanes=n,e}function Vm(e,t,n){return t=Vr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function S8(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=km(0),this.expirationTimes=km(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=km(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function r0(e,t,n,r,i,s,a,l,u){return e=new S8(e,t,n,l,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Vr(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},US(s),e}function b8(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Go,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function sA(e){if(!e)return aa;e=e._reactInternals;e:{if(ao(e)!==e||e.tag!==1)throw Error(le(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(sr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(le(171))}if(e.tag===1){var n=e.type;if(sr(n))return sP(e,n,t)}return t}function aA(e,t,n,r,i,s,a,l,u){return e=r0(n,r,!0,e,i,s,a,l,u),e.context=sA(null),n=e.current,r=Wn(),i=ea(n),s=ls(r,i),s.callback=t??null,Xs(n,s,i),e.current.lanes=i,Hc(e,i,r),ar(e,r),e}function qp(e,t,n,r){var i=t.current,s=Wn(),a=ea(i);return n=sA(n),t.context===null?t.context=n:t.pendingContext=n,t=ls(s,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Xs(i,t,a),e!==null&&(gi(e,i,a,s),Rh(e,i,a)),a}function gp(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function nk(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function i0(e,t){nk(e,t),(e=e.alternate)&&nk(e,t)}function T8(){return null}var oA=typeof reportError=="function"?reportError:function(e){console.error(e)};function s0(e){this._internalRoot=e}Gp.prototype.render=s0.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(le(409));qp(e,t,null,null)};Gp.prototype.unmount=s0.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;to(function(){qp(null,e,null,null)}),t[fs]=null}};function Gp(e){this._internalRoot=e}Gp.prototype.unstable_scheduleHydration=function(e){if(e){var t=F$();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ws.length&&t!==0&&t<Ws[n].priority;n++);Ws.splice(n,0,e),n===0&&U$(e)}};function a0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Kp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function rk(){}function E8(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var f=gp(a);s.call(f)}}var a=aA(t,r,e,0,null,!1,!1,"",rk);return e._reactRootContainer=a,e[fs]=a.current,Cc(e.nodeType===8?e.parentNode:e),to(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var f=gp(u);l.call(f)}}var u=r0(e,0,!1,null,null,!1,!1,"",rk);return e._reactRootContainer=u,e[fs]=u.current,Cc(e.nodeType===8?e.parentNode:e),to(function(){qp(t,u,n,r)}),u}function Qp(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var l=i;i=function(){var u=gp(a);l.call(u)}}qp(t,a,e,i)}else a=E8(n,t,e,i,r);return gp(a)}L$=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ec(t.pendingLanes);n!==0&&(kS(t,n|1),ar(t,Kt()),!(at&6)&&(xu=Kt()+500,fa()))}break;case 13:to(function(){var r=ds(e,1);if(r!==null){var i=Wn();gi(r,e,1,i)}}),i0(e,1)}};IS=function(e){if(e.tag===13){var t=ds(e,134217728);if(t!==null){var n=Wn();gi(t,e,134217728,n)}i0(e,134217728)}};D$=function(e){if(e.tag===13){var t=ea(e),n=ds(e,t);if(n!==null){var r=Wn();gi(n,e,t,r)}i0(e,t)}};F$=function(){return mt};j$=function(e,t){var n=mt;try{return mt=e,t()}finally{mt=n}};E_=function(e,t,n){switch(t){case"input":if(m_(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=jp(r);if(!i)throw Error(le(90));g$(r),m_(r,i)}}}break;case"textarea":y$(e,n);break;case"select":t=n.value,t!=null&&uu(e,!!n.multiple,t,!1)}};k$=ZS;I$=to;var k8={usingClientEntryPoint:!1,Events:[qc,Xo,jp,T$,E$,ZS]},Ml={findFiberByHostInstance:ja,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},I8={bundleType:Ml.bundleType,version:Ml.version,rendererPackageName:Ml.rendererPackageName,rendererConfig:Ml.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ys.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=x$(e),e===null?null:e.stateNode},findFiberByHostInstance:Ml.findFiberByHostInstance||T8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wd.isDisabled&&Wd.supportsFiber)try{Mp=Wd.inject(I8),Mi=Wd}catch{}}Ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k8;Ir.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!a0(t))throw Error(le(200));return b8(e,t,null,n)};Ir.createRoot=function(e,t){if(!a0(e))throw Error(le(299));var n=!1,r="",i=oA;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=r0(e,1,!1,null,null,n,!1,r,i),e[fs]=t.current,Cc(e.nodeType===8?e.parentNode:e),new s0(t)};Ir.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(le(188)):(e=Object.keys(e).join(","),Error(le(268,e)));return e=x$(t),e=e===null?null:e.stateNode,e};Ir.flushSync=function(e){return to(e)};Ir.hydrate=function(e,t,n){if(!Kp(t))throw Error(le(200));return Qp(null,e,t,!0,n)};Ir.hydrateRoot=function(e,t,n){if(!a0(e))throw Error(le(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=oA;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=aA(t,null,e,1,n??null,i,!1,s,a),e[fs]=t.current,Cc(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Gp(t)};Ir.render=function(e,t,n){if(!Kp(t))throw Error(le(200));return Qp(null,e,t,!1,n)};Ir.unmountComponentAtNode=function(e){if(!Kp(e))throw Error(le(40));return e._reactRootContainer?(to(function(){Qp(null,null,e,!1,function(){e._reactRootContainer=null,e[fs]=null})}),!0):!1};Ir.unstable_batchedUpdates=ZS;Ir.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Kp(n))throw Error(le(200));if(e==null||e._reactInternals===void 0)throw Error(le(38));return Qp(e,t,n,!1,r)};Ir.version="18.3.1-next-f1338f8080-20240426";function uA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uA)}catch(e){console.error(e)}}uA(),u$.exports=Ir;var C8=u$.exports,ik=C8;c_.createRoot=ik.createRoot,c_.hydrateRoot=ik.hydrateRoot;function lA(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=lA(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function R8(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=lA(e))&&(r&&(r+=" "),r+=t);return r}const x8=[["1",""],["2","ABC"],["3","DEF"],["4","GHI"],["5","JKL"],["6","MNO"],["7","PQRS"],["8","TUV"],["9","WXYZ"],["*",""],["0","+"],["#",""]],$8=({onInput:e,onBackspace:t,disabled:n})=>me.jsxs("div",{className:"dialpad",children:[x8.map(([r,i])=>me.jsxs("button",{className:R8("dialpad-key",n&&"disabled"),disabled:n,onClick:()=>e(r),children:[me.jsx("span",{className:"digit",children:r}),i&&me.jsx("span",{className:"letters",children:i})]},r)),me.jsx("button",{className:"dialpad-key backspace",onClick:t,disabled:n,children:""})]}),P8=({callPhase:e,isRecording:t,onDial:n,onHangup:r,onToggleRecording:i,disabled:s})=>{const a=e==="dialing"||e==="in-call"||e==="recording";return me.jsxs("div",{className:"call-controls",children:[me.jsx("button",{className:"control-button primary",disabled:s||a,onClick:n,children:"Dial"}),me.jsx("button",{className:"control-button danger",disabled:!a,onClick:r,children:"Hang Up"}),me.jsx("button",{className:"control-button secondary",disabled:e!=="in-call"&&e!=="recording",onClick:i,children:t?"Stop Recording":"Start Recording"})]})},A8=({value:e,onChange:t,placeholder:n="Enter number or search contact",disabled:r})=>me.jsx("div",{className:"number-input-wrapper",children:me.jsx("input",{className:"number-input",type:"tel",value:e,disabled:r,placeholder:n,onChange:i=>t(i.target.value)})}),O8=({events:e,isStreaming:t})=>me.jsxs("div",{className:"transcription-pane",children:[me.jsxs("div",{className:"transcription-header",children:[me.jsx("h2",{children:"Live Transcription"}),me.jsx("span",{className:t?"status live":"status idle",children:t?"Live":"Waiting"})]}),me.jsxs("div",{className:"transcription-body",children:[e.length===0&&me.jsx("p",{className:"placeholder",children:"No transcript chunks yet."}),e.map(n=>me.jsxs("div",{className:n.isFinal?"chunk final":"chunk partial",children:[me.jsx("span",{children:n.text}),me.jsx("time",{children:new Date(n.timestamp).toLocaleTimeString()})]},n.chunkId))]})]}),N8=({open:e,summary:t,onClose:n})=>!e||!t?null:me.jsx("div",{className:"modal-backdrop",role:"dialog","aria-modal":"true",children:me.jsxs("div",{className:"modal",children:[me.jsxs("div",{className:"modal-header",children:[me.jsx("h3",{children:"Call Summary"}),me.jsx("button",{className:"icon-button",onClick:n,"aria-label":"Close summary",children:""})]}),me.jsx("div",{className:"modal-body",children:me.jsxs("dl",{children:[me.jsxs("div",{className:"row",children:[me.jsx("dt",{children:"Call SID"}),me.jsx("dd",{children:me.jsx("a",{href:t.recordingUrl??"#",target:"_blank",rel:"noreferrer",children:t.callSid})})]}),me.jsxs("div",{className:"row",children:[me.jsx("dt",{children:"Dialed Number"}),me.jsx("dd",{children:t.dialedNumber})]}),me.jsxs("div",{className:"row",children:[me.jsx("dt",{children:"Started"}),me.jsx("dd",{children:new Date(t.startedAt).toLocaleString()})]}),t.endedAt&&me.jsxs("div",{className:"row",children:[me.jsx("dt",{children:"Ended"}),me.jsx("dd",{children:new Date(t.endedAt).toLocaleString()})]}),t.recordingUrl&&me.jsxs("div",{className:"row",children:[me.jsx("dt",{children:"Recording"}),me.jsx("dd",{children:me.jsx("a",{href:t.recordingUrl,target:"_blank",rel:"noreferrer",children:"Open recording"})})]}),t.transcriptUrl&&me.jsxs("div",{className:"row",children:[me.jsx("dt",{children:"Transcript"}),me.jsx("dd",{children:me.jsx("a",{href:t.transcriptUrl,target:"_blank",rel:"noreferrer",children:"View transcript"})})]})]})})]})});var o0={exports:{}},pu=typeof Reflect=="object"?Reflect:null,sk=pu&&typeof pu.apply=="function"?pu.apply:function(t,n,r){return Function.prototype.apply.call(t,n,r)},Mh;pu&&typeof pu.ownKeys=="function"?Mh=pu.ownKeys:Object.getOwnPropertySymbols?Mh=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Mh=function(t){return Object.getOwnPropertyNames(t)};function M8(e){console&&console.warn&&console.warn(e)}var cA=Number.isNaN||function(t){return t!==t};function yt(){yt.init.call(this)}o0.exports=yt;o0.exports.once=j8;yt.EventEmitter=yt;yt.prototype._events=void 0;yt.prototype._eventsCount=0;yt.prototype._maxListeners=void 0;var ak=10;function Jp(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(yt,"defaultMaxListeners",{enumerable:!0,get:function(){return ak},set:function(e){if(typeof e!="number"||e<0||cA(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");ak=e}});yt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};yt.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||cA(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function fA(e){return e._maxListeners===void 0?yt.defaultMaxListeners:e._maxListeners}yt.prototype.getMaxListeners=function(){return fA(this)};yt.prototype.emit=function(t){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=t==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var a;if(n.length>0&&(a=n[0]),a instanceof Error)throw a;var l=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw l.context=a,l}var u=s[t];if(u===void 0)return!1;if(typeof u=="function")sk(u,this,n);else for(var f=u.length,d=gA(u,f),r=0;r<f;++r)sk(d[r],this,n);return!0};function dA(e,t,n,r){var i,s,a;if(Jp(n),s=e._events,s===void 0?(s=e._events=Object.create(null),e._eventsCount=0):(s.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),a=s[t]),a===void 0)a=s[t]=n,++e._eventsCount;else if(typeof a=="function"?a=s[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),i=fA(e),i>0&&a.length>i&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,M8(l)}return e}yt.prototype.addListener=function(t,n){return dA(this,t,n,!1)};yt.prototype.on=yt.prototype.addListener;yt.prototype.prependListener=function(t,n){return dA(this,t,n,!0)};function L8(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function hA(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=L8.bind(r);return i.listener=n,r.wrapFn=i,i}yt.prototype.once=function(t,n){return Jp(n),this.on(t,hA(this,t,n)),this};yt.prototype.prependOnceListener=function(t,n){return Jp(n),this.prependListener(t,hA(this,t,n)),this};yt.prototype.removeListener=function(t,n){var r,i,s,a,l;if(Jp(n),i=this._events,i===void 0)return this;if(r=i[t],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,r.listener||n));else if(typeof r!="function"){for(s=-1,a=r.length-1;a>=0;a--)if(r[a]===n||r[a].listener===n){l=r[a].listener,s=a;break}if(s<0)return this;s===0?r.shift():D8(r,s),r.length===1&&(i[t]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",t,l||n)}return this};yt.prototype.off=yt.prototype.removeListener;yt.prototype.removeAllListeners=function(t){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var s=Object.keys(r),a;for(i=0;i<s.length;++i)a=s[i],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(t,n[i]);return this};function pA(e,t,n){var r=e._events;if(r===void 0)return[];var i=r[t];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?F8(i):gA(i,i.length)}yt.prototype.listeners=function(t){return pA(this,t,!0)};yt.prototype.rawListeners=function(t){return pA(this,t,!1)};yt.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):vA.call(e,t)};yt.prototype.listenerCount=vA;function vA(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}yt.prototype.eventNames=function(){return this._eventsCount>0?Mh(this._events):[]};function gA(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function D8(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function F8(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function j8(e,t){return new Promise(function(n,r){function i(a){e.removeListener(t,s),r(a)}function s(){typeof e.removeListener=="function"&&e.removeListener("error",i),n([].slice.call(arguments))}mA(e,t,s,{once:!0}),t!=="error"&&U8(e,i,{once:!0})})}function U8(e,t,n){typeof e.on=="function"&&mA(e,"error",t,n)}function mA(e,t,n,r){if(typeof e.on=="function")r.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function i(s){r.once&&e.removeEventListener(t,i),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var Yr=o0.exports;let rw=class extends Yr.EventEmitter{constructor(t){super(),Object.defineProperties(this,{_attempts:{value:0,writable:!0},_duration:{enumerable:!1,get(){let n=this._min*Math.pow(this._factor,this._attempts);if(this._jitter){const r=Math.random(),i=Math.floor(r*this._jitter*n);n=Math.floor(r*10)&1?n+i:n-i}return Math.min(n,this._max)|0}},_factor:{value:t.factor||2},_jitter:{value:t.jitter>0&&t.jitter<=1?t.jitter:0},_max:{value:t.max||1e4},_min:{value:t.min||100},_timeoutID:{value:null,writable:!0}})}backoff(){const t=this._duration;this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null),this.emit("backoff",this._attempts,t),this._timeoutID=setTimeout(()=>{this.emit("ready",this._attempts,t),this._attempts++},t)}reset(){this._attempts=0,this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)}};function Bn(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(d){try{f(r.next(d))}catch(p){a(p)}}function u(d){try{f(r.throw(d))}catch(p){a(p)}}function f(d){d.done?s(d.value):i(d.value).then(l,u)}f((r=r.apply(e,t||[])).next())})}var yA={exports:{}};(function(e){(function(t,n){e.exports?e.exports=n():t.log=n()})(di,function(){var t=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],s={},a=null;function l(E,b){var w=E[b];if(typeof w.bind=="function")return w.bind(E);try{return Function.prototype.bind.call(w,E)}catch{return function(){return Function.prototype.apply.apply(w,[E,arguments])}}}function u(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function f(E){return E==="debug"&&(E="log"),typeof console===n?!1:E==="trace"&&r?u:console[E]!==void 0?l(console,E):console.log!==void 0?l(console,"log"):t}function d(){for(var E=this.getLevel(),b=0;b<i.length;b++){var w=i[b];this[w]=b<E?t:this.methodFactory(w,E,this.name)}if(this.log=this.debug,typeof console===n&&E<this.levels.SILENT)return"No console available for logging"}function p(E){return function(){typeof console!==n&&(d.call(this),this[E].apply(this,arguments))}}function v(E,b,w){return f(E)||p.apply(this,arguments)}function m(E,b){var w=this,T,x,M,W="loglevel";typeof E=="string"?W+=":"+E:typeof E=="symbol"&&(W=void 0);function z(oe){var he=(i[oe]||"silent").toUpperCase();if(!(typeof window===n||!W)){try{window.localStorage[W]=he;return}catch{}try{window.document.cookie=encodeURIComponent(W)+"="+he+";"}catch{}}}function K(){var oe;if(!(typeof window===n||!W)){try{oe=window.localStorage[W]}catch{}if(typeof oe===n)try{var he=window.document.cookie,ye=encodeURIComponent(W),Se=he.indexOf(ye+"=");Se!==-1&&(oe=/^([^;]+)/.exec(he.slice(Se+ye.length+1))[1])}catch{}return w.levels[oe]===void 0&&(oe=void 0),oe}}function A(){if(!(typeof window===n||!W)){try{window.localStorage.removeItem(W)}catch{}try{window.document.cookie=encodeURIComponent(W)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function ne(oe){var he=oe;if(typeof he=="string"&&w.levels[he.toUpperCase()]!==void 0&&(he=w.levels[he.toUpperCase()]),typeof he=="number"&&he>=0&&he<=w.levels.SILENT)return he;throw new TypeError("log.setLevel() called with invalid level: "+oe)}w.name=E,w.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},w.methodFactory=b||v,w.getLevel=function(){return M??x??T},w.setLevel=function(oe,he){return M=ne(oe),he!==!1&&z(M),d.call(w)},w.setDefaultLevel=function(oe){x=ne(oe),K()||w.setLevel(oe,!1)},w.resetLevel=function(){M=null,A(),d.call(w)},w.enableAll=function(oe){w.setLevel(w.levels.TRACE,oe)},w.disableAll=function(oe){w.setLevel(w.levels.SILENT,oe)},w.rebuild=function(){if(a!==w&&(T=ne(a.getLevel())),d.call(w),a===w)for(var oe in s)s[oe].rebuild()},T=ne(a?a.getLevel():"WARN");var X=K();X!=null&&(M=ne(X)),d.call(w)}a=new m,a.getLogger=function(b){if(typeof b!="symbol"&&typeof b!="string"||b==="")throw new TypeError("You must supply a name when creating a logger.");var w=s[b];return w||(w=s[b]=new m(b,a.methodFactory)),w};var y=typeof window!==n?window.log:void 0;return a.noConflict=function(){return typeof window!==n&&window.log===a&&(window.log=y),a},a.getLoggers=function(){return s},a.default=a,a})})(yA);var no=yA.exports;const B8=Jx(no),W8=e6({__proto__:null,default:B8},[no]);class Be extends Error{constructor(t,n){super(),Object.setPrototypeOf(this,Be.prototype);const r=typeof t=="string"?t:this.explanation,i=typeof t=="object"?t:n;this.message=`${this.name} (${this.code}): ${r}`,this.originalError=i}}var rn;(function(e){class t extends Be{constructor(s,a){super(s,a),this.causes=[],this.code=20101,this.description="Invalid access token",this.explanation="Twilio was unable to validate your Access Token",this.name="AccessTokenInvalid",this.solutions=[],Object.setPrototypeOf(this,e.AccessTokenInvalid.prototype);const l=typeof s=="string"?s:this.explanation,u=typeof s=="object"?s:a;this.message=`${this.name} (${this.code}): ${l}`,this.originalError=u}}e.AccessTokenInvalid=t;class n extends Be{constructor(s,a){super(s,a),this.causes=[],this.code=20104,this.description="Access token expired or expiration date invalid",this.explanation="The Access Token provided to the Twilio API has expired, the expiration time specified in the token was invalid, or the expiration time specified was too far in the future",this.name="AccessTokenExpired",this.solutions=[],Object.setPrototypeOf(this,e.AccessTokenExpired.prototype);const l=typeof s=="string"?s:this.explanation,u=typeof s=="object"?s:a;this.message=`${this.name} (${this.code}): ${l}`,this.originalError=u}}e.AccessTokenExpired=n;class r extends Be{constructor(s,a){super(s,a),this.causes=[],this.code=20151,this.description="Authentication Failed",this.explanation="The Authentication with the provided JWT failed",this.name="AuthenticationFailed",this.solutions=[],Object.setPrototypeOf(this,e.AuthenticationFailed.prototype);const l=typeof s=="string"?s:this.explanation,u=typeof s=="object"?s:a;this.message=`${this.name} (${this.code}): ${l}`,this.originalError=u}}e.AuthenticationFailed=r})(rn||(rn={}));var iw;(function(e){class t extends Be{constructor(r,i){super(r,i),this.causes=["The access token has an invalid Account SID, API Key, or API Key Secret."],this.code=31202,this.description="Signature validation failed.",this.explanation="The provided access token failed signature validation.",this.name="AccessTokenSignatureValidationFailed",this.solutions=["Ensure the Account SID, API Key, and API Key Secret are valid when generating your access token."],Object.setPrototypeOf(this,e.AccessTokenSignatureValidationFailed.prototype);const s=typeof r=="string"?r:this.explanation,a=typeof r=="object"?r:i;this.message=`${this.name} (${this.code}): ${s}`,this.originalError=a}}e.AccessTokenSignatureValidationFailed=t})(iw||(iw={}));var Wa;(function(e){class t extends Be{constructor(a,l){super(a,l),this.causes=[],this.code=31400,this.description="Bad Request (HTTP/SIP)",this.explanation="The request could not be understood due to malformed syntax.",this.name="BadRequest",this.solutions=[],Object.setPrototypeOf(this,e.BadRequest.prototype);const u=typeof a=="string"?a:this.explanation,f=typeof a=="object"?a:l;this.message=`${this.name} (${this.code}): ${u}`,this.originalError=f}}e.BadRequest=t;class n extends Be{constructor(a,l){super(a,l),this.causes=["The outbound call was made to an invalid phone number.","The TwiML application sid is missing a Voice URL."],this.code=31404,this.description="Not Found (HTTP/SIP)",this.explanation="The server has not found anything matching the request.",this.name="NotFound",this.solutions=["Ensure the phone number dialed is valid.","Ensure the TwiML application is configured correctly with a Voice URL link."],Object.setPrototypeOf(this,e.NotFound.prototype);const u=typeof a=="string"?a:this.explanation,f=typeof a=="object"?a:l;this.message=`${this.name} (${this.code}): ${u}`,this.originalError=f}}e.NotFound=n;class r extends Be{constructor(a,l){super(a,l),this.causes=[],this.code=31480,this.description="Temporarily Unavailable (SIP)",this.explanation="The callee is currently unavailable.",this.name="TemporarilyUnavailable",this.solutions=[],Object.setPrototypeOf(this,e.TemporarilyUnavailable.prototype);const u=typeof a=="string"?a:this.explanation,f=typeof a=="object"?a:l;this.message=`${this.name} (${this.code}): ${u}`,this.originalError=f}}e.TemporarilyUnavailable=r;class i extends Be{constructor(a,l){super(a,l),this.causes=[],this.code=31486,this.description="Busy Here (SIP)",this.explanation="The callee is busy.",this.name="BusyHere",this.solutions=[],Object.setPrototypeOf(this,e.BusyHere.prototype);const u=typeof a=="string"?a:this.explanation,f=typeof a=="object"?a:l;this.message=`${this.name} (${this.code}): ${u}`,this.originalError=f}}e.BusyHere=i})(Wa||(Wa={}));var sw;(function(e){class t extends Be{constructor(r,i){super(r,i),this.causes=[],this.code=31603,this.description="Decline (SIP)",this.explanation="The callee does not wish to participate in the call.",this.name="Decline",this.solutions=[],Object.setPrototypeOf(this,e.Decline.prototype);const s=typeof r=="string"?r:this.explanation,a=typeof r=="object"?r:i;this.message=`${this.name} (${this.code}): ${s}`,this.originalError=a}}e.Decline=t})(sw||(sw={}));var xn;(function(e){class t extends Be{constructor(f,d){super(f,d),this.causes=[],this.code=31e3,this.description="Unknown Error",this.explanation="An unknown error has occurred. See error details for more information.",this.name="UnknownError",this.solutions=[],Object.setPrototypeOf(this,e.UnknownError.prototype);const p=typeof f=="string"?f:this.explanation,v=typeof f=="object"?f:d;this.message=`${this.name} (${this.code}): ${p}`,this.originalError=v}}e.UnknownError=t;class n extends Be{constructor(f,d){super(f,d),this.causes=[],this.code=31001,this.description="Application Not Found",this.explanation="",this.name="ApplicationNotFoundError",this.solutions=[],Object.setPrototypeOf(this,e.ApplicationNotFoundError.prototype);const p=typeof f=="string"?f:this.explanation,v=typeof f=="object"?f:d;this.message=`${this.name} (${this.code}): ${p}`,this.originalError=v}}e.ApplicationNotFoundError=n;class r extends Be{constructor(f,d){super(f,d),this.causes=[],this.code=31002,this.description="Connection Declined",this.explanation="",this.name="ConnectionDeclinedError",this.solutions=[],Object.setPrototypeOf(this,e.ConnectionDeclinedError.prototype);const p=typeof f=="string"?f:this.explanation,v=typeof f=="object"?f:d;this.message=`${this.name} (${this.code}): ${p}`,this.originalError=v}}e.ConnectionDeclinedError=r;class i extends Be{constructor(f,d){super(f,d),this.causes=[],this.code=31003,this.description="Connection Timeout",this.explanation="The server could not produce a response within a suitable amount of time.",this.name="ConnectionTimeoutError",this.solutions=[],Object.setPrototypeOf(this,e.ConnectionTimeoutError.prototype);const p=typeof f=="string"?f:this.explanation,v=typeof f=="object"?f:d;this.message=`${this.name} (${this.code}): ${p}`,this.originalError=v}}e.ConnectionTimeoutError=i;class s extends Be{constructor(f,d){super(f,d),this.causes=[],this.code=31005,this.description="Connection error",this.explanation="A connection error occurred during the call",this.name="ConnectionError",this.solutions=[],Object.setPrototypeOf(this,e.ConnectionError.prototype);const p=typeof f=="string"?f:this.explanation,v=typeof f=="object"?f:d;this.message=`${this.name} (${this.code}): ${p}`,this.originalError=v}}e.ConnectionError=s;class a extends Be{constructor(f,d){super(f,d),this.causes=["The incoming call was cancelled because it was not answered in time or it was accepted/rejected by another application instance registered with the same identity."],this.code=31008,this.description="Call cancelled",this.explanation="Unable to answer because the call has ended",this.name="CallCancelledError",this.solutions=[],Object.setPrototypeOf(this,e.CallCancelledError.prototype);const p=typeof f=="string"?f:this.explanation,v=typeof f=="object"?f:d;this.message=`${this.name} (${this.code}): ${p}`,this.originalError=v}}e.CallCancelledError=a;class l extends Be{constructor(f,d){super(f,d),this.causes=[],this.code=31009,this.description="Transport error",this.explanation="No transport available to send or receive messages",this.name="TransportError",this.solutions=[],Object.setPrototypeOf(this,e.TransportError.prototype);const p=typeof f=="string"?f:this.explanation,v=typeof f=="object"?f:d;this.message=`${this.name} (${this.code}): ${p}`,this.originalError=v}}e.TransportError=l})(xn||(xn={}));var Zi;(function(e){class t extends Be{constructor(f,d){super(f,d),this.causes=["Invalid content or MessageType passed to sendMessage method."],this.code=31100,this.description="The request had malformed syntax.",this.explanation="The request could not be understood due to malformed syntax.",this.name="MalformedRequestError",this.solutions=["Ensure content and MessageType passed to sendMessage method are valid."],Object.setPrototypeOf(this,e.MalformedRequestError.prototype);const p=typeof f=="string"?f:this.explanation,v=typeof f=="object"?f:d;this.message=`${this.name} (${this.code}): ${p}`,this.originalError=v}}e.MalformedRequestError=t;class n extends Be{constructor(f,d){super(f,d),this.causes=[],this.code=31101,this.description="Missing parameter array in request",this.explanation="",this.name="MissingParameterArrayError",this.solutions=[],Object.setPrototypeOf(this,e.MissingParameterArrayError.prototype);const p=typeof f=="string"?f:this.explanation,v=typeof f=="object"?f:d;this.message=`${this.name} (${this.code}): ${p}`,this.originalError=v}}e.MissingParameterArrayError=n;class r extends Be{constructor(f,d){super(f,d),this.causes=[],this.code=31102,this.description="Authorization token missing in request.",this.explanation="",this.name="AuthorizationTokenMissingError",this.solutions=[],Object.setPrototypeOf(this,e.AuthorizationTokenMissingError.prototype);const p=typeof f=="string"?f:this.explanation,v=typeof f=="object"?f:d;this.message=`${this.name} (${this.code}): ${p}`,this.originalError=v}}e.AuthorizationTokenMissingError=r;class i extends Be{constructor(f,d){super(f,d),this.causes=[],this.code=31103,this.description="Maximum parameter length has been exceeded.",this.explanation="Length of parameters cannot exceed MAX_PARAM_LENGTH.",this.name="MaxParameterLengthExceededError",this.solutions=[],Object.setPrototypeOf(this,e.MaxParameterLengthExceededError.prototype);const p=typeof f=="string"?f:this.explanation,v=typeof f=="object"?f:d;this.message=`${this.name} (${this.code}): ${p}`,this.originalError=v}}e.MaxParameterLengthExceededError=i;class s extends Be{constructor(f,d){super(f,d),this.causes=[],this.code=31104,this.description="Invalid bridge token",this.explanation="",this.name="InvalidBridgeTokenError",this.solutions=[],Object.setPrototypeOf(this,e.InvalidBridgeTokenError.prototype);const p=typeof f=="string"?f:this.explanation,v=typeof f=="object"?f:d;this.message=`${this.name} (${this.code}): ${p}`,this.originalError=v}}e.InvalidBridgeTokenError=s;class a extends Be{constructor(f,d){super(f,d),this.causes=["Client name contains invalid characters."],this.code=31105,this.description="Invalid client name",this.explanation="Client name should not contain control, space, delims, or unwise characters.",this.name="InvalidClientNameError",this.solutions=["Make sure that client name does not contain any of the invalid characters."],Object.setPrototypeOf(this,e.InvalidClientNameError.prototype);const p=typeof f=="string"?f:this.explanation,v=typeof f=="object"?f:d;this.message=`${this.name} (${this.code}): ${p}`,this.originalError=v}}e.InvalidClientNameError=a;class l extends Be{constructor(f,d){super(f,d),this.causes=[],this.code=31107,this.description="The reconnect parameter is invalid",this.explanation="",this.name="ReconnectParameterInvalidError",this.solutions=[],Object.setPrototypeOf(this,e.ReconnectParameterInvalidError.prototype);const p=typeof f=="string"?f:this.explanation,v=typeof f=="object"?f:d;this.message=`${this.name} (${this.code}): ${p}`,this.originalError=v}}e.ReconnectParameterInvalidError=l})(Zi||(Zi={}));(function(e){class t extends Be{constructor(p,v){super(p,v),this.causes=[],this.code=31201,this.description="Authorization error",this.explanation="The request requires user authentication. The server understood the request, but is refusing to fulfill it.",this.name="AuthorizationError",this.solutions=[],Object.setPrototypeOf(this,e.AuthorizationError.prototype);const m=typeof p=="string"?p:this.explanation,y=typeof p=="object"?p:v;this.message=`${this.name} (${this.code}): ${m}`,this.originalError=y}}e.AuthorizationError=t;class n extends Be{constructor(p,v){super(p,v),this.causes=[],this.code=31203,this.description="No valid account",this.explanation="",this.name="NoValidAccountError",this.solutions=[],Object.setPrototypeOf(this,e.NoValidAccountError.prototype);const m=typeof p=="string"?p:this.explanation,y=typeof p=="object"?p:v;this.message=`${this.name} (${this.code}): ${m}`,this.originalError=y}}e.NoValidAccountError=n;class r extends Be{constructor(p,v){super(p,v),this.causes=[],this.code=31204,this.description="Invalid JWT token",this.explanation="",this.name="InvalidJWTTokenError",this.solutions=[],Object.setPrototypeOf(this,e.InvalidJWTTokenError.prototype);const m=typeof p=="string"?p:this.explanation,y=typeof p=="object"?p:v;this.message=`${this.name} (${this.code}): ${m}`,this.originalError=y}}e.InvalidJWTTokenError=r;class i extends Be{constructor(p,v){super(p,v),this.causes=[],this.code=31205,this.description="JWT token expired",this.explanation="",this.name="JWTTokenExpiredError",this.solutions=[],Object.setPrototypeOf(this,e.JWTTokenExpiredError.prototype);const m=typeof p=="string"?p:this.explanation,y=typeof p=="object"?p:v;this.message=`${this.name} (${this.code}): ${m}`,this.originalError=y}}e.JWTTokenExpiredError=i;class s extends Be{constructor(p,v){super(p,v),this.causes=["Rate limit exceeded."],this.code=31206,this.description="Rate exceeded authorized limit.",this.explanation="The request performed exceeds the authorized limit.",this.name="RateExceededError",this.solutions=["Ensure message send rate does not exceed authorized limits."],Object.setPrototypeOf(this,e.RateExceededError.prototype);const m=typeof p=="string"?p:this.explanation,y=typeof p=="object"?p:v;this.message=`${this.name} (${this.code}): ${m}`,this.originalError=y}}e.RateExceededError=s;class a extends Be{constructor(p,v){super(p,v),this.causes=[],this.code=31207,this.description="JWT token expiration too long",this.explanation="",this.name="JWTTokenExpirationTooLongError",this.solutions=[],Object.setPrototypeOf(this,e.JWTTokenExpirationTooLongError.prototype);const m=typeof p=="string"?p:this.explanation,y=typeof p=="object"?p:v;this.message=`${this.name} (${this.code}): ${m}`,this.originalError=y}}e.JWTTokenExpirationTooLongError=a;class l extends Be{constructor(p,v){super(p,v),this.causes=[],this.code=31209,this.description="Reconnect attempt is not authorized.",this.explanation="",this.name="ReconnectAttemptError",this.solutions=[],Object.setPrototypeOf(this,e.ReconnectAttemptError.prototype);const m=typeof p=="string"?p:this.explanation,y=typeof p=="object"?p:v;this.message=`${this.name} (${this.code}): ${m}`,this.originalError=y}}e.ReconnectAttemptError=l;class u extends Be{constructor(p,v){super(p,v),this.causes=["The Call Message Event Type is invalid and is not understood by Twilio Voice."],this.code=31210,this.description="Call Message Event Type is invalid.",this.explanation="The Call Message Event Type is invalid and is not understood by Twilio Voice.",this.name="CallMessageEventTypeInvalidError",this.solutions=["Ensure the Call Message Event Type is Valid and understood by Twilio Voice and try again."],Object.setPrototypeOf(this,e.CallMessageEventTypeInvalidError.prototype);const m=typeof p=="string"?p:this.explanation,y=typeof p=="object"?p:v;this.message=`${this.name} (${this.code}): ${m}`,this.originalError=y}}e.CallMessageEventTypeInvalidError=u;class f extends Be{constructor(p,v){super(p,v),this.causes=["The payload size of Call Message Event exceeds the authorized limit."],this.code=31212,this.description="Call Message Event Payload size exceeded authorized limit.",this.explanation="The request performed to send a Call Message Event exceeds the payload size authorized limit",this.name="PayloadSizeExceededError",this.solutions=["Reduce payload size of Call Message Event to be within the authorized limit and try again."],Object.setPrototypeOf(this,e.PayloadSizeExceededError.prototype);const m=typeof p=="string"?p:this.explanation,y=typeof p=="object"?p:v;this.message=`${this.name} (${this.code}): ${m}`,this.originalError=y}}e.PayloadSizeExceededError=f})(rn||(rn={}));var $u;(function(e){class t extends Be{constructor(i,s){super(i,s),this.causes=["The user denied the getUserMedia request.","The browser denied the getUserMedia request."],this.code=31401,this.description="UserMedia Permission Denied Error",this.explanation="The browser or end-user denied permissions to user media. Therefore we were unable to acquire input audio.",this.name="PermissionDeniedError",this.solutions=["The user should accept the request next time prompted. If the browser saved the deny, the user should change that permission in their browser.","The user should to verify that the browser has permission to access the microphone at this address."],Object.setPrototypeOf(this,e.PermissionDeniedError.prototype);const a=typeof i=="string"?i:this.explanation,l=typeof i=="object"?i:s;this.message=`${this.name} (${this.code}): ${a}`,this.originalError=l}}e.PermissionDeniedError=t;class n extends Be{constructor(i,s){super(i,s),this.causes=["NotFoundError - The deviceID specified was not found.","The getUserMedia constraints were overconstrained and no devices matched."],this.code=31402,this.description="UserMedia Acquisition Failed Error",this.explanation="The browser and end-user allowed permissions, however getting the media failed. Usually this is due to bad constraints, but can sometimes fail due to browser, OS or hardware issues.",this.name="AcquisitionFailedError",this.solutions=["Ensure the deviceID being specified exists.","Try acquiring media with fewer constraints."],Object.setPrototypeOf(this,e.AcquisitionFailedError.prototype);const a=typeof i=="string"?i:this.explanation,l=typeof i=="object"?i:s;this.message=`${this.name} (${this.code}): ${a}`,this.originalError=l}}e.AcquisitionFailedError=n})($u||($u={}));var Kr;(function(e){class t extends Be{constructor(i,s){super(i,s),this.causes=[],this.code=53e3,this.description="Signaling connection error",this.explanation="Raised whenever a signaling connection error occurs that is not covered by a more specific error code.",this.name="ConnectionError",this.solutions=[],Object.setPrototypeOf(this,e.ConnectionError.prototype);const a=typeof i=="string"?i:this.explanation,l=typeof i=="object"?i:s;this.message=`${this.name} (${this.code}): ${a}`,this.originalError=l}}e.ConnectionError=t;class n extends Be{constructor(i,s){super(i,s),this.causes=["The device running your application lost its Internet connection."],this.code=53001,this.description="Signaling connection disconnected",this.explanation="Raised whenever the signaling connection is unexpectedly disconnected.",this.name="ConnectionDisconnected",this.solutions=["Ensure the device running your application has access to a stable Internet connection."],Object.setPrototypeOf(this,e.ConnectionDisconnected.prototype);const a=typeof i=="string"?i:this.explanation,l=typeof i=="object"?i:s;this.message=`${this.name} (${this.code}): ${a}`,this.originalError=l}}e.ConnectionDisconnected=n})(Kr||(Kr={}));var Di;(function(e){class t extends Be{constructor(s,a){super(s,a),this.causes=["The Client may not be using a supported WebRTC implementation.","The Client may not have the necessary resources to create or apply a new media description."],this.code=53400,this.description="Client is unable to create or apply a local media description",this.explanation="Raised whenever a Client is unable to create or apply a local media description.",this.name="ClientLocalDescFailed",this.solutions=["If you are experiencing this error using the JavaScript SDK, ensure you are running it with a supported WebRTC implementation."],Object.setPrototypeOf(this,e.ClientLocalDescFailed.prototype);const l=typeof s=="string"?s:this.explanation,u=typeof s=="object"?s:a;this.message=`${this.name} (${this.code}): ${l}`,this.originalError=u}}e.ClientLocalDescFailed=t;class n extends Be{constructor(s,a){super(s,a),this.causes=["The Client may not be using a supported WebRTC implementation.","The Client may be connecting peer-to-peer with another Participant that is not using a supported WebRTC implementation.","The Client may not have the necessary resources to apply a new media description."],this.code=53402,this.description="Client is unable to apply a remote media description",this.explanation="Raised whenever the Client receives a remote media description but is unable to apply it.",this.name="ClientRemoteDescFailed",this.solutions=["If you are experiencing this error using the JavaScript SDK, ensure you are running it with a supported WebRTC implementation."],Object.setPrototypeOf(this,e.ClientRemoteDescFailed.prototype);const l=typeof s=="string"?s:this.explanation,u=typeof s=="object"?s:a;this.message=`${this.name} (${this.code}): ${l}`,this.originalError=u}}e.ClientRemoteDescFailed=n;class r extends Be{constructor(s,a){super(s,a),this.causes=["The Client was unable to establish a media connection.","A media connection which was active failed liveliness checks."],this.code=53405,this.description="Media connection failed",this.explanation="Raised by the Client or Server whenever a media connection fails.",this.name="ConnectionError",this.solutions=["If the problem persists, try connecting to another region.","Check your Client's network connectivity.","If you've provided custom ICE Servers then ensure that the URLs and credentials are valid."],Object.setPrototypeOf(this,e.ConnectionError.prototype);const l=typeof s=="string"?s:this.explanation,u=typeof s=="object"?s:a;this.message=`${this.name} (${this.code}): ${l}`,this.originalError=u}}e.ConnectionError=r})(Di||(Di={}));const u0=new Map([[20101,rn.AccessTokenInvalid],[20104,rn.AccessTokenExpired],[20151,rn.AuthenticationFailed],[31202,iw.AccessTokenSignatureValidationFailed],[31400,Wa.BadRequest],[31404,Wa.NotFound],[31480,Wa.TemporarilyUnavailable],[31486,Wa.BusyHere],[31603,sw.Decline],[31e3,xn.UnknownError],[31001,xn.ApplicationNotFoundError],[31002,xn.ConnectionDeclinedError],[31003,xn.ConnectionTimeoutError],[31005,xn.ConnectionError],[31008,xn.CallCancelledError],[31009,xn.TransportError],[31100,Zi.MalformedRequestError],[31101,Zi.MissingParameterArrayError],[31102,Zi.AuthorizationTokenMissingError],[31103,Zi.MaxParameterLengthExceededError],[31104,Zi.InvalidBridgeTokenError],[31105,Zi.InvalidClientNameError],[31107,Zi.ReconnectParameterInvalidError],[31201,rn.AuthorizationError],[31203,rn.NoValidAccountError],[31204,rn.InvalidJWTTokenError],[31205,rn.JWTTokenExpiredError],[31206,rn.RateExceededError],[31207,rn.JWTTokenExpirationTooLongError],[31209,rn.ReconnectAttemptError],[31210,rn.CallMessageEventTypeInvalidError],[31212,rn.PayloadSizeExceededError],[31401,$u.PermissionDeniedError],[31402,$u.AcquisitionFailedError],[53e3,Kr.ConnectionError],[53001,Kr.ConnectionDisconnected],[53400,Di.ClientLocalDescFailed],[53402,Di.ClientRemoteDescFailed],[53405,Di.ConnectionError]]);Object.freeze(u0);const z8=new Set([31001,31002,31003,31101,31102,31103,31104,31105,31107,31201,31202,31203,31204,31205,31207,31404,31480,31486,31603]);function aw(e,t){if(!(typeof t!="number"||!V8(t)||!(e||!z8.has(t))))return H8(t)}class gt extends Error{constructor(t){super(t),this.name="InvalidArgumentError"}}class ui extends Error{constructor(t){super(t),this.name="InvalidStateError"}}class _n extends Error{constructor(t){super(t),this.name="NotSupportedError"}}function H8(e){const t=u0.get(e);if(!t)throw new gt(`Error code ${e} not found`);return t}function V8(e){return u0.has(e)}const _A="@twilio/voice-sdk",vu="2.16.0",l0="https://sdk.twilio.com/js/client/sounds/releases/1.0.0",q8=`${l0}/cowbell.mp3?cache=${vu}`,G8=2e4;class on{static getLogLevelInstance(t){if(!on.loglevelInstance)try{on.loglevelInstance=(t&&t.LogLevelModule?t.LogLevelModule:W8).getLogger(_A)}catch{console.warn("Cannot create custom logger"),on.loglevelInstance=console}return on.loglevelInstance}constructor(t,n){this._log=on.getLogLevelInstance(n),this._prefix=`[TwilioVoice][${t}]`}debug(...t){this._log.debug(this._prefix,...t)}error(...t){this._log.error(this._prefix,...t)}info(...t){this._log.info(this._prefix,...t)}setDefaultLevel(t){this._log.setDefaultLevel?this._log.setDefaultLevel(t):console.warn("Logger cannot setDefaultLevel")}warn(...t){this._log.warn(this._prefix,...t)}}on.levels=no.levels;on.getLogLevelInstance();const K8=`${l0}/outgoing.mp3`;class ok{constructor(t,n,r,i){this._name=t,this._availableDevices=n,this._beforeChange=r,this._isSupported=i,this._activeDevices=new Set,this._log=new on("OutputDeviceCollection")}delete(t){this._log.debug(".delete",t);const n=!!this._activeDevices.delete(t),r=this._availableDevices.get("default")||Array.from(this._availableDevices.values())[0];!this._activeDevices.size&&r&&this._activeDevices.add(r);const i=Array.from(this._activeDevices.values()).map(s=>s.deviceId);return this._beforeChange(this._name,i),!!n}get(){return this._activeDevices}set(t){if(this._log.debug(".set",t),!this._isSupported)return Promise.reject(new _n("This browser does not support audio output selection"));const n=Array.isArray(t)?t:[t];if(!n.length)return Promise.reject(new gt("Must specify at least one device to set"));const r=[],i=n.map(s=>{const a=this._availableDevices.get(s);return a||r.push(s),a});return r.length?Promise.reject(new gt(`Devices not found: ${r.join(", ")}`)):new Promise(s=>{s(this._beforeChange(this._name,n))}).then(()=>{this._activeDevices.clear(),i.forEach(this._activeDevices.add,this._activeDevices)})}test(t=K8){return this._isSupported?this._activeDevices.size?Promise.all(Array.from(this._activeDevices).map(n=>{let r;return new Promise(i=>{r=new Audio(t),r.oncanplay=i}).then(()=>r.setSinkId(n.deviceId).then(()=>r.play()))})):Promise.reject(new ui("No active output devices to test")):Promise.reject(new _n("This browser does not support audio output selection"))}}class Q8{constructor(t){Object.defineProperties(this,{deviceId:{get(){return t.deviceId}},groupId:{get(){return t.groupId}},kind:{get(){return t.kind}},label:{get(){return t.label}}})}}function mp(e){if(!(this instanceof mp))return new mp(e);this.message=e}mp.prototype.toString=function(){return`Twilio.Exception: ${this.message}`};function vc(e){return e&&e.length?e.reduce((t,n)=>t+n)/e.length:0}function c0(e,t,n){n=n||(i=>i);const r=new Set(t.map(n));return e.filter(i=>!r.has(n(i)))}function wA(e){return!!e.userAgent.match("Electron")}function f0(e,t){const n=!!t.userAgent.match("CriOS"),r=!!t.userAgent.match("HeadlessChrome"),i=typeof e.chrome<"u"&&t.vendor==="Google Inc."&&t.userAgent.indexOf("OPR")===-1&&t.userAgent.indexOf("Edge")===-1;return n||wA(t)||i||r}function J8(e){return e=e||(typeof window>"u"?global.navigator:window.navigator),!!e&&typeof e.userAgent=="string"&&/firefox|fxios/i.test(e.userAgent)}function Yp(e){return e=e||(typeof window>"u"?global.navigator:window.navigator),!!e&&typeof e.userAgent=="string"&&/edge\/\d+/i.test(e.userAgent)}function Y8(e){return!!e.vendor&&e.vendor.indexOf("Apple")!==-1&&e.userAgent&&e.userAgent.indexOf("CriOS")===-1&&e.userAgent.indexOf("FxiOS")===-1}function SA(e){return e?e.split("&").reduce((t,n)=>{const r=n.split("="),i=r[0],s=decodeURIComponent((r[1]||"").replace(/\+/g,"%20"));return i&&(t[i]=s),t},{}):""}function ow(e,t){const n=e instanceof Map||e instanceof Set?Array.from(e.values()):e;return t=t||(r=>r),n.reduce((r,i)=>{const s=t(i);return r.concat(s)},[])}function uw(e,t,n){return new Promise((r,i)=>{function s(){e.removeListener(n,a),r()}function a(){e.removeListener(t,s),i()}e.once(t,s),e.once(n,a)})}function bA(e,t){const n=t.map(r=>"audio/"+r.toLowerCase());return e.sort((r,i)=>{const s=n.indexOf(r.mimeType.toLowerCase()),a=n.indexOf(i.mimeType.toLowerCase()),l=s>=0?s:Number.MAX_VALUE,u=a>=0?a:Number.MAX_VALUE;return l-u})}const X8=mp,TA=Object.freeze(Object.defineProperty({__proto__:null,Exception:X8,average:vc,difference:c0,flatMap:ow,isChrome:f0,isElectron:wA,isFirefox:J8,isLegacyEdge:Yp,isSafari:Y8,promisifyEvents:uw,queryToJson:SA,sortByMimeTypes:bA},Symbol.toStringTag,{value:"Module"})),Z8={audioinput:"Audio Input",audiooutput:"Audio Output"};class lw extends Yr.EventEmitter{get audioConstraints(){return this._audioConstraints}get inputDevice(){return this._inputDevice}get inputStream(){return this._processedStream||this._selectedInputDeviceStream}get processedStream(){return this._processedStream}constructor(t,n,r){super(),this.availableInputDevices=new Map,this.availableOutputDevices=new Map,this._audioConstraints=null,this._defaultInputDeviceStream=null,this._enabledSounds={[Te.SoundName.Disconnect]:!0,[Te.SoundName.Incoming]:!0,[Te.SoundName.Outgoing]:!0},this._inputDevice=null,this._inputDevicePromise=null,this._isPollingInputVolume=!1,this._log=new on("AudioHelper"),this._processedStream=null,this._selectedInputDeviceStream=null,this._unknownDeviceIndexes={audioinput:{},audiooutput:{}},this._updateAvailableDevices=()=>!this._mediaDevices||!this._enumerateDevices?Promise.reject("Enumeration not supported"):this._enumerateDevices().then(l=>{this._updateDevices(l.filter(f=>f.kind==="audiooutput"),this.availableOutputDevices,this._removeLostOutput),this._updateDevices(l.filter(f=>f.kind==="audioinput"),this.availableInputDevices,this._removeLostInput);const u=this.availableOutputDevices.get("default")||Array.from(this.availableOutputDevices.values())[0];[this.speakerDevices,this.ringtoneDevices].forEach(f=>{!f.get().size&&this.availableOutputDevices.size&&this.isOutputSelectionSupported&&f.set(u.deviceId).catch(d=>{this._log.warn(`Unable to set audio output devices. ${d}`)})})}),this._removeLostInput=l=>{if(!this.inputDevice||this.inputDevice.deviceId!==l.deviceId)return!1;this._destroyProcessedStream(),this._replaceStream(null),this._inputDevice=null,this._maybeStopPollingVolume();const u=this.availableInputDevices.get("default")||Array.from(this.availableInputDevices.values())[0];return u&&this.setInputDevice(u.deviceId),!0},this._removeLostOutput=l=>{const u=this.speakerDevices.delete(l),f=this.ringtoneDevices.delete(l);return u||f},r=Object.assign({AudioContext:typeof AudioContext<"u"&&AudioContext,setSinkId:typeof HTMLAudioElement<"u"&&HTMLAudioElement.prototype.setSinkId},r),this._beforeSetInputDevice=r.beforeSetInputDevice||(()=>Promise.resolve()),this._updateUserOptions(r),this._audioProcessorEventObserver=r.audioProcessorEventObserver,this._mediaDevices=r.mediaDevices||navigator.mediaDevices,this._onActiveInputChanged=n,this._enumerateDevices=typeof r.enumerateDevices=="function"?r.enumerateDevices:this._mediaDevices&&this._mediaDevices.enumerateDevices.bind(this._mediaDevices);const i=!!(r.AudioContext||r.audioContext),s=!!this._enumerateDevices;r.enabledSounds&&(this._enabledSounds=r.enabledSounds);const a=typeof r.setSinkId=="function";this.isOutputSelectionSupported=s&&a,this.isVolumeSupported=i,this.isVolumeSupported&&(this._audioContext=r.audioContext||r.AudioContext&&new r.AudioContext,this._audioContext&&(this._inputVolumeAnalyser=this._audioContext.createAnalyser(),this._inputVolumeAnalyser.fftSize=32,this._inputVolumeAnalyser.smoothingTimeConstant=.3)),this.ringtoneDevices=new ok("ringtone",this.availableOutputDevices,t,this.isOutputSelectionSupported),this.speakerDevices=new ok("speaker",this.availableOutputDevices,t,this.isOutputSelectionSupported),this.addListener("newListener",l=>{l==="inputVolume"&&this._maybeStartPollingVolume()}),this.addListener("removeListener",l=>{l==="inputVolume"&&this._maybeStopPollingVolume()}),this.once("newListener",()=>{this.isOutputSelectionSupported||this._log.warn("Warning: This browser does not support audio output selection."),this.isVolumeSupported||this._log.warn("Warning: This browser does not support Twilio's volume indicator feature.")}),s&&this._initializeEnumeration(),navigator&&navigator.permissions&&typeof navigator.permissions.query=="function"?navigator.permissions.query({name:"microphone"}).then(l=>{if(l.state!=="granted"){const u=()=>{this._updateAvailableDevices(),this._stopMicrophonePermissionListener()};l.addEventListener("change",u),this._microphonePermissionStatus=l,this._onMicrophonePermissionStatusChanged=u}}).catch(l=>this._log.warn(`Warning: unable to listen for microphone permission changes. ${l}`)):this._log.warn("Warning: current browser does not support permissions API.")}_destroy(){this._stopDefaultInputDeviceStream(),this._stopSelectedInputDeviceStream(),this._destroyProcessedStream(),this._maybeStopPollingVolume(),this.removeAllListeners(),this._stopMicrophonePermissionListener(),this._unbind()}_getInputDevicePromise(){return this._inputDevicePromise}_maybeStartPollingVolume(){if(!this.isVolumeSupported||!this.inputStream||(this._updateVolumeSource(),this._isPollingInputVolume||!this._inputVolumeAnalyser))return;const t=this._inputVolumeAnalyser.frequencyBinCount,n=new Uint8Array(t);this._isPollingInputVolume=!0;const r=()=>{if(this._isPollingInputVolume){if(this._inputVolumeAnalyser){this._inputVolumeAnalyser.getByteFrequencyData(n);const i=vc(n);this.emit("inputVolume",i/255)}requestAnimationFrame(r)}};requestAnimationFrame(r)}_maybeStopPollingVolume(){this.isVolumeSupported&&(!this._isPollingInputVolume||this.inputStream&&this.listenerCount("inputVolume")||(this._inputVolumeSource&&(this._inputVolumeSource.disconnect(),delete this._inputVolumeSource),this._isPollingInputVolume=!1))}_openDefaultDeviceWithConstraints(t){return this._log.info("Opening default device with constraints",t),this._getUserMedia(t).then(n=>(this._log.info("Opened default device. Updating available devices."),this._updateAvailableDevices().catch(r=>{this._log.warn("Unable to updateAvailableDevices after gUM call",r)}),this._defaultInputDeviceStream=n,this._maybeCreateProcessedStream(n)))}_stopDefaultInputDeviceStream(){this._defaultInputDeviceStream&&(this._log.info("stopping default device stream"),this._defaultInputDeviceStream.getTracks().forEach(t=>t.stop()),this._defaultInputDeviceStream=null,this._destroyProcessedStream())}_unbind(){var t;!((t=this._mediaDevices)===null||t===void 0)&&t.removeEventListener&&this._mediaDevices.removeEventListener("devicechange",this._updateAvailableDevices)}_updateUserOptions(t){typeof t.enumerateDevices=="function"&&(this._enumerateDevices=t.enumerateDevices),typeof t.getUserMedia=="function"&&(this._getUserMedia=t.getUserMedia)}addProcessor(t){if(this._log.debug(".addProcessor"),this._processor)throw new _n("Adding multiple AudioProcessors is not supported at this time.");if(typeof t!="object"||t===null)throw new gt("Missing AudioProcessor argument.");if(typeof t.createProcessedStream!="function")throw new gt("Missing createProcessedStream() method.");if(typeof t.destroyProcessedStream!="function")throw new gt("Missing destroyProcessedStream() method.");return this._processor=t,this._audioProcessorEventObserver.emit("add"),this._restartStreams()}disconnect(t){return this._log.debug(".disconnect",t),this._maybeEnableSound(Te.SoundName.Disconnect,t)}incoming(t){return this._log.debug(".incoming",t),this._maybeEnableSound(Te.SoundName.Incoming,t)}outgoing(t){return this._log.debug(".outgoing",t),this._maybeEnableSound(Te.SoundName.Outgoing,t)}removeProcessor(t){if(this._log.debug(".removeProcessor"),typeof t!="object"||t===null)throw new gt("Missing AudioProcessor argument.");if(this._processor!==t)throw new gt("Cannot remove an AudioProcessor that has not been previously added.");return this._destroyProcessedStream(),this._processor=null,this._audioProcessorEventObserver.emit("remove"),this._restartStreams()}setAudioConstraints(t){return this._log.debug(".setAudioConstraints",t),this._audioConstraints=Object.assign({},t),delete this._audioConstraints.deviceId,this.inputDevice?this._setInputDevice(this.inputDevice.deviceId,!0):Promise.resolve()}setInputDevice(t){return this._log.debug(".setInputDevice",t),this._setInputDevice(t,!1)}unsetAudioConstraints(){return this._log.debug(".unsetAudioConstraints"),this._audioConstraints=null,this.inputDevice?this._setInputDevice(this.inputDevice.deviceId,!0):Promise.resolve()}unsetInputDevice(){return this._log.debug(".unsetInputDevice",this.inputDevice),this.inputDevice?(this._destroyProcessedStream(),this._onActiveInputChanged(null).then(()=>{this._replaceStream(null),this._inputDevice=null,this._maybeStopPollingVolume()})):Promise.resolve()}_destroyProcessedStream(){if(this._processor&&this._processedStream){this._log.info("destroying processed stream");const t=this._processedStream;this._processedStream.getTracks().forEach(n=>n.stop()),this._processedStream=null,this._processor.destroyProcessedStream(t),this._audioProcessorEventObserver.emit("destroy")}}_getUnknownDeviceIndex(t){const n=t.deviceId,r=t.kind;let i=this._unknownDeviceIndexes[r][n];return i||(i=Object.keys(this._unknownDeviceIndexes[r]).length+1,this._unknownDeviceIndexes[r][n]=i),i}_initializeEnumeration(){if(!this._mediaDevices||!this._enumerateDevices)throw new _n("Enumeration is not supported");this._mediaDevices.addEventListener&&this._mediaDevices.addEventListener("devicechange",this._updateAvailableDevices),this._updateAvailableDevices().then(()=>{this.isOutputSelectionSupported&&Promise.all([this.speakerDevices.set("default"),this.ringtoneDevices.set("default")]).catch(t=>{this._log.warn(`Warning: Unable to set audio output devices. ${t}`)})})}_maybeCreateProcessedStream(t){return this._processor?(this._log.info("Creating processed stream"),this._processor.createProcessedStream(t).then(n=>(this._processedStream=n,this._audioProcessorEventObserver.emit("create"),this._processedStream))):Promise.resolve(t)}_maybeEnableSound(t,n){return typeof n<"u"&&(this._enabledSounds[t]=n),this._enabledSounds[t]}_replaceStream(t){this._log.info("Replacing with new stream."),this._selectedInputDeviceStream&&(this._log.info("Old stream detected. Stopping tracks."),this._stopSelectedInputDeviceStream()),this._selectedInputDeviceStream=t}_restartStreams(){if(this.inputDevice&&this._selectedInputDeviceStream)return this._log.info("Restarting selected input device"),this._setInputDevice(this.inputDevice.deviceId,!0);if(this._defaultInputDeviceStream){const t=this.availableInputDevices.get("default")||Array.from(this.availableInputDevices.values())[0];return this._log.info("Restarting default input device, now becoming selected."),this._setInputDevice(t.deviceId,!0)}return Promise.resolve()}_setInputDevice(t,n){return Bn(this,void 0,void 0,function*(){const r=()=>Bn(this,void 0,void 0,function*(){if(yield this._beforeSetInputDevice(),typeof t!="string")return Promise.reject(new gt("Must specify the device to set"));const i=this.availableInputDevices.get(t);if(!i)return Promise.reject(new gt(`Device not found: ${t}`));if(this._log.info("Setting input device. ID: "+t),this._inputDevice&&this._inputDevice.deviceId===t&&this._selectedInputDeviceStream){if(!n)return Promise.resolve();this._log.info("Same track detected on setInputDevice, stopping old tracks."),this._stopSelectedInputDeviceStream()}this._stopDefaultInputDeviceStream();const s={audio:Object.assign({deviceId:{exact:t}},this.audioConstraints)};return this._log.info("setInputDevice: getting new tracks."),this._getUserMedia(s).then(a=>(this._destroyProcessedStream(),this._maybeCreateProcessedStream(a).then(l=>(this._log.info("setInputDevice: invoking _onActiveInputChanged."),this._onActiveInputChanged(l).then(()=>{this._replaceStream(a),this._inputDevice=i,this._maybeStartPollingVolume()})))))});return this._inputDevicePromise=r().finally(()=>{this._inputDevicePromise=null})})}_stopMicrophonePermissionListener(){var t;!((t=this._microphonePermissionStatus)===null||t===void 0)&&t.removeEventListener&&this._microphonePermissionStatus.removeEventListener("change",this._onMicrophonePermissionStatusChanged)}_stopSelectedInputDeviceStream(){this._selectedInputDeviceStream&&(this._log.info("Stopping selected device stream"),this._selectedInputDeviceStream.getTracks().forEach(t=>t.stop()))}_updateDevices(t,n,r){const i=t.map(f=>f.deviceId),s=Array.from(n.values()).map(f=>f.deviceId),a=[],l=c0(s,i);l.forEach(f=>{const d=n.get(f);d&&(n.delete(f),r(d)&&a.push(d))});let u=!1;if(t.forEach(f=>{const d=n.get(f.deviceId),p=this._wrapMediaDeviceInfo(f);(!d||d.label!==p.label)&&(n.set(f.deviceId,p),u=!0)}),u||l.length){const f="default",d=this.inputDevice&&this.inputDevice.deviceId===f,p=this._defaultInputDeviceStream&&this.availableInputDevices.get(f);(d||p)&&(this._log.warn("Calling getUserMedia after device change to ensure that the           tracks of the active device (default) have not gone stale."),setTimeout(()=>{this._setInputDevice(f,!0)},0)),this._log.debug("#deviceChange",a),this.emit("deviceChange",a)}}_updateVolumeSource(){if(!(!this.inputStream||!this._audioContext||!this._inputVolumeAnalyser)){this._inputVolumeSource&&this._inputVolumeSource.disconnect();try{this._inputVolumeSource=this._audioContext.createMediaStreamSource(this.inputStream),this._inputVolumeSource.connect(this._inputVolumeAnalyser)}catch(t){this._log.warn("Unable to update volume source",t),delete this._inputVolumeSource}}}_wrapMediaDeviceInfo(t){const n={deviceId:t.deviceId,groupId:t.groupId,kind:t.kind,label:t.label};if(!n.label)if(n.deviceId==="default")n.label="Default";else{const r=this._getUnknownDeviceIndex(t);n.label=`Unknown ${Z8[n.kind]} Device ${r}`}return new Q8(n)}}lw||(lw={});var eW=lw;class tW extends Yr.EventEmitter{constructor(){super(),this._log=new on("AudioProcessorEventObserver"),this._log.info("Creating AudioProcessorEventObserver instance"),this.on("enabled",()=>this._reEmitEvent("enabled")),this.on("add",()=>this._reEmitEvent("add")),this.on("remove",()=>this._reEmitEvent("remove")),this.on("create",()=>this._reEmitEvent("create-processed-stream")),this.on("destroy",()=>this._reEmitEvent("destroy-processed-stream"))}destroy(){this.removeAllListeners()}_reEmitEvent(t){this._log.info(`AudioProcessor:${t}`),this.emit("event",{name:t,group:"audio-processor"})}}const nW={dtmf0:[1360,960],dtmf1:[1230,720],dtmf2:[1360,720],dtmf3:[1480,720],dtmf4:[1230,790],dtmf5:[1360,790],dtmf6:[1480,790],dtmf7:[1230,870],dtmf8:[1360,870],dtmf9:[1480,870],dtmfh:[1480,960],dtmfs:[1230,960]};class rW{constructor(t){this._context=t,this._gainNodes=[],this._gainNodes=[this._context.createGain(),this._context.createGain()],this._gainNodes.forEach(n=>{n.connect(this._context.destination),n.gain.value=.1,this._gainNodes.push(n)})}cleanup(){this._gainNodes.forEach(t=>{t.disconnect()})}play(t){const n=nW[t];if(!n)throw new gt("Invalid DTMF sound name");[this._context.createOscillator(),this._context.createOscillator()].forEach((i,s)=>{i.type="sine",i.frequency.value=n[s],i.connect(this._gainNodes[s]),i.start(),i.stop(this._context.currentTime+.1),i.addEventListener("ended",()=>i.disconnect())})}}function iW(e,t,n){const r=JSON.stringify(t.body||{}),i=new Headers;t.headers=t.headers||[],Object.entries(t.headers).forEach(([s,a])=>i.append(s,a)),fetch(t.url,{body:r,headers:i,method:e}).then(s=>s.text(),n).then(s=>n(null,s),n)}const d0=iW;d0.get=function(t,n){return new this("GET",t,n)};d0.post=function(t,n){return new this("POST",t,n)};class zn extends Yr.EventEmitter{constructor(t,n,r){if(super(),!(this instanceof zn))return new zn(t,n,r);r=Object.assign({defaultPayload(){return{}}},r);let i=r.defaultPayload;typeof i!="function"&&(i=()=>Object.assign({},r.defaultPayload));let s=!0;const a=Object.assign({app_name:void 0,app_version:void 0},r.metadata);Object.defineProperties(this,{_defaultPayload:{value:i},_host:{value:r.host,writable:!0},_isEnabled:{get(){return s},set(l){s=l}},_log:{value:new on("EventPublisher")},_request:{value:r.request||d0,writable:!0},_token:{value:n,writable:!0},isEnabled:{enumerable:!0,get(){return s}},metadata:{enumerable:!0,get(){return a}},productName:{enumerable:!0,value:t},token:{enumerable:!0,get(){return this._token}}})}}zn.prototype._post=function(t,n,r,i,s,a,l){if(!this.isEnabled&&!l||!this._host)return this._log.debug("Publishing cancelled",JSON.stringify({isEnabled:this.isEnabled,force:l,host:this._host})),Promise.resolve();if(!a||(!a.parameters||!a.parameters.CallSid)&&!a.outboundConnectionId)return a?this._log.debug("Publishing cancelled. Missing connection info",JSON.stringify({outboundConnectionId:a.outboundConnectionId,parameters:a.parameters})):this._log.debug("Publishing cancelled. Missing connection object"),Promise.resolve();const u={group:r,level:n.toUpperCase(),name:i,payload:s&&s.forEach?s.slice(0):Object.assign(this._defaultPayload(a),s),payload_type:"application/json",private:!1,publisher:this.productName,timestamp:new Date().toISOString()};this.metadata&&(u.publisher_metadata=this.metadata),t==="EndpointEvents"&&this._log.debug("Publishing insights",JSON.stringify({endpointName:t,event:u,force:l,host:this._host}));const f={body:u,headers:{"Content-Type":"application/json","X-Twilio-Token":this.token},url:`https://${this._host}/v4/${t}`};return new Promise((d,p)=>{this._request.post(f,v=>{v?(this.emit("error",v),p(v)):d()})}).catch(d=>{this._log.error(`Unable to post ${r} ${i} event to Insights. Received error: ${d}`)})};zn.prototype.post=function(t,n,r,i,s,a){return this._post("EndpointEvents",t,n,r,i,s,a)};zn.prototype.debug=function(t,n,r,i){return this.post("debug",t,n,r,i)};zn.prototype.info=function(t,n,r,i){return this.post("info",t,n,r,i)};zn.prototype.warn=function(t,n,r,i){return this.post("warning",t,n,r,i)};zn.prototype.error=function(t,n,r,i){return this.post("error",t,n,r,i)};zn.prototype.postMetrics=function(t,n,r,i,s){return new Promise(a=>{const l=r.map(sW).map(u=>Object.assign(u,i));a(this._post("EndpointMetrics","info",t,n,l,s))})};zn.prototype.setHost=function(t){this._host=t};zn.prototype.setToken=function(t){this._token=t};zn.prototype.enable=function(){this._isEnabled=!0};zn.prototype.disable=function(){this._isEnabled=!1};function sW(e){return{audio_codec:e.codecName,audio_level_in:e.audioInputLevel,audio_level_out:e.audioOutputLevel,bytes_received:e.bytesReceived,bytes_sent:e.bytesSent,call_volume_input:e.inputVolume,call_volume_output:e.outputVolume,jitter:e.jitter,mos:e.mos&&Math.round(e.mos*100)/100,packets_lost:e.packetsLost,packets_lost_fraction:e.packetsLostFraction&&Math.round(e.packetsLostFraction*100)/100,packets_received:e.packetsReceived,rtt:e.rtt,timestamp:new Date(e.timestamp).toISOString(),total_bytes_received:e.totals.bytesReceived,total_bytes_sent:e.totals.bytesSent,total_packets_lost:e.totals.packetsLost,total_packets_received:e.totals.packetsReceived,total_packets_sent:e.totals.packetsSent}}const uk=32767,lk=typeof window<"u"?window.RTCStatsReport:void 0;function mi(e){if(!(this instanceof mi))return new mi(e);const t=this;Object.defineProperties(this,{_map:{value:e},size:{enumerable:!0,get(){return t._map.size}}}),this[Symbol.iterator]=e[Symbol.iterator]}lk&&(mi.prototype=Object.create(lk.prototype),mi.prototype.constructor=mi);["entries","forEach","get","has","keys","values"].forEach(e=>{mi.prototype[e]=function(...t){return this._map[e](...t)}});mi.fromArray=function(t){return new mi(t.reduce((n,r)=>(n.set(r.id,r),n),new Map))};mi.fromRTCStatsResponse=function(t){let n;const r=new Map,i=t.result().reduce((s,a)=>{const l=a.id;switch(a.type){case"googCertificate":s.set(l,fW(a));break;case"datachannel":s.set(l,dW(a));break;case"googCandidatePair":kA(a,"googActiveConnection")&&(n=l),s.set(l,cW(a));break;case"localcandidate":s.set(l,fk(a,!1));break;case"remotecandidate":s.set(l,fk(a,!0));break;case"ssrc":Ga(a,"packetsReceived")?s.set(`rtp-${l}`,uW(a)):s.set(`rtp-${l}`,lW(a)),s.set(`track-${l}`,oW(a)),s.set(`codec-${l}`,aW(a));break;case"googComponent":const u=ck(a);r.set(u.selectedCandidatePairId,l),s.set(l,ck(a));break}return s},new Map);if(n){const s=r.get(n);s&&(i.get(s).dtlsState="connected")}return new mi(i)};function ck(e){return{bytesReceived:void 0,bytesSent:void 0,dtlsState:void 0,id:e.id,localCertificateId:e.stat("localCertificateId"),remoteCertificateId:e.stat("remoteCertificateId"),rtcpTransportStatsId:void 0,selectedCandidatePairId:e.stat("selectedCandidatePairId"),timestamp:Date.parse(e.timestamp),type:"transport"}}function aW(e){return{channels:void 0,clockRate:void 0,id:e.id,implementation:void 0,mimeType:`${e.stat("mediaType")}/${e.stat("googCodecName")}`,payloadType:void 0,sdpFmtpLine:void 0,timestamp:Date.parse(e.timestamp),type:"codec"}}function oW(e){return{audioLevel:Ga(e,"audioOutputLevel")?vt(e,"audioOutputLevel")/uk:(vt(e,"audioInputLevel")||0)/uk,detached:void 0,echoReturnLoss:fw(e,"googEchoCancellationReturnLoss"),echoReturnLossEnhancement:fw(e,"googEchoCancellationReturnLossEnhancement"),ended:void 0,frameHeight:Ga(e,"googFrameHeightReceived")?vt(e,"googFrameHeightReceived"):vt(e,"googFrameHeightSent"),frameWidth:Ga(e,"googFrameWidthReceived")?vt(e,"googFrameWidthReceived"):vt(e,"googFrameWidthSent"),framesCorrupted:void 0,framesDecoded:vt(e,"framesDecoded"),framesDropped:void 0,framesPerSecond:void 0,framesReceived:void 0,framesSent:vt(e,"framesEncoded"),fullFramesLost:void 0,id:e.id,kind:e.stat("mediaType"),partialFramesLost:void 0,remoteSource:void 0,ssrcIds:void 0,timestamp:Date.parse(e.timestamp),trackIdentifier:e.stat("googTrackId"),type:"track"}}function EA(e,t){return{associateStatsId:void 0,codecId:`codec-${e.id}`,firCount:t?vt(e,"googFirsSent"):void 0,id:e.id,isRemote:void 0,mediaType:e.stat("mediaType"),nackCount:t?vt(e,"googNacksSent"):vt(e,"googNacksReceived"),pliCount:t?vt(e,"googPlisSent"):vt(e,"googPlisReceived"),qpSum:vt(e,"qpSum"),sliCount:void 0,ssrc:e.stat("ssrc"),timestamp:Date.parse(e.timestamp),trackId:`track-${e.id}`,transportId:e.stat("transportId")}}function uW(e){const t=EA(e,!0);return Object.assign(t,{burstDiscardCount:void 0,burstDiscardRate:void 0,burstLossCount:void 0,burstLossRate:void 0,burstPacketsDiscarded:void 0,burstPacketsLost:void 0,bytesReceived:vt(e,"bytesReceived"),fractionLost:void 0,framesDecoded:vt(e,"framesDecoded"),gapDiscardRate:void 0,gapLossRate:void 0,jitter:cw(e.stat("googJitterReceived")),packetsDiscarded:void 0,packetsLost:vt(e,"packetsLost"),packetsReceived:vt(e,"packetsReceived"),packetsRepaired:void 0,roundTripTime:cw(e.stat("googRtt")),type:"inbound-rtp"}),t}function lW(e){const t=EA(e,!1);return Object.assign(t,{bytesSent:vt(e,"bytesSent"),framesEncoded:vt(e,"framesEncoded"),packetsSent:vt(e,"packetsSent"),remoteTimestamp:void 0,targetBitrate:void 0,type:"outbound-rtp"}),t}function fk(e,t){return{candidateType:hW(e.stat("candidateType")),deleted:void 0,id:e.id,ip:e.stat("ipAddress"),isRemote:t,port:vt(e,"portNumber"),priority:fw(e,"priority"),protocol:e.stat("transport"),relayProtocol:void 0,timestamp:Date.parse(e.timestamp),transportId:void 0,type:t?"remote-candidate":"local-candidate",url:void 0}}function cW(e){return{availableIncomingBitrate:void 0,availableOutgoingBitrate:void 0,bytesReceived:vt(e,"bytesReceived"),bytesSent:vt(e,"bytesSent"),consentRequestsSent:vt(e,"consentRequestsSent"),currentRoundTripTime:cw(e.stat("googRtt")),id:e.id,lastPacketReceivedTimestamp:void 0,lastPacketSentTimestamp:void 0,localCandidateId:e.stat("localCandidateId"),nominated:void 0,priority:void 0,readable:void 0,remoteCandidateId:e.stat("remoteCandidateId"),requestsReceived:vt(e,"requestsReceived"),requestsSent:vt(e,"requestsSent"),responsesReceived:vt(e,"responsesReceived"),responsesSent:vt(e,"responsesSent"),retransmissionsReceived:void 0,retransmissionsSent:void 0,state:void 0,timestamp:Date.parse(e.timestamp),totalRoundTripTime:void 0,transportId:e.stat("googChannelId"),type:"candidate-pair",writable:kA(e,"googWritable")}}function fW(e){return{base64Certificate:e.stat("googDerBase64"),fingerprint:e.stat("googFingerprint"),fingerprintAlgorithm:e.stat("googFingerprintAlgorithm"),id:e.id,issuerCertificateId:e.stat("googIssuerId"),timestamp:Date.parse(e.timestamp),type:"certificate"}}function dW(e){return{bytesReceived:void 0,bytesSent:void 0,datachannelid:e.stat("datachannelid"),id:e.id,label:e.stat("label"),messagesReceived:void 0,messagesSent:void 0,protocol:e.stat("protocol"),state:e.stat("state"),timestamp:Date.parse(e.timestamp),transportId:e.stat("transportId"),type:"data-channel"}}function cw(e){return isNaN(e)||e===""?void 0:parseInt(e,10)/1e3}function hW(e){switch(e){case"peerreflexive":return"prflx";case"serverreflexive":return"srflx";case"host":case"relay":default:return e}}function vt(e,t){const n=e.stat(t);return Ga(e,t)?parseInt(n,10):void 0}function fw(e,t){const n=e.stat(t);return Ga(e,t)?parseFloat(n):void 0}function kA(e,t){const n=e.stat(t);return Ga(e,t)?n==="true"||n===!0:void 0}function Ga(e,t){const n=e.stat(t);return typeof n<"u"&&n!==""}const pW="PeerConnection is null",vW="WebRTC statistics are unsupported";function Fo(e,t){return typeof e.get=="function"?e.get(t):e.find(n=>n.id===t)}function IA(e){if(!e)return Promise.reject(new gt(pW));if(typeof e.getStats!="function")return Promise.reject(new _n(vW));let t;try{t=e.getStats()}catch{t=new Promise(r=>e.getStats(r)).then(mi.fromRTCStatsResponse)}return t}function gW(e,t){return t=Object.assign({createRTCSample:_W},t),IA(e).then(t.createRTCSample)}function mW(e){return IA(e).then(t=>{const{candidatePairs:n,localCandidates:r,remoteCandidates:i,transport:s}=Array.from(t.values()).reduce((u,f)=>{switch(["candidatePairs","localCandidates","remoteCandidates"].forEach(d=>{u[d]||(u[d]=[])}),f.type){case"candidate-pair":u.candidatePairs.push(f);break;case"local-candidate":u.localCandidates.push(f);break;case"remote-candidate":u.remoteCandidates.push(f);break;case"transport":f.selectedCandidatePairId&&(u.transport=f);break}return u},{}),a=n.find(u=>u.selected||s&&u.id===s.selectedCandidatePairId);let l;return a&&(l={localCandidate:r.find(u=>u.id===a.localCandidateId),remoteCandidate:i.find(u=>u.id===a.remoteCandidateId)}),{iceCandidateStats:[...r,...i],selectedIceCandidatePairStats:l}})}function yW(){}function _W(e){let t=null;const n=new yW;let r;Array.from(e.values()).forEach(u=>{if(u.isRemote)return;const f=u.type.replace("-","");if(r=r||u.timestamp,u.remoteId){const d=Fo(e,u.remoteId);d&&d.roundTripTime&&(n.rtt=d.roundTripTime*1e3)}switch(f){case"inboundrtp":n.timestamp=n.timestamp||u.timestamp,n.jitter=u.jitter*1e3,n.packetsLost=u.packetsLost,n.packetsReceived=u.packetsReceived,n.bytesReceived=u.bytesReceived;break;case"outboundrtp":if(n.timestamp=u.timestamp,n.packetsSent=u.packetsSent,n.bytesSent=u.bytesSent,u.codecId){const d=Fo(e,u.codecId);n.codecName=d?d.mimeType&&d.mimeType.match(/(.*\/)?(.*)/)[2]:u.codecId}break;case"transport":t=u.id;break}}),n.timestamp||(n.timestamp=r);const i=Fo(e,t);if(!i)return n;const s=Fo(e,i.selectedCandidatePairId);if(!s)return n;const a=Fo(e,s.localCandidateId),l=Fo(e,s.remoteCandidateId);return n.rtt||(n.rtt=s&&s.currentRoundTripTime*1e3),Object.assign(n,{localAddress:a&&(a.address||a.ip),remoteAddress:l&&(l.address||l.ip)}),n}class Nt extends Yr.EventEmitter{constructor(t,n){super(),this._hasInsightsErrored=!1,this._log=new on("PreflightTest"),this._networkTiming={},this._options={codecPreferences:[_e.Codec.PCMU,_e.Codec.Opus],edge:"roaming",fakeMicInput:!1,logLevel:"error",signalingTimeoutMs:1e4},this._status=Nt.Status.Connecting,Object.assign(this._options,n),this._samples=[],this._warnings=[],this._startTime=Date.now(),this._initDevice(t,Object.assign(Object.assign({},this._options),{fileInputStream:this._options.fakeMicInput?this._getStreamFromFile():void 0}));const r=["codecPreferences","edge","fakeMicInput","logLevel","signalingTimeoutMs"],i=["audioContext","deviceFactory","fileInputStream","getRTCIceCandidateStatsReport","iceServers","rtcConfiguration"];if(typeof n=="object"){const s=Object.assign({},n);Object.keys(s).forEach(a=>{!r.includes(a)&&!i.includes(a)&&delete s[a],i.includes(a)&&(s[a]=!0)}),this._log.debug(".constructor",JSON.stringify(s))}}stop(){this._log.debug(".stop");const t=new xn.CallCancelledError;this._device?(this._device.once(Te.EventName.Unregistered,()=>this._onFailed(t)),this._device.destroy()):this._onFailed(t)}_emitWarning(t,n,r){const i={name:t,description:n};r&&(i.rtcWarning=r),this._warnings.push(i),this._log.debug(`#${Nt.Events.Warning}`,JSON.stringify(i)),this.emit(Nt.Events.Warning,i)}_getCallQuality(t){return t>4.2?Nt.CallQuality.Excellent:t>=4.1&&t<=4.2?Nt.CallQuality.Great:t>=3.7&&t<=4?Nt.CallQuality.Good:t>=3.1&&t<=3.6?Nt.CallQuality.Fair:Nt.CallQuality.Degraded}_getReport(){var t,n,r;const i=this._getRTCStats(),s={start:this._startTime};this._endTime&&(s.end=this._endTime,s.duration=this._endTime-this._startTime);const a={callSid:this._callSid,edge:this._edge,iceCandidateStats:(n=(t=this._rtcIceCandidateStatsReport)===null||t===void 0?void 0:t.iceCandidateStats)!==null&&n!==void 0?n:[],networkTiming:this._networkTiming,samples:this._samples,selectedEdge:this._options.edge,stats:i,testTiming:s,totals:this._getRTCSampleTotals(),warnings:this._warnings},l=(r=this._rtcIceCandidateStatsReport)===null||r===void 0?void 0:r.selectedIceCandidatePairStats;return l&&(a.selectedIceCandidatePairStats=l,a.isTurnRequired=l.localCandidate.candidateType==="relay"||l.remoteCandidate.candidateType==="relay"),i&&(a.callQuality=this._getCallQuality(i.mos.average)),a}_getRTCSampleTotals(){if(this._latestSample)return Object.assign({},this._latestSample.totals)}_getRTCStats(){const t=this._samples.findIndex(r=>typeof r.mos=="number"&&r.mos>0),n=t>=0?this._samples.slice(t):[];if(!(!n||!n.length))return["jitter","mos","rtt"].reduce((r,i)=>{const s=n.map(a=>a[i]);return Object.assign(Object.assign({},r),{[i]:{average:Number((s.reduce((a,l)=>a+l)/s.length).toPrecision(5)),max:Math.max(...s),min:Math.min(...s)}})},{})}_getStreamFromFile(){const t=this._options.audioContext;if(!t)throw new _n("Cannot fake input audio stream: AudioContext is not supported by this browser.");const n=new Audio(q8);n.addEventListener("canplaythrough",()=>n.play()),typeof n.setAttribute=="function"&&n.setAttribute("crossorigin","anonymous");const r=t.createMediaElementSource(n),i=t.createMediaStreamDestination();return r.connect(i),i.stream}_initDevice(t,n){try{this._device=new(n.deviceFactory||Te)(t,{chunderw:n.chunderw,codecPreferences:n.codecPreferences,edge:n.edge,eventgw:n.eventgw,fileInputStream:n.fileInputStream,logLevel:n.logLevel,preflight:!0}),this._device.once(Te.EventName.Registered,()=>{this._onDeviceRegistered()}),this._device.once(Te.EventName.Error,r=>{this._onDeviceError(r)}),this._device.register()}catch(r){setTimeout(()=>{this._onFailed(r)});return}this._signalingTimeoutTimer=setTimeout(()=>{this._onDeviceError(new Kr.ConnectionError("WebSocket Connection Timeout"))},n.signalingTimeoutMs)}_onDeviceError(t){this._device.destroy(),this._onFailed(t)}_onDeviceRegistered(){return Bn(this,void 0,void 0,function*(){if(clearTimeout(this._echoTimer),clearTimeout(this._signalingTimeoutTimer),this._call=yield this._device.connect({rtcConfiguration:this._options.rtcConfiguration}),this._networkTiming.signaling={start:Date.now()},this._setupCallHandlers(this._call),this._edge=this._device.edge||void 0,this._options.fakeMicInput){this._echoTimer=setTimeout(()=>this._device.disconnectAll(),G8);const n=this._device.audio;n&&(n.disconnect(!1),n.outgoing(!1))}this._call.once("disconnect",()=>{this._device.once(Te.EventName.Unregistered,()=>this._onUnregistered()),this._device.destroy()}),this._call._publisher.on("error",()=>{this._hasInsightsErrored||this._emitWarning("insights-connection-error","Received an error when attempting to connect to Insights gateway"),this._hasInsightsErrored=!0})})}_onFailed(t){clearTimeout(this._echoTimer),clearTimeout(this._signalingTimeoutTimer),this._releaseHandlers(),this._endTime=Date.now(),this._status=Nt.Status.Failed,this._log.debug(`#${Nt.Events.Failed}`,t),this.emit(Nt.Events.Failed,t)}_onUnregistered(){setTimeout(()=>{this._status!==Nt.Status.Failed&&(clearTimeout(this._echoTimer),clearTimeout(this._signalingTimeoutTimer),this._releaseHandlers(),this._endTime=Date.now(),this._status=Nt.Status.Completed,this._report=this._getReport(),this._log.debug(`#${Nt.Events.Completed}`,JSON.stringify(this._report)),this.emit(Nt.Events.Completed,this._report))},10)}_releaseHandlers(){[this._device,this._call].forEach(t=>{t&&t.eventNames().forEach(n=>t.removeAllListeners(n))})}_setupCallHandlers(t){this._options.fakeMicInput&&t.once("volume",()=>{t._mediaHandler.outputs.forEach(n=>n.audio.muted=!0)}),t.on("warning",(n,r)=>{this._emitWarning(n,"Received an RTCWarning. See .rtcWarning for the RTCWarning",r)}),t.once("accept",()=>{this._callSid=t._mediaHandler.callSid,this._status=Nt.Status.Connected,this._log.debug(`#${Nt.Events.Connected}`),this.emit(Nt.Events.Connected)}),t.on("sample",n=>Bn(this,void 0,void 0,function*(){this._latestSample||(this._rtcIceCandidateStatsReport=yield(this._options.getRTCIceCandidateStatsReport||mW)(t._mediaHandler.version.pc)),this._latestSample=n,this._samples.push(n),this._log.debug(`#${Nt.Events.Sample}`,JSON.stringify(n)),this.emit(Nt.Events.Sample,n)})),[{reportLabel:"peerConnection",type:"pcconnection"},{reportLabel:"ice",type:"iceconnection"},{reportLabel:"dtls",type:"dtlstransport"},{reportLabel:"signaling",type:"signaling"}].forEach(({type:n,reportLabel:r})=>{const i=`on${n}statechange`,s=t._mediaHandler[i];t._mediaHandler[i]=a=>{const l=this._networkTiming[r]=this._networkTiming[r]||{start:0};a==="connecting"||a==="checking"?l.start=Date.now():(a==="connected"||a==="stable")&&!l.duration&&(l.end=Date.now(),l.duration=l.end-l.start),s(a)}})}get callSid(){return this._callSid}get endTime(){return this._endTime}get latestSample(){return this._latestSample}get report(){return this._report}get startTime(){return this._startTime}get status(){return this._status}}(function(e){(function(t){t.Excellent="excellent",t.Great="great",t.Good="good",t.Fair="fair",t.Degraded="degraded"})(e.CallQuality||(e.CallQuality={})),function(t){t.Completed="completed",t.Connected="connected",t.Failed="failed",t.Sample="sample",t.Warning="warning"}(e.Events||(e.Events={})),function(t){t.Connecting="connecting",t.Connected="connected",t.Completed="completed",t.Failed="failed"}(e.Status||(e.Status={}))})(Nt||(Nt={}));const Ho=globalThis.WebSocket,wW=1e4,SW=5e3,dk=15e3,bW=15e3,TW=1/0,EW=1e3,kW=2e4;var mr;(function(e){e.Connecting="connecting",e.Closed="closed",e.Open="open"})(mr||(mr={}));class Xp extends Yr.EventEmitter{constructor(t,n={}){super(),this.state=mr.Closed,this._backoffStartTime={preferred:null,primary:null},this._connectedUri=null,this._log=new on("WSTransport"),this._shouldFallback=!1,this._uriIndex=0,this._moveUriIndex=()=>{this._uriIndex++,this._uriIndex>=this._uris.length&&(this._uriIndex=0)},this._onSocketClose=r=>{if(this._log.error(`Received websocket close event code: ${r.code}. Reason: ${r.reason}`),r.code===1006||r.code===1015){this.emit("error",{code:31005,message:r.reason||"Websocket connection to Twilio's signaling servers were unexpectedly ended. If this is happening consistently, there may be an issue resolving the hostname provided. If a region or an edge is being specified in Device setup, ensure it is valid.",twilioError:new Kr.ConnectionError});const i=this.state===mr.Open||this._previousState===mr.Open;(this._shouldFallback||!i)&&this._moveUriIndex(),this._shouldFallback=!0}this._closeSocket()},this._onSocketError=r=>{this._log.error(`WebSocket received error: ${r.message}`),this.emit("error",{code:31e3,message:r.message||"WSTransport socket error",twilioError:new Kr.ConnectionDisconnected})},this._onSocketMessage=r=>{if(this._setHeartbeatTimeout(),this._socket&&r.data===`
`){this._socket.send(`
`),this._log.debug("heartbeat");return}r&&typeof r.data=="string"&&this._log.debug(`Received: ${r.data}`),this.emit("message",r)},this._onSocketOpen=()=>{this._log.info("WebSocket opened successfully."),this._timeOpened=Date.now(),this._shouldFallback=!1,this._setState(mr.Open),clearTimeout(this._connectTimeout),this._resetBackoffs(),this._setHeartbeatTimeout(),this.emit("open")},this._options=Object.assign(Object.assign({},Xp.defaultConstructorOptions),n),this._uris=t,this._backoff=this._setupBackoffs()}close(){this._log.info("WSTransport.close() called..."),this._close()}open(){if(this._log.info("WSTransport.open() called..."),this._socket&&(this._socket.readyState===Ho.CONNECTING||this._socket.readyState===Ho.OPEN)){this._log.info("WebSocket already open.");return}this._preferredUri?this._connect(this._preferredUri):this._connect(this._uris[this._uriIndex])}send(t){if(this._log.debug(`Sending: ${t}`),!this._socket||this._socket.readyState!==Ho.OPEN)return this._log.debug("Cannot send message. WebSocket is not open."),!1;try{this._socket.send(t)}catch(n){return this._log.error("Error while sending message:",n.message),this._closeSocket(),!1}return!0}updatePreferredURI(t){this._preferredUri=t}updateURIs(t){typeof t=="string"&&(t=[t]),this._uris=t,this._uriIndex=0}_close(){this._setState(mr.Closed),this._closeSocket()}_closeSocket(){if(clearTimeout(this._connectTimeout),clearTimeout(this._heartbeatTimeout),this._log.info("Closing and cleaning up WebSocket..."),!this._socket){this._log.info("No WebSocket to clean up.");return}this._socket.removeEventListener("close",this._onSocketClose),this._socket.removeEventListener("error",this._onSocketError),this._socket.removeEventListener("message",this._onSocketMessage),this._socket.removeEventListener("open",this._onSocketOpen),(this._socket.readyState===Ho.CONNECTING||this._socket.readyState===Ho.OPEN)&&this._socket.close(),this._timeOpened&&Date.now()-this._timeOpened>wW&&this._resetBackoffs(),this.state!==mr.Closed&&this._performBackoff(),delete this._socket,this.emit("close")}_connect(t,n){this._log.info(typeof n=="number"?`Attempting to reconnect (retry #${n})...`:"Attempting to connect..."),this._closeSocket(),this._setState(mr.Connecting),this._connectedUri=t;try{this._socket=new this._options.WebSocket(this._connectedUri)}catch(r){this._log.error("Could not connect to endpoint:",r.message),this._close(),this.emit("error",{code:31e3,message:r.message||`Could not connect to ${this._connectedUri}`,twilioError:new Kr.ConnectionDisconnected});return}this._socket.addEventListener("close",this._onSocketClose),this._socket.addEventListener("error",this._onSocketError),this._socket.addEventListener("message",this._onSocketMessage),this._socket.addEventListener("open",this._onSocketOpen),delete this._timeOpened,this._connectTimeout=setTimeout(()=>{this._log.info("WebSocket connection attempt timed out."),this._moveUriIndex(),this._closeSocket()},this._options.connectTimeoutMs)}_performBackoff(){this._preferredUri?(this._log.info("Preferred URI set; backing off."),this._backoff.preferred.backoff()):(this._log.info("Preferred URI not set; backing off."),this._backoff.primary.backoff())}_resetBackoffs(){this._backoff.preferred.reset(),this._backoff.primary.reset(),this._backoffStartTime.preferred=null,this._backoffStartTime.primary=null}_setHeartbeatTimeout(){clearTimeout(this._heartbeatTimeout),this._heartbeatTimeout=setTimeout(()=>{this._log.info(`No messages received in ${dk/1e3} seconds. Reconnecting...`),this._shouldFallback=!0,this._closeSocket()},dk)}_setState(t){this._previousState=this.state,this.state=t}_setupBackoffs(){const t={factor:2,jitter:.4,max:this._options.maxPreferredDelayMs,min:100};this._log.info("Initializing preferred transport backoff using config: ",t);const n=new rw(t);n.on("backoff",(s,a)=>{if(this.state===mr.Closed){this._log.info("Preferred backoff initiated but transport state is closed; not attempting a connection.");return}this._log.info(`Will attempt to reconnect Websocket to preferred URI in ${a}ms`),s===0&&(this._backoffStartTime.preferred=Date.now(),this._log.info(`Preferred backoff start; ${this._backoffStartTime.preferred}`))}),n.on("ready",(s,a)=>{if(this.state===mr.Closed){this._log.info("Preferred backoff ready but transport state is closed; not attempting a connection.");return}if(this._backoffStartTime.preferred===null){this._log.info("Preferred backoff start time invalid; not attempting a connection.");return}if(Date.now()-this._backoffStartTime.preferred>this._options.maxPreferredDurationMs){this._log.info("Max preferred backoff attempt time exceeded; falling back to primary backoff."),this._preferredUri=null,this._backoff.primary.backoff();return}if(typeof this._preferredUri!="string"){this._log.info("Preferred URI cleared; falling back to primary backoff."),this._preferredUri=null,this._backoff.primary.backoff();return}this._connect(this._preferredUri,s+1)});const r={factor:2,jitter:.4,max:this._options.maxPrimaryDelayMs,min:this._uris&&this._uris.length>1?Math.floor(Math.random()*4001)+1e3:100};this._log.info("Initializing primary transport backoff using config: ",r);const i=new rw(r);return i.on("backoff",(s,a)=>{if(this.state===mr.Closed){this._log.info("Primary backoff initiated but transport state is closed; not attempting a connection.");return}this._log.info(`Will attempt to reconnect WebSocket in ${a}ms`),s===0&&(this._backoffStartTime.primary=Date.now(),this._log.info(`Primary backoff start; ${this._backoffStartTime.primary}`))}),i.on("ready",(s,a)=>{if(this.state===mr.Closed){this._log.info("Primary backoff ready but transport state is closed; not attempting a connection.");return}if(this._backoffStartTime.primary===null){this._log.info("Primary backoff start time invalid; not attempting a connection.");return}if(Date.now()-this._backoffStartTime.primary>this._options.maxPrimaryDurationMs){this._log.info("Max primary backoff attempt time exceeded; not attempting a connection.");return}this._connect(this._uris[this._uriIndex],s+1)}),{preferred:n,primary:i}}get uri(){return this._connectedUri}}Xp.defaultConstructorOptions={WebSocket:Ho,connectTimeoutMs:SW,maxPreferredDelayMs:EW,maxPreferredDurationMs:bW,maxPrimaryDelayMs:kW,maxPrimaryDurationMs:TW};const IW="1.6",CW=30;class It extends Yr.EventEmitter{constructor(t,n,r){if(super(),!(this instanceof It))return new It(t,n,r);const i={TransportFactory:Xp};r=r||{};for(const a in i)a in r||(r[a]=i[a]);this.options=r,this.token=t||"",this.status="disconnected",this.gateway=null,this.region=null,this._messageQueue=[],this._preferredUri=null,this._uris=n,this._handleTransportClose=this._handleTransportClose.bind(this),this._handleTransportError=this._handleTransportError.bind(this),this._handleTransportMessage=this._handleTransportMessage.bind(this),this._handleTransportOpen=this._handleTransportOpen.bind(this),this._log=new on("PStream"),this.on("error",()=>{this._log.warn("Unexpected error handled in pstream")});const s=this;return this.addListener("ready",()=>{s.status="ready"}),this.addListener("offline",()=>{s.status="offline"}),this.addListener("close",()=>{s._log.info('Received "close" from server. Destroying PStream...'),s._destroy()}),this.transport=new this.options.TransportFactory(this._uris,{backoffMaxMs:this.options.backoffMaxMs,maxPreferredDurationMs:this.options.maxPreferredDurationMs}),Object.defineProperties(this,{uri:{enumerable:!0,get(){return this.transport.uri}}}),this.transport.on("close",this._handleTransportClose),this.transport.on("error",this._handleTransportError),this.transport.on("message",this._handleTransportMessage),this.transport.on("open",this._handleTransportOpen),this.transport.open(),this}}It.prototype._handleTransportClose=function(){this.emit("transportClose"),this.status!=="disconnected"&&(this.status!=="offline"&&this.emit("offline",this),this.status="disconnected")};It.prototype._handleTransportError=function(e){if(!e){this.emit("error",{error:{code:31e3,message:"Websocket closed without a provided reason",twilioError:new Kr.ConnectionDisconnected}});return}this.emit("error",typeof e.code<"u"?{error:e}:e)};It.prototype._handleTransportMessage=function(e){if(!e||!e.data||typeof e.data!="string")return;const{type:t,payload:n={}}=JSON.parse(e.data);this.gateway=n.gateway||this.gateway,this.region=n.region||this.region,t==="error"&&n.error&&(n.error.twilioError=new Kr.ConnectionError),this.emit(t,n)};It.prototype._handleTransportOpen=function(){this.status="connected",this.setToken(this.token),this.emit("transportOpen"),this._messageQueue.splice(0,this._messageQueue.length).forEach(t=>this._publish(...t))};It.toString=()=>"[Twilio.PStream class]";It.prototype.toString=()=>"[Twilio.PStream instance]";It.prototype.setToken=function(e){this._log.info("Setting token and publishing listen"),this.token=e;let t=0;const n=this.options.maxPreferredDurationMs;this._log.info(`maxPreferredDurationMs:${n}`),typeof n=="number"&&n>=0&&(t=Math.min(Math.ceil(n/1e3),CW)),this._log.info(`reconnectTimeout:${t}`);const r={browserinfo:RW(),reconnectTimeout:t,token:e};this._publish("listen",r)};It.prototype.sendMessage=function(e,t,n="application/json",r,i){const s={callsid:e,content:t,contenttype:n,messagetype:r,voiceeventsid:i};this._publish("message",s,!0)};It.prototype.register=function(e){const t={media:e};this._publish("register",t,!0)};It.prototype.invite=function(e,t,n){const r={callsid:t,sdp:e,twilio:n?{params:n}:{}};this._publish("invite",r,!0)};It.prototype.reconnect=function(e,t,n){const r={callsid:t,reconnect:n,sdp:e,twilio:{}};this._publish("invite",r,!0)};It.prototype.answer=function(e,t){this._publish("answer",{sdp:e,callsid:t},!0)};It.prototype.dtmf=function(e,t){this._publish("dtmf",{callsid:e,dtmf:t},!0)};It.prototype.hangup=function(e,t){const n=t?{callsid:e,message:t}:{callsid:e};this._publish("hangup",n,!0)};It.prototype.reject=function(e){this._publish("reject",{callsid:e},!0)};It.prototype.reinvite=function(e,t){this._publish("reinvite",{sdp:e,callsid:t},!1)};It.prototype._destroy=function(){this.transport.removeListener("close",this._handleTransportClose),this.transport.removeListener("error",this._handleTransportError),this.transport.removeListener("message",this._handleTransportMessage),this.transport.removeListener("open",this._handleTransportOpen),this.transport.close(),this.emit("offline",this)};It.prototype.destroy=function(){return this._log.info("PStream.destroy() called..."),this._destroy(),this};It.prototype.updatePreferredURI=function(e){this._preferredUri=e,this.transport.updatePreferredURI(e)};It.prototype.updateURIs=function(e){this._uris=e,this.transport.updateURIs(this._uris)};It.prototype.publish=function(e,t){return this._publish(e,t,!0)};It.prototype._publish=function(e,t,n){const r=JSON.stringify({payload:t,type:e,version:IW});!!this.transport.send(r)||(this.emit("error",{error:{code:31009,message:"No transport available to send or receive messages",twilioError:new xn.TransportError}}),n&&this._messageQueue.push([e,t,!0]))};function RW(){const e=typeof navigator<"u"?navigator:{};return{browser:{platform:e.platform||"unknown",userAgent:e.userAgent||"unknown"},p:"browser",plugin:"rtc",v:vu}}var Ft;(function(e){e.Sydney="sydney",e.SaoPaulo="sao-paulo",e.Dublin="dublin",e.Frankfurt="frankfurt",e.Tokyo="tokyo",e.Singapore="singapore",e.Ashburn="ashburn",e.Umatilla="umatilla",e.Roaming="roaming",e.AshburnIx="ashburn-ix",e.SanJoseIx="san-jose-ix",e.LondonIx="london-ix",e.FrankfurtIx="frankfurt-ix",e.SingaporeIx="singapore-ix",e.SydneyIx="sydney-ix",e.TokyoIx="tokyo-ix"})(Ft||(Ft={}));var ft;(function(e){e.Au1="au1",e.Au1Ix="au1-ix",e.Br1="br1",e.De1="de1",e.De1Ix="de1-ix",e.Gll="gll",e.Ie1="ie1",e.Ie1Ix="ie1-ix",e.Ie1Tnx="ie1-tnx",e.Jp1="jp1",e.Jp1Ix="jp1-ix",e.Sg1="sg1",e.Sg1Ix="sg1-ix",e.Sg1Tnx="sg1-tnx",e.Us1="us1",e.Us1Ix="us1-ix",e.Us1Tnx="us1-tnx",e.Us2="us2",e.Us2Ix="us2-ix",e.Us2Tnx="us2-tnx"})(ft||(ft={}));const xW={ASIAPAC_SINGAPORE:ft.Sg1,ASIAPAC_SYDNEY:ft.Au1,ASIAPAC_TOKYO:ft.Jp1,EU_FRANKFURT:ft.De1,EU_IRELAND:ft.Ie1,SOUTH_AMERICA_SAO_PAULO:ft.Br1,US_EAST_VIRGINIA:ft.Us1,US_WEST_OREGON:ft.Us2},$W={[ft.Au1]:Ft.Sydney,[ft.Br1]:Ft.SaoPaulo,[ft.Ie1]:Ft.Dublin,[ft.De1]:Ft.Frankfurt,[ft.Jp1]:Ft.Tokyo,[ft.Sg1]:Ft.Singapore,[ft.Us1]:Ft.Ashburn,[ft.Us2]:Ft.Umatilla,[ft.Gll]:Ft.Roaming,[ft.Us1Ix]:Ft.AshburnIx,[ft.Us2Ix]:Ft.SanJoseIx,[ft.Ie1Ix]:Ft.LondonIx,[ft.De1Ix]:Ft.FrankfurtIx,[ft.Sg1Ix]:Ft.SingaporeIx,[ft.Au1Ix]:Ft.SydneyIx,[ft.Jp1Ix]:Ft.TokyoIx,[ft.Us1Tnx]:Ft.AshburnIx,[ft.Us2Tnx]:Ft.AshburnIx,[ft.Ie1Tnx]:Ft.LondonIx,[ft.Sg1Tnx]:Ft.SingaporeIx},PW=Ft.Roaming,AW="eventgw.twilio.com";function hk(e){return`voice-js.${e}.twilio.com`}function pk(e){return e?`eventgw.${e}.twilio.com`:AW}function vk(e){return`wss://${e}/signal`}function gk(e){if(e&&typeof e!="string"&&!Array.isArray(e))throw new gt("If `edge` is provided, it must be of type `string` or an array of strings.");let t;return e?t=(Array.isArray(e)?e:[e]).map(r=>hk(r)):t=[hk(PW)],t}function OW(e){return xW[e]||null}const mk={0:"PCMU",8:"PCMA"},NW=111,MW=51e4,LW=6e3;function DW(e){const[,t,n]=/a=rtpmap:(\d+) (\S+)/m.exec(e)||[null,"",""],r=new RegExp(`a=fmtp:${t} (\\S+)`,"m"),[,i]=r.exec(e)||[null,""];return{codecName:n,codecParams:i}}function FW(e){return f0(window,window.navigator)?e.split(`
`).filter(t=>t.indexOf("a=ice-lite")===-1).join(`
`):e}function CA(e,t){if(typeof t!="number"||t<LW||t>MW)return e;const n=/a=rtpmap:(\d+) opus/m.exec(e),r=n&&n.length?n[1]:NW,i=new RegExp(`a=fmtp:${r}`);return e.split(`
`).map(a=>i.test(a)?a+`;maxaveragebitrate=${t}`:a).join(`
`)}function RA(e,t){const n=jW(e);return[e.split(`\r
m=`)[0]].concat(n.map(i=>{if(!/^m=(audio|video)/.test(i))return i;const s=i.match(/^m=(audio|video)/)[1],a=UW(i),l=BW(a,t),u=WW(l,i),f=a.get("pcma")||[],d=a.get("pcmu")||[];return(s==="audio"?new Set(f.concat(d)):new Set).has(l[0])?u.replace(/\r\nb=(AS|TIAS):([0-9]+)/g,""):u})).join(`\r
`)}function jW(e,t,n){return e.replace(/\r\n\r\n$/,`\r
`).split(`\r
m=`).slice(1).map(r=>`m=${r}`).filter(r=>{const i=new RegExp("m=.*","gm"),s=new RegExp("a=.*","gm");return i.test(r)&&s.test(r)})}function UW(e){return Array.from(zW(e)).reduce((t,n)=>{const r=n[0],i=n[1],s=t.get(i)||[];return t.set(i,s.concat(r))},new Map)}function BW(e,t){t=t.map(s=>s.toLowerCase());const n=ow(t,s=>e.get(s)||[]),r=c0(Array.from(e.keys()),t),i=ow(r,s=>e.get(s));return n.concat(i)}function WW(e,t){const n=t.split(`\r
`);let r=n[0];const i=n.slice(1);return r=r.replace(/([0-9]+\s?)+$/,e.join(" ")),[r].concat(i).join(`\r
`)}function zW(e){return HW(e).reduce((t,n)=>{const r=new RegExp(`a=rtpmap:${n} ([^/]+)`),i=e.match(r),s=i?i[1].toLowerCase():mk[n]?mk[n].toLowerCase():"";return t.set(n,s)},new Map)}function HW(e){const n=e.split(`\r
`)[0].match(/([0-9]+)/g);return n?n.slice(1).map(r=>parseInt(r,10)):[]}function Er(e){if(this.log=new on("RTCPC"),typeof window>"u"){this.log.info("No RTCPeerConnection implementation available. The window object was not found.");return}e&&e.RTCPeerConnection?this.RTCPeerConnection=e.RTCPeerConnection:typeof window.RTCPeerConnection=="function"?this.RTCPeerConnection=window.RTCPeerConnection:typeof window.webkitRTCPeerConnection=="function"?this.RTCPeerConnection=webkitRTCPeerConnection:typeof window.mozRTCPeerConnection=="function"?(this.RTCPeerConnection=mozRTCPeerConnection,window.RTCSessionDescription=mozRTCSessionDescription,window.RTCIceCandidate=mozRTCIceCandidate):this.log.info("No RTCPeerConnection implementation available")}Er.prototype.create=function(e){this.pc=new this.RTCPeerConnection(e)};Er.prototype.createModernConstraints=e=>{if(typeof e>"u")return null;const t=Object.assign({},e);return typeof webkitRTCPeerConnection<"u"&&!Yp()?(t.mandatory={},typeof e.audio<"u"&&(t.mandatory.OfferToReceiveAudio=e.audio),typeof e.video<"u"&&(t.mandatory.OfferToReceiveVideo=e.video)):(typeof e.audio<"u"&&(t.offerToReceiveAudio=e.audio),typeof e.video<"u"&&(t.offerToReceiveVideo=e.video)),delete t.audio,delete t.video,t};Er.prototype.createOffer=function(e,t,n,r){return t=this.createModernConstraints(t),$A(this.pc.createOffer,this.pc)(t).then(i=>{if(!this.pc)return Promise.resolve();const s=CA(i.sdp,e);return Zp(this.pc.setLocalDescription,this.pc)(new RTCSessionDescription({sdp:s,type:"offer"}))}).then(n,r)};Er.prototype.createAnswer=function(e,t,n,r){return t=this.createModernConstraints(t),$A(this.pc.createAnswer,this.pc)(t).then(i=>{if(!this.pc)return Promise.resolve();const s=CA(i.sdp,e);return Zp(this.pc.setLocalDescription,this.pc)(new RTCSessionDescription({sdp:s,type:"answer"}))}).then(n,r)};Er.prototype.processSDP=function(e,t,n,r,i,s){n=RA(n,t);const a=new RTCSessionDescription({sdp:n,type:"offer"});return Zp(this.pc.setRemoteDescription,this.pc)(a).then(()=>{this.createAnswer(e,r,i,s)})};Er.prototype.getSDP=function(){return this.pc.localDescription.sdp};Er.prototype.processAnswer=function(e,t,n,r){return this.pc?(t=RA(t,e),Zp(this.pc.setRemoteDescription,this.pc)(new RTCSessionDescription({sdp:t,type:"answer"})).then(n,r)):Promise.resolve()};Er.test=()=>{if(typeof navigator=="object"){const e=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.getUserMedia;if(Yp(navigator))return!1;if(e&&typeof window.RTCPeerConnection=="function")return!0;if(e&&typeof window.webkitRTCPeerConnection=="function")return!0;if(e&&typeof window.mozRTCPeerConnection=="function"){try{if(typeof new window.mozRTCPeerConnection().getLocalStreams!="function")return!1}catch{return!1}return!0}else if(typeof RTCIceGatherer<"u")return!0}return!1};function xA(e,t,n,r){return function(){const i=Array.prototype.slice.call(arguments);return new Promise(s=>{const a=e.apply(t,i);if(!r){s(a);return}if(typeof a=="object"&&typeof a.then=="function")s(a);else throw new Error}).catch(()=>new Promise((s,a)=>{e.apply(t,n?[s,a].concat(i):i.concat([s,a]))}))}}function $A(e,t){return xA(e,t,!0,!0)}function Zp(e,t){return xA(e,t,!1,!1)}const VW=15e3,qW="none",GW="timeout",KW="new",yk=50;function Ae(e,t,n){if(!e||!t)throw new gt("Audiohelper, and pstream are required arguments");if(!(this instanceof Ae))return new Ae(e,t,n);this._log=new on("PeerConnection");function r(){this._log.warn("Unexpected noop call in peerconnection")}this.onaudio=r,this.onopen=r,this.onerror=r,this.onclose=r,this.ondisconnected=r,this.onfailed=r,this.onconnected=r,this.onreconnected=r,this.onsignalingstatechange=r,this.ondtlstransportstatechange=r,this.onicegatheringfailure=r,this.onicegatheringstatechange=r,this.oniceconnectionstatechange=r,this.onpcconnectionstatechange=r,this.onicecandidate=r,this.onselectedcandidatepairchange=r,this.onvolume=r,this.version=null,this.pstream=t,this.stream=null,this.sinkIds=new Set(["default"]),this.outputs=new Map,this.status="connecting",this.callSid=null,this.isMuted=!1;const i=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);return this._isSinkSupported=!!i&&typeof HTMLAudioElement<"u"&&HTMLAudioElement.prototype.setSinkId,this._audioContext=i&&e._audioContext,this._audioHelper=e,this._hasIceCandidates=!1,this._hasIceGatheringFailures=!1,this._iceGatheringTimeoutId=null,this._masterAudio=null,this._masterAudioDeviceId=null,this._mediaStreamSource=null,this._dtmfSender=null,this._dtmfSenderUnsupported=!1,this._callEvents=[],this._nextTimeToPublish=Date.now(),this._onAnswerOrRinging=r,this._onHangup=r,this._remoteStream=null,this._shouldManageStream=!0,this._iceState=KW,this.options=n=n||{},this.navigator=n.navigator||(typeof navigator<"u"?navigator:null),this.util=n.util||TA,this.codecPreferences=n.codecPreferences,this}Ae.prototype.uri=function(){return this._uri};Ae.prototype.openDefaultDeviceWithConstraints=function(e){return this._audioHelper._openDefaultDeviceWithConstraints(e).then(this._setInputTracksFromStream.bind(this,!1))};Ae.prototype.setInputTracksFromStream=function(e){const t=this;return this._setInputTracksFromStream(!0,e).then(()=>{t._shouldManageStream=!1})};Ae.prototype._createAnalyser=(e,t)=>{t=Object.assign({fftSize:32,smoothingTimeConstant:.3},t);const n=e.createAnalyser();for(const r in t)n[r]=t[r];return n};Ae.prototype._setVolumeHandler=function(e){this.onvolume=e};Ae.prototype._startPollingVolume=function(){if(!this._audioContext||!this.stream||!this._remoteStream)return;const e=this._audioContext,n=(this._inputAnalyser=this._createAnalyser(e)).frequencyBinCount,r=new Uint8Array(n);this._inputAnalyser2=this._createAnalyser(e,{maxDecibels:0,minDecibels:-127,smoothingTimeConstant:0});const s=(this._outputAnalyser=this._createAnalyser(e)).frequencyBinCount,a=new Uint8Array(s);this._outputAnalyser2=this._createAnalyser(e,{maxDecibels:0,minDecibels:-127,smoothingTimeConstant:0}),this._updateInputStreamSource(this.stream),this._updateOutputStreamSource(this._remoteStream);const l=this;setTimeout(function u(){if(l._audioContext){if(l.status==="closed"){l._inputAnalyser.disconnect(),l._outputAnalyser.disconnect(),l._inputAnalyser2.disconnect(),l._outputAnalyser2.disconnect();return}}else return;l._inputAnalyser.getByteFrequencyData(r);const f=l.util.average(r);l._inputAnalyser2.getByteFrequencyData(r);const d=l.util.average(r);l._outputAnalyser.getByteFrequencyData(a);const p=l.util.average(a);l._outputAnalyser2.getByteFrequencyData(a);const v=l.util.average(a);l.onvolume(f/255,p/255,d,v),setTimeout(u,yk)},yk)};Ae.prototype._stopStream=function(){this._shouldManageStream&&this._audioHelper._stopDefaultInputDeviceStream()};Ae.prototype._updateInputStreamSource=function(e){this._inputStreamSource&&this._inputStreamSource.disconnect();try{this._inputStreamSource=this._audioContext.createMediaStreamSource(e),this._inputStreamSource.connect(this._inputAnalyser),this._inputStreamSource.connect(this._inputAnalyser2)}catch(t){this._log.warn("Unable to update input MediaStreamSource",t),this._inputStreamSource=null}};Ae.prototype._updateOutputStreamSource=function(e){this._outputStreamSource&&this._outputStreamSource.disconnect();try{this._outputStreamSource=this._audioContext.createMediaStreamSource(e),this._outputStreamSource.connect(this._outputAnalyser),this._outputStreamSource.connect(this._outputAnalyser2)}catch(t){this._log.warn("Unable to update output MediaStreamSource",t),this._outputStreamSource=null}};Ae.prototype._setInputTracksFromStream=function(e,t){if(!t)return Promise.reject(new gt("Can not set input stream to null while in a call"));if(!t.getAudioTracks().length)return Promise.reject(new gt("Supplied input stream has no audio tracks"));const n=this.stream,r=()=>(this.mute(this.isMuted),Promise.resolve(this.stream));if(!n)this.stream=e?_k(t,this.options.MediaStream):t;else return this._shouldManageStream&&this._stopStream(),this._sender||(this._sender=this.version.pc.getSenders()[0]),this._sender.replaceTrack(t.getAudioTracks()[0]).then(()=>(this._updateInputStreamSource(t),this.stream=e?_k(t,this.options.MediaStream):t,r()));return r()};Ae.prototype._onInputDevicesChanged=function(){if(!this.stream)return;this.stream.getAudioTracks().every(t=>t.readyState==="ended")&&this._shouldManageStream&&this.openDefaultDeviceWithConstraints({audio:!0})};Ae.prototype._onIceGatheringFailure=function(e){this._hasIceGatheringFailures=!0,this.onicegatheringfailure(e)};Ae.prototype._onMediaConnectionStateChange=function(e){const t=this._iceState;if(t===e||e!=="connected"&&e!=="disconnected"&&e!=="failed")return;this._iceState=e;let n;switch(e){case"connected":t==="disconnected"||t==="failed"?(n="ICE liveliness check succeeded. Connection with Twilio restored",this._log.info(n),this.onreconnected(n)):(n="Media connection established.",this._log.info(n),this.onconnected(n)),this._stopIceGatheringTimeout(),this._hasIceGatheringFailures=!1;break;case"disconnected":n="ICE liveliness check failed. May be having trouble connecting to Twilio",this._log.warn(n),this.ondisconnected(n);break;case"failed":n="Connection with Twilio was interrupted.",this._log.warn(n),this.onfailed(n);break}};Ae.prototype._setSinkIds=function(e){return this._isSinkSupported?(this.sinkIds=new Set(e.forEach?e:[e]),this.version?this._updateAudioOutputs():Promise.resolve()):Promise.reject(new _n("Audio output selection is not supported by this browser"))};Ae.prototype._startIceGatheringTimeout=function(){this._stopIceGatheringTimeout(),this._iceGatheringTimeoutId=setTimeout(()=>{this._onIceGatheringFailure(GW)},VW)};Ae.prototype._stopIceGatheringTimeout=function(){clearInterval(this._iceGatheringTimeoutId)};Ae.prototype._updateAudioOutputs=function(){const t=Array.from(this.sinkIds).filter(function(s){return!this.outputs.has(s)},this),n=Array.from(this.outputs.keys()).filter(function(s){return!this.sinkIds.has(s)},this),r=this,i=t.map(this._createAudioOutput,this);return Promise.all(i).then(()=>Promise.all(n.map(r._removeAudioOutput,r)))};Ae.prototype._createAudio=function(t){const n=new Audio(t);return this.onaudio(n),n};Ae.prototype._createAudioOutput=function(t){let n=null;this._mediaStreamSource&&(n=this._audioContext.createMediaStreamDestination(),this._mediaStreamSource.connect(n));const r=this._createAudio();h0(r,n&&n.stream?n.stream:this.pcStream);const i=this;return r.setSinkId(t).then(()=>r.play()).then(()=>{i.outputs.set(t,{audio:r,dest:n})})};Ae.prototype._removeAudioOutputs=function(){return this._masterAudio&&typeof this._masterAudioDeviceId<"u"&&(this._disableOutput(this,this._masterAudioDeviceId),this.outputs.delete(this._masterAudioDeviceId),this._masterAudioDeviceId=null,this._masterAudio.paused||this._masterAudio.pause(),typeof this._masterAudio.srcObject<"u"?this._masterAudio.srcObject=null:this._masterAudio.src="",this._masterAudio=null),Array.from(this.outputs.keys()).map(this._removeAudioOutput,this)};Ae.prototype._disableOutput=function(t,n){const r=t.outputs.get(n);r&&(r.audio&&(r.audio.pause(),r.audio.src=""),r.dest&&r.dest.disconnect())};Ae.prototype._reassignMasterOutput=function(t,n){const r=t.outputs.get(n);t.outputs.delete(n);const i=this,s=Array.from(t.outputs.keys())[0],a=typeof s=="string"?s:"default";return r.audio.setSinkId(a).then(()=>{i._disableOutput(t,a),t.outputs.set(a,r),t._masterAudioDeviceId=a}).catch(function(){t.outputs.set(n,r),i._log.info("Could not reassign master output. Attempted to roll back.")})};Ae.prototype._removeAudioOutput=function(t){return this._masterAudioDeviceId===t?this._reassignMasterOutput(this,t):(this._disableOutput(this,t),this.outputs.delete(t),Promise.resolve())};Ae.prototype._onAddTrack=function(t,n){const r=t._masterAudio=this._createAudio();h0(r,n),r.play();const i=Array.from(t.outputs.keys())[0],s=typeof i=="string"?i:"default";t._masterAudioDeviceId=s,t.outputs.set(s,{audio:r});try{t._mediaStreamSource=t._audioContext.createMediaStreamSource(n)}catch(a){this._log.warn("Unable to create a MediaStreamSource from onAddTrack",a),this._mediaStreamSource=null}t.pcStream=n,t._updateAudioOutputs()};Ae.prototype._fallbackOnAddTrack=function(t,n){const r=document&&document.createElement("audio");r.autoplay=!0,h0(r,n)||t._log.info("Error attaching stream to element."),t.outputs.set("default",{audio:r})};Ae.prototype._setEncodingParameters=function(e){if(!e||!this._sender||typeof this._sender.getParameters!="function"||typeof this._sender.setParameters!="function")return;const t=this._sender.getParameters();!t.priority&&!(t.encodings&&t.encodings.length)||(t.priority="high",t.encodings&&t.encodings.length&&t.encodings.forEach(n=>{n.priority="high",n.networkPriority="high"}),this._sender.setParameters(t))};Ae.prototype._setupPeerConnection=function(e){const t=this,n=new(this.options.rtcpcFactory||Er)({RTCPeerConnection:this.options.RTCPeerConnection});n.create(e),QW(n.pc,this.stream);const r=RTCRtpReceiver.getCapabilities("audio").codecs;this._log.debug("sorting codecs",r,this.codecPreferences);const i=bA(r,this.codecPreferences),[s]=n.pc.getTransceivers();this._log.debug("setting sorted codecs",i),s.setCodecPreferences(i);const a="ontrack"in n.pc?"ontrack":"onaddstream";return n.pc[a]=l=>{const u=t._remoteStream=l.stream||l.streams[0];typeof n.pc.getSenders=="function"&&(this._sender=n.pc.getSenders()[0]),t._isSinkSupported?t._onAddTrack(t,u):t._fallbackOnAddTrack(t,u),t._startPollingVolume()},n};Ae.prototype._maybeSetIceAggressiveNomination=function(e){return this.options.forceAggressiveIceNomination?FW(e):e};Ae.prototype._setupChannel=function(){const e=this.version.pc;this.version.pc.onopen=()=>{this.status="open",this.onopen()},this.version.pc.onstatechange=()=>{this.version.pc&&this.version.pc.readyState==="stable"&&(this.status="open",this.onopen())},this.version.pc.onsignalingstatechange=()=>{const t=e.signalingState;this._log.info(`signalingState is "${t}"`),this.version.pc&&this.version.pc.signalingState==="stable"&&(this.status="open",this.onopen()),this.onsignalingstatechange(e.signalingState)},e.onconnectionstatechange=t=>{let n=e.connectionState;if(!n&&t&&t.target){const r=t.target;n=r.connectionState||r.connectionState_,this._log.info(`pc.connectionState not detected. Using target PC. State=${n}`)}n?this._log.info(`pc.connectionState is "${n}"`):this._log.warn(`onconnectionstatechange detected but state is "${n}"`),this.onpcconnectionstatechange(n),this._onMediaConnectionStateChange(n)},e.onicecandidate=t=>{const{candidate:n}=t;n&&(this._hasIceCandidates=!0,this.onicecandidate(n),this._setupRTCIceTransportListener()),this._log.info(`ICE Candidate: ${JSON.stringify(n)}`)},e.onicegatheringstatechange=()=>{const t=e.iceGatheringState;t==="gathering"?this._startIceGatheringTimeout():t==="complete"&&(this._stopIceGatheringTimeout(),this._hasIceCandidates||this._onIceGatheringFailure(qW),this._hasIceCandidates&&this._hasIceGatheringFailures&&this._startIceGatheringTimeout()),this._log.info(`pc.iceGatheringState is "${e.iceGatheringState}"`),this.onicegatheringstatechange(t)},e.oniceconnectionstatechange=()=>{this._log.info(`pc.iceConnectionState is "${e.iceConnectionState}"`),this.oniceconnectionstatechange(e.iceConnectionState),this._onMediaConnectionStateChange(e.iceConnectionState)}};Ae.prototype._initializeMediaStream=function(e){return this.status==="open"?!1:this.pstream.status==="disconnected"?(this.onerror({info:{code:31e3,message:"Cannot establish connection. Client is disconnected",twilioError:new Kr.ConnectionDisconnected}}),this.close(),!1):(this.version=this._setupPeerConnection(e),this._setupChannel(),!0)};Ae.prototype._removeReconnectionListeners=function(){this.pstream&&(this.pstream.removeListener("answer",this._onAnswerOrRinging),this.pstream.removeListener("hangup",this._onHangup))};Ae.prototype._setupRTCDtlsTransportListener=function(){const e=this.getRTCDtlsTransport();if(!e||e.onstatechange)return;const t=()=>{this._log.info(`dtlsTransportState is "${e.state}"`),this.ondtlstransportstatechange(e.state)};t(),e.onstatechange=t};Ae.prototype._setupRTCIceTransportListener=function(){const e=this._getRTCIceTransport();!e||e.onselectedcandidatepairchange||(e.onselectedcandidatepairchange=()=>this.onselectedcandidatepairchange(e.getSelectedCandidatePair()))};Ae.prototype.iceRestart=function(){this._log.info("Attempting to restart ICE..."),this._hasIceCandidates=!1,this.version.createOffer(this.options.maxAverageBitrate,{iceRestart:!0}).then(()=>{this._removeReconnectionListeners(),this._onAnswerOrRinging=e=>{if(this._removeReconnectionListeners(),!e.sdp||this.version.pc.signalingState!=="have-local-offer"){const n=`Invalid state or param during ICE Restart:hasSdp:${!!e.sdp}, signalingState:${this.version.pc.signalingState}`;this._log.warn(n);return}const t=this._maybeSetIceAggressiveNomination(e.sdp);this._answerSdp=t,this.status!=="closed"&&this.version.processAnswer(this.codecPreferences,t,null,n=>{const r=n&&n.message?n.message:n;this._log.error(`Failed to process answer during ICE Restart. Error: ${r}`)})},this._onHangup=()=>{this._log.info("Received hangup during ICE Restart"),this._removeReconnectionListeners()},this.pstream.on("answer",this._onAnswerOrRinging),this.pstream.on("hangup",this._onHangup),this.pstream.reinvite(this.version.getSDP(),this.callSid)}).catch(e=>{const t=e&&e.message?e.message:e;this._log.error(`Failed to createOffer during ICE Restart. Error: ${t}`),this.onfailed(t)})};Ae.prototype.makeOutgoingCall=function(e,t,n,r,i){if(!this._initializeMediaStream(r))return;const s=this;this.callSid=n;function a(){s.options&&s._setEncodingParameters(s.options.dscp),i(s.version.pc)}function l(d){const p=d.message||d;s.onerror({info:{code:31e3,message:`Error processing answer: ${p}`,twilioError:new Di.ClientRemoteDescFailed}})}this._onAnswerOrRinging=d=>{if(!d.sdp)return;const p=this._maybeSetIceAggressiveNomination(d.sdp);s._answerSdp=p,s.status!=="closed"&&s.version.processAnswer(this.codecPreferences,p,a,l),s.pstream.removeListener("answer",s._onAnswerOrRinging),s.pstream.removeListener("ringing",s._onAnswerOrRinging)},this.pstream.on("answer",this._onAnswerOrRinging),this.pstream.on("ringing",this._onAnswerOrRinging);function u(){s.status!=="closed"&&(t?s.pstream.reconnect(s.version.getSDP(),s.callSid,t):s.pstream.invite(s.version.getSDP(),s.callSid,e),s._setupRTCDtlsTransportListener())}function f(d){const p=d.message||d;s.onerror({info:{code:31e3,message:`Error creating the offer: ${p}`,twilioError:new Di.ClientLocalDescFailed}})}this.version.createOffer(this.options.maxAverageBitrate,{audio:!0},u,f)};Ae.prototype.answerIncomingCall=function(e,t,n,r){if(!this._initializeMediaStream(n))return;t=this._maybeSetIceAggressiveNomination(t),this._answerSdp=t.replace(/^a=setup:actpass$/gm,"a=setup:passive"),this.callSid=e;const i=this;function s(){i.status!=="closed"&&(i.pstream.answer(i.version.getSDP(),e),i.options&&i._setEncodingParameters(i.options.dscp),r(i.version.pc),i._setupRTCDtlsTransportListener())}function a(l){const u=l.message||l;i.onerror({info:{code:31e3,message:`Error creating the answer: ${u}`,twilioError:new Di.ClientRemoteDescFailed}})}this.version.processSDP(this.options.maxAverageBitrate,this.codecPreferences,t,{audio:!0},s,a)};Ae.prototype.close=function(){this.version&&this.version.pc&&(this.version.pc.signalingState!=="closed"&&this.version.pc.close(),this.version.pc=null),this.stream&&(this.mute(!1),this._stopStream()),this.stream=null,this._removeReconnectionListeners(),this._stopIceGatheringTimeout(),Promise.all(this._removeAudioOutputs()).catch(()=>{}),this._mediaStreamSource&&this._mediaStreamSource.disconnect(),this._inputAnalyser&&this._inputAnalyser.disconnect(),this._outputAnalyser&&this._outputAnalyser.disconnect(),this._inputAnalyser2&&this._inputAnalyser2.disconnect(),this._outputAnalyser2&&this._outputAnalyser2.disconnect(),this.status="closed",this.onclose()};Ae.prototype.reject=function(e){this.callSid=e};Ae.prototype.ignore=function(e){this.callSid=e};Ae.prototype.mute=function(e){this.isMuted=e,this.stream&&(this._sender&&this._sender.track?this._sender.track.enabled=!e:(typeof this.stream.getAudioTracks=="function"?this.stream.getAudioTracks():this.stream.audioTracks).forEach(n=>{n.enabled=!e}))};Ae.prototype.getOrCreateDTMFSender=function(){if(this._dtmfSender||this._dtmfSenderUnsupported)return this._dtmfSender||null;const t=this,n=this.version.pc;if(!n)return this._log.warn("No RTCPeerConnection available to call createDTMFSender on"),null;if(typeof n.getSenders=="function"&&(typeof RTCDTMFSender=="function"||typeof RTCDtmfSender=="function")){const r=n.getSenders().find(i=>i.dtmf);if(r)return this._log.info("Using RTCRtpSender#dtmf"),this._dtmfSender=r.dtmf,this._dtmfSender}if(typeof n.createDTMFSender=="function"&&typeof n.getLocalStreams=="function"){const r=n.getLocalStreams().map(i=>{const s=t._getAudioTracks(i);return s&&s[0]})[0];return r?(this._log.info("Creating RTCDTMFSender"),this._dtmfSender=n.createDTMFSender(r),this._dtmfSender):(this._log.warn("No local audio MediaStreamTrack available on the RTCPeerConnection to pass to createDTMFSender"),null)}return this._log.info("RTCPeerConnection does not support RTCDTMFSender"),this._dtmfSenderUnsupported=!0,null};Ae.prototype.getRTCDtlsTransport=function(){const t=this.version&&this.version.pc&&typeof this.version.pc.getSenders=="function"&&this.version.pc.getSenders()[0];return t&&t.transport||null};Ae.prototype._canStopMediaStreamTrack=()=>typeof MediaStreamTrack.prototype.stop=="function";Ae.prototype._getAudioTracks=e=>typeof e.getAudioTracks=="function"?e.getAudioTracks():e.audioTracks;Ae.prototype._getRTCIceTransport=function(){const t=this.getRTCDtlsTransport();return t&&t.iceTransport||null};Ae.protocol=Er.test()?new Er:null;function QW(e,t){typeof e.addTrack=="function"?t.getAudioTracks().forEach(n=>{e.addTrack(n,t)}):e.addStream(t)}function _k(e,t){let n;return t?n=new t:typeof MediaStream<"u"?n=new MediaStream:n=new webkitMediaStream,e.getAudioTracks().forEach(n.addTrack,n),n}function h0(e,t){if(typeof e.srcObject<"u")e.srcObject=t;else if(typeof e.mozSrcObject<"u")e.mozSrcObject=t;else if(typeof e.src<"u"){const n=e.options.window||window;e.src=(n.URL||n.webkitURL).createObjectURL(t)}else return!1;return!0}Ae.enabled=Er.test();function JW(){return Er.test()}function YW(){return typeof RTCIceGatherer<"u"?"ORTC":"WebRTC"}function XW(e,t){return t=t||{},t.util=t.util||TA,t.navigator=t.navigator||(typeof navigator<"u"?navigator:null),new Promise((n,r)=>{if(!t.navigator)throw new _n("getUserMedia is not supported");switch("function"){case typeof(t.navigator.mediaDevices&&t.navigator.mediaDevices.getUserMedia):return n(t.navigator.mediaDevices.getUserMedia(e));case typeof t.navigator.webkitGetUserMedia:return t.navigator.webkitGetUserMedia(e,n,r);case typeof t.navigator.mozGetUserMedia:return t.navigator.mozGetUserMedia(e,n,r);case typeof t.navigator.getUserMedia:return t.navigator.getUserMedia(e,n,r);default:throw new _n("getUserMedia is not supported")}}).catch(n=>{throw t.util.isFirefox()&&n.name==="NotReadableError"?new _n(`Firefox does not currently support opening multiple audio input trackssimultaneously, even across different tabs.
Related Bugzilla thread: https://bugzilla.mozilla.org/show_bug.cgi?id=1299324`):n})}function ZW(){if(typeof window!="object")throw new _n("This platform is not supported.");const{crypto:e}=window;if(typeof e!="object")throw new _n("The `crypto` module is not available on this platform.");if(typeof e.getRandomValues!="function")throw new _n("The function `crypto.getRandomValues` is not available on this platform.");if(typeof window.Uint8Array!="function")throw new _n("The `Uint8Array` module is not available on this platform.");return e.getRandomValues(new window.Uint8Array(16)).reduce((t,n)=>`${t}${n.toString(16).padStart(2,"0")}`,"")}function dw(){return`KX${ZW()}`}let ez=class{constructor(){this._promise=new Promise((t,n)=>{this._resolve=t,this._reject=n})}get promise(){return this._promise}reject(t){this._reject(t)}resolve(t){this._resolve(t)}};class tz{constructor(){this._operations=[]}enqueue(t){const n=!!this._operations.length,r=new ez;return this._operations.push({deferred:r,callback:t}),n||this._processQueue(),r.promise}_processQueue(){return Bn(this,void 0,void 0,function*(){for(;this._operations.length;){const{deferred:t,callback:n}=this._operations[0];let r,i,s;try{r=yield n(),s=!0}catch(a){i=a}this._operations.shift(),s?t.resolve(r):t.reject(i)}})}}class nz{get reject(){return this._reject}get resolve(){return this._resolve}constructor(){this.promise=new Promise((t,n)=>{this._resolve=t,this._reject=n})}}class rz{constructor(){this._eventEmitter=new Yr.EventEmitter}addEventListener(t,n){return this._eventEmitter.addListener(t,n)}dispatchEvent(t,...n){return this._eventEmitter.emit(t,...n)}removeEventListener(t,n){return this._eventEmitter.removeListener(t,n)}}class wk extends rz{get destination(){return this._destination}get loop(){return this._loop}set loop(t){const n=this;function r(){n._audioNode.removeEventListener("ended",r),n.pause()}!t&&this.loop&&!this.paused&&this._audioNode.addEventListener("ended",r),this._loop=t}get muted(){return this._gainNode.gain.value===0}set muted(t){this._gainNode.gain.value=t?0:1}get paused(){return this._audioNode===null}get src(){return this._src}set src(t){this._load(t)}get srcObject(){return this._audioElement.srcObject}set srcObject(t){this._audioElement.srcObject=t}get sinkId(){return this._sinkId}constructor(t,n={},r={}){super(),this._audioNode=null,this._loop=!1,this._pendingPlayDeferreds=[],this._sinkId="default",this._src="",typeof n!="string"&&(r=n),this._audioContext=t,this._audioElement=new(r.AudioFactory||Audio),this._bufferPromise=this._createPlayDeferred().promise,this._destination=this._audioContext.destination,this._gainNode=this._audioContext.createGain(),this._gainNode.connect(this._destination),this._XMLHttpRequest=r.XMLHttpRequestFactory||XMLHttpRequest,this.addEventListener("canplaythrough",()=>{this._resolvePlayDeferreds()}),typeof n=="string"&&(this.src=n)}load(){this._load(this._src)}pause(){this.paused||(this._audioElement.pause(),this._audioNode.stop(),this._audioNode.disconnect(this._gainNode),this._audioNode=null,this._rejectPlayDeferreds(new Error("The play() request was interrupted by a call to pause().")))}play(){return Bn(this,void 0,void 0,function*(){if(!this.paused){if(yield this._bufferPromise,!this.paused)return;throw new Error("The play() request was interrupted by a call to pause().")}this._audioNode=this._audioContext.createBufferSource(),this._audioNode.loop=this.loop,this._audioNode.addEventListener("ended",()=>{this._audioNode&&this._audioNode.loop||this.dispatchEvent("ended")});const t=yield this._bufferPromise;if(this.paused)throw new Error("The play() request was interrupted by a call to pause().");if(this._audioNode.buffer=t,this._audioNode.connect(this._gainNode),this._audioNode.start(),this._audioElement.srcObject)return this._audioElement.play()})}setSinkId(t){return Bn(this,void 0,void 0,function*(){if(typeof this._audioElement.setSinkId!="function")throw new Error("This browser does not support setSinkId.");if(t!==this.sinkId){if(t==="default"){this.paused||this._gainNode.disconnect(this._destination),this._audioElement.srcObject=null,this._destination=this._audioContext.destination,this._gainNode.connect(this._destination),this._sinkId=t;return}yield this._audioElement.setSinkId(t),!this._audioElement.srcObject&&(this._gainNode.disconnect(this._audioContext.destination),this._destination=this._audioContext.createMediaStreamDestination(),this._audioElement.srcObject=this._destination.stream,this._sinkId=t,this._gainNode.connect(this._destination))}})}_createPlayDeferred(){const t=new nz;return this._pendingPlayDeferreds.push(t),t}_load(t){this._src&&this._src!==t&&this.pause(),this._src=t,this._bufferPromise=new Promise((n,r)=>Bn(this,void 0,void 0,function*(){if(!t)return this._createPlayDeferred().promise;const i=yield iz(this._audioContext,this._XMLHttpRequest,t);this.dispatchEvent("canplaythrough"),n(i)}))}_rejectPlayDeferreds(t){const n=this._pendingPlayDeferreds;n.splice(0,n.length).forEach(({reject:r})=>r(t))}_resolvePlayDeferreds(t){const n=this._pendingPlayDeferreds;n.splice(0,n.length).forEach(({resolve:r})=>r(t))}}function iz(e,t,n){return Bn(this,void 0,void 0,function*(){const r=new t;r.open("GET",n,!0),r.responseType="arraybuffer";const i=yield new Promise(s=>{r.addEventListener("load",s),r.send()});try{return e.decodeAudioData(i.target.response)}catch{return new Promise(a=>{e.decodeAudioData(i.target.response,a)})}})}function ps(e,t,n){if(!(this instanceof ps))return new ps(e,t,n);if(!e||!t)throw new gt("name and url are required arguments");n=Object.assign({AudioFactory:typeof Audio<"u"?Audio:null,maxDuration:0,shouldLoop:!1},n),n.AudioPlayer=n.audioContext?wk.bind(wk,n.audioContext):n.AudioFactory,Object.defineProperties(this,{_Audio:{value:n.AudioPlayer},_activeEls:{value:new Map},_isSinkSupported:{value:n.AudioFactory!==null&&typeof n.AudioFactory.prototype.setSinkId=="function"},_maxDuration:{value:n.maxDuration},_maxDurationTimeout:{value:null,writable:!0},_operations:{value:new tz},_playPromise:{value:null,writable:!0},_shouldLoop:{value:n.shouldLoop},_sinkIds:{value:["default"]},isPlaying:{enumerable:!0,get(){return!!this._playPromise}},name:{enumerable:!0,value:e},url:{enumerable:!0,value:t}}),this._Audio&&this._play(!0,!1)}function PA(e){e&&(e.pause(),e.src="",e.srcObject=null,e.load())}ps.prototype._playAudioElement=function(t,n,r){const i=this._activeEls.get(t);if(!i)throw new gt(`sinkId: "${t}" doesn't have an audio element`);return i.muted=!!n,i.loop=!!r,i.play().then(()=>i).catch(s=>{throw PA(i),this._activeEls.delete(t),s})};ps.prototype._play=function(t,n){this.isPlaying&&this._stop(),this._maxDuration>0&&(this._maxDurationTimeout=setTimeout(this._stop.bind(this),this._maxDuration)),n=typeof n=="boolean"?n:this._shouldLoop;const r=this;return this._playPromise=Promise.all(this._sinkIds.map(function(a){if(!r._Audio)return Promise.resolve();let l=r._activeEls.get(a);return l?r._playAudioElement(a,t,n):(l=new r._Audio(r.url),typeof l.setAttribute=="function"&&l.setAttribute("crossorigin","anonymous"),new Promise(u=>{l.addEventListener("canplaythrough",u)}).then(()=>(r._isSinkSupported?l.setSinkId(a):Promise.resolve()).then(function(){return r._activeEls.set(a,l),r._playPromise?r._playAudioElement(a,t,n):Promise.resolve()})))}))};ps.prototype._stop=function(){this._activeEls.forEach((t,n)=>{this._sinkIds.includes(n)?(t.pause(),t.currentTime=0):(PA(t),this._activeEls.delete(n))}),clearTimeout(this._maxDurationTimeout),this._playPromise=null,this._maxDurationTimeout=null};ps.prototype.setSinkIds=function(t){this._isSinkSupported&&(t=t.forEach?t:[t],[].splice.apply(this._sinkIds,[0,this._sinkIds.length].concat(t)))};ps.prototype.stop=function(){this._operations.enqueue(()=>(this._stop(),Promise.resolve()))};ps.prototype.play=function(){return this._operations.enqueue(()=>this._play())};const sz=3e4,az=2e3,oz="twilio-js-sdk",uz='Parameter "token" must be of type "string".';class Te extends Yr.EventEmitter{static get audioContext(){return Te._audioContext}static get extension(){const t=typeof document<"u"?document.createElement("audio"):{canPlayType:!1};let n;try{n=t.canPlayType&&!!t.canPlayType("audio/mpeg").replace(/no/,"")}catch{n=!1}let r;try{r=t.canPlayType&&!!t.canPlayType("audio/ogg;codecs='vorbis'").replace(/no/,"")}catch{r=!1}return r&&!n?"ogg":"mp3"}static get isSupported(){return JW()}static get packageName(){return _A}static runPreflight(t,n){return new Nt(t,Object.assign({audioContext:Te._getOrCreateAudioContext()},n))}static toString(){return"[Twilio.Device class]"}static get version(){return vu}static _getOrCreateAudioContext(){return Te._audioContext||(typeof AudioContext<"u"?Te._audioContext=new AudioContext:typeof webkitAudioContext<"u"&&(Te._audioContext=new webkitAudioContext)),Te._audioContext}constructor(t,n={}){if(super(),this._activeCall=null,this._audio=null,this._audioProcessorEventObserver=null,this._callInputStream=null,this._calls=[],this._callSinkIds=["default"],this._chunderURIs=[],this._defaultOptions={allowIncomingWhileBusy:!1,closeProtection:!1,codecPreferences:[_e.Codec.PCMU,_e.Codec.Opus],dscp:!0,enableImprovedSignalingErrorPrecision:!1,forceAggressiveIceNomination:!1,logLevel:no.levels.ERROR,maxCallSignalingTimeoutMs:0,preflight:!1,sounds:{},tokenRefreshMs:1e4,voiceEventSidGenerator:dw},this._edge=null,this._home=null,this._identity=null,this._log=new on("Device"),this._makeCallPromise=null,this._options={},this._preferredURI=null,this._publisher=null,this._region=null,this._regTimer=null,this._shouldReRegister=!1,this._soundcache=new Map,this._state=Te.State.Unregistered,this._stateEventMapping={[Te.State.Destroyed]:Te.EventName.Destroyed,[Te.State.Unregistered]:Te.EventName.Unregistered,[Te.State.Registering]:Te.EventName.Registering,[Te.State.Registered]:Te.EventName.Registered},this._stream=null,this._streamConnectedPromise=null,this._tokenWillExpireTimeout=null,this._createDefaultPayload=s=>{const a={aggressive_nomination:this._options.forceAggressiveIceNomination,browser_extension:this._isBrowserExtension,dscp:!!this._options.dscp,ice_restart_enabled:!0,platform:YW(),sdk_version:vu};function l(u,f){f&&(a[u]=f)}if(s){const u=s.parameters.CallSid;l("call_sid",/^TJ/.test(u)?void 0:u),l("temp_call_sid",s.outboundConnectionId),l("audio_codec",s.codec),a.direction=s.direction}return l("gateway",this._stream&&this._stream.gateway),l("region",this._stream&&this._stream.region),a},this._onSignalingClose=()=>{this._stream=null,this._streamConnectedPromise=null},this._onSignalingConnected=s=>{var a;const l=OW(s.region);if(this._edge=s.edge||$W[l]||s.region,this._region=l||s.region,this._home=s.home,(a=this._publisher)===null||a===void 0||a.setHost(pk(s.home)),s.token&&(this._identity=s.token.identity,typeof s.token.ttl=="number"&&typeof this._options.tokenRefreshMs=="number")){const f=s.token.ttl*1e3,d=Math.max(0,f-this._options.tokenRefreshMs);this._tokenWillExpireTimeout=setTimeout(()=>{this._log.debug("#tokenWillExpire"),this.emit("tokenWillExpire",this),this._tokenWillExpireTimeout&&(clearTimeout(this._tokenWillExpireTimeout),this._tokenWillExpireTimeout=null)},d)}const u=this._getChunderws()||gk(this._edge);if(u.length>0){const[f]=u;this._preferredURI=vk(f)}else this._log.warn("Could not parse a preferred URI from the stream#connected event.");this._shouldReRegister&&this.register()},this._onSignalingError=s=>{if(typeof s!="object"){this._log.warn("Invalid signaling error payload",s);return}const{error:a,callsid:l,voiceeventsid:u}=s;if(typeof a!="object"||u){this._log.warn("Ignoring signaling error payload",{originalError:a,voiceeventsid:u});return}const f=typeof l=="string"&&this._findCall(l)||void 0,{code:d,message:p}=a;let{twilioError:v}=a;if(typeof d=="number")if(d===31201)v=new rn.AuthenticationFailed(a);else if(d===31204)v=new rn.AccessTokenInvalid(a);else if(d===31205)this._stopRegistrationTimer(),v=new rn.AccessTokenExpired(a);else{const m=aw(!!this._options.enableImprovedSignalingErrorPrecision,d);typeof m<"u"&&(v=new m(a))}v||(this._log.error("Unknown signaling error: ",a),v=new xn.UnknownError(p,a)),this._log.error("Received error: ",v),this._log.debug("#error",a),this.emit(Te.EventName.Error,v,f)},this._onSignalingInvite=s=>Bn(this,void 0,void 0,function*(){var a;const l=!!this._activeCall;if(l&&!this._options.allowIncomingWhileBusy){this._log.info("Device busy; ignoring incoming invite");return}if(!s.callsid||!s.sdp){this._log.debug("#error",s),this.emit(Te.EventName.Error,new Wa.BadRequest("Malformed invite from gateway"));return}const u=s.parameters||{};u.CallSid=u.CallSid||s.callsid;const f=Object.assign({},SA(u.Params));this._makeCallPromise=this._makeCall(f,{callParameters:u,enableImprovedSignalingErrorPrecision:!!this._options.enableImprovedSignalingErrorPrecision,offerSdp:s.sdp,reconnectToken:s.reconnect,voiceEventSidGenerator:this._options.voiceEventSidGenerator});let d;try{d=yield this._makeCallPromise}finally{this._makeCallPromise=null}this._calls.push(d),d.once("accept",()=>{this._soundcache.get(Te.SoundName.Incoming).stop(),this._publishNetworkChange()});const p=!((a=this._audio)===null||a===void 0)&&a.incoming()&&!l?()=>this._soundcache.get(Te.SoundName.Incoming).play():()=>Promise.resolve();this._showIncomingCall(d,p)}),this._onSignalingOffline=()=>{this._log.info("Stream is offline"),this._edge=null,this._region=null,this._shouldReRegister=this.state!==Te.State.Unregistered,this._setState(Te.State.Unregistered)},this._onSignalingReady=()=>{this._log.info("Stream is ready"),this._setState(Te.State.Registered)},this._publishNetworkChange=()=>{this._activeCall&&this._networkInformation&&this._publisher.info("network-information","network-change",{connection_type:this._networkInformation.type,downlink:this._networkInformation.downlink,downlinkMax:this._networkInformation.downlinkMax,effective_type:this._networkInformation.effectiveType,rtt:this._networkInformation.rtt},this._activeCall)},this._updateInputStream=s=>{const a=this._activeCall;return a&&!s?Promise.reject(new ui("Cannot unset input device while a call is in progress.")):(this._callInputStream=s,a?a._setInputTracksFromStream(s):Promise.resolve())},this._updateSinkIds=(s,a)=>(s==="ringtone"?this._updateRingtoneSinkIds(a):this._updateSpeakerSinkIds(a)).then(()=>{this._publisher.info("audio",`${s}-devices-set`,{audio_device_ids:a},this._activeCall)},u=>{throw this._publisher.error("audio",`${s}-devices-set-failed`,{audio_device_ids:a,message:u.message},this._activeCall),u}),this._setupLoglevel(n.logLevel),this._logOptions("constructor",n),this.updateToken(t),Yp())throw new _n("Microsoft Edge Legacy (https://support.microsoft.com/en-us/help/4533505/what-is-microsoft-edge-legacy) is deprecated and will not be able to connect to Twilio to make or receive calls after September 1st, 2020. Please see this documentation for a list of supported browsers https://www.twilio.com/docs/voice/client/javascript#supported-browsers");if(!Te.isSupported&&n.ignoreBrowserSupport)throw window&&window.location&&window.location.protocol==="http:"?new _n("twilio.js wasn't able to find WebRTC browser support.           This is most likely because this page is served over http rather than https,           which does not support WebRTC in many browsers. Please load this page over https and           try again."):new _n("twilio.js 1.3+ SDKs require WebRTC browser support.         For more information, see <https://www.twilio.com/docs/api/client/twilio-js>.         If you have any questions about this announcement, please contact         Twilio Support at <help@twilio.com>.");const r=globalThis,i=r.msBrowser||r.browser||r.chrome;if(this._isBrowserExtension=!!i&&!!i.runtime&&!!i.runtime.id||!!r.safari&&!!r.safari.extension,this._isBrowserExtension&&this._log.info("Running as browser extension."),navigator){const s=navigator;this._networkInformation=s.connection||s.mozConnection||s.webkitConnection}this._networkInformation&&typeof this._networkInformation.addEventListener=="function"&&this._networkInformation.addEventListener("change",this._publishNetworkChange),Te._getOrCreateAudioContext(),Te._audioContext&&(Te._dialtonePlayer||(Te._dialtonePlayer=new rW(Te._audioContext))),this._boundDestroy=this.destroy.bind(this),this._boundConfirmClose=this._confirmClose.bind(this),typeof window<"u"&&window.addEventListener&&(window.addEventListener("unload",this._boundDestroy),window.addEventListener("pagehide",this._boundDestroy)),this.updateOptions(n)}get audio(){return this._audio}connect(){return Bn(this,arguments,void 0,function*(t={}){if(this._log.debug(".connect",JSON.stringify(t)),this._throwIfDestroyed(),this._activeCall)throw new ui("A Call is already active");let n,r,i;if(t.connectToken){try{const f=JSON.parse(decodeURIComponent(atob(t.connectToken)));n=f.customParameters,r=f.parameters,i=f.signalingReconnectToken}catch{throw new gt("Cannot parse connectToken")}if(!r||!r.CallSid||!i)throw new gt("Invalid connectToken")}let s=!1,a={};const l={enableImprovedSignalingErrorPrecision:!!this._options.enableImprovedSignalingErrorPrecision,rtcConfiguration:t.rtcConfiguration,voiceEventSidGenerator:this._options.voiceEventSidGenerator};i&&r?(s=!0,l.callParameters=r,l.reconnectCallSid=r.CallSid,l.reconnectToken=i,a=n||a):a=t.params||a;let u;this._makeCallPromise=this._makeCall(a,l,s);try{u=this._activeCall=yield this._makeCallPromise}finally{this._makeCallPromise=null}return this._calls.splice(0).forEach(f=>f.ignore()),this._soundcache.get(Te.SoundName.Incoming).stop(),u.accept({rtcConstraints:t.rtcConstraints}),this._publishNetworkChange(),u})}get calls(){return this._calls}destroy(){var t;this._log.debug(".destroy"),this._log.debug("Rejecting any incoming calls"),this._calls.slice(0).forEach(r=>r.reject()),this.disconnectAll(),this._stopRegistrationTimer(),this._destroyStream(),this._destroyAudioHelper(),(t=this._audioProcessorEventObserver)===null||t===void 0||t.destroy(),this._destroyPublisher(),this._networkInformation&&typeof this._networkInformation.removeEventListener=="function"&&this._networkInformation.removeEventListener("change",this._publishNetworkChange),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("beforeunload",this._boundConfirmClose),window.removeEventListener("unload",this._boundDestroy),window.removeEventListener("pagehide",this._boundDestroy)),this._setState(Te.State.Destroyed),Yr.EventEmitter.prototype.removeAllListeners.call(this)}disconnectAll(){this._log.debug(".disconnectAll"),this._calls.splice(0).forEach(n=>n.disconnect()),this._activeCall&&this._activeCall.disconnect()}get edge(){return this._edge}get home(){return this._home}get identity(){return this._identity}get isBusy(){return!!this._activeCall}register(){return Bn(this,void 0,void 0,function*(){if(this._log.debug(".register"),this.state!==Te.State.Unregistered)throw new ui(`Attempt to register when device is in state "${this.state}". Must be "${Te.State.Unregistered}".`);this._shouldReRegister=!1,this._setState(Te.State.Registering),yield this._streamConnectedPromise||this._setupStream(),yield this._sendPresence(!0),yield uw(this,Te.State.Registered,Te.State.Unregistered)})}get state(){return this._state}get token(){return this._token}toString(){return"[Twilio.Device instance]"}unregister(){return Bn(this,void 0,void 0,function*(){if(this._log.debug(".unregister"),this.state!==Te.State.Registered)throw new ui(`Attempt to unregister when device is in state "${this.state}". Must be "${Te.State.Registered}".`);this._shouldReRegister=!1;const t=yield this._streamConnectedPromise,n=new Promise(r=>{t.on("offline",r)});yield this._sendPresence(!1),yield n})}updateOptions(t={}){if(this._logOptions("updateOptions",t),this.state===Te.State.Destroyed)throw new ui(`Attempt to "updateOptions" when device is in state "${this.state}".`);this._options=Object.assign(Object.assign(Object.assign({},this._defaultOptions),this._options),t);const n=new Set(this._chunderURIs),r=this._chunderURIs=(this._getChunderws()||gk(this._options.edge)).map(vk);let i=n.size!==r.length;if(!i){for(const s of r)if(!n.has(s)){i=!0;break}}if(this.isBusy&&i)throw new ui("Cannot change Edge while on an active Call");this._setupLoglevel(this._options.logLevel);for(const s of Object.keys(Te._defaultSounds)){const a=Te._defaultSounds[s],l=`${l0}/${a.filename}.${Te.extension}?cache=${vu}`,u=this._options.sounds&&this._options.sounds[s]||l,f=new(this._options.Sound||ps)(s,u,{audioContext:this._options.disableAudioContextSounds?null:Te.audioContext,maxDuration:a.maxDuration,shouldLoop:a.shouldLoop});this._soundcache.set(s,f)}this._setupAudioHelper(),this._setupPublisher(),i&&this._streamConnectedPromise&&this._setupStream(),typeof window<"u"&&typeof window.addEventListener=="function"&&this._options.closeProtection&&(window.removeEventListener("beforeunload",this._boundConfirmClose),window.addEventListener("beforeunload",this._boundConfirmClose))}updateToken(t){if(this._log.debug(".updateToken"),this.state===Te.State.Destroyed)throw new ui(`Attempt to "updateToken" when device is in state "${this.state}".`);if(typeof t!="string")throw new gt(uz);this._token=t,this._stream&&this._stream.setToken(this._token),this._publisher&&this._publisher.setToken(this._token)}_confirmClose(t){if(!this._activeCall)return"";const n=this._options.closeProtection||!1,r=typeof n!="string"?"A call is currently in-progress. Leaving or reloading this page will end the call.":n;return(t||window.event).returnValue=r,r}_destroyAudioHelper(){this._audio&&(this._audio._destroy(),this._audio=null)}_destroyPublisher(){this._publisher&&(this._publisher=null)}_destroyStream(){this._stream&&(this._stream.removeListener("close",this._onSignalingClose),this._stream.removeListener("connected",this._onSignalingConnected),this._stream.removeListener("error",this._onSignalingError),this._stream.removeListener("invite",this._onSignalingInvite),this._stream.removeListener("offline",this._onSignalingOffline),this._stream.removeListener("ready",this._onSignalingReady),this._stream.destroy(),this._stream=null),this._onSignalingOffline(),this._streamConnectedPromise=null}_findCall(t){return this._calls.find(n=>n.parameters.CallSid===t||n.outboundConnectionId===t)||null}_getChunderws(){return typeof this._options.chunderw=="string"?[this._options.chunderw]:Array.isArray(this._options.chunderw)?this._options.chunderw:null}_logOptions(t,n={}){const r=["allowIncomingWhileBusy","appName","appVersion","closeProtection","codecPreferences","disableAudioContextSounds","dscp","edge","enableImprovedSignalingErrorPrecision","forceAggressiveIceNomination","logLevel","maxAverageBitrate","maxCallSignalingTimeoutMs","sounds","tokenRefreshMs"],i=["RTCPeerConnection","enumerateDevices","getUserMedia","MediaStream"];if(typeof n=="object"){const s=Object.assign({},n);Object.keys(s).forEach(a=>{!r.includes(a)&&!i.includes(a)&&delete s[a],i.includes(a)&&(s[a]=!0)}),this._log.debug(`.${t}`,JSON.stringify(s))}}_makeCall(t,n){return Bn(this,arguments,void 0,function*(r,i,s=!1){var a;const l=(a=this._audio)===null||a===void 0?void 0:a._getInputDevicePromise();l&&(this._log.debug("inputDevicePromise detected, waiting..."),yield l,this._log.debug("inputDevicePromise resolved"));const u={audioHelper:this._audio,onIgnore:()=>{this._soundcache.get(Te.SoundName.Incoming).stop()},pstream:yield this._streamConnectedPromise||this._setupStream(),publisher:this._publisher,soundcache:this._soundcache};i=Object.assign({MediaStream:this._options.MediaStream,RTCPeerConnection:this._options.RTCPeerConnection,beforeAccept:p=>{!this._activeCall||this._activeCall===p||(this._activeCall.disconnect(),this._removeCall(this._activeCall))},codecPreferences:this._options.codecPreferences,customSounds:this._options.sounds,dialtonePlayer:Te._dialtonePlayer,dscp:this._options.dscp,forceAggressiveIceNomination:this._options.forceAggressiveIceNomination,getInputStream:()=>this._options.fileInputStream||this._callInputStream,getSinkIds:()=>this._callSinkIds,maxAverageBitrate:this._options.maxAverageBitrate,preflight:this._options.preflight,rtcConstraints:this._options.rtcConstraints,shouldPlayDisconnect:()=>{var p;return(p=this._audio)===null||p===void 0?void 0:p.disconnect()},twimlParams:r,voiceEventSidGenerator:this._options.voiceEventSidGenerator},i);const f=()=>{if(!this._stream){this._log.warn("UnsetPreferredUri called without a stream");return}this._activeCall===null&&this._calls.length===0&&this._stream.updatePreferredURI(null)},d=new(this._options.Call||_e)(u,i);return this._publisher.info("settings","init",{MediaStream:!!this._options.MediaStream,RTCPeerConnection:!!this._options.RTCPeerConnection,enumerateDevices:!!this._options.enumerateDevices,getUserMedia:!!this._options.getUserMedia},d),d.once("accept",()=>{var p,v,m;this._stream.updatePreferredURI(this._preferredURI),this._removeCall(d),this._activeCall=d,this._audio&&this._audio._maybeStartPollingVolume(),d.direction===_e.CallDirection.Outgoing&&(!((p=this._audio)===null||p===void 0)&&p.outgoing())&&!s&&this._soundcache.get(Te.SoundName.Outgoing).play();const y={edge:this._edge||this._region};this._options.edge&&(y.selected_edge=Array.isArray(this._options.edge)?this._options.edge:[this._options.edge]),this._publisher.info("settings","edge",y,d),!((v=this._audio)===null||v===void 0)&&v.processedStream&&((m=this._audioProcessorEventObserver)===null||m===void 0||m.emit("enabled"))}),d.addListener("error",p=>{d.status()==="closed"&&(this._removeCall(d),f()),this._audio&&this._audio._maybeStopPollingVolume(),this._maybeStopIncomingSound()}),d.once("cancel",()=>{this._log.info(`Canceled: ${d.parameters.CallSid}`),this._removeCall(d),f(),this._audio&&this._audio._maybeStopPollingVolume(),this._maybeStopIncomingSound()}),d.once("disconnect",()=>{this._audio&&this._audio._maybeStopPollingVolume(),this._removeCall(d),f(),this._maybeStopIncomingSound()}),d.once("reject",()=>{this._log.info(`Rejected: ${d.parameters.CallSid}`),this._audio&&this._audio._maybeStopPollingVolume(),this._removeCall(d),f(),this._maybeStopIncomingSound()}),d.on("transportClose",()=>{d.status()===_e.State.Pending&&(this._audio&&this._audio._maybeStopPollingVolume(),this._removeCall(d),this._maybeStopIncomingSound())}),d})}_maybeStopIncomingSound(){this._calls.length||this._soundcache.get(Te.SoundName.Incoming).stop()}_removeCall(t){this._activeCall===t&&(this._activeCall=null,this._makeCallPromise=null);for(let n=this._calls.length-1;n>=0;n--)t===this._calls[n]&&this._calls.splice(n,1)}_sendPresence(t){return Bn(this,void 0,void 0,function*(){const n=yield this._streamConnectedPromise;n&&(n.register({audio:t}),t?this._startRegistrationTimer():this._stopRegistrationTimer())})}_setState(t){if(t===this.state)return;this._state=t;const n=this._stateEventMapping[t];this._log.debug(`#${n}`),this.emit(n)}_setupAudioHelper(){this._audioProcessorEventObserver||(this._audioProcessorEventObserver=new tW,this._audioProcessorEventObserver.on("event",({name:n,group:r})=>{this._publisher.info(r,n,{},this._activeCall)}));const t={audioContext:Te.audioContext,audioProcessorEventObserver:this._audioProcessorEventObserver,beforeSetInputDevice:()=>this._makeCallPromise?(this._log.debug("beforeSetInputDevice pause detected"),this._makeCallPromise):(this._log.debug("beforeSetInputDevice pause not detected, setting default"),Promise.resolve()),enumerateDevices:this._options.enumerateDevices,getUserMedia:this._options.getUserMedia||XW};if(this._audio){this._log.info("Found existing audio helper; updating options..."),this._audio._updateUserOptions(t);return}this._audio=new(this._options.AudioHelper||eW)(this._updateSinkIds,this._updateInputStream,t),this._audio.on("deviceChange",n=>{const r=this._activeCall,i=n.map(s=>s.deviceId);this._publisher.info("audio","device-change",{lost_active_device_ids:i},r),r&&r._mediaHandler._onInputDevicesChanged()})}_setupLoglevel(t){const n=typeof t=="number"||typeof t=="string"?t:no.levels.ERROR;this._log.setDefaultLevel(n),this._log.info("Set logger default level to",n)}_setupPublisher(){this._publisher&&(this._log.info("Found existing publisher; destroying..."),this._destroyPublisher());const t={defaultPayload:this._createDefaultPayload,metadata:{app_name:this._options.appName,app_version:this._options.appVersion}};return this._options.eventgw&&(t.host=this._options.eventgw),this._home&&(t.host=pk(this._home)),this._publisher=new(this._options.Publisher||zn)(oz,this.token,t),this._options.publishEvents===!1?this._publisher.disable():this._publisher.on("error",n=>{this._log.warn("Cannot connect to insights.",n)}),this._publisher}_setupStream(){return this._stream&&(this._log.info("Found existing stream; destroying..."),this._destroyStream()),this._log.info("Setting up VSP"),this._stream=new(this._options.PStream||It)(this.token,this._chunderURIs,{backoffMaxMs:this._options.backoffMaxMs,maxPreferredDurationMs:this._options.maxCallSignalingTimeoutMs}),this._stream.addListener("close",this._onSignalingClose),this._stream.addListener("connected",this._onSignalingConnected),this._stream.addListener("error",this._onSignalingError),this._stream.addListener("invite",this._onSignalingInvite),this._stream.addListener("offline",this._onSignalingOffline),this._stream.addListener("ready",this._onSignalingReady),this._streamConnectedPromise=uw(this._stream,"connected","close").then(()=>this._stream)}_showIncomingCall(t,n){let r;return Promise.race([n(),new Promise((i,s)=>{r=setTimeout(()=>{const a="Playing incoming ringtone took too long; it might not play. Continuing execution...";s(new Error(a))},az)})]).catch(i=>{this._log.warn(i.message)}).then(()=>{clearTimeout(r),this._log.debug("#incoming",JSON.stringify({customParameters:t.customParameters,parameters:t.parameters})),this.emit(Te.EventName.Incoming,t)})}_startRegistrationTimer(){this._stopRegistrationTimer(),this._regTimer=setTimeout(()=>{this._sendPresence(!0)},sz)}_stopRegistrationTimer(){this._regTimer&&clearTimeout(this._regTimer)}_throwIfDestroyed(){if(this.state===Te.State.Destroyed)throw new ui("Device has been destroyed.")}_updateRingtoneSinkIds(t){return Promise.resolve(this._soundcache.get(Te.SoundName.Incoming).setSinkIds(t))}_updateSpeakerSinkIds(t){Array.from(this._soundcache.entries()).filter(r=>r[0]!==Te.SoundName.Incoming).forEach(r=>r[1].setSinkIds(t)),this._callSinkIds=t;const n=this._activeCall;return n?n._setSinkIds(t):Promise.resolve()}}Te._defaultSounds={disconnect:{filename:"disconnect",maxDuration:3e3},dtmf0:{filename:"dtmf-0",maxDuration:1e3},dtmf1:{filename:"dtmf-1",maxDuration:1e3},dtmf2:{filename:"dtmf-2",maxDuration:1e3},dtmf3:{filename:"dtmf-3",maxDuration:1e3},dtmf4:{filename:"dtmf-4",maxDuration:1e3},dtmf5:{filename:"dtmf-5",maxDuration:1e3},dtmf6:{filename:"dtmf-6",maxDuration:1e3},dtmf7:{filename:"dtmf-7",maxDuration:1e3},dtmf8:{filename:"dtmf-8",maxDuration:1e3},dtmf9:{filename:"dtmf-9",maxDuration:1e3},dtmfh:{filename:"dtmf-hash",maxDuration:1e3},dtmfs:{filename:"dtmf-star",maxDuration:1e3},incoming:{filename:"incoming",shouldLoop:!0},outgoing:{filename:"outgoing",maxDuration:3e3}};(function(e){(function(t){t.Error="error",t.Incoming="incoming",t.Destroyed="destroyed",t.Unregistered="unregistered",t.Registering="registering",t.Registered="registered",t.TokenWillExpire="tokenWillExpire"})(e.EventName||(e.EventName={})),function(t){t.Destroyed="destroyed",t.Unregistered="unregistered",t.Registering="registering",t.Registered="registered"}(e.State||(e.State={})),function(t){t.Incoming="incoming",t.Outgoing="outgoing",t.Disconnect="disconnect",t.Dtmf0="dtmf0",t.Dtmf1="dtmf1",t.Dtmf2="dtmf2",t.Dtmf3="dtmf3",t.Dtmf4="dtmf4",t.Dtmf5="dtmf5",t.Dtmf6="dtmf6",t.Dtmf7="dtmf7",t.Dtmf8="dtmf8",t.Dtmf9="dtmf9",t.DtmfS="dtmfs",t.DtmfH="dtmfh"}(e.SoundName||(e.SoundName={}))})(Te||(Te={}));class qm{constructor(t,n=!1){this.deleted=!1;let r;const i=t.candidate.split("network-cost ");i[1]&&(r=parseInt(i[1],10)),this.candidateType=t.type,this.ip=t.ip||t.address,this.isRemote=n,this.networkCost=r,this.port=t.port,this.priority=t.priority,this.protocol=t.protocol,this.relatedAddress=t.relatedAddress,this.relatedPort=t.relatedPort,this.tcpType=t.tcpType,this.transportId=t.sdpMid}toPayload(){return{candidate_type:this.candidateType,deleted:this.deleted,ip:this.ip,is_remote:this.isRemote,"network-cost":this.networkCost,port:this.port,priority:this.priority,protocol:this.protocol,related_address:this.relatedAddress,related_port:this.relatedPort,tcp_type:this.tcpType,transport_id:this.transportId}}}const Sk=94.768;function lz(e,t,n){if(typeof e!="number"||typeof t!="number"||typeof n!="number"||!Lh(e)||!Lh(t)||!Lh(n))return null;const r=e+t*2+10;let i=0;switch(!0){case r<160:i=Sk-r/40;break;case r<1e3:i=Sk-(r-120)/10;break}switch(!0){case n<=i/2.5:i=Math.max(i-n*2.5,6.52);break;default:i=0;break}return 1+.035*i+7e-6*i*(i-60)*(100-i)}function Lh(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)&&e>=0}var cz={calculate:lz,isNonNegativeNumber:Lh};const fz=5,dz=0,hz=3,pz=1e3,vz=5*1e3,gz={audioInputLevel:{minStandardDeviation:327.67,sampleCount:10},audioOutputLevel:{minStandardDeviation:327.67,sampleCount:10},bytesReceived:{clearCount:2,min:1,raiseCount:3,sampleCount:3},bytesSent:{clearCount:2,min:1,raiseCount:3,sampleCount:3},jitter:{max:30},mos:{min:3},packetsLostFraction:[{max:1},{clearValue:1,maxAverage:3,sampleCount:7}],rtt:{max:400}};function mz(e,t){return t.reduce((n,r)=>n+=r>e?1:0,0)}function yz(e,t){return t.reduce((n,r)=>n+=r<e?1:0,0)}function _z(e){if(e.length<=0)return null;const t=e.reduce((i,s)=>i+s,0)/e.length,n=e.map(i=>Math.pow(i-t,2));return Math.sqrt(n.reduce((i,s)=>i+s,0)/n.length)}function wz(e){return e.reduce((t,n)=>[...t,...n],[])}class Sz extends Yr.EventEmitter{constructor(t){super(),this._activeWarnings=new Map,this._currentStreaks=new Map,this._inputVolumes=[],this._outputVolumes=[],this._sampleBuffer=[],this._supplementalSampleBuffers={audioInputLevel:[],audioOutputLevel:[]},this._warningsEnabled=!0,t=t||{},this._getRTCStats=t.getRTCStats||gW,this._mos=t.Mos||cz,this._peerConnection=t.peerConnection,this._thresholds=Object.assign(Object.assign({},gz),t.thresholds);const n=Object.values(this._thresholds).map(r=>r.sampleCount).filter(r=>!!r);this._maxSampleCount=Math.max(fz,...n),this._peerConnection&&this.enable(this._peerConnection)}addVolumes(t,n){this._inputVolumes.push(t),this._outputVolumes.push(n)}disable(){return this._sampleInterval&&(clearInterval(this._sampleInterval),delete this._sampleInterval),this}disableWarnings(){return this._warningsEnabled&&this._activeWarnings.clear(),this._warningsEnabled=!1,this}enable(t){if(t){if(this._peerConnection&&t!==this._peerConnection)throw new gt("Attempted to replace an existing PeerConnection in StatsMonitor.enable");this._peerConnection=t}if(!this._peerConnection)throw new gt("Can not enable StatsMonitor without a PeerConnection");return this._sampleInterval=this._sampleInterval||setInterval(this._fetchSample.bind(this),pz),this}enableWarnings(){return this._warningsEnabled=!0,this}hasActiveWarning(t,n){const r=`${t}:${n}`;return!!this._activeWarnings.get(r)}_addSample(t){const n=this._sampleBuffer;n.push(t),n.length>this._maxSampleCount&&n.splice(0,n.length-this._maxSampleCount)}_clearWarning(t,n,r){const i=`${t}:${n}`,s=this._activeWarnings.get(i);!s||Date.now()-s.timeRaised<vz||(this._activeWarnings.delete(i),this.emit("warning-cleared",Object.assign(Object.assign({},r),{name:t,threshold:{name:n,value:this._thresholds[t][n]}})))}_createSample(t,n){const r=n&&n.totals.bytesSent||0,i=n&&n.totals.bytesReceived||0,s=n&&n.totals.packetsSent||0,a=n&&n.totals.packetsReceived||0,l=n&&n.totals.packetsLost||0,u=t.bytesSent-r,f=t.bytesReceived-i,d=t.packetsSent-s,p=t.packetsReceived-a,v=t.packetsLost-l,m=p+v,y=m>0?v/m*100:0,E=t.packetsReceived+t.packetsLost,b=E>0?t.packetsLost/E*100:100,w=typeof t.rtt=="number"||!n?t.rtt:n.rtt,T=this._inputVolumes.splice(0);this._supplementalSampleBuffers.audioInputLevel.push(T);const x=this._outputVolumes.splice(0);return this._supplementalSampleBuffers.audioOutputLevel.push(x),{audioInputLevel:Math.round(vc(T)),audioOutputLevel:Math.round(vc(x)),bytesReceived:f,bytesSent:u,codecName:t.codecName,jitter:t.jitter,mos:this._mos.calculate(w,t.jitter,n&&y),packetsLost:v,packetsLostFraction:y,packetsReceived:p,packetsSent:d,rtt:w,timestamp:t.timestamp,totals:{bytesReceived:t.bytesReceived,bytesSent:t.bytesSent,packetsLost:t.packetsLost,packetsLostFraction:b,packetsReceived:t.packetsReceived,packetsSent:t.packetsSent}}}_fetchSample(){this._getSample().then(t=>{this._addSample(t),this._raiseWarnings(),this.emit("sample",t)}).catch(t=>{this.disable(),this.emit("error",t)})}_getSample(){return this._getRTCStats(this._peerConnection).then(t=>{let n=null;return this._sampleBuffer.length&&(n=this._sampleBuffer[this._sampleBuffer.length-1]),this._createSample(t,n)})}_raiseWarning(t,n,r){const i=`${t}:${n}`;if(this._activeWarnings.has(i))return;this._activeWarnings.set(i,{timeRaised:Date.now()});const s=this._thresholds[t];let a;if(Array.isArray(s)){const l=s.find(u=>n in u);l&&(a=l[n])}else a=this._thresholds[t][n];this.emit("warning",Object.assign(Object.assign({},r),{name:t,threshold:{name:n,value:a}}))}_raiseWarnings(){this._warningsEnabled&&Object.keys(this._thresholds).forEach(t=>this._raiseWarningsForStat(t))}_raiseWarningsForStat(t){(Array.isArray(this._thresholds[t])?this._thresholds[t]:[this._thresholds[t]]).forEach(r=>{const i=this._sampleBuffer,s=r.clearCount||dz,a=r.raiseCount||hz,l=r.sampleCount||this._maxSampleCount;let u=i.slice(-l);const f=u.map(v=>v[t]);if(f.some(v=>typeof v>"u"||v===null))return;let p;if(typeof r.max=="number"&&(p=mz(r.max,f),p>=a?this._raiseWarning(t,"max",{values:f,samples:u}):p<=s&&this._clearWarning(t,"max",{values:f,samples:u})),typeof r.min=="number"&&(p=yz(r.min,f),p>=a?this._raiseWarning(t,"min",{values:f,samples:u}):p<=s&&this._clearWarning(t,"min",{values:f,samples:u})),typeof r.maxDuration=="number"&&i.length>1){u=i.slice(-2);const v=u[0][t],m=u[1][t],y=this._currentStreaks.get(t)||0,E=v===m?y+1:0;this._currentStreaks.set(t,E),E>=r.maxDuration?this._raiseWarning(t,"maxDuration",{value:E}):E===0&&this._clearWarning(t,"maxDuration",{value:y})}if(typeof r.minStandardDeviation=="number"){const v=this._supplementalSampleBuffers[t];if(!v||v.length<r.sampleCount)return;v.length>r.sampleCount&&v.splice(0,v.length-r.sampleCount);const m=wz(v.slice(-l)),y=_z(m);if(typeof y!="number")return;y<r.minStandardDeviation?this._raiseWarning(t,"minStandardDeviation",{value:y}):this._clearWarning(t,"minStandardDeviation",{value:y})}[["maxAverage",(v,m)=>v>m],["minAverage",(v,m)=>v<m]].forEach(([v,m])=>{if(typeof r[v]=="number"&&f.length>=l){const y=vc(f);m(y,r[v])?this._raiseWarning(t,v,{values:f,samples:u}):m(y,r.clearValue||r[v])||this._clearWarning(t,v,{values:f,samples:u})}})})}}const bk={factor:1.1,jitter:.5,max:3e4,min:1},bz=70,Tz=500,Ez=160,kz=10,Iz=5e3,Tk={disconnect:!0,info:{code:31003,message:"Connection with Twilio was interrupted.",twilioError:new Di.ConnectionError}},Ek={packetsLostFraction:{max:"packet-loss",maxAverage:"packets-lost-fraction"}},kk={audioInputLevel:"audio-input-level",audioOutputLevel:"audio-output-level",bytesReceived:"bytes-received",bytesSent:"bytes-sent",jitter:"jitter",mos:"mos",rtt:"rtt"},Cz={max:"high-",maxAverage:"high-",maxDuration:"constant-",min:"low-",minStandardDeviation:"constant-"};class _e extends Yr.EventEmitter{get direction(){return this._direction}get codec(){return this._codec}get connectToken(){const t=this._signalingReconnectToken,n=this.parameters&&this.parameters.CallSid?this.parameters.CallSid:void 0;if(!t||!n)return;const r=this.customParameters&&typeof this.customParameters.keys=="function"?Array.from(this.customParameters.keys()).reduce((s,a)=>(s[a]=this.customParameters.get(a),s),{}):{},i=this.parameters||{};return btoa(encodeURIComponent(JSON.stringify({customParameters:r,parameters:i,signalingReconnectToken:t})))}constructor(t,n){super(),this.parameters={},this._inputVolumeStreak=0,this._isAnswered=!1,this._isCancelled=!1,this._isRejected=!1,this._latestInputVolume=0,this._latestOutputVolume=0,this._log=new on("Call"),this._mediaStatus=_e.State.Pending,this._messages=new Map,this._metricsSamples=[],this._options={MediaHandler:Ae,MediaStream:null,enableImprovedSignalingErrorPrecision:!1,offerSdp:null,shouldPlayDisconnect:()=>!0,voiceEventSidGenerator:dw},this._outputVolumeStreak=0,this._shouldSendHangup=!0,this._signalingStatus=_e.State.Pending,this._soundcache=new Map,this._status=_e.State.Pending,this._wasConnected=!1,this.toString=()=>"[Twilio.Call instance]",this._emitWarning=(a,l,u,f,d,p)=>{const m=`${a}warning${d?"-cleared":"-raised"}`;if(l==="constant-audio-input-level"&&this.isMuted())return;let y=d?"info":"warning";l==="constant-audio-output-level"&&(y="info");const E={threshold:u};if(f&&(f instanceof Array?E.values=f.map(b=>typeof b=="number"?Math.round(b*100)/100:f):E.value=f),this._publisher.post(y,m,l,{data:E},this),l!=="constant-audio-output-level"){const b=d?"warning-cleared":"warning";this._log.debug(`#${b}`,l),this.emit(b,l,p&&!d?p:null)}},this._onAck=a=>{const{acktype:l,callsid:u,voiceeventsid:f}=a;if(this.parameters.CallSid!==u){this._log.warn(`Received ack from a different callsid: ${u}`);return}l==="message"&&this._onMessageSent(f)},this._onAnswer=a=>{typeof a.reconnect=="string"&&(this._signalingReconnectToken=a.reconnect),!(this._isAnswered&&this._status!==_e.State.Reconnecting)&&(this._setCallSid(a),this._isAnswered=!0,this._maybeTransitionToOpen())},this._onCancel=a=>{const l=a.callsid;this.parameters.CallSid===l&&(this._isCancelled=!0,this._publisher.info("connection","cancel",null,this),this._cleanupEventListeners(),this._mediaHandler.close(),this._status=_e.State.Closed,this._log.debug("#cancel"),this.emit("cancel"),this._pstream.removeListener("cancel",this._onCancel))},this._onConnected=()=>{this._log.info("Received connected from pstream"),this._signalingReconnectToken&&this._mediaHandler.version&&this._pstream.reconnect(this._mediaHandler.version.getSDP(),this.parameters.CallSid,this._signalingReconnectToken)},this._onHangup=a=>{if(this.status()!==_e.State.Closed){if(a.callsid&&(this.parameters.CallSid||this.outboundConnectionId)){if(a.callsid!==this.parameters.CallSid&&a.callsid!==this.outboundConnectionId)return}else if(a.callsid)return;if(this._log.info("Received HANGUP from gateway"),a.error){const l=a.error.code,u=aw(this._options.enableImprovedSignalingErrorPrecision,l),f=typeof u<"u"?new u(a.error.message):new xn.ConnectionError("Error sent from gateway in HANGUP",a.error);this._log.error("Received an error from the gateway:",f),this._log.debug("#error",f),this.emit("error",f)}this._shouldSendHangup=!1,this._publisher.info("connection","disconnected-by-remote",null,this),this._disconnect(null,!0),this._cleanupEventListeners()}},this._onMediaFailure=a=>{const{ConnectionDisconnected:l,ConnectionFailed:u,IceGatheringFailed:f,LowBytes:d}=_e.MediaFailure,p=a===u||a===f;if(!f0(window,window.navigator)&&a===u)return this._mediaHandler.onerror(Tk);if(this._mediaStatus===_e.State.Reconnecting){if(p){if(Date.now()-this._mediaReconnectStartTime>bk.max)return this._log.warn("Exceeded max ICE retries"),this._mediaHandler.onerror(Tk);try{this._mediaReconnectBackoff.backoff()}catch(E){if(!(E.message&&E.message==="Backoff in progress."))throw E}}return}const v=this._mediaHandler.version.pc,m=v&&v.iceConnectionState==="disconnected",y=this._monitor.hasActiveWarning("bytesSent","min")||this._monitor.hasActiveWarning("bytesReceived","min");if(a===d&&m||a===l&&y||p){const E=new Di.ConnectionError("Media connection failed.");this._log.warn("ICE Connection disconnected."),this._publisher.warn("connection","error",E,this),this._publisher.info("connection","reconnecting",null,this),this._mediaReconnectStartTime=Date.now(),this._status=_e.State.Reconnecting,this._mediaStatus=_e.State.Reconnecting,this._mediaReconnectBackoff.reset(),this._mediaReconnectBackoff.backoff(),this._log.debug("#reconnecting"),this.emit("reconnecting",E)}},this._onMediaReconnected=()=>{this._mediaStatus===_e.State.Reconnecting&&(this._log.info("ICE Connection reestablished."),this._mediaStatus=_e.State.Open,this._signalingStatus===_e.State.Open&&(this._publisher.info("connection","reconnected",null,this),this._log.debug("#reconnected"),this.emit("reconnected"),this._status=_e.State.Open))},this._onMessageReceived=a=>{const{callsid:l,content:u,contenttype:f,messagetype:d,voiceeventsid:p}=a;if(this.parameters.CallSid!==l){this._log.warn(`Received a message from a different callsid: ${l}`);return}const v={content:u,contentType:f,messageType:d,voiceEventSid:p};this._publisher.info("call-message",d,{content_type:f,event_type:"received",voice_event_sid:p},this),this._log.debug("#messageReceived",JSON.stringify(v)),this.emit("messageReceived",v)},this._onMessageSent=a=>{if(!this._messages.has(a)){this._log.warn(`Received a messageSent with a voiceEventSid that doesn't exists: ${a}`);return}const l=this._messages.get(a);this._messages.delete(a),this._publisher.info("call-message",l==null?void 0:l.messageType,{content_type:l==null?void 0:l.contentType,event_type:"sent",voice_event_sid:a},this),this._log.debug("#messageSent",JSON.stringify(l)),this.emit("messageSent",l)},this._onRinging=a=>{if(this._setCallSid(a),this._status!==_e.State.Connecting&&this._status!==_e.State.Ringing)return;const l=!!a.sdp;this._status=_e.State.Ringing,this._publisher.info("connection","outgoing-ringing",{hasEarlyMedia:l},this),this._log.debug("#ringing"),this.emit("ringing",l)},this._onRTCSample=a=>{const l=Object.assign(Object.assign({},a),{inputVolume:this._latestInputVolume,outputVolume:this._latestOutputVolume});this._codec=l.codecName,this._metricsSamples.push(l),this._metricsSamples.length>=kz&&this._publishMetrics(),this.emit("sample",a)},this._onSignalingError=a=>{const{callsid:l,voiceeventsid:u,error:f}=a;if(this.parameters.CallSid!==l){this._log.warn(`Received an error from a different callsid: ${l}`);return}if(u&&this._messages.has(u)){this._messages.delete(u),this._log.warn("Received an error while sending a message.",a),this._publisher.error("call-message","error",{code:f.code,message:f.message,voice_event_sid:u},this);let d;const p=aw(!!this._options.enableImprovedSignalingErrorPrecision,f.code);typeof p<"u"&&(d=new p(f)),d||(this._log.error("Unknown Call Message Error: ",f),d=new xn.UnknownError(f.message,f)),this._log.debug("#error",f,d),this.emit("error",d)}},this._onSignalingReconnected=()=>{this._signalingStatus===_e.State.Reconnecting&&(this._log.info("Signaling Connection reestablished."),this._signalingStatus=_e.State.Open,this._mediaStatus===_e.State.Open&&(this._publisher.info("connection","reconnected",null,this),this._log.debug("#reconnected"),this.emit("reconnected"),this._status=_e.State.Open))},this._onTransportClose=()=>{this._log.error("Received transportClose from pstream"),this._log.debug("#transportClose"),this.emit("transportClose"),this._signalingReconnectToken?(this._status=_e.State.Reconnecting,this._signalingStatus=_e.State.Reconnecting,this._publisher.info("connection","reconnecting",null,this),this._log.debug("#reconnecting"),this.emit("reconnecting",new Kr.ConnectionDisconnected)):(this._status=_e.State.Closed,this._signalingStatus=_e.State.Closed)},this._reemitWarning=(a,l)=>{const u=/^audio/.test(a.name)?"audio-level-":"network-quality-",f=Cz[a.threshold.name];let d;a.name in Ek?d=Ek[a.name][a.threshold.name]:a.name in kk&&(d=kk[a.name]);const p=f+d;this._emitWarning(u,p,a.threshold.value,a.values||a.value,l,a)},this._reemitWarningCleared=a=>{this._reemitWarning(a,!0)},this._soundcache=t.soundcache,typeof t.onIgnore=="function"&&(this._onIgnore=t.onIgnore);const r=n&&n.twimlParams||{};this.customParameters=new Map(Object.entries(r).map(([a,l])=>[a,String(l)])),Object.assign(this._options,n),this._options.callParameters&&(this.parameters=this._options.callParameters),this._options.reconnectToken&&(this._signalingReconnectToken=this._options.reconnectToken),this._voiceEventSidGenerator=this._options.voiceEventSidGenerator||dw,this._direction=this.parameters.CallSid&&!this._options.reconnectCallSid?_e.CallDirection.Incoming:_e.CallDirection.Outgoing,this.parameters?this.callerInfo=this.parameters.StirStatus?{isVerified:this.parameters.StirStatus==="TN-Validation-Passed-A"}:null:this.callerInfo=null,this._mediaReconnectBackoff=new rw(bk),this._mediaReconnectBackoff.on("ready",()=>this._mediaHandler.iceRestart()),this.outboundConnectionId=Rz();const i=this._publisher=t.publisher;this._direction===_e.CallDirection.Incoming?i.info("connection","incoming",null,this):i.info("connection","outgoing",{preflight:this._options.preflight,reconnect:!!this._options.reconnectCallSid},this);const s=this._monitor=new(this._options.StatsMonitor||Sz);s.on("sample",this._onRTCSample),s.disableWarnings(),setTimeout(()=>s.enableWarnings(),Iz),s.on("warning",(a,l)=>{(a.name==="bytesSent"||a.name==="bytesReceived")&&this._onMediaFailure(_e.MediaFailure.LowBytes),this._reemitWarning(a,l)}),s.on("warning-cleared",a=>{this._reemitWarningCleared(a)}),this._mediaHandler=new this._options.MediaHandler(t.audioHelper,t.pstream,{MediaStream:this._options.MediaStream,RTCPeerConnection:this._options.RTCPeerConnection,codecPreferences:this._options.codecPreferences,dscp:this._options.dscp,forceAggressiveIceNomination:this._options.forceAggressiveIceNomination,maxAverageBitrate:this._options.maxAverageBitrate}),this.on("volume",(a,l)=>{this._inputVolumeStreak=this._checkVolume(a,this._inputVolumeStreak,this._latestInputVolume,"input"),this._outputVolumeStreak=this._checkVolume(l,this._outputVolumeStreak,this._latestOutputVolume,"output"),this._latestInputVolume=a,this._latestOutputVolume=l}),this._mediaHandler.onaudio=a=>{this._log.debug("#audio"),this.emit("audio",a)},this._mediaHandler.onvolume=(a,l,u,f)=>{s.addVolumes(u/255*32767,f/255*32767),this.emit("volume",a,l)},this._mediaHandler.ondtlstransportstatechange=a=>{const l=a==="failed"?"error":"debug";this._publisher.post(l,"dtls-transport-state",a,null,this)},this._mediaHandler.onpcconnectionstatechange=a=>{let l="debug";const u=this._mediaHandler.getRTCDtlsTransport();a==="failed"&&(l=u&&u.state==="failed"?"error":"warning"),this._publisher.post(l,"pc-connection-state",a,null,this)},this._mediaHandler.onicecandidate=a=>{const l=new qm(a).toPayload();this._publisher.debug("ice-candidate","ice-candidate",l,this)},this._mediaHandler.onselectedcandidatepairchange=a=>{const l=new qm(a.local).toPayload(),u=new qm(a.remote,!0).toPayload();this._publisher.debug("ice-candidate","selected-ice-candidate-pair",{local_candidate:l,remote_candidate:u},this)},this._mediaHandler.oniceconnectionstatechange=a=>{const l=a==="failed"?"error":"debug";this._publisher.post(l,"ice-connection-state",a,null,this)},this._mediaHandler.onicegatheringfailure=a=>{this._publisher.warn("ice-gathering-state",a,null,this),this._onMediaFailure(_e.MediaFailure.IceGatheringFailed)},this._mediaHandler.onicegatheringstatechange=a=>{this._publisher.debug("ice-gathering-state",a,null,this)},this._mediaHandler.onsignalingstatechange=a=>{this._publisher.debug("signaling-state",a,null,this)},this._mediaHandler.ondisconnected=a=>{this._log.warn(a),this._publisher.warn("network-quality-warning-raised","ice-connectivity-lost",{message:a},this),this._log.debug("#warning","ice-connectivity-lost"),this.emit("warning","ice-connectivity-lost"),this._onMediaFailure(_e.MediaFailure.ConnectionDisconnected)},this._mediaHandler.onfailed=a=>{this._onMediaFailure(_e.MediaFailure.ConnectionFailed)},this._mediaHandler.onconnected=()=>{this._status===_e.State.Reconnecting&&this._onMediaReconnected()},this._mediaHandler.onreconnected=a=>{this._log.info(a),this._publisher.info("network-quality-warning-cleared","ice-connectivity-lost",{message:a},this),this._log.debug("#warning-cleared","ice-connectivity-lost"),this.emit("warning-cleared","ice-connectivity-lost"),this._onMediaReconnected()},this._mediaHandler.onerror=a=>{a.disconnect===!0&&this._disconnect(a.info&&a.info.message);const l=a.info.twilioError||new xn.UnknownError(a.info.message);this._log.error("Received an error from MediaStream:",a),this._log.debug("#error",l),this.emit("error",l)},this._mediaHandler.onopen=()=>{this._status===_e.State.Open||this._status===_e.State.Reconnecting||(this._status===_e.State.Ringing||this._status===_e.State.Connecting?(this.mute(this._mediaHandler.isMuted),this._mediaStatus=_e.State.Open,this._maybeTransitionToOpen()):this._mediaHandler.close())},this._mediaHandler.onclose=()=>{this._status=_e.State.Closed,this._options.shouldPlayDisconnect&&this._options.shouldPlayDisconnect()&&!this._isCancelled&&!this._isRejected&&this._soundcache.get(Te.SoundName.Disconnect).play(),s.disable(),this._publishMetrics(),!this._isCancelled&&!this._isRejected&&(this._log.debug("#disconnect"),this.emit("disconnect",this))},this._pstream=t.pstream,this._pstream.on("ack",this._onAck),this._pstream.on("cancel",this._onCancel),this._pstream.on("error",this._onSignalingError),this._pstream.on("ringing",this._onRinging),this._pstream.on("transportClose",this._onTransportClose),this._pstream.on("connected",this._onConnected),this._pstream.on("message",this._onMessageReceived),this.on("error",a=>{this._publisher.error("connection","error",{code:a.code,message:a.message},this),this._pstream&&this._pstream.status==="disconnected"&&this._cleanupEventListeners()}),this.on("disconnect",()=>{this._cleanupEventListeners()})}_setInputTracksFromStream(t){return this._mediaHandler.setInputTracksFromStream(t)}_setSinkIds(t){return this._mediaHandler._setSinkIds(t)}accept(t){if(this._log.debug(".accept",t),this._status!==_e.State.Pending){this._log.debug(`.accept noop. status is '${this._status}'`);return}t=t||{};const n=t.rtcConfiguration||this._options.rtcConfiguration,r=t.rtcConstraints||this._options.rtcConstraints||{},i={audio:typeof r.audio<"u"?r.audio:!0};this._status=_e.State.Connecting;const s=()=>{if(this._status!==_e.State.Connecting){this._cleanupEventListeners(),this._mediaHandler.close();return}const u=d=>{const p=this._direction===_e.CallDirection.Incoming?"accepted-by-local":"accepted-by-remote";this._publisher.info("connection",p,null,this);const{codecName:v,codecParams:m}=DW(this._mediaHandler.version.getSDP());this._publisher.info("settings","codec",{codec_params:m,selected_codec:v},this),this._monitor.enable(d)},f=typeof this._options.getSinkIds=="function"&&this._options.getSinkIds();if(Array.isArray(f)&&this._mediaHandler._setSinkIds(f).catch(()=>{}),this._pstream.addListener("hangup",this._onHangup),this._direction===_e.CallDirection.Incoming)this._isAnswered=!0,this._pstream.on("answer",this._onAnswer),this._mediaHandler.answerIncomingCall(this.parameters.CallSid,this._options.offerSdp,n,u);else{const d=Array.from(this.customParameters.entries()).map(p=>`${encodeURIComponent(p[0])}=${encodeURIComponent(p[1])}`).join("&");this._pstream.on("answer",this._onAnswer),this._mediaHandler.makeOutgoingCall(d,this._signalingReconnectToken,this._options.reconnectCallSid||this.outboundConnectionId,n,u)}};this._options.beforeAccept&&this._options.beforeAccept(this);const a=typeof this._options.getInputStream=="function"&&this._options.getInputStream();(a?this._mediaHandler.setInputTracksFromStream(a):this._mediaHandler.openDefaultDeviceWithConstraints(i)).then(()=>{this._publisher.info("get-user-media","succeeded",{data:{audioConstraints:i}},this),s()},u=>{let f;u.code===31208||["PermissionDeniedError","NotAllowedError"].indexOf(u.name)!==-1?(f=new $u.PermissionDeniedError,this._publisher.error("get-user-media","denied",{data:{audioConstraints:i,error:u}},this)):(f=new $u.AcquisitionFailedError,this._publisher.error("get-user-media","failed",{data:{audioConstraints:i,error:u}},this)),this._disconnect(),this._log.debug("#error",u),this.emit("error",f)})}disconnect(){this._log.debug(".disconnect"),this._disconnect()}getLocalStream(){return this._mediaHandler&&this._mediaHandler.stream}getRemoteStream(){return this._mediaHandler&&this._mediaHandler._remoteStream}ignore(){if(this._log.debug(".ignore"),this._status!==_e.State.Pending){this._log.debug(`.ignore noop. status is '${this._status}'`);return}this._status=_e.State.Closed,this._mediaHandler.ignore(this.parameters.CallSid),this._publisher.info("connection","ignored-by-local",null,this),this._onIgnore&&this._onIgnore()}isMuted(){return this._mediaHandler.isMuted}mute(t=!0){this._log.debug(".mute",t);const n=this._mediaHandler.isMuted;this._mediaHandler.mute(t);const r=this._mediaHandler.isMuted;n!==r&&(this._publisher.info("connection",r?"muted":"unmuted",null,this),this._log.debug("#mute",r),this.emit("mute",r,this))}postFeedback(t,n){if(typeof t>"u"||t===null)return this._postFeedbackDeclined();if(!Object.values(_e.FeedbackScore).includes(t))throw new gt(`Feedback score must be one of: ${Object.values(_e.FeedbackScore)}`);if(typeof n<"u"&&n!==null&&!Object.values(_e.FeedbackIssue).includes(n))throw new gt(`Feedback issue must be one of: ${Object.values(_e.FeedbackIssue)}`);return this._publisher.info("feedback","received",{issue_name:n,quality_score:t},this,!0)}reject(){if(this._log.debug(".reject"),this._status!==_e.State.Pending){this._log.debug(`.reject noop. status is '${this._status}'`);return}this._isRejected=!0,this._pstream.reject(this.parameters.CallSid),this._mediaHandler.reject(this.parameters.CallSid),this._publisher.info("connection","rejected-by-local",null,this),this._cleanupEventListeners(),this._mediaHandler.close(),this._status=_e.State.Closed,this._log.debug("#reject"),this.emit("reject")}sendDigits(t){if(this._log.debug(".sendDigits",t),t.match(/[^0-9*#w]/))throw new gt("Illegal character passed into sendDigits");const n=this._options.customSounds||{},r=[];t.split("").forEach(l=>{let u=l!=="w"?`dtmf${l}`:"";u==="dtmf*"&&(u="dtmfs"),u==="dtmf#"&&(u="dtmfh"),r.push(u)});const i=()=>{const l=r.shift();l&&(this._options.dialtonePlayer&&!n[l]?this._options.dialtonePlayer.play(l):this._soundcache.get(l).play()),r.length&&setTimeout(()=>i(),200)};i();const s=this._mediaHandler.getOrCreateDTMFSender();function a(l){if(!l.length)return;const u=l.shift();u&&u.length&&s.insertDTMF(u,Ez,bz),setTimeout(a.bind(null,l),Tz)}if(s){if(!("canInsertDTMF"in s)||s.canInsertDTMF){this._log.info("Sending digits using RTCDTMFSender"),a(t.split("w"));return}this._log.info("RTCDTMFSender cannot insert DTMF")}if(this._log.info("Sending digits over PStream"),this._pstream!==null&&this._pstream.status!=="disconnected")this._pstream.dtmf(this.parameters.CallSid,t);else{const l=new xn.ConnectionError("Could not send DTMF: Signaling channel is disconnected");this._log.debug("#error",l),this.emit("error",l)}}sendMessage(t){this._log.debug(".sendMessage",JSON.stringify(t));const{content:n,contentType:r,messageType:i}=t;if(typeof n>"u"||n===null)throw new gt("`content` is empty");if(typeof i!="string")throw new gt("`messageType` must be a string.");if(i.length===0)throw new gt("`messageType` must be a non-empty string.");if(this._pstream===null)throw new ui("Could not send CallMessage; Signaling channel is disconnected");const s=this.parameters.CallSid;if(typeof this.parameters.CallSid>"u")throw new ui("Could not send CallMessage; Call has no CallSid");const a=this._voiceEventSidGenerator();return this._messages.set(a,{content:n,contentType:r,messageType:i,voiceEventSid:a}),this._pstream.sendMessage(s,n,r,i,a),a}status(){return this._status}_checkVolume(t,n,r,i){const s=n>=10;let a=0;return r===t&&(a=n),a>=10?this._emitWarning("audio-level-",`constant-audio-${i}-level`,10,a,!1):s&&this._emitWarning("audio-level-",`constant-audio-${i}-level`,10,a,!0),a}_cleanupEventListeners(){const t=()=>{this._pstream&&(this._pstream.removeListener("ack",this._onAck),this._pstream.removeListener("answer",this._onAnswer),this._pstream.removeListener("cancel",this._onCancel),this._pstream.removeListener("error",this._onSignalingError),this._pstream.removeListener("hangup",this._onHangup),this._pstream.removeListener("ringing",this._onRinging),this._pstream.removeListener("transportClose",this._onTransportClose),this._pstream.removeListener("connected",this._onConnected),this._pstream.removeListener("message",this._onMessageReceived))};t(),setTimeout(t,0)}_createMetricPayload(){const t={call_sid:this.parameters.CallSid,dscp:!!this._options.dscp,sdk_version:vu};return this._options.gateway&&(t.gateway=this._options.gateway),t.direction=this._direction,t}_disconnect(t,n){if(t=typeof t=="string"?t:null,!(this._status!==_e.State.Open&&this._status!==_e.State.Connecting&&this._status!==_e.State.Reconnecting&&this._status!==_e.State.Ringing)){if(this._log.info("Disconnecting..."),this._pstream!==null&&this._pstream.status!=="disconnected"&&this._shouldSendHangup){const r=this.parameters.CallSid||this.outboundConnectionId;r&&this._pstream.hangup(r,t)}this._cleanupEventListeners(),this._mediaHandler.close(),n||this._publisher.info("connection","disconnected-by-local",null,this)}}_maybeTransitionToOpen(){this._wasConnected,this._isAnswered&&(this._onSignalingReconnected(),this._signalingStatus=_e.State.Open,this._mediaHandler&&this._mediaHandler.status==="open"&&(this._status=_e.State.Open,this._wasConnected||(this._wasConnected=!0,this._log.debug("#accept"),this.emit("accept",this))))}_postFeedbackDeclined(){return this._publisher.info("feedback","received-none",null,this,!0)}_publishMetrics(){this._metricsSamples.length!==0&&this._publisher.postMetrics("quality-metrics-samples","metrics-sample",this._metricsSamples.splice(0),this._createMetricPayload(),this).catch(t=>{this._log.warn("Unable to post metrics to Insights. Received error:",t)})}_setCallSid(t){const n=t.callsid;n&&(this.parameters.CallSid=n,this._mediaHandler.callSid=n)}}_e.toString=()=>"[Twilio.Call class]";(function(e){(function(t){t.Closed="closed",t.Connecting="connecting",t.Open="open",t.Pending="pending",t.Reconnecting="reconnecting",t.Ringing="ringing"})(e.State||(e.State={})),function(t){t.AudioLatency="audio-latency",t.ChoppyAudio="choppy-audio",t.DroppedCall="dropped-call",t.Echo="echo",t.NoisyCall="noisy-call",t.OneWayAudio="one-way-audio"}(e.FeedbackIssue||(e.FeedbackIssue={})),function(t){t[t.One=1]="One",t[t.Two=2]="Two",t[t.Three=3]="Three",t[t.Four=4]="Four",t[t.Five=5]="Five"}(e.FeedbackScore||(e.FeedbackScore={})),function(t){t.Incoming="INCOMING",t.Outgoing="OUTGOING"}(e.CallDirection||(e.CallDirection={})),function(t){t.Opus="opus",t.PCMU="pcmu"}(e.Codec||(e.Codec={})),function(t){t.None="none",t.Timeout="timeout"}(e.IceGatheringFailureReason||(e.IceGatheringFailureReason={})),function(t){t.ConnectionDisconnected="ConnectionDisconnected",t.ConnectionFailed="ConnectionFailed",t.IceGatheringFailed="IceGatheringFailed",t.LowBytes="LowBytes"}(e.MediaFailure||(e.MediaFailure={}))})(_e||(_e={}));function Rz(){return"TJSxxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}function AA(e,t){return function(){return e.apply(t,arguments)}}const{toString:xz}=Object.prototype,{getPrototypeOf:p0}=Object,{iterator:ev,toStringTag:OA}=Symbol,tv=(e=>t=>{const n=xz.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),_i=e=>(e=e.toLowerCase(),t=>tv(t)===e),nv=e=>t=>typeof t===e,{isArray:Bu}=Array,Pu=nv("undefined");function Kc(e){return e!==null&&!Pu(e)&&e.constructor!==null&&!Pu(e.constructor)&&or(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const NA=_i("ArrayBuffer");function $z(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&NA(e.buffer),t}const Pz=nv("string"),or=nv("function"),MA=nv("number"),Qc=e=>e!==null&&typeof e=="object",Az=e=>e===!0||e===!1,Dh=e=>{if(tv(e)!=="object")return!1;const t=p0(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(OA in e)&&!(ev in e)},Oz=e=>{if(!Qc(e)||Kc(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Nz=_i("Date"),Mz=_i("File"),Lz=_i("Blob"),Dz=_i("FileList"),Fz=e=>Qc(e)&&or(e.pipe),jz=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||or(e.append)&&((t=tv(e))==="formdata"||t==="object"&&or(e.toString)&&e.toString()==="[object FormData]"))},Uz=_i("URLSearchParams"),[Bz,Wz,zz,Hz]=["ReadableStream","Request","Response","Headers"].map(_i),Vz=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Jc(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),Bu(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{if(Kc(e))return;const s=n?Object.getOwnPropertyNames(e):Object.keys(e),a=s.length;let l;for(r=0;r<a;r++)l=s[r],t.call(null,e[l],l,e)}}function LA(e,t){if(Kc(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const za=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,DA=e=>!Pu(e)&&e!==za;function hw(){const{caseless:e,skipUndefined:t}=DA(this)&&this||{},n={},r=(i,s)=>{const a=e&&LA(n,s)||s;Dh(n[a])&&Dh(i)?n[a]=hw(n[a],i):Dh(i)?n[a]=hw({},i):Bu(i)?n[a]=i.slice():(!t||!Pu(i))&&(n[a]=i)};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&Jc(arguments[i],r);return n}const qz=(e,t,n,{allOwnKeys:r}={})=>(Jc(t,(i,s)=>{n&&or(i)?e[s]=AA(i,n):e[s]=i},{allOwnKeys:r}),e),Gz=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Kz=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Qz=(e,t,n,r)=>{let i,s,a;const l={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)a=i[s],(!r||r(a,e,t))&&!l[a]&&(t[a]=e[a],l[a]=!0);e=n!==!1&&p0(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Jz=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},Yz=e=>{if(!e)return null;if(Bu(e))return e;let t=e.length;if(!MA(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Xz=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&p0(Uint8Array)),Zz=(e,t)=>{const r=(e&&e[ev]).call(e);let i;for(;(i=r.next())&&!i.done;){const s=i.value;t.call(e,s[0],s[1])}},eH=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},tH=_i("HTMLFormElement"),nH=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),Ik=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),rH=_i("RegExp"),FA=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Jc(n,(i,s)=>{let a;(a=t(i,s,e))!==!1&&(r[s]=a||i)}),Object.defineProperties(e,r)},iH=e=>{FA(e,(t,n)=>{if(or(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(or(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},sH=(e,t)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return Bu(e)?r(e):r(String(e).split(t)),n},aH=()=>{},oH=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function uH(e){return!!(e&&or(e.append)&&e[OA]==="FormData"&&e[ev])}const lH=e=>{const t=new Array(10),n=(r,i)=>{if(Qc(r)){if(t.indexOf(r)>=0)return;if(Kc(r))return r;if(!("toJSON"in r)){t[i]=r;const s=Bu(r)?[]:{};return Jc(r,(a,l)=>{const u=n(a,i+1);!Pu(u)&&(s[l]=u)}),t[i]=void 0,s}}return r};return n(e,0)},cH=_i("AsyncFunction"),fH=e=>e&&(Qc(e)||or(e))&&or(e.then)&&or(e.catch),jA=((e,t)=>e?setImmediate:t?((n,r)=>(za.addEventListener("message",({source:i,data:s})=>{i===za&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),za.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",or(za.postMessage)),dH=typeof queueMicrotask<"u"?queueMicrotask.bind(za):typeof process<"u"&&process.nextTick||jA,hH=e=>e!=null&&or(e[ev]),V={isArray:Bu,isArrayBuffer:NA,isBuffer:Kc,isFormData:jz,isArrayBufferView:$z,isString:Pz,isNumber:MA,isBoolean:Az,isObject:Qc,isPlainObject:Dh,isEmptyObject:Oz,isReadableStream:Bz,isRequest:Wz,isResponse:zz,isHeaders:Hz,isUndefined:Pu,isDate:Nz,isFile:Mz,isBlob:Lz,isRegExp:rH,isFunction:or,isStream:Fz,isURLSearchParams:Uz,isTypedArray:Xz,isFileList:Dz,forEach:Jc,merge:hw,extend:qz,trim:Vz,stripBOM:Gz,inherits:Kz,toFlatObject:Qz,kindOf:tv,kindOfTest:_i,endsWith:Jz,toArray:Yz,forEachEntry:Zz,matchAll:eH,isHTMLForm:tH,hasOwnProperty:Ik,hasOwnProp:Ik,reduceDescriptors:FA,freezeMethods:iH,toObjectSet:sH,toCamelCase:nH,noop:aH,toFiniteNumber:oH,findKey:LA,global:za,isContextDefined:DA,isSpecCompliantForm:uH,toJSONObject:lH,isAsyncFn:cH,isThenable:fH,setImmediate:jA,asap:dH,isIterable:hH};function je(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}V.inherits(je,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:V.toJSONObject(this.config),code:this.code,status:this.status}}});const UA=je.prototype,BA={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{BA[e]={value:e}});Object.defineProperties(je,BA);Object.defineProperty(UA,"isAxiosError",{value:!0});je.from=(e,t,n,r,i,s)=>{const a=Object.create(UA);V.toFlatObject(e,a,function(d){return d!==Error.prototype},f=>f!=="isAxiosError");const l=e&&e.message?e.message:"Error",u=t==null&&e?e.code:t;return je.call(a,l,u,n,r,i),e&&a.cause==null&&Object.defineProperty(a,"cause",{value:e,configurable:!0}),a.name=e&&e.name||"Error",s&&Object.assign(a,s),a};const pH=null;function pw(e){return V.isPlainObject(e)||V.isArray(e)}function WA(e){return V.endsWith(e,"[]")?e.slice(0,-2):e}function Ck(e,t,n){return e?e.concat(t).map(function(i,s){return i=WA(i),!n&&s?"["+i+"]":i}).join(n?".":""):t}function vH(e){return V.isArray(e)&&!e.some(pw)}const gH=V.toFlatObject(V,{},null,function(t){return/^is[A-Z]/.test(t)});function rv(e,t,n){if(!V.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=V.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,b){return!V.isUndefined(b[E])});const r=n.metaTokens,i=n.visitor||d,s=n.dots,a=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&V.isSpecCompliantForm(t);if(!V.isFunction(i))throw new TypeError("visitor must be a function");function f(y){if(y===null)return"";if(V.isDate(y))return y.toISOString();if(V.isBoolean(y))return y.toString();if(!u&&V.isBlob(y))throw new je("Blob is not supported. Use a Buffer instead.");return V.isArrayBuffer(y)||V.isTypedArray(y)?u&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function d(y,E,b){let w=y;if(y&&!b&&typeof y=="object"){if(V.endsWith(E,"{}"))E=r?E:E.slice(0,-2),y=JSON.stringify(y);else if(V.isArray(y)&&vH(y)||(V.isFileList(y)||V.endsWith(E,"[]"))&&(w=V.toArray(y)))return E=WA(E),w.forEach(function(x,M){!(V.isUndefined(x)||x===null)&&t.append(a===!0?Ck([E],M,s):a===null?E:E+"[]",f(x))}),!1}return pw(y)?!0:(t.append(Ck(b,E,s),f(y)),!1)}const p=[],v=Object.assign(gH,{defaultVisitor:d,convertValue:f,isVisitable:pw});function m(y,E){if(!V.isUndefined(y)){if(p.indexOf(y)!==-1)throw Error("Circular reference detected in "+E.join("."));p.push(y),V.forEach(y,function(w,T){(!(V.isUndefined(w)||w===null)&&i.call(t,w,V.isString(T)?T.trim():T,E,v))===!0&&m(w,E?E.concat(T):[T])}),p.pop()}}if(!V.isObject(e))throw new TypeError("data must be an object");return m(e),t}function Rk(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function v0(e,t){this._pairs=[],e&&rv(e,this,t)}const zA=v0.prototype;zA.append=function(t,n){this._pairs.push([t,n])};zA.toString=function(t){const n=t?function(r){return t.call(this,r,Rk)}:Rk;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function mH(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function HA(e,t,n){if(!t)return e;const r=n&&n.encode||mH;V.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(t,n):s=V.isURLSearchParams(t)?t.toString():new v0(t,n).toString(r),s){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class xk{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){V.forEach(this.handlers,function(r){r!==null&&t(r)})}}const VA={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},yH=typeof URLSearchParams<"u"?URLSearchParams:v0,_H=typeof FormData<"u"?FormData:null,wH=typeof Blob<"u"?Blob:null,SH={isBrowser:!0,classes:{URLSearchParams:yH,FormData:_H,Blob:wH},protocols:["http","https","file","blob","url","data"]},g0=typeof window<"u"&&typeof document<"u",vw=typeof navigator=="object"&&navigator||void 0,bH=g0&&(!vw||["ReactNative","NativeScript","NS"].indexOf(vw.product)<0),TH=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",EH=g0&&window.location.href||"http://localhost",kH=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:g0,hasStandardBrowserEnv:bH,hasStandardBrowserWebWorkerEnv:TH,navigator:vw,origin:EH},Symbol.toStringTag,{value:"Module"})),An={...kH,...SH};function IH(e,t){return rv(e,new An.classes.URLSearchParams,{visitor:function(n,r,i,s){return An.isNode&&V.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...t})}function CH(e){return V.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function RH(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}function qA(e){function t(n,r,i,s){let a=n[s++];if(a==="__proto__")return!0;const l=Number.isFinite(+a),u=s>=n.length;return a=!a&&V.isArray(i)?i.length:a,u?(V.hasOwnProp(i,a)?i[a]=[i[a],r]:i[a]=r,!l):((!i[a]||!V.isObject(i[a]))&&(i[a]=[]),t(n,r,i[a],s)&&V.isArray(i[a])&&(i[a]=RH(i[a])),!l)}if(V.isFormData(e)&&V.isFunction(e.entries)){const n={};return V.forEachEntry(e,(r,i)=>{t(CH(r),i,n,0)}),n}return null}function xH(e,t,n){if(V.isString(e))try{return(t||JSON.parse)(e),V.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Yc={transitional:VA,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=V.isObject(t);if(s&&V.isHTMLForm(t)&&(t=new FormData(t)),V.isFormData(t))return i?JSON.stringify(qA(t)):t;if(V.isArrayBuffer(t)||V.isBuffer(t)||V.isStream(t)||V.isFile(t)||V.isBlob(t)||V.isReadableStream(t))return t;if(V.isArrayBufferView(t))return t.buffer;if(V.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return IH(t,this.formSerializer).toString();if((l=V.isFileList(t))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return rv(l?{"files[]":t}:t,u&&new u,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),xH(t)):t}],transformResponse:[function(t){const n=this.transitional||Yc.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(V.isResponse(t)||V.isReadableStream(t))return t;if(t&&V.isString(t)&&(r&&!this.responseType||i)){const a=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t,this.parseReviver)}catch(l){if(a)throw l.name==="SyntaxError"?je.from(l,je.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:An.classes.FormData,Blob:An.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};V.forEach(["delete","get","head","post","put","patch"],e=>{Yc.headers[e]={}});const $H=V.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),PH=e=>{const t={};let n,r,i;return e&&e.split(`
`).forEach(function(a){i=a.indexOf(":"),n=a.substring(0,i).trim().toLowerCase(),r=a.substring(i+1).trim(),!(!n||t[n]&&$H[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},$k=Symbol("internals");function Ll(e){return e&&String(e).trim().toLowerCase()}function Fh(e){return e===!1||e==null?e:V.isArray(e)?e.map(Fh):String(e)}function AH(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const OH=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Gm(e,t,n,r,i){if(V.isFunction(r))return r.call(this,t,n);if(i&&(t=n),!!V.isString(t)){if(V.isString(r))return t.indexOf(r)!==-1;if(V.isRegExp(r))return r.test(t)}}function NH(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function MH(e,t){const n=V.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,s,a){return this[r].call(this,t,i,s,a)},configurable:!0})})}let ur=class{constructor(t){t&&this.set(t)}set(t,n,r){const i=this;function s(l,u,f){const d=Ll(u);if(!d)throw new Error("header name must be a non-empty string");const p=V.findKey(i,d);(!p||i[p]===void 0||f===!0||f===void 0&&i[p]!==!1)&&(i[p||u]=Fh(l))}const a=(l,u)=>V.forEach(l,(f,d)=>s(f,d,u));if(V.isPlainObject(t)||t instanceof this.constructor)a(t,n);else if(V.isString(t)&&(t=t.trim())&&!OH(t))a(PH(t),n);else if(V.isObject(t)&&V.isIterable(t)){let l={},u,f;for(const d of t){if(!V.isArray(d))throw TypeError("Object iterator must return a key-value pair");l[f=d[0]]=(u=l[f])?V.isArray(u)?[...u,d[1]]:[u,d[1]]:d[1]}a(l,n)}else t!=null&&s(n,t,r);return this}get(t,n){if(t=Ll(t),t){const r=V.findKey(this,t);if(r){const i=this[r];if(!n)return i;if(n===!0)return AH(i);if(V.isFunction(n))return n.call(this,i,r);if(V.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Ll(t),t){const r=V.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Gm(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let i=!1;function s(a){if(a=Ll(a),a){const l=V.findKey(r,a);l&&(!n||Gm(r,r[l],l,n))&&(delete r[l],i=!0)}}return V.isArray(t)?t.forEach(s):s(t),i}clear(t){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!t||Gm(this,this[s],s,t,!0))&&(delete this[s],i=!0)}return i}normalize(t){const n=this,r={};return V.forEach(this,(i,s)=>{const a=V.findKey(r,s);if(a){n[a]=Fh(i),delete n[s];return}const l=t?NH(s):String(s).trim();l!==s&&delete n[s],n[l]=Fh(i),r[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return V.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&V.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(i=>r.set(i)),r}static accessor(t){const r=(this[$k]=this[$k]={accessors:{}}).accessors,i=this.prototype;function s(a){const l=Ll(a);r[l]||(MH(i,a),r[l]=!0)}return V.isArray(t)?t.forEach(s):s(t),this}};ur.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);V.reduceDescriptors(ur.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});V.freezeMethods(ur);function Km(e,t){const n=this||Yc,r=t||n,i=ur.from(r.headers);let s=r.data;return V.forEach(e,function(l){s=l.call(n,s,i.normalize(),t?t.status:void 0)}),i.normalize(),s}function GA(e){return!!(e&&e.__CANCEL__)}function Wu(e,t,n){je.call(this,e??"canceled",je.ERR_CANCELED,t,n),this.name="CanceledError"}V.inherits(Wu,je,{__CANCEL__:!0});function KA(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new je("Request failed with status code "+n.status,[je.ERR_BAD_REQUEST,je.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function LH(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function DH(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,s=0,a;return t=t!==void 0?t:1e3,function(u){const f=Date.now(),d=r[s];a||(a=f),n[i]=u,r[i]=f;let p=s,v=0;for(;p!==i;)v+=n[p++],p=p%e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),f-a<t)return;const m=d&&f-d;return m?Math.round(v*1e3/m):void 0}}function FH(e,t){let n=0,r=1e3/t,i,s;const a=(f,d=Date.now())=>{n=d,i=null,s&&(clearTimeout(s),s=null),e(...f)};return[(...f)=>{const d=Date.now(),p=d-n;p>=r?a(f,d):(i=f,s||(s=setTimeout(()=>{s=null,a(i)},r-p)))},()=>i&&a(i)]}const yp=(e,t,n=3)=>{let r=0;const i=DH(50,250);return FH(s=>{const a=s.loaded,l=s.lengthComputable?s.total:void 0,u=a-r,f=i(u),d=a<=l;r=a;const p={loaded:a,total:l,progress:l?a/l:void 0,bytes:u,rate:f||void 0,estimated:f&&l&&d?(l-a)/f:void 0,event:s,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(p)},n)},Pk=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Ak=e=>(...t)=>V.asap(()=>e(...t)),jH=An.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,An.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(An.origin),An.navigator&&/(msie|trident)/i.test(An.navigator.userAgent)):()=>!0,UH=An.hasStandardBrowserEnv?{write(e,t,n,r,i,s){const a=[e+"="+encodeURIComponent(t)];V.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),V.isString(r)&&a.push("path="+r),V.isString(i)&&a.push("domain="+i),s===!0&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function BH(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function WH(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function QA(e,t,n){let r=!BH(t);return e&&(r||n==!1)?WH(e,t):t}const Ok=e=>e instanceof ur?{...e}:e;function ro(e,t){t=t||{};const n={};function r(f,d,p,v){return V.isPlainObject(f)&&V.isPlainObject(d)?V.merge.call({caseless:v},f,d):V.isPlainObject(d)?V.merge({},d):V.isArray(d)?d.slice():d}function i(f,d,p,v){if(V.isUndefined(d)){if(!V.isUndefined(f))return r(void 0,f,p,v)}else return r(f,d,p,v)}function s(f,d){if(!V.isUndefined(d))return r(void 0,d)}function a(f,d){if(V.isUndefined(d)){if(!V.isUndefined(f))return r(void 0,f)}else return r(void 0,d)}function l(f,d,p){if(p in t)return r(f,d);if(p in e)return r(void 0,f)}const u={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(f,d,p)=>i(Ok(f),Ok(d),p,!0)};return V.forEach(Object.keys({...e,...t}),function(d){const p=u[d]||i,v=p(e[d],t[d],d);V.isUndefined(v)&&p!==l||(n[d]=v)}),n}const JA=e=>{const t=ro({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:a,auth:l}=t;if(t.headers=a=ur.from(a),t.url=HA(QA(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),V.isFormData(n)){if(An.hasStandardBrowserEnv||An.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(V.isFunction(n.getHeaders)){const u=n.getHeaders(),f=["content-type","content-length"];Object.entries(u).forEach(([d,p])=>{f.includes(d.toLowerCase())&&a.set(d,p)})}}if(An.hasStandardBrowserEnv&&(r&&V.isFunction(r)&&(r=r(t)),r||r!==!1&&jH(t.url))){const u=i&&s&&UH.read(s);u&&a.set(i,u)}return t},zH=typeof XMLHttpRequest<"u",HH=zH&&function(e){return new Promise(function(n,r){const i=JA(e);let s=i.data;const a=ur.from(i.headers).normalize();let{responseType:l,onUploadProgress:u,onDownloadProgress:f}=i,d,p,v,m,y;function E(){m&&m(),y&&y(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let b=new XMLHttpRequest;b.open(i.method.toUpperCase(),i.url,!0),b.timeout=i.timeout;function w(){if(!b)return;const x=ur.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),W={data:!l||l==="text"||l==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:x,config:e,request:b};KA(function(K){n(K),E()},function(K){r(K),E()},W),b=null}"onloadend"in b?b.onloadend=w:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(w)},b.onabort=function(){b&&(r(new je("Request aborted",je.ECONNABORTED,e,b)),b=null)},b.onerror=function(M){const W=M&&M.message?M.message:"Network Error",z=new je(W,je.ERR_NETWORK,e,b);z.event=M||null,r(z),b=null},b.ontimeout=function(){let M=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const W=i.transitional||VA;i.timeoutErrorMessage&&(M=i.timeoutErrorMessage),r(new je(M,W.clarifyTimeoutError?je.ETIMEDOUT:je.ECONNABORTED,e,b)),b=null},s===void 0&&a.setContentType(null),"setRequestHeader"in b&&V.forEach(a.toJSON(),function(M,W){b.setRequestHeader(W,M)}),V.isUndefined(i.withCredentials)||(b.withCredentials=!!i.withCredentials),l&&l!=="json"&&(b.responseType=i.responseType),f&&([v,y]=yp(f,!0),b.addEventListener("progress",v)),u&&b.upload&&([p,m]=yp(u),b.upload.addEventListener("progress",p),b.upload.addEventListener("loadend",m)),(i.cancelToken||i.signal)&&(d=x=>{b&&(r(!x||x.type?new Wu(null,e,b):x),b.abort(),b=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const T=LH(i.url);if(T&&An.protocols.indexOf(T)===-1){r(new je("Unsupported protocol "+T+":",je.ERR_BAD_REQUEST,e));return}b.send(s||null)})},VH=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,i;const s=function(f){if(!i){i=!0,l();const d=f instanceof Error?f:this.reason;r.abort(d instanceof je?d:new Wu(d instanceof Error?d.message:d))}};let a=t&&setTimeout(()=>{a=null,s(new je(`timeout ${t} of ms exceeded`,je.ETIMEDOUT))},t);const l=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(f=>{f.unsubscribe?f.unsubscribe(s):f.removeEventListener("abort",s)}),e=null)};e.forEach(f=>f.addEventListener("abort",s));const{signal:u}=r;return u.unsubscribe=()=>V.asap(l),u}},qH=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,i;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},GH=async function*(e,t){for await(const n of KH(e))yield*qH(n,t)},KH=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},Nk=(e,t,n,r)=>{const i=GH(e,t);let s=0,a,l=u=>{a||(a=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:f,value:d}=await i.next();if(f){l(),u.close();return}let p=d.byteLength;if(n){let v=s+=p;n(v)}u.enqueue(new Uint8Array(d))}catch(f){throw l(f),f}},cancel(u){return l(u),i.return()}},{highWaterMark:2})},Mk=64*1024,{isFunction:zd}=V,QH=(({Request:e,Response:t})=>({Request:e,Response:t}))(V.global),{ReadableStream:Lk,TextEncoder:Dk}=V.global,Fk=(e,...t)=>{try{return!!e(...t)}catch{return!1}},JH=e=>{e=V.merge.call({skipUndefined:!0},QH,e);const{fetch:t,Request:n,Response:r}=e,i=t?zd(t):typeof fetch=="function",s=zd(n),a=zd(r);if(!i)return!1;const l=i&&zd(Lk),u=i&&(typeof Dk=="function"?(y=>E=>y.encode(E))(new Dk):async y=>new Uint8Array(await new n(y).arrayBuffer())),f=s&&l&&Fk(()=>{let y=!1;const E=new n(An.origin,{body:new Lk,method:"POST",get duplex(){return y=!0,"half"}}).headers.has("Content-Type");return y&&!E}),d=a&&l&&Fk(()=>V.isReadableStream(new r("").body)),p={stream:d&&(y=>y.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(y=>{!p[y]&&(p[y]=(E,b)=>{let w=E&&E[y];if(w)return w.call(E);throw new je(`Response type '${y}' is not supported`,je.ERR_NOT_SUPPORT,b)})});const v=async y=>{if(y==null)return 0;if(V.isBlob(y))return y.size;if(V.isSpecCompliantForm(y))return(await new n(An.origin,{method:"POST",body:y}).arrayBuffer()).byteLength;if(V.isArrayBufferView(y)||V.isArrayBuffer(y))return y.byteLength;if(V.isURLSearchParams(y)&&(y=y+""),V.isString(y))return(await u(y)).byteLength},m=async(y,E)=>{const b=V.toFiniteNumber(y.getContentLength());return b??v(E)};return async y=>{let{url:E,method:b,data:w,signal:T,cancelToken:x,timeout:M,onDownloadProgress:W,onUploadProgress:z,responseType:K,headers:A,withCredentials:ne="same-origin",fetchOptions:X}=JA(y),oe=t||fetch;K=K?(K+"").toLowerCase():"text";let he=VH([T,x&&x.toAbortSignal()],M),ye=null;const Se=he&&he.unsubscribe&&(()=>{he.unsubscribe()});let Ie;try{if(z&&f&&b!=="get"&&b!=="head"&&(Ie=await m(A,w))!==0){let G=new n(E,{method:"POST",body:w,duplex:"half"}),Qe;if(V.isFormData(w)&&(Qe=G.headers.get("content-type"))&&A.setContentType(Qe),G.body){const[Tn,ze]=Pk(Ie,yp(Ak(z)));w=Nk(G.body,Mk,Tn,ze)}}V.isString(ne)||(ne=ne?"include":"omit");const we=s&&"credentials"in n.prototype,ve={...X,signal:he,method:b.toUpperCase(),headers:A.normalize().toJSON(),body:w,duplex:"half",credentials:we?ne:void 0};ye=s&&new n(E,ve);let J=await(s?oe(ye,X):oe(E,ve));const fe=d&&(K==="stream"||K==="response");if(d&&(W||fe&&Se)){const G={};["status","statusText","headers"].forEach(ht=>{G[ht]=J[ht]});const Qe=V.toFiniteNumber(J.headers.get("content-length")),[Tn,ze]=W&&Pk(Qe,yp(Ak(W),!0))||[];J=new r(Nk(J.body,Mk,Tn,()=>{ze&&ze(),Se&&Se()}),G)}K=K||"text";let be=await p[V.findKey(p,K)||"text"](J,y);return!fe&&Se&&Se(),await new Promise((G,Qe)=>{KA(G,Qe,{data:be,headers:ur.from(J.headers),status:J.status,statusText:J.statusText,config:y,request:ye})})}catch(we){throw Se&&Se(),we&&we.name==="TypeError"&&/Load failed|fetch/i.test(we.message)?Object.assign(new je("Network Error",je.ERR_NETWORK,y,ye),{cause:we.cause||we}):je.from(we,we&&we.code,y,ye)}}},YH=new Map,YA=e=>{let t=e?e.env:{};const{fetch:n,Request:r,Response:i}=t,s=[r,i,n];let a=s.length,l=a,u,f,d=YH;for(;l--;)u=s[l],f=d.get(u),f===void 0&&d.set(u,f=l?new Map:JH(t)),d=f;return f};YA();const gw={http:pH,xhr:HH,fetch:{get:YA}};V.forEach(gw,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const jk=e=>`- ${e}`,XH=e=>V.isFunction(e)||e===null||e===!1,XA={getAdapter:(e,t)=>{e=V.isArray(e)?e:[e];const{length:n}=e;let r,i;const s={};for(let a=0;a<n;a++){r=e[a];let l;if(i=r,!XH(r)&&(i=gw[(l=String(r)).toLowerCase()],i===void 0))throw new je(`Unknown adapter '${l}'`);if(i&&(V.isFunction(i)||(i=i.get(t))))break;s[l||"#"+a]=i}if(!i){const a=Object.entries(s).map(([u,f])=>`adapter ${u} `+(f===!1?"is not supported by the environment":"is not available in the build"));let l=n?a.length>1?`since :
`+a.map(jk).join(`
`):" "+jk(a[0]):"as no adapter specified";throw new je("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return i},adapters:gw};function Qm(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Wu(null,e)}function Uk(e){return Qm(e),e.headers=ur.from(e.headers),e.data=Km.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),XA.getAdapter(e.adapter||Yc.adapter,e)(e).then(function(r){return Qm(e),r.data=Km.call(e,e.transformResponse,r),r.headers=ur.from(r.headers),r},function(r){return GA(r)||(Qm(e),r&&r.response&&(r.response.data=Km.call(e,e.transformResponse,r.response),r.response.headers=ur.from(r.response.headers))),Promise.reject(r)})}const ZA="1.12.2",iv={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{iv[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Bk={};iv.transitional=function(t,n,r){function i(s,a){return"[Axios v"+ZA+"] Transitional option '"+s+"'"+a+(r?". "+r:"")}return(s,a,l)=>{if(t===!1)throw new je(i(a," has been removed"+(n?" in "+n:"")),je.ERR_DEPRECATED);return n&&!Bk[a]&&(Bk[a]=!0,console.warn(i(a," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,a,l):!0}};iv.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function ZH(e,t,n){if(typeof e!="object")throw new je("options must be an object",je.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],a=t[s];if(a){const l=e[s],u=l===void 0||a(l,s,e);if(u!==!0)throw new je("option "+s+" must be "+u,je.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new je("Unknown option "+s,je.ERR_BAD_OPTION)}}const jh={assertOptions:ZH,validators:iv},xi=jh.validators;let Ka=class{constructor(t){this.defaults=t||{},this.interceptors={request:new xk,response:new xk}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=ro(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&jh.assertOptions(r,{silentJSONParsing:xi.transitional(xi.boolean),forcedJSONParsing:xi.transitional(xi.boolean),clarifyTimeoutError:xi.transitional(xi.boolean)},!1),i!=null&&(V.isFunction(i)?n.paramsSerializer={serialize:i}:jh.assertOptions(i,{encode:xi.function,serialize:xi.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),jh.assertOptions(n,{baseUrl:xi.spelling("baseURL"),withXsrfToken:xi.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=s&&V.merge(s.common,s[n.method]);s&&V.forEach(["delete","get","head","post","put","patch","common"],y=>{delete s[y]}),n.headers=ur.concat(a,s);const l=[];let u=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(n)===!1||(u=u&&E.synchronous,l.unshift(E.fulfilled,E.rejected))});const f=[];this.interceptors.response.forEach(function(E){f.push(E.fulfilled,E.rejected)});let d,p=0,v;if(!u){const y=[Uk.bind(this),void 0];for(y.unshift(...l),y.push(...f),v=y.length,d=Promise.resolve(n);p<v;)d=d.then(y[p++],y[p++]);return d}v=l.length;let m=n;for(;p<v;){const y=l[p++],E=l[p++];try{m=y(m)}catch(b){E.call(this,b);break}}try{d=Uk.call(this,m)}catch(y){return Promise.reject(y)}for(p=0,v=f.length;p<v;)d=d.then(f[p++],f[p++]);return d}getUri(t){t=ro(this.defaults,t);const n=QA(t.baseURL,t.url,t.allowAbsoluteUrls);return HA(n,t.params,t.paramsSerializer)}};V.forEach(["delete","get","head","options"],function(t){Ka.prototype[t]=function(n,r){return this.request(ro(r||{},{method:t,url:n,data:(r||{}).data}))}});V.forEach(["post","put","patch"],function(t){function n(r){return function(s,a,l){return this.request(ro(l||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}Ka.prototype[t]=n(),Ka.prototype[t+"Form"]=n(!0)});let eV=class eO{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const a=new Promise(l=>{r.subscribe(l),s=l}).then(i);return a.cancel=function(){r.unsubscribe(s)},a},t(function(s,a,l){r.reason||(r.reason=new Wu(s,a,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new eO(function(i){t=i}),cancel:t}}};function tV(e){return function(n){return e.apply(null,n)}}function nV(e){return V.isObject(e)&&e.isAxiosError===!0}const mw={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(mw).forEach(([e,t])=>{mw[t]=e});function tO(e){const t=new Ka(e),n=AA(Ka.prototype.request,t);return V.extend(n,Ka.prototype,t,{allOwnKeys:!0}),V.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return tO(ro(e,i))},n}const Vt=tO(Yc);Vt.Axios=Ka;Vt.CanceledError=Wu;Vt.CancelToken=eV;Vt.isCancel=GA;Vt.VERSION=ZA;Vt.toFormData=rv;Vt.AxiosError=je;Vt.Cancel=Vt.CanceledError;Vt.all=function(t){return Promise.all(t)};Vt.spread=tV;Vt.isAxiosError=nV;Vt.mergeConfig=ro;Vt.AxiosHeaders=ur;Vt.formToJSON=e=>qA(V.isHTMLForm(e)?new FormData(e):e);Vt.getAdapter=XA.getAdapter;Vt.HttpStatusCode=mw;Vt.default=Vt;const{Axios:vhe,AxiosError:ghe,CanceledError:mhe,isCancel:yhe,CancelToken:_he,VERSION:whe,all:She,Cancel:bhe,isAxiosError:The,spread:Ehe,toFormData:khe,AxiosHeaders:Ihe,HttpStatusCode:Che,formToJSON:Rhe,getAdapter:xhe,mergeConfig:$he}=Vt,rV="https://callburner-functions-2333-dev.twil.io",m0=Vt.create({baseURL:rV}),iV="http://localhost:4000/api/token",sV=async e=>{const{data:t}=await Vt.post(iV,{identity:e});return t.token},aV=async e=>{await m0.post("/calls-register",e)},oV=async e=>{await m0.post("/calls-hangup",{callSid:e})},uV=async(e,t)=>{await m0.post("/calls-recording-toggle",{callSid:e,action:t})},lV=async e=>({callSid:e,dialedNumber:"",startedAt:new Date().toISOString()}),Wk=async()=>[],cV=({identity:e,onIncomingCall:t,onCallEnded:n})=>{const r=lt.useRef(null),[i,s]=lt.useState("idle"),[a,l]=lt.useState(null),[u,f]=lt.useState(null),d=lt.useCallback(async()=>{try{s("idle"),f(null);const m=await sV(e);r.current&&(r.current.destroy(),r.current=null);const y=new Te(m,{codecPreferences:[_e.Codec.Opus,_e.Codec.PCMU],closeProtection:!0});y.on("registered",()=>s("ready")),y.on("error",E=>{s("error"),f(E.message)}),y.on("incoming",E=>{t==null||t(E)}),y.on("unregistered",()=>s("idle")),await y.register(),r.current=y}catch(m){console.error("Unable to initialize Twilio Device",m),s("error"),f(m instanceof Error?m.message:"Unknown error")}},[e,t]);lt.useEffect(()=>(d(),()=>{var m;(m=r.current)==null||m.destroy(),r.current=null}),[d]);const p=lt.useCallback(async({to:m,record:y})=>{r.current||await d();const E=r.current;if(!E)throw new Error("Device is not ready");s("dialing");const b=await E.connect({params:{To:m,record:y?"true":"false"}});return b.on("accept",()=>{s(y?"recording":"in-call"),l(b)}),b.on("disconnect",()=>{s("ended"),l(null),n==null||n(b)}),b.on("cancel",()=>{s("idle"),l(null)}),b.on("error",w=>{s("error"),f(w.message)}),b},[d,n]),v=lt.useCallback(()=>{a==null||a.disconnect()},[a]);return{connect:p,disconnect:v,phase:i,activeConnection:a,error:u,isRecording:i==="recording"}};var Rr={},Dl=function(e){return e&&e.Math===Math&&e},Ge=Dl(typeof globalThis=="object"&&globalThis)||Dl(typeof window=="object"&&window)||Dl(typeof self=="object"&&self)||Dl(typeof di=="object"&&di)||Dl(typeof di=="object"&&di)||function(){return this}()||Function("return this")(),da={},Ne=function(e){try{return!!e()}catch{return!0}},fV=Ne,Pt=!fV(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),dV=Ne,Xc=!dV(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),hV=Xc,Hd=Function.prototype.call,wt=hV?Hd.bind(Hd):function(){return Hd.apply(Hd,arguments)},Zc={},nO={}.propertyIsEnumerable,rO=Object.getOwnPropertyDescriptor,pV=rO&&!nO.call({1:2},1);Zc.f=pV?function(t){var n=rO(this,t);return!!n&&n.enumerable}:nO;var zu=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}},iO=Xc,sO=Function.prototype,yw=sO.call,vV=iO&&sO.bind.bind(yw,yw),We=iO?vV:function(e){return function(){return yw.apply(e,arguments)}},aO=We,gV=aO({}.toString),mV=aO("".slice),_s=function(e){return mV(gV(e),8,-1)},yV=We,_V=Ne,wV=_s,Jm=Object,SV=yV("".split),ef=_V(function(){return!Jm("z").propertyIsEnumerable(0)})?function(e){return wV(e)==="String"?SV(e,""):Jm(e)}:Jm,Hu=function(e){return e==null},bV=Hu,TV=TypeError,ws=function(e){if(bV(e))throw new TV("Can't call method on "+e);return e},EV=ef,kV=ws,xr=function(e){return EV(kV(e))},Ym=typeof document=="object"&&document.all,St=typeof Ym>"u"&&Ym!==void 0?function(e){return typeof e=="function"||e===Ym}:function(e){return typeof e=="function"},IV=St,Ct=function(e){return typeof e=="object"?e!==null:IV(e)},Xm=Ge,CV=St,RV=function(e){return CV(e)?e:void 0},wi=function(e,t){return arguments.length<2?RV(Xm[e]):Xm[e]&&Xm[e][t]},xV=We,Ss=xV({}.isPrototypeOf),$V=Ge,zk=$V.navigator,Hk=zk&&zk.userAgent,ha=Hk?String(Hk):"",oO=Ge,Zm=ha,Vk=oO.process,qk=oO.Deno,Gk=Vk&&Vk.versions||qk&&qk.version,Kk=Gk&&Gk.v8,fi,_p;Kk&&(fi=Kk.split("."),_p=fi[0]>0&&fi[0]<4?1:+(fi[0]+fi[1]));!_p&&Zm&&(fi=Zm.match(/Edge\/(\d+)/),(!fi||fi[1]>=74)&&(fi=Zm.match(/Chrome\/(\d+)/),fi&&(_p=+fi[1])));var Vu=_p,Qk=Vu,PV=Ne,AV=Ge,OV=AV.String,qu=!!Object.getOwnPropertySymbols&&!PV(function(){var e=Symbol("symbol detection");return!OV(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Qk&&Qk<41}),NV=qu,uO=NV&&!Symbol.sham&&typeof Symbol.iterator=="symbol",MV=wi,LV=St,DV=Ss,FV=uO,jV=Object,Gu=FV?function(e){return typeof e=="symbol"}:function(e){var t=MV("Symbol");return LV(t)&&DV(t.prototype,jV(e))},UV=String,oo=function(e){try{return UV(e)}catch{return"Object"}},BV=St,WV=oo,zV=TypeError,Xr=function(e){if(BV(e))return e;throw new zV(WV(e)+" is not a function")},HV=Xr,VV=Hu,uo=function(e,t){var n=e[t];return VV(n)?void 0:HV(n)},ey=wt,ty=St,ny=Ct,qV=TypeError,GV=function(e,t){var n,r;if(t==="string"&&ty(n=e.toString)&&!ny(r=ey(n,e))||ty(n=e.valueOf)&&!ny(r=ey(n,e))||t!=="string"&&ty(n=e.toString)&&!ny(r=ey(n,e)))return r;throw new qV("Can't convert object to primitive value")},lO={exports:{}},KV=!1,Jk=Ge,QV=Object.defineProperty,y0=function(e,t){try{QV(Jk,e,{value:t,configurable:!0,writable:!0})}catch{Jk[e]=t}return t},JV=Ge,YV=y0,Yk="__core-js_shared__",Xk=lO.exports=JV[Yk]||YV(Yk,{});(Xk.versions||(Xk.versions=[])).push({version:"3.45.1",mode:"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.45.1/LICENSE",source:"https://github.com/zloirock/core-js"});var _0=lO.exports,Zk=_0,Ku=function(e,t){return Zk[e]||(Zk[e]=t||{})},XV=ws,ZV=Object,Nn=function(e){return ZV(XV(e))},eq=We,tq=Nn,nq=eq({}.hasOwnProperty),Jt=Object.hasOwn||function(t,n){return nq(tq(t),n)},rq=We,iq=0,sq=Math.random(),aq=rq(1.1.toString),tf=function(e){return"Symbol("+(e===void 0?"":e)+")_"+aq(++iq+sq,36)},oq=Ge,uq=Ku,eI=Jt,lq=tf,cq=qu,fq=uO,su=oq.Symbol,ry=uq("wks"),dq=fq?su.for||su:su&&su.withoutSetter||lq,At=function(e){return eI(ry,e)||(ry[e]=cq&&eI(su,e)?su[e]:dq("Symbol."+e)),ry[e]},hq=wt,tI=Ct,nI=Gu,pq=uo,vq=GV,gq=At,mq=TypeError,yq=gq("toPrimitive"),w0=function(e,t){if(!tI(e)||nI(e))return e;var n=pq(e,yq),r;if(n){if(t===void 0&&(t="default"),r=hq(n,e,t),!tI(r)||nI(r))return r;throw new mq("Can't convert object to primitive value")}return t===void 0&&(t="number"),vq(e,t)},_q=w0,wq=Gu,sv=function(e){var t=_q(e,"string");return wq(t)?t:t+""},Sq=Ge,rI=Ct,_w=Sq.document,bq=rI(_w)&&rI(_w.createElement),av=function(e){return bq?_w.createElement(e):{}},Tq=Pt,Eq=Ne,kq=av,cO=!Tq&&!Eq(function(){return Object.defineProperty(kq("div"),"a",{get:function(){return 7}}).a!==7}),Iq=Pt,Cq=wt,Rq=Zc,xq=zu,$q=xr,Pq=sv,Aq=Jt,Oq=cO,iI=Object.getOwnPropertyDescriptor;da.f=Iq?iI:function(t,n){if(t=$q(t),n=Pq(n),Oq)try{return iI(t,n)}catch{}if(Aq(t,n))return xq(!Cq(Rq.f,t,n),t[n])};var qn={},Nq=Pt,Mq=Ne,fO=Nq&&Mq(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),Lq=Ct,Dq=String,Fq=TypeError,en=function(e){if(Lq(e))return e;throw new Fq(Dq(e)+" is not an object")},jq=Pt,Uq=cO,Bq=fO,Vd=en,sI=sv,Wq=TypeError,iy=Object.defineProperty,zq=Object.getOwnPropertyDescriptor,sy="enumerable",ay="configurable",oy="writable";qn.f=jq?Bq?function(t,n,r){if(Vd(t),n=sI(n),Vd(r),typeof t=="function"&&n==="prototype"&&"value"in r&&oy in r&&!r[oy]){var i=zq(t,n);i&&i[oy]&&(t[n]=r.value,r={configurable:ay in r?r[ay]:i[ay],enumerable:sy in r?r[sy]:i[sy],writable:!1})}return iy(t,n,r)}:iy:function(t,n,r){if(Vd(t),n=sI(n),Vd(r),Uq)try{return iy(t,n,r)}catch{}if("get"in r||"set"in r)throw new Wq("Accessors not supported");return"value"in r&&(t[n]=r.value),t};var Hq=Pt,Vq=qn,qq=zu,bs=Hq?function(e,t,n){return Vq.f(e,t,qq(1,n))}:function(e,t,n){return e[t]=n,e},dO={exports:{}},ww=Pt,Gq=Jt,hO=Function.prototype,Kq=ww&&Object.getOwnPropertyDescriptor,S0=Gq(hO,"name"),Qq=S0&&(function(){}).name==="something",Jq=S0&&(!ww||ww&&Kq(hO,"name").configurable),nf={EXISTS:S0,PROPER:Qq,CONFIGURABLE:Jq},Yq=We,Xq=St,Sw=_0,Zq=Yq(Function.toString);Xq(Sw.inspectSource)||(Sw.inspectSource=function(e){return Zq(e)});var b0=Sw.inspectSource,e7=Ge,t7=St,aI=e7.WeakMap,n7=t7(aI)&&/native code/.test(String(aI)),r7=Ku,i7=tf,oI=r7("keys"),ov=function(e){return oI[e]||(oI[e]=i7(e))},rf={},s7=n7,pO=Ge,a7=Ct,o7=bs,uy=Jt,ly=_0,u7=ov,l7=rf,uI="Object already initialized",bw=pO.TypeError,c7=pO.WeakMap,wp,Lc,Sp,f7=function(e){return Sp(e)?Lc(e):wp(e,{})},d7=function(e){return function(t){var n;if(!a7(t)||(n=Lc(t)).type!==e)throw new bw("Incompatible receiver, "+e+" required");return n}};if(s7||ly.state){var $i=ly.state||(ly.state=new c7);$i.get=$i.get,$i.has=$i.has,$i.set=$i.set,wp=function(e,t){if($i.has(e))throw new bw(uI);return t.facade=e,$i.set(e,t),t},Lc=function(e){return $i.get(e)||{}},Sp=function(e){return $i.has(e)}}else{var jo=u7("state");l7[jo]=!0,wp=function(e,t){if(uy(e,jo))throw new bw(uI);return t.facade=e,o7(e,jo,t),t},Lc=function(e){return uy(e,jo)?e[jo]:{}},Sp=function(e){return uy(e,jo)}}var ji={set:wp,get:Lc,has:Sp,enforce:f7,getterFor:d7},T0=We,h7=Ne,p7=St,qd=Jt,Tw=Pt,v7=nf.CONFIGURABLE,g7=b0,vO=ji,m7=vO.enforce,y7=vO.get,lI=String,Uh=Object.defineProperty,_7=T0("".slice),w7=T0("".replace),S7=T0([].join),b7=Tw&&!h7(function(){return Uh(function(){},"length",{value:8}).length!==8}),T7=String(String).split("String"),E7=dO.exports=function(e,t,n){_7(lI(t),0,7)==="Symbol("&&(t="["+w7(lI(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!qd(e,"name")||v7&&e.name!==t)&&(Tw?Uh(e,"name",{value:t,configurable:!0}):e.name=t),b7&&n&&qd(n,"arity")&&e.length!==n.arity&&Uh(e,"length",{value:n.arity});try{n&&qd(n,"constructor")&&n.constructor?Tw&&Uh(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch{}var r=m7(e);return qd(r,"source")||(r.source=S7(T7,typeof t=="string"?t:"")),e};Function.prototype.toString=E7(function(){return p7(this)&&y7(this).source||g7(this)},"toString");var gO=dO.exports,k7=St,I7=qn,C7=gO,R7=y0,$r=function(e,t,n,r){r||(r={});var i=r.enumerable,s=r.name!==void 0?r.name:t;if(k7(n)&&C7(n,s,r),r.global)i?e[t]=n:R7(t,n);else{try{r.unsafe?e[t]&&(i=!0):delete e[t]}catch{}i?e[t]=n:I7.f(e,t,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return e},lo={},x7=Math.ceil,$7=Math.floor,P7=Math.trunc||function(t){var n=+t;return(n>0?$7:x7)(n)},A7=P7,Ui=function(e){var t=+e;return t!==t||t===0?0:A7(t)},O7=Ui,N7=Math.max,M7=Math.min,Qu=function(e,t){var n=O7(e);return n<0?N7(n+t,0):M7(n,t)},L7=Ui,D7=Math.min,pa=function(e){var t=L7(e);return t>0?D7(t,9007199254740991):0},F7=pa,Mn=function(e){return F7(e.length)},j7=xr,U7=Qu,B7=Mn,cI=function(e){return function(t,n,r){var i=j7(t),s=B7(i);if(s===0)return!e&&-1;var a=U7(r,s),l;if(e&&n!==n){for(;s>a;)if(l=i[a++],l!==l)return!0}else for(;s>a;a++)if((e||a in i)&&i[a]===n)return e||a||0;return!e&&-1}},uv={includes:cI(!0),indexOf:cI(!1)},W7=We,cy=Jt,z7=xr,H7=uv.indexOf,V7=rf,fI=W7([].push),mO=function(e,t){var n=z7(e),r=0,i=[],s;for(s in n)!cy(V7,s)&&cy(n,s)&&fI(i,s);for(;t.length>r;)cy(n,s=t[r++])&&(~H7(i,s)||fI(i,s));return i},E0=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],q7=mO,G7=E0,K7=G7.concat("length","prototype");lo.f=Object.getOwnPropertyNames||function(t){return q7(t,K7)};var sf={};sf.f=Object.getOwnPropertySymbols;var Q7=wi,J7=We,Y7=lo,X7=sf,Z7=en,eG=J7([].concat),yO=Q7("Reflect","ownKeys")||function(t){var n=Y7.f(Z7(t)),r=X7.f;return r?eG(n,r(t)):n},dI=Jt,tG=yO,nG=da,rG=qn,k0=function(e,t,n){for(var r=tG(t),i=rG.f,s=nG.f,a=0;a<r.length;a++){var l=r[a];!dI(e,l)&&!(n&&dI(n,l))&&i(e,l,s(t,l))}},iG=Ne,sG=St,aG=/#|\.prototype\./,af=function(e,t){var n=uG[oG(e)];return n===cG?!0:n===lG?!1:sG(t)?iG(t):!!t},oG=af.normalize=function(e){return String(e).replace(aG,".").toLowerCase()},uG=af.data={},lG=af.NATIVE="N",cG=af.POLYFILL="P",lv=af,Gd=Ge,fG=da.f,dG=bs,hG=$r,pG=y0,vG=k0,gG=lv,Ze=function(e,t){var n=e.target,r=e.global,i=e.stat,s,a,l,u,f,d;if(r?a=Gd:i?a=Gd[n]||pG(n,{}):a=Gd[n]&&Gd[n].prototype,a)for(l in t){if(f=t[l],e.dontCallGetSet?(d=fG(a,l),u=d&&d.value):u=a[l],s=gG(r?l:n+(i?".":"#")+l,e.forced),!s&&u!==void 0){if(typeof f==typeof u)continue;vG(f,u)}(e.sham||u&&u.sham)&&dG(f,"sham",!0),hG(a,l,f,e)}},mG=mO,yG=E0,of=Object.keys||function(t){return mG(t,yG)},_G=Ze,wG=Nn,_O=of,SG=Ne,bG=SG(function(){_O(1)});_G({target:"Object",stat:!0,forced:bG},{keys:function(t){return _O(wG(t))}});var TG=At,EG=TG("toStringTag"),wO={};wO[EG]="z";var I0=String(wO)==="[object z]",kG=I0,IG=St,Bh=_s,CG=At,RG=CG("toStringTag"),xG=Object,$G=Bh(function(){return arguments}())==="Arguments",PG=function(e,t){try{return e[t]}catch{}},va=kG?Bh:function(e){var t,n,r;return e===void 0?"Undefined":e===null?"Null":typeof(n=PG(t=xG(e),RG))=="string"?n:$G?Bh(t):(r=Bh(t))==="Object"&&IG(t.callee)?"Arguments":r},AG=va,OG=String,Gn=function(e){if(AG(e)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return OG(e)},C0={},NG=Pt,MG=fO,LG=qn,DG=en,FG=xr,jG=of;C0.f=NG&&!MG?Object.defineProperties:function(t,n){DG(t);for(var r=FG(n),i=jG(n),s=i.length,a=0,l;s>a;)LG.f(t,l=i[a++],r[l]);return t};var UG=wi,SO=UG("document","documentElement"),BG=en,WG=C0,hI=E0,zG=rf,HG=SO,VG=av,qG=ov,pI=">",vI="<",Ew="prototype",kw="script",bO=qG("IE_PROTO"),fy=function(){},TO=function(e){return vI+kw+pI+e+vI+"/"+kw+pI},gI=function(e){e.write(TO("")),e.close();var t=e.parentWindow.Object;return e=null,t},GG=function(){var e=VG("iframe"),t="java"+kw+":",n;return e.style.display="none",HG.appendChild(e),e.src=String(t),n=e.contentWindow.document,n.open(),n.write(TO("document.F=Object")),n.close(),n.F},Kd,Wh=function(){try{Kd=new ActiveXObject("htmlfile")}catch{}Wh=typeof document<"u"?document.domain&&Kd?gI(Kd):GG():gI(Kd);for(var e=hI.length;e--;)delete Wh[Ew][hI[e]];return Wh()};zG[bO]=!0;var co=Object.create||function(t,n){var r;return t!==null?(fy[Ew]=BG(t),r=new fy,fy[Ew]=null,r[bO]=t):r=Wh(),n===void 0?r:WG.f(r,n)},R0={},KG=We,Ts=KG([].slice),QG=_s,JG=xr,EO=lo.f,YG=Ts,kO=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],XG=function(e){try{return EO(e)}catch{return YG(kO)}};R0.f=function(t){return kO&&QG(t)==="Window"?XG(t):EO(JG(t))};var mI=gO,ZG=qn,ga=function(e,t,n){return n.get&&mI(n.get,t,{getter:!0}),n.set&&mI(n.set,t,{setter:!0}),ZG.f(e,t,n)},x0={},e9=At;x0.f=e9;var t9=Ge,$0=t9,yI=$0,n9=Jt,r9=x0,i9=qn.f,IO=function(e){var t=yI.Symbol||(yI.Symbol={});n9(t,e)||i9(t,e,{value:r9.f(e)})},s9=wt,a9=wi,o9=At,u9=$r,l9=function(){var e=a9("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,r=o9("toPrimitive");t&&!t[r]&&u9(t,r,function(i){return s9(n,this)},{arity:1})},c9=qn.f,f9=Jt,d9=At,_I=d9("toStringTag"),ma=function(e,t,n){e&&!n&&(e=e.prototype),e&&!f9(e,_I)&&c9(e,_I,{configurable:!0,value:t})},h9=_s,p9=We,CO=function(e){if(h9(e)==="Function")return p9(e)},wI=CO,v9=Xr,g9=Xc,m9=wI(wI.bind),fo=function(e,t){return v9(e),t===void 0?e:g9?m9(e,t):function(){return e.apply(t,arguments)}},y9=_s,uf=Array.isArray||function(t){return y9(t)==="Array"},_9=We,w9=Ne,RO=St,S9=va,b9=wi,T9=b0,xO=function(){},$O=b9("Reflect","construct"),P0=/^\s*(?:class|function)\b/,E9=_9(P0.exec),k9=!P0.test(xO),Fl=function(t){if(!RO(t))return!1;try{return $O(xO,[],t),!0}catch{return!1}},PO=function(t){if(!RO(t))return!1;switch(S9(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return k9||!!E9(P0,T9(t))}catch{return!0}};PO.sham=!0;var cv=!$O||w9(function(){var e;return Fl(Fl.call)||!Fl(Object)||!Fl(function(){e=!0})||e})?PO:Fl,SI=uf,I9=cv,C9=Ct,R9=At,x9=R9("species"),bI=Array,$9=function(e){var t;return SI(e)&&(t=e.constructor,I9(t)&&(t===bI||SI(t.prototype))?t=void 0:C9(t)&&(t=t[x9],t===null&&(t=void 0))),t===void 0?bI:t},P9=$9,A0=function(e,t){return new(P9(e))(t===0?0:t)},A9=fo,O9=We,N9=ef,M9=Nn,L9=Mn,D9=A0,TI=O9([].push),xa=function(e){var t=e===1,n=e===2,r=e===3,i=e===4,s=e===6,a=e===7,l=e===5||s;return function(u,f,d,p){for(var v=M9(u),m=N9(v),y=L9(m),E=A9(f,d),b=0,w=p||D9,T=t?w(u,y):n||a?w(u,0):void 0,x,M;y>b;b++)if((l||b in m)&&(x=m[b],M=E(x,b,v),e))if(t)T[b]=M;else if(M)switch(e){case 3:return!0;case 5:return x;case 6:return b;case 2:TI(T,x)}else switch(e){case 4:return!1;case 7:TI(T,x)}return s?-1:r||i?i:T}},Zr={forEach:xa(0),map:xa(1),filter:xa(2),some:xa(3),every:xa(4),find:xa(5),findIndex:xa(6)},fv=Ze,lf=Ge,O0=wt,F9=We,Au=Pt,Ou=qu,j9=Ne,hn=Jt,U9=Ss,Iw=en,dv=xr,N0=sv,B9=Gn,Cw=zu,Nu=co,AO=of,W9=lo,OO=R0,z9=sf,NO=da,MO=qn,H9=C0,LO=Zc,dy=$r,V9=ga,M0=Ku,q9=ov,DO=rf,EI=tf,G9=At,K9=x0,Q9=IO,J9=l9,Y9=ma,FO=ji,hv=Zr.forEach,tr=q9("hidden"),pv="Symbol",Dc="prototype",X9=FO.set,kI=FO.getterFor(pv),qr=Object[Dc],Qa=lf.Symbol,nc=Qa&&Qa[Dc],Z9=lf.RangeError,eK=lf.TypeError,hy=lf.QObject,jO=NO.f,Ja=MO.f,UO=OO.f,tK=LO.f,BO=F9([].push),vs=M0("symbols"),cf=M0("op-symbols"),nK=M0("wks"),Rw=!hy||!hy[Dc]||!hy[Dc].findChild,WO=function(e,t,n){var r=jO(qr,t);r&&delete qr[t],Ja(e,t,n),r&&e!==qr&&Ja(qr,t,r)},xw=Au&&j9(function(){return Nu(Ja({},"a",{get:function(){return Ja(this,"a",{value:7}).a}})).a!==7})?WO:Ja,py=function(e,t){var n=vs[e]=Nu(nc);return X9(n,{type:pv,tag:e,description:t}),Au||(n.description=t),n},vv=function(t,n,r){t===qr&&vv(cf,n,r),Iw(t);var i=N0(n);return Iw(r),hn(vs,i)?(r.enumerable?(hn(t,tr)&&t[tr][i]&&(t[tr][i]=!1),r=Nu(r,{enumerable:Cw(0,!1)})):(hn(t,tr)||Ja(t,tr,Cw(1,Nu(null))),t[tr][i]=!0),xw(t,i,r)):Ja(t,i,r)},L0=function(t,n){Iw(t);var r=dv(n),i=AO(r).concat(VO(r));return hv(i,function(s){(!Au||O0($w,r,s))&&vv(t,s,r[s])}),t},rK=function(t,n){return n===void 0?Nu(t):L0(Nu(t),n)},$w=function(t){var n=N0(t),r=O0(tK,this,n);return this===qr&&hn(vs,n)&&!hn(cf,n)?!1:r||!hn(this,n)||!hn(vs,n)||hn(this,tr)&&this[tr][n]?r:!0},zO=function(t,n){var r=dv(t),i=N0(n);if(!(r===qr&&hn(vs,i)&&!hn(cf,i))){var s=jO(r,i);return s&&hn(vs,i)&&!(hn(r,tr)&&r[tr][i])&&(s.enumerable=!0),s}},HO=function(t){var n=UO(dv(t)),r=[];return hv(n,function(i){!hn(vs,i)&&!hn(DO,i)&&BO(r,i)}),r},VO=function(e){var t=e===qr,n=UO(t?cf:dv(e)),r=[];return hv(n,function(i){hn(vs,i)&&(!t||hn(qr,i))&&BO(r,vs[i])}),r};Ou||(Qa=function(){if(U9(nc,this))throw new eK("Symbol is not a constructor");var t=!arguments.length||arguments[0]===void 0?void 0:B9(arguments[0]),n=EI(t),r=function(i){var s=this===void 0?lf:this;s===qr&&O0(r,cf,i),hn(s,tr)&&hn(s[tr],n)&&(s[tr][n]=!1);var a=Cw(1,i);try{xw(s,n,a)}catch(l){if(!(l instanceof Z9))throw l;WO(s,n,a)}};return Au&&Rw&&xw(qr,n,{configurable:!0,set:r}),py(n,t)},nc=Qa[Dc],dy(nc,"toString",function(){return kI(this).tag}),dy(Qa,"withoutSetter",function(e){return py(EI(e),e)}),LO.f=$w,MO.f=vv,H9.f=L0,NO.f=zO,W9.f=OO.f=HO,z9.f=VO,K9.f=function(e){return py(G9(e),e)},Au&&(V9(nc,"description",{configurable:!0,get:function(){return kI(this).description}}),dy(qr,"propertyIsEnumerable",$w,{unsafe:!0})));fv({global:!0,constructor:!0,wrap:!0,forced:!Ou,sham:!Ou},{Symbol:Qa});hv(AO(nK),function(e){Q9(e)});fv({target:pv,stat:!0,forced:!Ou},{useSetter:function(){Rw=!0},useSimple:function(){Rw=!1}});fv({target:"Object",stat:!0,forced:!Ou,sham:!Au},{create:rK,defineProperty:vv,defineProperties:L0,getOwnPropertyDescriptor:zO});fv({target:"Object",stat:!0,forced:!Ou},{getOwnPropertyNames:HO});J9();Y9(Qa,pv);DO[tr]=!0;var iK=qu,qO=iK&&!!Symbol.for&&!!Symbol.keyFor,sK=Ze,aK=wi,oK=Jt,uK=Gn,GO=Ku,lK=qO,vy=GO("string-to-symbol-registry"),cK=GO("symbol-to-string-registry");sK({target:"Symbol",stat:!0,forced:!lK},{for:function(e){var t=uK(e);if(oK(vy,t))return vy[t];var n=aK("Symbol")(t);return vy[t]=n,cK[n]=t,n}});var fK=Ze,dK=Jt,hK=Gu,pK=oo,vK=Ku,gK=qO,II=vK("symbol-to-string-registry");fK({target:"Symbol",stat:!0,forced:!gK},{keyFor:function(t){if(!hK(t))throw new TypeError(pK(t)+" is not a symbol");if(dK(II,t))return II[t]}});var mK=Xc,KO=Function.prototype,CI=KO.apply,RI=KO.call,ho=typeof Reflect=="object"&&Reflect.apply||(mK?RI.bind(CI):function(){return RI.apply(CI,arguments)}),yK=We,xI=uf,_K=St,$I=_s,wK=Gn,PI=yK([].push),SK=function(e){if(_K(e))return e;if(xI(e)){for(var t=e.length,n=[],r=0;r<t;r++){var i=e[r];typeof i=="string"?PI(n,i):(typeof i=="number"||$I(i)==="Number"||$I(i)==="String")&&PI(n,wK(i))}var s=n.length,a=!0;return function(l,u){if(a)return a=!1,u;if(xI(this))return u;for(var f=0;f<s;f++)if(n[f]===l)return u}}},bK=Ze,QO=wi,JO=ho,TK=wt,ff=We,YO=Ne,AI=St,OI=Gu,XO=Ts,EK=SK,kK=qu,IK=String,na=QO("JSON","stringify"),Qd=ff(/./.exec),NI=ff("".charAt),CK=ff("".charCodeAt),RK=ff("".replace),xK=ff(1.1.toString),$K=/[\uD800-\uDFFF]/g,MI=/^[\uD800-\uDBFF]$/,LI=/^[\uDC00-\uDFFF]$/,DI=!kK||YO(function(){var e=QO("Symbol")("stringify detection");return na([e])!=="[null]"||na({a:e})!=="{}"||na(Object(e))!=="{}"}),FI=YO(function(){return na("\uDF06\uD834")!=='"\\udf06\\ud834"'||na("\uDEAD")!=='"\\udead"'}),PK=function(e,t){var n=XO(arguments),r=EK(t);if(!(!AI(r)&&(e===void 0||OI(e))))return n[1]=function(i,s){if(AI(r)&&(s=TK(r,this,IK(i),s)),!OI(s))return s},JO(na,null,n)},AK=function(e,t,n){var r=NI(n,t-1),i=NI(n,t+1);return Qd(MI,e)&&!Qd(LI,i)||Qd(LI,e)&&!Qd(MI,r)?"\\u"+xK(CK(e,0),16):e};na&&bK({target:"JSON",stat:!0,arity:3,forced:DI||FI},{stringify:function(t,n,r){var i=XO(arguments),s=JO(DI?PK:na,null,i);return FI&&typeof s=="string"?RK(s,$K,AK):s}});var OK=Ze,NK=qu,MK=Ne,ZO=sf,LK=Nn,DK=!NK||MK(function(){ZO.f(1)});OK({target:"Object",stat:!0,forced:DK},{getOwnPropertySymbols:function(t){var n=ZO.f;return n?n(LK(t)):[]}});var FK=Ne,jK=At,UK=Vu,BK=jK("species"),df=function(e){return UK>=51||!FK(function(){var t=[],n=t.constructor={};return n[BK]=function(){return{foo:1}},t[e](Boolean).foo!==1})},WK=Ze,zK=Zr.filter,HK=df,VK=HK("filter");WK({target:"Array",proto:!0,forced:!VK},{filter:function(t){return zK(this,t,arguments.length>1?arguments[1]:void 0)}});var qK=Ze,GK=Ne,KK=xr,e2=da.f,t2=Pt,QK=!t2||GK(function(){e2(1)});qK({target:"Object",stat:!0,forced:QK,sham:!t2},{getOwnPropertyDescriptor:function(t,n){return e2(KK(t),n)}});var n2={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},JK=av,gy=JK("span").classList,jI=gy&&gy.constructor&&gy.constructor.prototype,r2=jI===Object.prototype?void 0:jI,YK=Ne,gv=function(e,t){var n=[][e];return!!n&&YK(function(){n.call(null,t||function(){return 1},1)})},XK=Zr.forEach,ZK=gv,eQ=ZK("forEach"),tQ=eQ?[].forEach:function(t){return XK(this,t,arguments.length>1?arguments[1]:void 0)},UI=Ge,BI=n2,nQ=r2,my=tQ,rQ=bs,i2=function(e){if(e&&e.forEach!==my)try{rQ(e,"forEach",my)}catch{e.forEach=my}};for(var yy in BI)BI[yy]&&i2(UI[yy]&&UI[yy].prototype);i2(nQ);var iQ=Pt,sQ=qn,aQ=zu,hf=function(e,t,n){iQ?sQ.f(e,t,aQ(0,n)):e[t]=n},oQ=Ze,uQ=Pt,lQ=yO,cQ=xr,fQ=da,dQ=hf;oQ({target:"Object",stat:!0,sham:!uQ},{getOwnPropertyDescriptors:function(t){for(var n=cQ(t),r=fQ.f,i=lQ(n),s={},a=0,l,u;i.length>a;)u=r(n,l=i[a++]),u!==void 0&&dQ(s,l,u);return s}});var hQ=Ze,pQ=Ge,vQ=ma;hQ({global:!0},{Reflect:{}});vQ(pQ.Reflect,"Reflect",!0);var s2=We,gQ=Xr,mQ=Ct,yQ=Jt,WI=Ts,_Q=Xc,a2=Function,wQ=s2([].concat),SQ=s2([].join),_y={},bQ=function(e,t,n){if(!yQ(_y,t)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";_y[t]=a2("C,a","return new C("+SQ(r,",")+")")}return _y[t](e,n)},TQ=_Q?a2.bind:function(t){var n=gQ(this),r=n.prototype,i=WI(arguments,1),s=function(){var l=wQ(i,WI(arguments));return this instanceof s?bQ(n,l.length,l):n.apply(t,l)};return mQ(r)&&(s.prototype=r),s},EQ=cv,kQ=oo,IQ=TypeError,D0=function(e){if(EQ(e))return e;throw new IQ(kQ(e)+" is not a constructor")},CQ=Ze,RQ=wi,wy=ho,xQ=TQ,zI=D0,$Q=en,HI=Ct,PQ=co,o2=Ne,F0=RQ("Reflect","construct"),AQ=Object.prototype,OQ=[].push,u2=o2(function(){function e(){}return!(F0(function(){},[],e)instanceof e)}),l2=!o2(function(){F0(function(){})}),VI=u2||l2;CQ({target:"Reflect",stat:!0,forced:VI,sham:VI},{construct:function(t,n){zI(t),$Q(n);var r=arguments.length<3?t:zI(arguments[2]);if(l2&&!u2)return F0(t,n,r);if(t===r){switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3])}var i=[null];return wy(OQ,i,n),new(wy(xQ,t,i))}var s=r.prototype,a=PQ(HI(s)?s:AQ),l=wy(t,a,n);return HI(l)?l:a}});var c2={exports:{}};(function(e){function t(r,i,s,a,l,u,f){try{var d=r[u](f),p=d.value}catch(v){return void s(v)}d.done?i(p):Promise.resolve(p).then(a,l)}function n(r){return function(){var i=this,s=arguments;return new Promise(function(a,l){var u=r.apply(i,s);function f(p){t(u,a,l,f,d,"next",p)}function d(p){t(u,a,l,f,d,"throw",p)}f(void 0)})}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(c2);var f2=c2.exports,d2={exports:{}};(function(e){function t(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(d2);var pf=d2.exports,h2={exports:{}},p2={exports:{}},v2={exports:{}};(function(e){function t(n){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(v2);var po=v2.exports,g2={exports:{}};(function(e){var t=po.default;function n(r,i){if(t(r)!="object"||!r)return r;var s=r[Symbol.toPrimitive];if(s!==void 0){var a=s.call(r,i||"default");if(t(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(r)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(g2);var NQ=g2.exports;(function(e){var t=po.default,n=NQ;function r(i){var s=n(i,"string");return t(s)=="symbol"?s:s+""}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(p2);var m2=p2.exports;(function(e){var t=m2;function n(i,s){for(var a=0;a<s.length;a++){var l=s[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,t(l.key),l)}}function r(i,s,a){return s&&n(i.prototype,s),a&&n(i,a),Object.defineProperty(i,"prototype",{writable:!1}),i}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(h2);var vf=h2.exports,y2={exports:{}};(function(e){function t(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(y2);var gf=y2.exports,_2={exports:{}},w2={exports:{}};(function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(w2);var j0=w2.exports;(function(e){var t=j0;function n(r,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),i&&t(r,i)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(_2);var mf=_2.exports,S2={exports:{}};(function(e){var t=po.default,n=gf;function r(i,s){if(s&&(t(s)=="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n(i)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(S2);var yf=S2.exports,b2={exports:{}};(function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(b2);var vo=b2.exports,T2={exports:{}};(function(e){var t=m2;function n(r,i,s){return(i=t(i))in r?Object.defineProperty(r,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[i]=s,r}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(T2);var mv=T2.exports,MQ=Ze,LQ=Zr.map,DQ=df,FQ=DQ("map");MQ({target:"Array",proto:!0,forced:!FQ},{map:function(t){return LQ(this,t,arguments.length>1?arguments[1]:void 0)}});var jQ=I0,UQ=va,BQ=jQ?{}.toString:function(){return"[object "+UQ(this)+"]"},WQ=I0,zQ=$r,HQ=BQ;WQ||zQ(Object.prototype,"toString",HQ,{unsafe:!0});var jl=Ge,VQ=ha,qQ=_s,Jd=function(e){return VQ.slice(0,e.length)===e},E2=function(){return Jd("Bun/")?"BUN":Jd("Cloudflare-Workers")?"CLOUDFLARE":Jd("Deno/")?"DENO":Jd("Node.js/")?"NODE":jl.Bun&&typeof Bun.version=="string"?"BUN":jl.Deno&&typeof Deno.version=="object"?"DENO":qQ(jl.process)==="process"?"NODE":jl.window&&jl.document?"BROWSER":"REST"}(),GQ=E2,U0=GQ==="NODE",KQ=We,QQ=Xr,JQ=function(e,t,n){try{return KQ(QQ(Object.getOwnPropertyDescriptor(e,t)[n]))}catch{}},YQ=Ct,XQ=function(e){return YQ(e)||e===null},ZQ=XQ,eJ=String,tJ=TypeError,nJ=function(e){if(ZQ(e))return e;throw new tJ("Can't set "+eJ(e)+" as a prototype")},rJ=JQ,iJ=Ct,sJ=ws,aJ=nJ,Ju=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,t={},n;try{n=rJ(Object.prototype,"__proto__","set"),n(t,[]),e=t instanceof Array}catch{}return function(i,s){return sJ(i),aJ(s),iJ(i)&&(e?n(i,s):i.__proto__=s),i}}():void 0),oJ=wi,uJ=ga,lJ=At,cJ=Pt,qI=lJ("species"),B0=function(e){var t=oJ(e);cJ&&t&&!t[qI]&&uJ(t,qI,{configurable:!0,get:function(){return this}})},fJ=Ss,dJ=TypeError,_f=function(e,t){if(fJ(t,e))return e;throw new dJ("Incorrect invocation")},GI=en,hJ=D0,pJ=Hu,vJ=At,gJ=vJ("species"),k2=function(e,t){var n=GI(e).constructor,r;return n===void 0||pJ(r=GI(n)[gJ])?t:hJ(r)},mJ=TypeError,yJ=function(e,t){if(e<t)throw new mJ("Not enough arguments");return e},_J=ha,I2=/(?:ipad|iphone|ipod).*applewebkit/i.test(_J),Sr=Ge,wJ=ho,SJ=fo,KI=St,bJ=Jt,C2=Ne,QI=SO,TJ=Ts,JI=av,EJ=yJ,kJ=I2,IJ=U0,Pw=Sr.setImmediate,YI=Sr.clearImmediate,CJ=Sr.process,Sy=Sr.Dispatch,RJ=Sr.Function,XI=Sr.MessageChannel,xJ=Sr.String,by=0,gc={},ZI="onreadystatechange",Fc,$a,Ty,Ey;C2(function(){Fc=Sr.location});var W0=function(e){if(bJ(gc,e)){var t=gc[e];delete gc[e],t()}},ky=function(e){return function(){W0(e)}},eC=function(e){W0(e.data)},tC=function(e){Sr.postMessage(xJ(e),Fc.protocol+"//"+Fc.host)};(!Pw||!YI)&&(Pw=function(t){EJ(arguments.length,1);var n=KI(t)?t:RJ(t),r=TJ(arguments,1);return gc[++by]=function(){wJ(n,void 0,r)},$a(by),by},YI=function(t){delete gc[t]},IJ?$a=function(e){CJ.nextTick(ky(e))}:Sy&&Sy.now?$a=function(e){Sy.now(ky(e))}:XI&&!kJ?(Ty=new XI,Ey=Ty.port2,Ty.port1.onmessage=eC,$a=SJ(Ey.postMessage,Ey)):Sr.addEventListener&&KI(Sr.postMessage)&&!Sr.importScripts&&Fc&&Fc.protocol!=="file:"&&!C2(tC)?($a=tC,Sr.addEventListener("message",eC,!1)):ZI in JI("script")?$a=function(e){QI.appendChild(JI("script"))[ZI]=function(){QI.removeChild(this),W0(e)}}:$a=function(e){setTimeout(ky(e),0)});var R2={set:Pw},nC=Ge,$J=Pt,PJ=Object.getOwnPropertyDescriptor,AJ=function(e){if(!$J)return nC[e];var t=PJ(nC,e);return t&&t.value},x2=function(){this.head=null,this.tail=null};x2.prototype={add:function(e){var t={item:e,next:null},n=this.tail;n?n.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e){var t=this.head=e.next;return t===null&&(this.tail=null),e.item}}};var $2=x2,OJ=ha,NJ=/ipad|iphone|ipod/i.test(OJ)&&typeof Pebble<"u",MJ=ha,LJ=/web0s(?!.*chrome)/i.test(MJ),Mu=Ge,DJ=AJ,rC=fo,Iy=R2.set,FJ=$2,jJ=I2,UJ=NJ,BJ=LJ,Cy=U0,iC=Mu.MutationObserver||Mu.WebKitMutationObserver,sC=Mu.document,aC=Mu.process,Yd=Mu.Promise,Aw=DJ("queueMicrotask"),Uo,Ry,xy,Xd,oC;if(!Aw){var Zd=new FJ,eh=function(){var e,t;for(Cy&&(e=aC.domain)&&e.exit();t=Zd.get();)try{t()}catch(n){throw Zd.head&&Uo(),n}e&&e.enter()};!jJ&&!Cy&&!BJ&&iC&&sC?(Ry=!0,xy=sC.createTextNode(""),new iC(eh).observe(xy,{characterData:!0}),Uo=function(){xy.data=Ry=!Ry}):!UJ&&Yd&&Yd.resolve?(Xd=Yd.resolve(void 0),Xd.constructor=Yd,oC=rC(Xd.then,Xd),Uo=function(){oC(eh)}):Cy?Uo=function(){aC.nextTick(eh)}:(Iy=rC(Iy,Mu),Uo=function(){Iy(eh)}),Aw=function(e){Zd.head||Uo(),Zd.add(e)}}var WJ=Aw,zJ=function(e,t){try{arguments.length===1?console.error(e):console.error(e,t)}catch{}},z0=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}},HJ=Ge,yv=HJ.Promise,VJ=Ge,mc=yv,qJ=St,GJ=lv,KJ=b0,QJ=At,uC=E2,$y=Vu;mc&&mc.prototype;var JJ=QJ("species"),Ow=!1,P2=qJ(VJ.PromiseRejectionEvent),YJ=GJ("Promise",function(){var e=KJ(mc),t=e!==String(mc);if(!t&&$y===66)return!0;if(!$y||$y<51||!/native code/.test(e)){var n=new mc(function(s){s(1)}),r=function(s){s(function(){},function(){})},i=n.constructor={};if(i[JJ]=r,Ow=n.then(function(){})instanceof r,!Ow)return!0}return!t&&(uC==="BROWSER"||uC==="DENO")&&!P2}),wf={CONSTRUCTOR:YJ,REJECTION_EVENT:P2,SUBCLASSING:Ow},Yu={},lC=Xr,XJ=TypeError,ZJ=function(e){var t,n;this.promise=new e(function(r,i){if(t!==void 0||n!==void 0)throw new XJ("Bad Promise constructor");t=r,n=i}),this.resolve=lC(t),this.reject=lC(n)};Yu.f=function(e){return new ZJ(e)};var eY=Ze,bp=U0,oa=Ge,tY=$0,Lu=wt,cC=$r,fC=Ju,nY=ma,rY=B0,iY=Xr,zh=St,sY=Ct,aY=_f,oY=k2,A2=R2.set,H0=WJ,uY=zJ,lY=z0,cY=$2,O2=ji,Tp=yv,V0=wf,N2=Yu,_v="Promise",M2=V0.CONSTRUCTOR,fY=V0.REJECTION_EVENT,dY=V0.SUBCLASSING,Py=O2.getterFor(_v),hY=O2.set,Vo=Tp&&Tp.prototype,Fa=Tp,th=Vo,L2=oa.TypeError,Nw=oa.document,q0=oa.process,Mw=N2.f,pY=Mw,vY=!!(Nw&&Nw.createEvent&&oa.dispatchEvent),D2="unhandledrejection",gY="rejectionhandled",dC=0,F2=1,mY=2,G0=1,j2=2,nh,hC,U2,pC,B2=function(e){var t;return sY(e)&&zh(t=e.then)?t:!1},W2=function(e,t){var n=t.value,r=t.state===F2,i=r?e.ok:e.fail,s=e.resolve,a=e.reject,l=e.domain,u,f,d;try{i?(r||(t.rejection===j2&&_Y(t),t.rejection=G0),i===!0?u=n:(l&&l.enter(),u=i(n),l&&(l.exit(),d=!0)),u===e.promise?a(new L2("Promise-chain cycle")):(f=B2(u))?Lu(f,u,s,a):s(u)):a(n)}catch(p){l&&!d&&l.exit(),a(p)}},z2=function(e,t){e.notified||(e.notified=!0,H0(function(){for(var n=e.reactions,r;r=n.get();)W2(r,e);e.notified=!1,t&&!e.rejection&&yY(e)}))},H2=function(e,t,n){var r,i;vY?(r=Nw.createEvent("Event"),r.promise=t,r.reason=n,r.initEvent(e,!1,!0),oa.dispatchEvent(r)):r={promise:t,reason:n},!fY&&(i=oa["on"+e])?i(r):e===D2&&uY("Unhandled promise rejection",n)},yY=function(e){Lu(A2,oa,function(){var t=e.facade,n=e.value,r=vC(e),i;if(r&&(i=lY(function(){bp?q0.emit("unhandledRejection",n,t):H2(D2,t,n)}),e.rejection=bp||vC(e)?j2:G0,i.error))throw i.value})},vC=function(e){return e.rejection!==G0&&!e.parent},_Y=function(e){Lu(A2,oa,function(){var t=e.facade;bp?q0.emit("rejectionHandled",t):H2(gY,t,e.value)})},au=function(e,t,n){return function(r){e(t,r,n)}},gu=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=mY,z2(e,!0))},Lw=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw new L2("Promise can't be resolved itself");var r=B2(t);r?H0(function(){var i={done:!1};try{Lu(r,t,au(Lw,i,e),au(gu,i,e))}catch(s){gu(i,s,e)}}):(e.value=t,e.state=F2,z2(e,!1))}catch(i){gu({done:!1},i,e)}}};if(M2&&(Fa=function(t){aY(this,th),iY(t),Lu(nh,this);var n=Py(this);try{t(au(Lw,n),au(gu,n))}catch(r){gu(n,r)}},th=Fa.prototype,nh=function(t){hY(this,{type:_v,done:!1,notified:!1,parent:!1,reactions:new cY,rejection:!1,state:dC,value:null})},nh.prototype=cC(th,"then",function(t,n){var r=Py(this),i=Mw(oY(this,Fa));return r.parent=!0,i.ok=zh(t)?t:!0,i.fail=zh(n)&&n,i.domain=bp?q0.domain:void 0,r.state===dC?r.reactions.add(i):H0(function(){W2(i,r)}),i.promise}),hC=function(){var e=new nh,t=Py(e);this.promise=e,this.resolve=au(Lw,t),this.reject=au(gu,t)},N2.f=Mw=function(e){return e===Fa||e===U2?new hC(e):pY(e)},zh(Tp)&&Vo!==Object.prototype)){pC=Vo.then,dY||cC(Vo,"then",function(t,n){var r=this;return new Fa(function(i,s){Lu(pC,r,i,s)}).then(t,n)},{unsafe:!0});try{delete Vo.constructor}catch{}fC&&fC(Vo,th)}eY({global:!0,constructor:!0,wrap:!0,forced:M2},{Promise:Fa});U2=tY.Promise;nY(Fa,_v,!1);rY(_v);var Sf={},wY=At,SY=Sf,bY=wY("iterator"),TY=Array.prototype,K0=function(e){return e!==void 0&&(SY.Array===e||TY[bY]===e)},EY=va,gC=uo,kY=Hu,IY=Sf,CY=At,RY=CY("iterator"),wv=function(e){if(!kY(e))return gC(e,RY)||gC(e,"@@iterator")||IY[EY(e)]},xY=wt,$Y=Xr,PY=en,AY=oo,OY=wv,NY=TypeError,Q0=function(e,t){var n=arguments.length<2?OY(e):t;if($Y(n))return PY(xY(n,e));throw new NY(AY(e)+" is not iterable")},MY=wt,mC=en,LY=uo,V2=function(e,t,n){var r,i;mC(e);try{if(r=LY(e,"return"),!r){if(t==="throw")throw n;return n}r=MY(r,e)}catch(s){i=!0,r=s}if(t==="throw")throw n;if(i)throw r;return mC(r),n},DY=fo,FY=wt,jY=en,UY=oo,BY=K0,WY=Mn,yC=Ss,zY=Q0,HY=wv,_C=V2,VY=TypeError,Hh=function(e,t){this.stopped=e,this.result=t},wC=Hh.prototype,Sv=function(e,t,n){var r=n&&n.that,i=!!(n&&n.AS_ENTRIES),s=!!(n&&n.IS_RECORD),a=!!(n&&n.IS_ITERATOR),l=!!(n&&n.INTERRUPTED),u=DY(t,r),f,d,p,v,m,y,E,b=function(T){return f&&_C(f,"normal"),new Hh(!0,T)},w=function(T){return i?(jY(T),l?u(T[0],T[1],b):u(T[0],T[1])):l?u(T,b):u(T)};if(s)f=e.iterator;else if(a)f=e;else{if(d=HY(e),!d)throw new VY(UY(e)+" is not iterable");if(BY(d)){for(p=0,v=WY(e);v>p;p++)if(m=w(e[p]),m&&yC(wC,m))return m;return new Hh(!1)}f=zY(e,d)}for(y=s?e.next:f.next;!(E=FY(y,f)).done;){try{m=w(E.value)}catch(T){_C(f,"throw",T)}if(typeof m=="object"&&m&&yC(wC,m))return m}return new Hh(!1)},qY=At,q2=qY("iterator"),G2=!1;try{var GY=0,SC={next:function(){return{done:!!GY++}},return:function(){G2=!0}};SC[q2]=function(){return this},Array.from(SC,function(){throw 2})}catch{}var bv=function(e,t){try{if(!t&&!G2)return!1}catch{return!1}var n=!1;try{var r={};r[q2]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch{}return n},KY=yv,QY=bv,JY=wf.CONSTRUCTOR,K2=JY||!QY(function(e){KY.all(e).then(void 0,function(){})}),YY=Ze,XY=wt,ZY=Xr,eX=Yu,tX=z0,nX=Sv,rX=K2;YY({target:"Promise",stat:!0,forced:rX},{all:function(t){var n=this,r=eX.f(n),i=r.resolve,s=r.reject,a=tX(function(){var l=ZY(n.resolve),u=[],f=0,d=1;nX(t,function(p){var v=f++,m=!1;d++,XY(l,n,p).then(function(y){m||(m=!0,u[v]=y,--d||i(u))},s)}),--d||i(u)});return a.error&&s(a.value),r.promise}});var iX=Ze,sX=wf.CONSTRUCTOR,Dw=yv,aX=wi,oX=St,uX=$r,bC=Dw&&Dw.prototype;iX({target:"Promise",proto:!0,forced:sX,real:!0},{catch:function(e){return this.then(void 0,e)}});if(oX(Dw)){var TC=aX("Promise").prototype.catch;bC.catch!==TC&&uX(bC,"catch",TC,{unsafe:!0})}var lX=Ze,cX=wt,fX=Xr,dX=Yu,hX=z0,pX=Sv,vX=K2;lX({target:"Promise",stat:!0,forced:vX},{race:function(t){var n=this,r=dX.f(n),i=r.reject,s=hX(function(){var a=fX(n.resolve);pX(t,function(l){cX(a,n,l).then(r.resolve,i)})});return s.error&&i(s.value),r.promise}});var gX=Ze,mX=Yu,yX=wf.CONSTRUCTOR;gX({target:"Promise",stat:!0,forced:yX},{reject:function(t){var n=mX.f(this),r=n.reject;return r(t),n.promise}});var _X=en,wX=Ct,SX=Yu,bX=function(e,t){if(_X(e),wX(t)&&t.constructor===e)return t;var n=SX.f(e),r=n.resolve;return r(t),n.promise},TX=Ze,EX=wi,kX=wf.CONSTRUCTOR,IX=bX;EX("Promise");TX({target:"Promise",stat:!0,forced:kX},{resolve:function(t){return IX(this,t)}});var Q2={exports:{}},J2={exports:{}};(function(e){function t(n,r){this.v=n,this.k=r}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(J2);var Y2=J2.exports,X2={exports:{}},Z2={exports:{}};(function(e){function t(n,r,i,s){var a=Object.defineProperty;try{a({},"",{})}catch{a=0}e.exports=t=function(u,f,d,p){function v(m,y){t(u,m,function(E){return this._invoke(m,y,E)})}f?a?a(u,f,{value:d,enumerable:!p,configurable:!p,writable:!p}):u[f]=d:(v("next",0),v("throw",1),v("return",2))},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r,i,s)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(Z2);var eN=Z2.exports;(function(e){var t=eN;function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var r,i,s=typeof Symbol=="function"?Symbol:{},a=s.iterator||"@@iterator",l=s.toStringTag||"@@toStringTag";function u(b,w,T,x){var M=w&&w.prototype instanceof d?w:d,W=Object.create(M.prototype);return t(W,"_invoke",function(z,K,A){var ne,X,oe,he=0,ye=A||[],Se=!1,Ie={p:0,n:0,v:r,a:we,f:we.bind(r,4),d:function(J,fe){return ne=J,X=0,oe=r,Ie.n=fe,f}};function we(ve,J){for(X=ve,oe=J,i=0;!Se&&he&&!fe&&i<ye.length;i++){var fe,be=ye[i],G=Ie.p,Qe=be[2];ve>3?(fe=Qe===J)&&(oe=be[(X=be[4])?5:(X=3,3)],be[4]=be[5]=r):be[0]<=G&&((fe=ve<2&&G<be[1])?(X=0,Ie.v=J,Ie.n=be[1]):G<Qe&&(fe=ve<3||be[0]>J||J>Qe)&&(be[4]=ve,be[5]=J,Ie.n=Qe,X=0))}if(fe||ve>1)return f;throw Se=!0,J}return function(ve,J,fe){if(he>1)throw TypeError("Generator is already running");for(Se&&J===1&&we(J,fe),X=J,oe=fe;(i=X<2?r:oe)||!Se;){ne||(X?X<3?(X>1&&(Ie.n=-1),we(X,oe)):Ie.n=oe:Ie.v=oe);try{if(he=2,ne){if(X||(ve="next"),i=ne[ve]){if(!(i=i.call(ne,oe)))throw TypeError("iterator result is not an object");if(!i.done)return i;oe=i.value,X<2&&(X=0)}else X===1&&(i=ne.return)&&i.call(ne),X<2&&(oe=TypeError("The iterator does not provide a '"+ve+"' method"),X=1);ne=r}else if((i=(Se=Ie.n<0)?oe:z.call(K,Ie))!==f)break}catch(be){ne=r,X=1,oe=be}finally{he=1}}return{value:i,done:Se}}}(b,T,x),!0),W}var f={};function d(){}function p(){}function v(){}i=Object.getPrototypeOf;var m=[][a]?i(i([][a]())):(t(i={},a,function(){return this}),i),y=v.prototype=d.prototype=Object.create(m);function E(b){return Object.setPrototypeOf?Object.setPrototypeOf(b,v):(b.__proto__=v,t(b,l,"GeneratorFunction")),b.prototype=Object.create(y),b}return p.prototype=v,t(y,"constructor",v),t(v,"constructor",p),p.displayName="GeneratorFunction",t(v,l,"GeneratorFunction"),t(y),t(y,l,"Generator"),t(y,a,function(){return this}),t(y,"toString",function(){return"[object Generator]"}),(e.exports=n=function(){return{w:u,m:E}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(X2);var tN=X2.exports,nN={exports:{}},rN={exports:{}},iN={exports:{}};(function(e){var t=Y2,n=eN;function r(i,s){function a(u,f,d,p){try{var v=i[u](f),m=v.value;return m instanceof t?s.resolve(m.v).then(function(y){a("next",y,d,p)},function(y){a("throw",y,d,p)}):s.resolve(m).then(function(y){v.value=y,d(v)},function(y){return a("throw",y,d,p)})}catch(y){p(y)}}var l;this.next||(n(r.prototype),n(r.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),n(this,"_invoke",function(u,f,d){function p(){return new s(function(v,m){a(u,d,v,m)})}return l=l?l.then(p,p):p()},!0)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(iN);var sN=iN.exports;(function(e){var t=tN,n=sN;function r(i,s,a,l,u){return new n(t().w(i,s,a,l),u||Promise)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(rN);var aN=rN.exports;(function(e){var t=aN;function n(r,i,s,a,l){var u=t(r,i,s,a,l);return u.next().then(function(f){return f.done?f.value:u.next()})}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(nN);var CX=nN.exports,oN={exports:{}};(function(e){function t(n){var r=Object(n),i=[];for(var s in r)i.unshift(s);return function a(){for(;i.length;)if((s=i.pop())in r)return a.value=s,a.done=!1,a;return a.done=!0,a}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(oN);var RX=oN.exports,uN={exports:{}};(function(e){var t=po.default;function n(r){if(r!=null){var i=r[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],s=0;if(i)return i.call(r);if(typeof r.next=="function")return r;if(!isNaN(r.length))return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}}}throw new TypeError(t(r)+" is not iterable")}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(uN);var xX=uN.exports;(function(e){var t=Y2,n=tN,r=CX,i=aN,s=sN,a=RX,l=xX;function u(){var f=n(),d=f.m(u),p=(Object.getPrototypeOf?Object.getPrototypeOf(d):d.__proto__).constructor;function v(E){var b=typeof E=="function"&&E.constructor;return!!b&&(b===p||(b.displayName||b.name)==="GeneratorFunction")}var m={throw:1,return:2,break:3,continue:3};function y(E){var b,w;return function(T){b||(b={stop:function(){return w(T.a,2)},catch:function(){return T.v},abrupt:function(M,W){return w(T.a,m[M],W)},delegateYield:function(M,W,z){return b.resultName=W,w(T.d,l(M),z)},finish:function(M){return w(T.f,M)}},w=function(M,W,z){T.p=b.prev,T.n=b.next;try{return M(W,z)}finally{b.next=T.n}}),b.resultName&&(b[b.resultName]=T.v,b.resultName=void 0),b.sent=T.v,b.next=T.n;try{return E.call(this,b)}finally{T.p=b.prev,T.n=b.next}}}return(e.exports=u=function(){return{wrap:function(w,T,x,M){return f.w(y(w),T,x,M&&M.reverse())},isGeneratorFunction:v,mark:f.m,awrap:function(w,T){return new t(w,T)},AsyncIterator:s,async:function(w,T,x,M,W){return(v(T)?i:r)(y(w),T,x,M,W)},keys:a,values:l}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=u,e.exports.__esModule=!0,e.exports.default=e.exports})(Q2);var $X=Q2.exports,Vh=$X(),lN=Vh;try{regeneratorRuntime=Vh}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=Vh:Function("r","regeneratorRuntime = r")(Vh)}var bn={},PX=Pt,AX=nf.EXISTS,cN=We,OX=ga,fN=Function.prototype,NX=cN(fN.toString),dN=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,MX=cN(dN.exec),LX="name";PX&&!AX&&OX(fN,LX,{configurable:!0,get:function(){try{return MX(dN,NX(this))[1]}catch{return""}}});var hN={exports:{}},pN={exports:{}};(function(e){function t(n){if(Array.isArray(n))return n}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(pN);var DX=pN.exports,vN={exports:{}};(function(e){function t(n,r){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var s,a,l,u,f=[],d=!0,p=!1;try{if(l=(i=i.call(n)).next,r===0){if(Object(i)!==i)return;d=!1}else for(;!(d=(s=l.call(i)).done)&&(f.push(s.value),f.length!==r);d=!0);}catch(v){p=!0,a=v}finally{try{if(!d&&i.return!=null&&(u=i.return(),Object(u)!==u))return}finally{if(p)throw a}}return f}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(vN);var FX=vN.exports,gN={exports:{}},mN={exports:{}};(function(e){function t(n,r){(r==null||r>n.length)&&(r=n.length);for(var i=0,s=Array(r);i<r;i++)s[i]=n[i];return s}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(mN);var yN=mN.exports;(function(e){var t=yN;function n(r,i){if(r){if(typeof r=="string")return t(r,i);var s={}.toString.call(r).slice(8,-1);return s==="Object"&&r.constructor&&(s=r.constructor.name),s==="Map"||s==="Set"?Array.from(r):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?t(r,i):void 0}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(gN);var _N=gN.exports,wN={exports:{}};(function(e){function t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(wN);var jX=wN.exports;(function(e){var t=DX,n=FX,r=_N,i=jX;function s(a,l){return t(a)||n(a,l)||r(a,l)||i()}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports})(hN);var SN=hN.exports,UX=At,BX=co,WX=qn.f,Fw=UX("unscopables"),jw=Array.prototype;jw[Fw]===void 0&&WX(jw,Fw,{configurable:!0,value:BX(null)});var bN=function(e){jw[Fw][e]=!0},zX=Ne,HX=!zX(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),VX=Jt,qX=St,GX=Nn,KX=ov,QX=HX,EC=KX("IE_PROTO"),Uw=Object,JX=Uw.prototype,bf=QX?Uw.getPrototypeOf:function(e){var t=GX(e);if(VX(t,EC))return t[EC];var n=t.constructor;return qX(n)&&t instanceof n?n.prototype:t instanceof Uw?JX:null},YX=Ne,XX=St,ZX=Ct,kC=bf,eZ=$r,tZ=At,Bw=tZ("iterator"),TN=!1,io,Ay,Oy;[].keys&&(Oy=[].keys(),"next"in Oy?(Ay=kC(kC(Oy)),Ay!==Object.prototype&&(io=Ay)):TN=!0);var nZ=!ZX(io)||YX(function(){var e={};return io[Bw].call(e)!==e});nZ&&(io={});XX(io[Bw])||eZ(io,Bw,function(){return this});var EN={IteratorPrototype:io,BUGGY_SAFARI_ITERATORS:TN},rZ=EN.IteratorPrototype,iZ=co,sZ=zu,aZ=ma,oZ=Sf,uZ=function(){return this},lZ=function(e,t,n,r){var i=t+" Iterator";return e.prototype=iZ(rZ,{next:sZ(+!r,n)}),aZ(e,i,!1),oZ[i]=uZ,e},cZ=Ze,fZ=wt,kN=nf,dZ=St,hZ=lZ,IC=bf,CC=Ju,pZ=ma,vZ=bs,Ny=$r,gZ=At,mZ=Sf,IN=EN,yZ=kN.PROPER,_Z=kN.CONFIGURABLE,RC=IN.IteratorPrototype,rh=IN.BUGGY_SAFARI_ITERATORS,Ul=gZ("iterator"),xC="keys",Bl="values",$C="entries",wZ=function(){return this},J0=function(e,t,n,r,i,s,a){hZ(n,t,r);var l=function(w){if(w===i&&v)return v;if(!rh&&w&&w in d)return d[w];switch(w){case xC:return function(){return new n(this,w)};case Bl:return function(){return new n(this,w)};case $C:return function(){return new n(this,w)}}return function(){return new n(this)}},u=t+" Iterator",f=!1,d=e.prototype,p=d[Ul]||d["@@iterator"]||i&&d[i],v=!rh&&p||l(i),m=t==="Array"&&d.entries||p,y,E,b;if(m&&(y=IC(m.call(new e)),y!==Object.prototype&&y.next&&(IC(y)!==RC&&(CC?CC(y,RC):dZ(y[Ul])||Ny(y,Ul,wZ)),pZ(y,u,!0))),yZ&&i===Bl&&p&&p.name!==Bl&&(_Z?vZ(d,"name",Bl):(f=!0,v=function(){return fZ(p,this)})),i)if(E={values:l(Bl),keys:s?v:l(xC),entries:l($C)},a)for(b in E)(rh||f||!(b in d))&&Ny(d,b,E[b]);else cZ({target:t,proto:!0,forced:rh||f},E);return d[Ul]!==v&&Ny(d,Ul,v,{name:i}),mZ[t]=v,E},Y0=function(e,t){return{value:e,done:t}},SZ=xr,X0=bN,PC=Sf,CN=ji,bZ=qn.f,TZ=J0,ih=Y0,EZ=Pt,RN="Array Iterator",kZ=CN.set,IZ=CN.getterFor(RN),xN=TZ(Array,"Array",function(e,t){kZ(this,{type:RN,target:SZ(e),index:0,kind:t})},function(){var e=IZ(this),t=e.target,n=e.index++;if(!t||n>=t.length)return e.target=null,ih(void 0,!0);switch(e.kind){case"keys":return ih(n,!1);case"values":return ih(t[n],!1)}return ih([n,t[n]],!1)},"values"),AC=PC.Arguments=PC.Array;X0("keys");X0("values");X0("entries");if(EZ&&AC.name!=="values")try{bZ(AC,"name",{value:"values"})}catch{}var OC=Ge,$N=n2,CZ=r2,rc=xN,NC=bs,RZ=ma,xZ=At,My=xZ("iterator"),Ly=rc.values,PN=function(e,t){if(e){if(e[My]!==Ly)try{NC(e,My,Ly)}catch{e[My]=Ly}if(RZ(e,t,!0),$N[t]){for(var n in rc)if(e[n]!==rc[n])try{NC(e,n,rc[n])}catch{e[n]=rc[n]}}}};for(var Dy in $N)PN(OC[Dy]&&OC[Dy].prototype,Dy);PN(CZ,"DOMTokenList");var $Z=TypeError,PZ=9007199254740991,AN=function(e){if(e>PZ)throw $Z("Maximum allowed index exceeded");return e},AZ=Ze,OZ=Ne,NZ=uf,MZ=Ct,LZ=Nn,DZ=Mn,MC=AN,LC=hf,FZ=A0,jZ=df,UZ=At,BZ=Vu,ON=UZ("isConcatSpreadable"),WZ=BZ>=51||!OZ(function(){var e=[];return e[ON]=!1,e.concat()[0]!==e}),zZ=function(e){if(!MZ(e))return!1;var t=e[ON];return t!==void 0?!!t:NZ(e)},HZ=!WZ||!jZ("concat");AZ({target:"Array",proto:!0,arity:1,forced:HZ},{concat:function(t){var n=LZ(this),r=FZ(n,0),i=0,s,a,l,u,f;for(s=-1,l=arguments.length;s<l;s++)if(f=s===-1?n:arguments[s],zZ(f))for(u=DZ(f),MC(i+u),a=0;a<u;a++,i++)a in f&&LC(r,i,f[a]);else MC(i+1),LC(r,i++,f);return r.length=i,r}});var VZ=Ze,DC=uf,qZ=cv,GZ=Ct,FC=Qu,KZ=Mn,QZ=xr,JZ=hf,YZ=At,XZ=df,ZZ=Ts,eee=XZ("slice"),tee=YZ("species"),Fy=Array,nee=Math.max;VZ({target:"Array",proto:!0,forced:!eee},{slice:function(t,n){var r=QZ(this),i=KZ(r),s=FC(t,i),a=FC(n===void 0?i:n,i),l,u,f;if(DC(r)&&(l=r.constructor,qZ(l)&&(l===Fy||DC(l.prototype))?l=void 0:GZ(l)&&(l=l[tee],l===null&&(l=void 0)),l===Fy||l===void 0))return ZZ(r,s,a);for(u=new(l===void 0?Fy:l)(nee(a-s,0)),f=0;s<a;s++,f++)s in r&&JZ(u,f,r[s]);return u.length=f,u}});var ree=en,iee=V2,see=function(e,t,n,r){try{return r?t(ree(n)[0],n[1]):t(n)}catch(i){iee(e,"throw",i)}},aee=fo,oee=wt,uee=Nn,lee=see,cee=K0,fee=cv,dee=Mn,jC=hf,hee=Q0,pee=wv,UC=Array,vee=function(t){var n=uee(t),r=fee(this),i=arguments.length,s=i>1?arguments[1]:void 0,a=s!==void 0;a&&(s=aee(s,i>2?arguments[2]:void 0));var l=pee(n),u=0,f,d,p,v,m,y;if(l&&!(this===UC&&cee(l)))for(d=r?new this:[],v=hee(n,l),m=v.next;!(p=oee(m,v)).done;u++)y=a?lee(v,s,[p.value,u],!0):p.value,jC(d,u,y);else for(f=dee(n),d=r?new this(f):UC(f);f>u;u++)y=a?s(n[u],u):n[u],jC(d,u,y);return d.length=u,d},gee=Ze,mee=vee,yee=bv,_ee=!yee(function(e){Array.from(e)});gee({target:"Array",stat:!0,forced:_ee},{from:mee});var Z0=We,wee=Ui,See=Gn,bee=ws,Tee=Z0("".charAt),BC=Z0("".charCodeAt),Eee=Z0("".slice),kee=function(e){return function(t,n){var r=See(bee(t)),i=wee(n),s=r.length,a,l;return i<0||i>=s?e?"":void 0:(a=BC(r,i),a<55296||a>56319||i+1===s||(l=BC(r,i+1))<56320||l>57343?e?Tee(r,i):a:e?Eee(r,i,i+2):(a-55296<<10)+(l-56320)+65536)}},NN={charAt:kee(!0)},Iee=NN.charAt,Cee=Gn,MN=ji,Ree=J0,WC=Y0,LN="String Iterator",xee=MN.set,$ee=MN.getterFor(LN);Ree(String,"String",function(e){xee(this,{type:LN,string:Cee(e),index:0})},function(){var t=$ee(this),n=t.string,r=t.index,i;return r>=n.length?WC(void 0,!0):(i=Iee(n,r),t.index+=i.length,WC(i,!1))});var Pee=en,DN=function(){var e=Pee(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t},eb=Ne,Aee=Ge,tb=Aee.RegExp,nb=eb(function(){var e=tb("a","y");return e.lastIndex=2,e.exec("abcd")!==null});nb||eb(function(){return!tb("a","y").sticky});var Oee=nb||eb(function(){var e=tb("^r","gy");return e.lastIndex=2,e.exec("str")!==null}),FN={BROKEN_CARET:Oee,UNSUPPORTED_Y:nb},Nee=Ne,Mee=Ge,Lee=Mee.RegExp,Dee=Nee(function(){var e=Lee(".","s");return!(e.dotAll&&e.test(`
`)&&e.flags==="s")}),Fee=Ne,jee=Ge,Uee=jee.RegExp,Bee=Fee(function(){var e=Uee("(?<a>b)","g");return e.exec("b").groups.a!=="b"||"b".replace(e,"$<a>c")!=="bc"}),ou=wt,Tv=We,Wee=Gn,zee=DN,Hee=FN,Vee=Ku,qee=co,Gee=ji.get,Kee=Dee,Qee=Bee,Jee=Vee("native-string-replace",String.prototype.replace),Ep=RegExp.prototype.exec,Ww=Ep,Yee=Tv("".charAt),Xee=Tv("".indexOf),Zee=Tv("".replace),jy=Tv("".slice),zw=function(){var e=/a/,t=/b*/g;return ou(Ep,e,"a"),ou(Ep,t,"a"),e.lastIndex!==0||t.lastIndex!==0}(),jN=Hee.BROKEN_CARET,Hw=/()??/.exec("")[1]!==void 0,ete=zw||Hw||jN||Kee||Qee;ete&&(Ww=function(t){var n=this,r=Gee(n),i=Wee(t),s=r.raw,a,l,u,f,d,p,v;if(s)return s.lastIndex=n.lastIndex,a=ou(Ww,s,i),n.lastIndex=s.lastIndex,a;var m=r.groups,y=jN&&n.sticky,E=ou(zee,n),b=n.source,w=0,T=i;if(y&&(E=Zee(E,"y",""),Xee(E,"g")===-1&&(E+="g"),T=jy(i,n.lastIndex),n.lastIndex>0&&(!n.multiline||n.multiline&&Yee(i,n.lastIndex-1)!==`
`)&&(b="(?: "+b+")",T=" "+T,w++),l=new RegExp("^(?:"+b+")",E)),Hw&&(l=new RegExp("^"+b+"$(?!\\s)",E)),zw&&(u=n.lastIndex),f=ou(Ep,y?l:n,T),y?f?(f.input=jy(f.input,w),f[0]=jy(f[0],w),f.index=n.lastIndex,n.lastIndex+=f[0].length):n.lastIndex=0:zw&&f&&(n.lastIndex=n.global?f.index+f[0].length:u),Hw&&f&&f.length>1&&ou(Jee,f[0],l,function(){for(d=1;d<arguments.length-2;d++)arguments[d]===void 0&&(f[d]=void 0)}),f&&m)for(f.groups=p=qee(null),d=0;d<m.length;d++)v=m[d],p[v[0]]=f[v[1]];return f});var rb=Ww,tte=Ze,zC=rb;tte({target:"RegExp",proto:!0,forced:/./.exec!==zC},{exec:zC});var nte=Ze,HC=wt,rte=St,VC=en,ite=Gn,ste=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},t.test("abc")===!0&&e}(),ate=/./.test;nte({target:"RegExp",proto:!0,forced:!ste},{test:function(e){var t=VC(this),n=ite(e),r=t.exec;if(!rte(r))return HC(ate,t,n);var i=HC(r,t,n);return i===null?!1:(VC(i),!0)}});var ote=Ze,ute=Pt,lte=Ge,sh=We,cte=Jt,fte=St,dte=Ss,hte=Gn,pte=ga,vte=k0,es=lte.Symbol,Pa=es&&es.prototype;if(ute&&fte(es)&&(!("description"in Pa)||es().description!==void 0)){var qC={},ah=function(){var t=arguments.length<1||arguments[0]===void 0?void 0:hte(arguments[0]),n=dte(Pa,this)?new es(t):t===void 0?es():es(t);return t===""&&(qC[n]=!0),n};vte(ah,es),ah.prototype=Pa,Pa.constructor=ah;var gte=String(es("description detection"))==="Symbol(description detection)",mte=sh(Pa.valueOf),yte=sh(Pa.toString),_te=/^Symbol\((.*)\)[^)]+$/,wte=sh("".replace),Ste=sh("".slice);pte(Pa,"description",{configurable:!0,get:function(){var t=mte(this);if(cte(qC,t))return"";var n=yte(t),r=gte?Ste(n,7,-1):wte(n,_te,"$1");return r===""?void 0:r}}),ote({global:!0,constructor:!0,forced:!0},{Symbol:ah})}var bte=IO;bte("iterator");var UN={exports:{}},BN={exports:{}};(function(e){var t=yN;function n(r){if(Array.isArray(r))return t(r)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(BN);var Tte=BN.exports,WN={exports:{}};(function(e){function t(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(WN);var Ete=WN.exports,zN={exports:{}};(function(e){function t(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(zN);var kte=zN.exports;(function(e){var t=Tte,n=Ete,r=_N,i=kte;function s(a){return t(a)||n(a)||r(a)||i()}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports})(UN);var ib=UN.exports,Ite=Ze,Cte=uv.includes,Rte=Ne,xte=bN,$te=Rte(function(){return!Array(1).includes()});Ite({target:"Array",proto:!0,forced:$te},{includes:function(t){return Cte(this,t,arguments.length>1?arguments[1]:void 0)}});xte("includes");var Pte=Ze,Ate=We,Ote=ef,Nte=xr,Mte=gv,Lte=Ate([].join),Dte=Ote!==Object,Fte=Dte||!Mte("join",",");Pte({target:"Array",proto:!0,forced:Fte},{join:function(t){return Lte(Nte(this),t===void 0?",":t)}});var jte=Ct,Ute=Math.floor,HN=Number.isInteger||function(t){return!jte(t)&&isFinite(t)&&Ute(t)===t},Bte=Ze,Wte=HN;Bte({target:"Number",stat:!0},{isInteger:Wte});var zte=St,Hte=Ct,GC=Ju,Ev=function(e,t,n){var r,i;return GC&&zte(r=t.constructor)&&r!==n&&Hte(i=r.prototype)&&i!==n.prototype&&GC(e,i),e},Vte=We,qte=Vte(1.1.valueOf),Gte=`	
\v\f\r \u2028\u2029\uFEFF`,Kte=We,Qte=ws,Jte=Gn,Vw=Gte,KC=Kte("".replace),Yte=RegExp("^["+Vw+"]+"),Xte=RegExp("(^|[^"+Vw+"])["+Vw+"]+$"),Zte=function(e){return function(t){var n=Jte(Qte(t));return e&1&&(n=KC(n,Yte,"")),e&2&&(n=KC(n,Xte,"$1")),n}},ene={trim:Zte(3)},tne=Ze,VN=KV,nne=Pt,qN=Ge,GN=$0,KN=We,rne=lv,QC=Jt,ine=Ev,sne=Ss,ane=Gu,QN=w0,one=Ne,une=lo.f,lne=da.f,cne=qn.f,fne=qte,dne=ene.trim,kv="Number",mu=qN[kv];GN[kv];var sb=mu.prototype,hne=qN.TypeError,pne=KN("".slice),oh=KN("".charCodeAt),vne=function(e){var t=QN(e,"number");return typeof t=="bigint"?t:gne(t)},gne=function(e){var t=QN(e,"number"),n,r,i,s,a,l,u,f;if(ane(t))throw new hne("Cannot convert a Symbol value to a number");if(typeof t=="string"&&t.length>2){if(t=dne(t),n=oh(t,0),n===43||n===45){if(r=oh(t,2),r===88||r===120)return NaN}else if(n===48){switch(oh(t,1)){case 66:case 98:i=2,s=49;break;case 79:case 111:i=8,s=55;break;default:return+t}for(a=pne(t,2),l=a.length,u=0;u<l;u++)if(f=oh(a,u),f<48||f>s)return NaN;return parseInt(a,i)}}return+t},ab=rne(kv,!mu(" 0o1")||!mu("0b1")||mu("+0x1")),mne=function(e){return sne(sb,e)&&one(function(){fne(e)})},Iv=function(t){var n=arguments.length<1?0:mu(vne(t));return mne(this)?ine(Object(n),this,Iv):n};Iv.prototype=sb;ab&&!VN&&(sb.constructor=Iv);tne({global:!0,constructor:!0,wrap:!0,forced:ab},{Number:Iv});var yne=function(e,t){for(var n=nne?une(t):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),r=0,i;n.length>r;r++)QC(t,i=n[r])&&!QC(e,i)&&cne(e,i,lne(t,i))};(ab||VN)&&yne(GN[kv],mu);var JN=Pt,_ne=Ne,YN=We,wne=bf,Sne=of,bne=xr,Tne=Zc.f,XN=YN(Tne),Ene=YN([].push),kne=JN&&_ne(function(){var e=Object.create(null);return e[2]=2,!XN(e,2)}),Ine=function(e){return function(t){for(var n=bne(t),r=Sne(n),i=kne&&wne(n)===null,s=r.length,a=0,l=[],u;s>a;)u=r[a++],(!JN||(i?u in n:XN(n,u)))&&Ene(l,e?[u,n[u]]:n[u]);return l}},Cne={entries:Ine(!0)},Rne=Ze,xne=Cne.entries;Rne({target:"Object",stat:!0},{entries:function(t){return xne(t)}});/*
@license
Copyright (c) 2021 Twilio Inc.

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.


*/Object.defineProperty(bn,"__esModule",{value:!0});var $ne=po,Pne=SN,Ane=ib,One=vf,Nne=pf,Mne=mf,Lne=yf,Dne=vo;function ya(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var yu=ya($ne),gs=ya(Pne),Uy=ya(Ane),Fne=ya(One),jne=ya(Nne),Une=ya(Mne),Bne=ya(Lne),JC=ya(Dne),Es=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return{checks:n}},ZN=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Es(function(i){for(var s=!1,a=[],l=0,u=n;l<u.length;l++){var f=u[l];if(typeof f=="string"){s=s||yu.default(i)===f,a.push("of type ".concat(f));continue}s=s||i instanceof f,a.push("an instance of ".concat(f.name))}return[s,a]})},Wne=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Es(function(i){for(var s=!1,a=[],l=0,u=n;l<u.length;l++){var f=u[l];s=s||i===f,a.push(typeof f=="string"?'"'.concat(f,'"'):"".concat(f))}return[s,a]})};function zne(e){var t=Hne();return function(){var r=JC.default(e),i;if(t){var s=JC.default(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return Bne.default(this,i)}}function Hne(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function jc(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Vne(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(f){throw f},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,l;return{s:function(){n=n.call(e)},n:function(){var f=n.next();return s=f.done,f},e:function(f){a=!0,l=f},f:function(){try{!s&&n.return!=null&&n.return()}finally{if(a)throw l}}}}function Vne(e,t){if(e){if(typeof e=="string")return YC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YC(e,t)}}function YC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Cv=function(t,n){if(n.length>t.length)throw new Error("Expected at most ".concat(t.length," argument(s), but got ").concat(n.length));for(;n.length<t.length;)n.push(void 0);var r=jc(n.entries()),i;try{for(r.s();!(i=r.n()).done;){var s=gs.default(i.value,2),a=s[0],l=s[1],u=xv(t[a],l),f=gs.default(u,4),d=f[0],p=f[1],v=f[2],m=f[3];if(!d){var y=a+1;throw new Error("Argument ".concat(y," is expected to be ").concat(v).concat(m," but got ").concat(p))}}}catch(E){r.e(E)}finally{r.f()}},eM=function(t){var n,r,i=["undefined","boolean","number","bigint","string"];if(i.includes(yu.default(t))&&(r=typeof t=="string"?'"'.concat(t,'"'):"".concat(t)),yu.default(t)==="object"&&(t==null||(n=t.constructor)===null||n===void 0?void 0:n.name)!=="Object"){var s;r=t===null?"null":"instance of ".concat(t==null||(s=t.constructor)===null||s===void 0?void 0:s.name)}return r||(r=yu.default(t)),r},qne=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=ob(n);return function(s){return function(a){Une.default(u,a);var l=zne(u);function u(){jne.default(this,u);for(var f=arguments.length,d=new Array(f),p=0;p<f;p++)d[p]=arguments[p];return Cv(i,d),l.call.apply(l,[this].concat(d))}return Fne.default(u)}(s)}},Gne=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=ob(n);return function(s,a,l){if(typeof l.value!="function")throw new Error("The validateTypes decorator can only be applied to methods");var u=l.value;l.value=function(){for(var f=arguments.length,d=new Array(f),p=0;p<f;p++)d[p]=arguments[p];return Cv(i,d),u.apply(this,d)}}},Kne=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=ob(n);return function(s,a,l){if(typeof l.value!="function")throw new Error("The validateTypesAsync decorator can only be applied to methods");var u=l.value;l.value=function(){for(var f=arguments.length,d=new Array(f),p=0;p<f;p++)d[p]=arguments[p];try{Cv(i,d)}catch(v){return Promise.reject(v)}return u.apply(this,d)}}},ob=function(t){var n=[],r=jc(t),i;try{for(r.s();!(i=r.n()).done;){var s=i.value;n.push(Rv(s))}}catch(a){r.e(a)}finally{r.f()}return n},Rv=function(t){var n=[],r=Array.isArray(t)?t:[t],i=jc(r),s;try{for(i.s();!(s=i.n()).done;){var a=s.value;if(typeof a=="string"||typeof a=="function"){n.push(ZN(a));continue}n.push(a)}}catch(l){i.e(l)}finally{i.f()}return n},xv=function(t,n){var r=[],i,s=!1,a=jc(t),l;try{for(a.s();!(l=a.n()).done;){var u=l.value,f=jc(u.checks),d;try{for(f.s();!(d=f.n()).done;){var p=d.value,v=p(n),m=gs.default(v,3),y=m[0],E=m[1],b=m[2];s=s||y,!i&&b&&(i=b),E&&(r=typeof E=="string"?[].concat(Uy.default(r),[E]):[].concat(Uy.default(r),Uy.default(E)))}}catch(M){f.e(M)}finally{f.f()}}}catch(M){a.e(M)}finally{a.f()}if(s)return[!0];var w=i||eM(n),T=r.length-1,x=T>0?"".concat(r.slice(0,T).join(", ")," or ").concat(r[T]):r.join(", ");return[!1,w,x,T>1?";":","]};function Qne(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Jne(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(f){throw f},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,l;return{s:function(){n=n.call(e)},n:function(){var f=n.next();return s=f.done,f},e:function(f){a=!0,l=f},f:function(){try{!s&&n.return!=null&&n.return()}finally{if(a)throw l}}}}function Jne(e,t){if(e){if(typeof e=="string")return XC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return XC(e,t)}}function XC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Yne=function(t,n){return Es(function(r){if(!Array.isArray(r)||r.length<1)return[!1,"a non-empty array of ".concat(t)];var i=Qne(r.entries()),s;try{for(i.s();!(s=i.n()).done;){var a=gs.default(s.value,2),l=a[0],u=a[1],f=xv(Rv(n),u),d=gs.default(f,3),p=d[0],v=d[1],m=d[2];if(!p)return[!1,"a valid non-empty array of ".concat(t," (index ").concat(l," should be ").concat(m,")"),"malformed array of ".concat(t," (index ").concat(l," is ").concat(v,")")]}}catch(y){i.e(y)}finally{i.f()}return[!0]})},Xne=Es(function(e){return[typeof e=="string"&&e.length>0,"a non-empty string"]}),Zne=Es(function(e){return[typeof e=="number"&&Number.isInteger(e)&&e>=0,"a non-negative integer"]}),ere=Es(function(e){return[yu.default(e)==="object"&&e!==null&&!Array.isArray(e),"a pure object (non-null and non-array)"]}),tre=function(t,n){return Es(function(r){if(yu.default(r)!=="object"||r===null||Array.isArray(r))return[!1,"valid ".concat(t," (should be a pure object)")];for(var i=0,s=Object.entries(n);i<s.length;i++){var a=gs.default(s[i],2),l=a[0],u=a[1],f=xv(Rv(u),r[l]),d=gs.default(f,3),p=d[0],v=d[1],m=d[2];if(!p)return[!1,"valid ".concat(t,' (key "').concat(l,'" should be ').concat(m,")"),"malformed ".concat(t,' (key "').concat(l,'" is ').concat(v,")")]}return[!0]})};function nre(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=rre(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(f){throw f},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,l;return{s:function(){n=n.call(e)},n:function(){var f=n.next();return s=f.done,f},e:function(f){a=!0,l=f},f:function(){try{!s&&n.return!=null&&n.return()}finally{if(a)throw l}}}}function rre(e,t){if(e){if(typeof e=="string")return ZC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZC(e,t)}}function ZC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ire=function(t,n){return Es(function(r){if(!Array.isArray(r))return[!1,"an array of ".concat(t)];var i=nre(r.entries()),s;try{for(i.s();!(s=i.n()).done;){var a=gs.default(s.value,2),l=a[0],u=a[1],f=xv(Rv(n),u),d=gs.default(f,3),p=d[0],v=d[1],m=d[2];if(!p)return[!1,"a valid array of ".concat(t," (index ").concat(l," should be ").concat(m,")"),"malformed array of ".concat(t," (index ").concat(l," is ").concat(v,")")]}}catch(y){i.e(y)}finally{i.f()}return[!0]})};bn.array=ire;bn.custom=Es;bn.literal=Wne;bn.nonEmptyArray=Yne;bn.nonEmptyString=Xne;bn.nonNegativeInteger=Zne;bn.objectSchema=tre;bn.pureObject=ere;bn.runtimeTypeValidation=Cv;bn.stringifyReceivedType=eM;bn.type=ZN;bn.validateConstructorTypes=qne;bn.validateTypes=Gne;bn.validateTypesAsync=Kne;var tM={},nM={exports:{}},rM={exports:{}};(function(e){var t=vo;function n(r,i){for(;!{}.hasOwnProperty.call(r,i)&&(r=t(r))!==null;);return r}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(rM);var sre=rM.exports;(function(e){var t=sre;function n(){return e.exports=n=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(r,i,s){var a=t(r,i);if(a){var l=Object.getOwnPropertyDescriptor(a,i);return l.get?l.get.call(arguments.length<3?r:s):l.value}},e.exports.__esModule=!0,e.exports.default=e.exports,n.apply(null,arguments)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(nM);var ub=nM.exports,are=Ge,ore=Ne,eR=are.RegExp,ure=!ore(function(){var e=!0;try{eR(".","d")}catch{e=!1}var t={},n="",r=e?"dgimsy":"gimsy",i=function(u,f){Object.defineProperty(t,u,{get:function(){return n+=f,!0}})},s={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};e&&(s.hasIndices="d");for(var a in s)i(a,s[a]);var l=Object.getOwnPropertyDescriptor(eR.prototype,"flags").get.call(t);return l!==r||n!==r}),lre={correct:ure},cre=wt,fre=Jt,dre=Ss,tR=lre,hre=DN,pre=RegExp.prototype,lb=tR.correct?function(e){return e.flags}:function(e){return!tR.correct&&dre(pre,e)&&!fre(e,"flags")?cre(hre,e):e.flags},vre=nf.PROPER,gre=$r,mre=en,nR=Gn,yre=Ne,_re=lb,cb="toString",iM=RegExp.prototype,sM=iM[cb],wre=yre(function(){return sM.call({source:"a",flags:"b"})!=="/a/b"}),Sre=vre&&sM.name!==cb;(wre||Sre)&&gre(iM,cb,function(){var t=mre(this),n=nR(t.source),r=nR(_re(t));return"/"+n+"/"+r},{unsafe:!0});var aM={exports:{}},bre=Ne,Tre=bre(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),Ere=Ne,kre=Ct,Ire=_s,rR=Tre,qh=Object.isExtensible,Cre=Ere(function(){qh(1)}),Rre=Cre||rR?function(t){return!kre(t)||rR&&Ire(t)==="ArrayBuffer"?!1:qh?qh(t):!0}:qh,xre=Ne,$re=!xre(function(){return Object.isExtensible(Object.preventExtensions({}))}),Pre=Ze,Are=We,Ore=rf,Nre=Ct,fb=Jt,Mre=qn.f,iR=lo,Lre=R0,db=Rre,Dre=tf,Fre=$re,oM=!1,ms=Dre("meta"),jre=0,hb=function(e){Mre(e,ms,{value:{objectID:"O"+jre++,weakData:{}}})},Ure=function(e,t){if(!Nre(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!fb(e,ms)){if(!db(e))return"F";if(!t)return"E";hb(e)}return e[ms].objectID},Bre=function(e,t){if(!fb(e,ms)){if(!db(e))return!0;if(!t)return!1;hb(e)}return e[ms].weakData},Wre=function(e){return Fre&&oM&&db(e)&&!fb(e,ms)&&hb(e),e},zre=function(){Hre.enable=function(){},oM=!0;var e=iR.f,t=Are([].splice),n={};n[ms]=1,e(n).length&&(iR.f=function(r){for(var i=e(r),s=0,a=i.length;s<a;s++)if(i[s]===ms){t(i,s,1);break}return i},Pre({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Lre.f}))},Hre=aM.exports={enable:zre,fastKey:Ure,getWeakData:Bre,onFreeze:Wre};Ore[ms]=!0;var uM=aM.exports,Vre=Ze,qre=Ge,Gre=We,sR=lv,Kre=$r,Qre=uM,Jre=Sv,Yre=_f,Xre=St,Zre=Hu,By=Ct,Wy=Ne,eie=bv,tie=ma,nie=Ev,lM=function(e,t,n){var r=e.indexOf("Map")!==-1,i=e.indexOf("Weak")!==-1,s=r?"set":"add",a=qre[e],l=a&&a.prototype,u=a,f={},d=function(w){var T=Gre(l[w]);Kre(l,w,w==="add"?function(M){return T(this,M===0?0:M),this}:w==="delete"?function(x){return i&&!By(x)?!1:T(this,x===0?0:x)}:w==="get"?function(M){return i&&!By(M)?void 0:T(this,M===0?0:M)}:w==="has"?function(M){return i&&!By(M)?!1:T(this,M===0?0:M)}:function(M,W){return T(this,M===0?0:M,W),this})},p=sR(e,!Xre(a)||!(i||l.forEach&&!Wy(function(){new a().entries().next()})));if(p)u=n.getConstructor(t,e,r,s),Qre.enable();else if(sR(e,!0)){var v=new u,m=v[s](i?{}:-0,1)!==v,y=Wy(function(){v.has(1)}),E=eie(function(w){new a(w)}),b=!i&&Wy(function(){for(var w=new a,T=5;T--;)w[s](T,T);return!w.has(-0)});E||(u=t(function(w,T){Yre(w,l);var x=nie(new a,w,u);return Zre(T)||Jre(T,x[s],{that:x,AS_ENTRIES:r}),x}),u.prototype=l,l.constructor=u),(y||b)&&(d("delete"),d("has"),r&&d("get")),(b||m)&&d(s),i&&l.clear&&delete l.clear}return f[e]=u,Vre({global:!0,constructor:!0,forced:u!==a},f),tie(u,e),i||n.setStrong(u,e,r),u},rie=$r,cM=function(e,t,n){for(var r in t)rie(e,r,t[r],n);return e},aR=co,iie=ga,oR=cM,sie=fo,aie=_f,oie=Hu,uie=Sv,lie=J0,uh=Y0,cie=B0,Wl=Pt,uR=uM.fastKey,fM=ji,lR=fM.set,zy=fM.getterFor,dM={getConstructor:function(e,t,n,r){var i=e(function(f,d){aie(f,s),lR(f,{type:t,index:aR(null),first:null,last:null,size:0}),Wl||(f.size=0),oie(d)||uie(d,f[r],{that:f,AS_ENTRIES:n})}),s=i.prototype,a=zy(t),l=function(f,d,p){var v=a(f),m=u(f,d),y,E;return m?m.value=p:(v.last=m={index:E=uR(d,!0),key:d,value:p,previous:y=v.last,next:null,removed:!1},v.first||(v.first=m),y&&(y.next=m),Wl?v.size++:f.size++,E!=="F"&&(v.index[E]=m)),f},u=function(f,d){var p=a(f),v=uR(d),m;if(v!=="F")return p.index[v];for(m=p.first;m;m=m.next)if(m.key===d)return m};return oR(s,{clear:function(){for(var d=this,p=a(d),v=p.first;v;)v.removed=!0,v.previous&&(v.previous=v.previous.next=null),v=v.next;p.first=p.last=null,p.index=aR(null),Wl?p.size=0:d.size=0},delete:function(f){var d=this,p=a(d),v=u(d,f);if(v){var m=v.next,y=v.previous;delete p.index[v.index],v.removed=!0,y&&(y.next=m),m&&(m.previous=y),p.first===v&&(p.first=m),p.last===v&&(p.last=y),Wl?p.size--:d.size--}return!!v},forEach:function(d){for(var p=a(this),v=sie(d,arguments.length>1?arguments[1]:void 0),m;m=m?m.next:p.first;)for(v(m.value,m.key,this);m&&m.removed;)m=m.previous},has:function(d){return!!u(this,d)}}),oR(s,n?{get:function(d){var p=u(this,d);return p&&p.value},set:function(d,p){return l(this,d===0?0:d,p)}}:{add:function(d){return l(this,d=d===0?0:d,d)}}),Wl&&iie(s,"size",{configurable:!0,get:function(){return a(this).size}}),i},setStrong:function(e,t,n){var r=t+" Iterator",i=zy(t),s=zy(r);lie(e,t,function(a,l){lR(this,{type:r,target:a,state:i(a),kind:l,last:null})},function(){for(var a=s(this),l=a.kind,u=a.last;u&&u.removed;)u=u.previous;return!a.target||!(a.last=u=u?u.next:a.state.first)?(a.target=null,uh(void 0,!0)):uh(l==="keys"?u.key:l==="values"?u.value:[u.key,u.value],!1)},n?"entries":"values",!n,!0),cie(t)}},fie=lM,die=dM;fie("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},die);var hM={exports:{}};(function(e,t){(function(r,i){e.exports=i()})(di,function(){return function(n){var r={};function i(s){if(r[s])return r[s].exports;var a=r[s]={i:s,l:!1,exports:{}};return n[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=n,i.c=r,i.i=function(s){return s},i.d=function(s,a,l){i.o(s,a)||Object.defineProperty(s,a,{configurable:!1,enumerable:!0,get:l})},i.n=function(s){var a=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(a,"a",a),a},i.o=function(s,a){return Object.prototype.hasOwnProperty.call(s,a)},i.p="",i(i.s=5)}([function(n,r,i){n.exports=function(s,a){var l,u,f;for(l=1;l<arguments.length;l++){u=arguments[l];for(f in u)u.hasOwnProperty(f)&&(s[f]=u[f])}return s}},function(n,r,i){var s=i(0);n.exports={build:function(a,l){var u,f,d,p=l.plugins;for(u=0,f=p.length;u<f;u++)d=p[u],d.methods&&s(a,d.methods),d.properties&&Object.defineProperties(a,d.properties)},hook:function(a,l,u){var f,d,p,v,m=a.config.plugins,y=[a.context];for(u&&(y=y.concat(u)),f=0,d=m.length;f<d;f++)v=m[f],p=m[f][l],p&&p.apply(v,y)}}},function(n,r,i){function s(a){if(a.length===0)return a;var l,u,f=a.split(/[_-]/);if(f.length===1&&f[0][0].toLowerCase()===f[0][0])return a;for(u=f[0].toLowerCase(),l=1;l<f.length;l++)u=u+f[l].charAt(0).toUpperCase()+f[l].substring(1).toLowerCase();return u}s.prepended=function(a,l){return l=s(l),a+l[0].toUpperCase()+l.substring(1)},n.exports=s},function(n,r,i){var s=i(0),a=i(2);function l(u,f){u=u||{},this.options=u,this.defaults=f.defaults,this.states=[],this.transitions=[],this.map={},this.lifecycle=this.configureLifecycle(),this.init=this.configureInitTransition(u.init),this.data=this.configureData(u.data),this.methods=this.configureMethods(u.methods),this.map[this.defaults.wildcard]={},this.configureTransitions(u.transitions||[]),this.plugins=this.configurePlugins(u.plugins,f.plugin)}s(l.prototype,{addState:function(u){this.map[u]||(this.states.push(u),this.addStateLifecycleNames(u),this.map[u]={})},addStateLifecycleNames:function(u){this.lifecycle.onEnter[u]=a.prepended("onEnter",u),this.lifecycle.onLeave[u]=a.prepended("onLeave",u),this.lifecycle.on[u]=a.prepended("on",u)},addTransition:function(u){this.transitions.indexOf(u)<0&&(this.transitions.push(u),this.addTransitionLifecycleNames(u))},addTransitionLifecycleNames:function(u){this.lifecycle.onBefore[u]=a.prepended("onBefore",u),this.lifecycle.onAfter[u]=a.prepended("onAfter",u),this.lifecycle.on[u]=a.prepended("on",u)},mapTransition:function(u){var f=u.name,d=u.from,p=u.to;return this.addState(d),typeof p!="function"&&this.addState(p),this.addTransition(f),this.map[d][f]=u,u},configureLifecycle:function(){return{onBefore:{transition:"onBeforeTransition"},onAfter:{transition:"onAfterTransition"},onEnter:{state:"onEnterState"},onLeave:{state:"onLeaveState"},on:{transition:"onTransition"}}},configureInitTransition:function(u){return typeof u=="string"?this.mapTransition(s({},this.defaults.init,{to:u,active:!0})):typeof u=="object"?this.mapTransition(s({},this.defaults.init,u,{active:!0})):(this.addState(this.defaults.init.from),this.defaults.init)},configureData:function(u){return typeof u=="function"?u:typeof u=="object"?function(){return u}:function(){return{}}},configureMethods:function(u){return u||{}},configurePlugins:function(u,f){u=u||[];var d,p,v;for(d=0,p=u.length;d<p;d++)v=u[d],typeof v=="function"&&(u[d]=v=v()),v.configure&&v.configure(this);return u},configureTransitions:function(u){var f,d,p,v,m,y=this.defaults.wildcard;for(d=0;d<u.length;d++)for(p=u[d],v=Array.isArray(p.from)?p.from:[p.from||y],m=p.to||y,f=0;f<v.length;f++)this.mapTransition({name:p.name,from:v[f],to:m})},transitionFor:function(u,f){var d=this.defaults.wildcard;return this.map[u][f]||this.map[d][f]},transitionsFor:function(u){var f=this.defaults.wildcard;return Object.keys(this.map[u]).concat(Object.keys(this.map[f]))},allStates:function(){return this.states},allTransitions:function(){return this.transitions}}),n.exports=l},function(n,r,i){var s=i(0),a=i(6),l=i(1),u=[null,[]];function f(d,p){this.context=d,this.config=p,this.state=p.init.from,this.observers=[d]}s(f.prototype,{init:function(d){if(s(this.context,this.config.data.apply(this.context,d)),l.hook(this,"init"),this.config.init.active)return this.fire(this.config.init.name,[])},is:function(d){return Array.isArray(d)?d.indexOf(this.state)>=0:this.state===d},isPending:function(){return this.pending},can:function(d){return!this.isPending()&&!!this.seek(d)},cannot:function(d){return!this.can(d)},allStates:function(){return this.config.allStates()},allTransitions:function(){return this.config.allTransitions()},transitions:function(){return this.config.transitionsFor(this.state)},seek:function(d,p){var v=this.config.defaults.wildcard,m=this.config.transitionFor(this.state,d),y=m&&m.to;return typeof y=="function"?y.apply(this.context,p):y===v?this.state:y},fire:function(d,p){return this.transit(d,this.state,this.seek(d,p),p)},transit:function(d,p,v,m){var y=this.config.lifecycle,E=this.config.options.observeUnchangedState||p!==v;return v?this.isPending()?this.context.onPendingTransition(d,p,v):(this.config.addState(v),this.beginTransit(),m.unshift({transition:d,from:p,to:v,fsm:this.context}),this.observeEvents([this.observersForEvent(y.onBefore.transition),this.observersForEvent(y.onBefore[d]),E?this.observersForEvent(y.onLeave.state):u,E?this.observersForEvent(y.onLeave[p]):u,this.observersForEvent(y.on.transition),E?["doTransit",[this]]:u,E?this.observersForEvent(y.onEnter.state):u,E?this.observersForEvent(y.onEnter[v]):u,E?this.observersForEvent(y.on[v]):u,this.observersForEvent(y.onAfter.transition),this.observersForEvent(y.onAfter[d]),this.observersForEvent(y.on[d])],m)):this.context.onInvalidTransition(d,p,v)},beginTransit:function(){this.pending=!0},endTransit:function(d){return this.pending=!1,d},failTransit:function(d){throw this.pending=!1,d},doTransit:function(d){this.state=d.to},observe:function(d){if(d.length===2){var p={};p[d[0]]=d[1],this.observers.push(p)}else this.observers.push(d[0])},observersForEvent:function(d){for(var p=0,v=this.observers.length,m,y=[];p<v;p++)m=this.observers[p],m[d]&&y.push(m);return[d,y,!0]},observeEvents:function(d,p,v,m){if(d.length===0)return this.endTransit(m===void 0?!0:m);var y=d[0][0],E=d[0][1],b=d[0][2];if(p[0].event=y,y&&b&&y!==v&&l.hook(this,"lifecycle",p),E.length===0)return d.shift(),this.observeEvents(d,p,y,m);var w=E.shift(),T=w[y].apply(w,p);return T&&typeof T.then=="function"?T.then(this.observeEvents.bind(this,d,p,y)).catch(this.failTransit.bind(this)):T===!1?this.endTransit(!1):this.observeEvents(d,p,y,T)},onInvalidTransition:function(d,p,v){throw new a("transition is invalid in current state",d,p,v,this.state)},onPendingTransition:function(d,p,v){throw new a("transition is invalid while previous transition is still in progress",d,p,v,this.state)}}),n.exports=f},function(n,r,i){var s=i(0),a=i(2),l=i(1),u=i(3),f=i(4),d={is:function(b){return this._fsm.is(b)},can:function(b){return this._fsm.can(b)},cannot:function(b){return this._fsm.cannot(b)},observe:function(){return this._fsm.observe(arguments)},transitions:function(){return this._fsm.transitions()},allTransitions:function(){return this._fsm.allTransitions()},allStates:function(){return this._fsm.allStates()},onInvalidTransition:function(b,w,T){return this._fsm.onInvalidTransition(b,w,T)},onPendingTransition:function(b,w,T){return this._fsm.onPendingTransition(b,w,T)}},p={state:{configurable:!1,enumerable:!0,get:function(){return this._fsm.state},set:function(b){throw Error("use transitions to change state")}}};function v(b){return y(this||{},b)}function m(){var b,w;typeof arguments[0]=="function"?(b=arguments[0],w=arguments[1]||{}):(b=function(){this._fsm.apply(this,arguments)},w=arguments[0]||{});var T=new u(w,v);return E(b.prototype,T),b.prototype._fsm.config=T,b}function y(b,w){var T=new u(w,v);return E(b,T),b._fsm(),b}function E(b,w){if(typeof b!="object"||Array.isArray(b))throw Error("StateMachine can only be applied to objects");l.build(b,w),Object.defineProperties(b,p),s(b,d),s(b,w.methods),w.allTransitions().forEach(function(T){b[a(T)]=function(){return this._fsm.fire(T,[].slice.call(arguments))}}),b._fsm=function(){this._fsm=new f(this,w),this._fsm.init(arguments)}}v.version="3.0.1",v.factory=m,v.apply=y,v.defaults={wildcard:"*",init:{name:"init",from:"none"}},n.exports=v},function(n,r,i){n.exports=function(s,a,l,u,f){this.message=s,this.transition=a,this.from=l,this.to=u,this.current=f}}])})})(hM);var hie=hM.exports,qw={exports:{}},cR=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(cR){var fR=new Uint8Array(16);qw.exports=function(){return cR(fR),fR}}else{var dR=new Array(16);qw.exports=function(){for(var t=0,n;t<16;t++)t&3||(n=Math.random()*4294967296),dR[t]=n>>>((t&3)<<3)&255;return dR}}var pM=qw.exports,vM=[];for(var lh=0;lh<256;++lh)vM[lh]=(lh+256).toString(16).substr(1);function pie(e,t){var n=t||0,r=vM;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")}var gM=pie,vie=pM,gie=gM,hR,Hy,Vy=0,qy=0;function mie(e,t,n){var r=t&&n||0,i=t||[];e=e||{};var s=e.node||hR,a=e.clockseq!==void 0?e.clockseq:Hy;if(s==null||a==null){var l=vie();s==null&&(s=hR=[l[0]|1,l[1],l[2],l[3],l[4],l[5]]),a==null&&(a=Hy=(l[6]<<8|l[7])&16383)}var u=e.msecs!==void 0?e.msecs:new Date().getTime(),f=e.nsecs!==void 0?e.nsecs:qy+1,d=u-Vy+(f-qy)/1e4;if(d<0&&e.clockseq===void 0&&(a=a+1&16383),(d<0||u>Vy)&&e.nsecs===void 0&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Vy=u,qy=f,Hy=a,u+=122192928e5;var p=((u&268435455)*1e4+f)%4294967296;i[r++]=p>>>24&255,i[r++]=p>>>16&255,i[r++]=p>>>8&255,i[r++]=p&255;var v=u/4294967296*1e4&268435455;i[r++]=v>>>8&255,i[r++]=v&255,i[r++]=v>>>24&15|16,i[r++]=v>>>16&255,i[r++]=a>>>8|128,i[r++]=a&255;for(var m=0;m<6;++m)i[r+m]=s[m];return t||gie(i)}var yie=mie,_ie=pM,wie=gM;function Sie(e,t,n){var r=t&&n||0;typeof e=="string"&&(t=e==="binary"?new Array(16):null,e=null),e=e||{};var i=e.random||(e.rng||_ie)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t)for(var s=0;s<16;++s)t[r+s]=i[s];return t||wie(i)}var bie=Sie,Tie=yie,mM=bie,pb=mM;pb.v1=Tie;pb.v4=mM;var yM=pb,pR=wt,vR=$r,Eie=rb,gR=Ne,_M=At,kie=bs,Iie=_M("species"),Gy=RegExp.prototype,$v=function(e,t,n,r){var i=_M(e),s=!gR(function(){var f={};return f[i]=function(){return 7},""[e](f)!==7}),a=s&&!gR(function(){var f=!1,d=/a/;return e==="split"&&(d={},d.constructor={},d.constructor[Iie]=function(){return d},d.flags="",d[i]=/./[i]),d.exec=function(){return f=!0,null},d[i](""),!f});if(!s||!a||n){var l=/./[i],u=t(i,""[e],function(f,d,p,v,m){var y=d.exec;return y===Eie||y===Gy.exec?s&&!m?{done:!0,value:pR(l,d,p,v)}:{done:!0,value:pR(f,p,d,v)}:{done:!1}});vR(String.prototype,e,u[0]),vR(Gy,i,u[1])}r&&kie(Gy[i],"sham",!0)},Cie=NN.charAt,vb=function(e,t,n){return t+(n?Cie(e,t).length:1)},gb=We,Rie=Nn,xie=Math.floor,Ky=gb("".charAt),$ie=gb("".replace),Qy=gb("".slice),Pie=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Aie=/\$([$&'`]|\d{1,2})/g,Oie=function(e,t,n,r,i,s){var a=n+e.length,l=r.length,u=Aie;return i!==void 0&&(i=Rie(i),u=Pie),$ie(s,u,function(f,d){var p;switch(Ky(d,0)){case"$":return"$";case"&":return e;case"`":return Qy(t,0,n);case"'":return Qy(t,a);case"<":p=i[Qy(d,1,-1)];break;default:var v=+d;if(v===0)return f;if(v>l){var m=xie(v/10);return m===0?f:m<=l?r[m-1]===void 0?Ky(d,1):r[m-1]+Ky(d,1):f}p=r[v-1]}return p===void 0?"":p})},mR=wt,Nie=en,Mie=St,Lie=_s,Die=rb,Fie=TypeError,Pv=function(e,t){var n=e.exec;if(Mie(n)){var r=mR(n,e,t);return r!==null&&Nie(r),r}if(Lie(e)==="RegExp")return mR(Die,e,t);throw new Fie("RegExp#exec called on incompatible receiver")},jie=ho,yR=wt,Av=We,Uie=$v,Bie=Ne,Wie=en,zie=St,Hie=Ct,Vie=Ui,qie=pa,Aa=Gn,Gie=ws,Kie=vb,Qie=uo,Jie=Oie,Yie=lb,Xie=Pv,Zie=At,Gw=Zie("replace"),ese=Math.max,tse=Math.min,nse=Av([].concat),Jy=Av([].push),ch=Av("".indexOf),_R=Av("".slice),rse=function(e){return e===void 0?e:String(e)},ise=function(){return"a".replace(/./,"$0")==="$0"}(),wR=function(){return/./[Gw]?/./[Gw]("a","$0")==="":!1}(),sse=!Bie(function(){var e=/./;return e.exec=function(){var t=[];return t.groups={a:"7"},t},"".replace(e,"$<a>")!=="7"});Uie("replace",function(e,t,n){var r=wR?"$":"$0";return[function(s,a){var l=Gie(this),u=Hie(s)?Qie(s,Gw):void 0;return u?yR(u,s,l,a):yR(t,Aa(l),s,a)},function(i,s){var a=Wie(this),l=Aa(i);if(typeof s=="string"&&ch(s,r)===-1&&ch(s,"$<")===-1){var u=n(t,a,l,s);if(u.done)return u.value}var f=zie(s);f||(s=Aa(s));var d=Aa(Yie(a)),p=ch(d,"g")!==-1,v;p&&(v=ch(d,"u")!==-1,a.lastIndex=0);for(var m=[],y;y=Xie(a,l),!(y===null||(Jy(m,y),!p));){var E=Aa(y[0]);E===""&&(a.lastIndex=Kie(l,qie(a.lastIndex),v))}for(var b="",w=0,T=0;T<m.length;T++){y=m[T];for(var x=Aa(y[0]),M=ese(tse(Vie(y.index),l.length),0),W=[],z,K=1;K<y.length;K++)Jy(W,rse(y[K]));var A=y.groups;if(f){var ne=nse([x],W,M,l);A!==void 0&&Jy(ne,A),z=Aa(jie(s,void 0,ne))}else z=Jie(x,l,M,W,A,s);M>=w&&(b+=_R(l,w,M)+z,w=M+x.length)}return b+_R(l,w)}]},!sse||!ise||wR);var Kw={exports:{}},wM=typeof ArrayBuffer<"u"&&typeof DataView<"u",ase=wM,SM=Pt,kr=Ge,bM=St,mb=Ct,Uc=Jt,TM=va,ose=oo,use=bs,lse=$r,cse=ga,fse=Ss,Ov=bf,Tf=Ju,dse=At,hse=tf,EM=ji,kM=EM.enforce,pse=EM.get,kp=kr.Int8Array,Qw=kp&&kp.prototype,SR=kr.Uint8ClampedArray,bR=SR&&SR.prototype,Ha=kp&&Ov(kp),hi=Qw&&Ov(Qw),vse=Object.prototype,yb=kr.TypeError,TR=dse("toStringTag"),Jw=hse("TYPED_ARRAY_TAG"),Ip="TypedArrayConstructor",ua=ase&&!!Tf&&TM(kr.opera)!=="Opera",IM=!1,rr,qs,_u,Xu={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},CM={BigInt64Array:8,BigUint64Array:8},RM=function(e){var t=Ov(e);if(mb(t)){var n=pse(t);return n&&Uc(n,Ip)?n[Ip]:RM(t)}},xM=function(e){if(!mb(e))return!1;var t=TM(e);return Uc(Xu,t)||Uc(CM,t)},gse=function(e){if(xM(e))return e;throw new yb("Target is not a typed array")},mse=function(e){if(bM(e)&&(!Tf||fse(Ha,e)))return e;throw new yb(ose(e)+" is not a typed array constructor")},yse=function(e,t,n,r){if(SM){if(n)for(var i in Xu){var s=kr[i];if(s&&Uc(s.prototype,e))try{delete s.prototype[e]}catch{try{s.prototype[e]=t}catch{}}}(!hi[e]||n)&&lse(hi,e,n?t:ua&&Qw[e]||t,r)}};for(rr in Xu)qs=kr[rr],_u=qs&&qs.prototype,_u?kM(_u)[Ip]=qs:ua=!1;for(rr in CM)qs=kr[rr],_u=qs&&qs.prototype,_u&&(kM(_u)[Ip]=qs);if((!ua||!bM(Ha)||Ha===Function.prototype)&&(Ha=function(){throw new yb("Incorrect invocation")},ua))for(rr in Xu)kr[rr]&&Tf(kr[rr],Ha);if((!ua||!hi||hi===vse)&&(hi=Ha.prototype,ua))for(rr in Xu)kr[rr]&&Tf(kr[rr].prototype,hi);ua&&Ov(bR)!==hi&&Tf(bR,hi);if(SM&&!Uc(hi,TR)){IM=!0,cse(hi,TR,{configurable:!0,get:function(){return mb(this)?this[Jw]:void 0}});for(rr in Xu)kr[rr]&&use(kr[rr],Jw,rr)}var bt={NATIVE_ARRAY_BUFFER_VIEWS:ua,TYPED_ARRAY_TAG:IM&&Jw,aTypedArray:gse,aTypedArrayConstructor:mse,exportTypedArrayMethod:yse,getTypedArrayConstructor:RM,isTypedArray:xM,TypedArray:Ha,TypedArrayPrototype:hi},$M=Ge,Yy=Ne,_se=bv,wse=bt.NATIVE_ARRAY_BUFFER_VIEWS,Sse=$M.ArrayBuffer,Oa=$M.Int8Array,bse=!wse||!Yy(function(){Oa(1)})||!Yy(function(){new Oa(-1)})||!_se(function(e){new Oa,new Oa(null),new Oa(1.5),new Oa(e)},!0)||Yy(function(){return new Oa(new Sse(2),1,void 0).length!==1}),Tse=Ui,Ese=pa,kse=RangeError,PM=function(e){if(e===void 0)return 0;var t=Tse(e),n=Ese(t);if(t!==n)throw new kse("Wrong length or index");return n},Ise=Math.sign||function(t){var n=+t;return n===0||n!==n?n:n<0?-1:1},Cse=2220446049250313e-31,ER=1/Cse,Rse=function(e){return e+ER-ER},xse=Ise,$se=Rse,Pse=Math.abs,Ase=2220446049250313e-31,Ose=function(e,t,n,r){var i=+e,s=Pse(i),a=xse(i);if(s<r)return a*$se(s/r/t)*r*t;var l=(1+t/Ase)*s,u=l-(l-s);return u>n||u!==u?a*(1/0):a*u},Nse=Ose,Mse=11920928955078125e-23,Lse=34028234663852886e22,Dse=11754943508222875e-54,Fse=Math.fround||function(t){return Nse(t,Mse,Lse,Dse)},jse=Array,Use=Math.abs,ts=Math.pow,Bse=Math.floor,Wse=Math.log,zse=Math.LN2,Hse=function(e,t,n){var r=jse(n),i=n*8-t-1,s=(1<<i)-1,a=s>>1,l=t===23?ts(2,-24)-ts(2,-77):0,u=e<0||e===0&&1/e<0?1:0,f=0,d,p,v;for(e=Use(e),e!==e||e===1/0?(p=e!==e?1:0,d=s):(d=Bse(Wse(e)/zse),v=ts(2,-d),e*v<1&&(d--,v*=2),d+a>=1?e+=l/v:e+=l*ts(2,1-a),e*v>=2&&(d++,v/=2),d+a>=s?(p=0,d=s):d+a>=1?(p=(e*v-1)*ts(2,t),d+=a):(p=e*ts(2,a-1)*ts(2,t),d=0));t>=8;)r[f++]=p&255,p/=256,t-=8;for(d=d<<t|p,i+=t;i>0;)r[f++]=d&255,d/=256,i-=8;return r[f-1]|=u*128,r},Vse=function(e,t){var n=e.length,r=n*8-t-1,i=(1<<r)-1,s=i>>1,a=r-7,l=n-1,u=e[l--],f=u&127,d;for(u>>=7;a>0;)f=f*256+e[l--],a-=8;for(d=f&(1<<-a)-1,f>>=-a,a+=t;a>0;)d=d*256+e[l--],a-=8;if(f===0)f=1-s;else{if(f===i)return d?NaN:u?-1/0:1/0;d+=ts(2,t),f-=s}return(u?-1:1)*d*ts(2,f-t)},qse={pack:Hse,unpack:Vse},Gse=Nn,kR=Qu,Kse=Mn,AM=function(t){for(var n=Gse(this),r=Kse(n),i=arguments.length,s=kR(i>1?arguments[1]:void 0,r),a=i>2?arguments[2]:void 0,l=a===void 0?r:kR(a,r);l>s;)n[s++]=t;return n},Nv=Ge,_b=We,Xy=Pt,Qse=wM,OM=nf,Jse=bs,Yse=ga,IR=cM,Zy=Ne,fh=_f,Xse=Ui,Zse=pa,Cp=PM,eae=Fse,NM=qse,tae=bf,CR=Ju,nae=AM,rae=Ts,iae=Ev,sae=k0,MM=ma,wb=ji,aae=OM.PROPER,RR=OM.CONFIGURABLE,wu="ArrayBuffer",Mv="DataView",Su="prototype",oae="Wrong length",LM="Wrong index",xR=wb.getterFor(wu),yc=wb.getterFor(Mv),$R=wb.set,ai=Nv[wu],yr=ai,Bo=yr&&yr[Su],Ai=Nv[Mv],Na=Ai&&Ai[Su],PR=Object.prototype,uae=Nv.Array,Rp=Nv.RangeError,lae=_b(nae),cae=_b([].reverse),DM=NM.pack,AR=NM.unpack,OR=function(e){return[e&255]},NR=function(e){return[e&255,e>>8&255]},MR=function(e){return[e&255,e>>8&255,e>>16&255,e>>24&255]},LR=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},fae=function(e){return DM(eae(e),23,4)},dae=function(e){return DM(e,52,8)},dh=function(e,t,n){Yse(e[Su],t,{configurable:!0,get:function(){return n(this)[t]}})},Ds=function(e,t,n,r){var i=yc(e),s=Cp(n),a=!!r;if(s+t>i.byteLength)throw new Rp(LM);var l=i.bytes,u=s+i.byteOffset,f=rae(l,u,u+t);return a?f:cae(f)},Fs=function(e,t,n,r,i,s){var a=yc(e),l=Cp(n),u=r(+i),f=!!s;if(l+t>a.byteLength)throw new Rp(LM);for(var d=a.bytes,p=l+a.byteOffset,v=0;v<t;v++)d[p+v]=u[f?v:t-v-1]};if(!Qse)yr=function(t){fh(this,Bo);var n=Cp(t);$R(this,{type:wu,bytes:lae(uae(n),0),byteLength:n}),Xy||(this.byteLength=n,this.detached=!1)},Bo=yr[Su],Ai=function(t,n,r){fh(this,Na),fh(t,Bo);var i=xR(t),s=i.byteLength,a=Xse(n);if(a<0||a>s)throw new Rp("Wrong offset");if(r=r===void 0?s-a:Zse(r),a+r>s)throw new Rp(oae);$R(this,{type:Mv,buffer:t,byteLength:r,byteOffset:a,bytes:i.bytes}),Xy||(this.buffer=t,this.byteLength=r,this.byteOffset=a)},Na=Ai[Su],Xy&&(dh(yr,"byteLength",xR),dh(Ai,"buffer",yc),dh(Ai,"byteLength",yc),dh(Ai,"byteOffset",yc)),IR(Na,{getInt8:function(t){return Ds(this,1,t)[0]<<24>>24},getUint8:function(t){return Ds(this,1,t)[0]},getInt16:function(t){var n=Ds(this,2,t,arguments.length>1?arguments[1]:!1);return(n[1]<<8|n[0])<<16>>16},getUint16:function(t){var n=Ds(this,2,t,arguments.length>1?arguments[1]:!1);return n[1]<<8|n[0]},getInt32:function(t){return LR(Ds(this,4,t,arguments.length>1?arguments[1]:!1))},getUint32:function(t){return LR(Ds(this,4,t,arguments.length>1?arguments[1]:!1))>>>0},getFloat32:function(t){return AR(Ds(this,4,t,arguments.length>1?arguments[1]:!1),23)},getFloat64:function(t){return AR(Ds(this,8,t,arguments.length>1?arguments[1]:!1),52)},setInt8:function(t,n){Fs(this,1,t,OR,n)},setUint8:function(t,n){Fs(this,1,t,OR,n)},setInt16:function(t,n){Fs(this,2,t,NR,n,arguments.length>2?arguments[2]:!1)},setUint16:function(t,n){Fs(this,2,t,NR,n,arguments.length>2?arguments[2]:!1)},setInt32:function(t,n){Fs(this,4,t,MR,n,arguments.length>2?arguments[2]:!1)},setUint32:function(t,n){Fs(this,4,t,MR,n,arguments.length>2?arguments[2]:!1)},setFloat32:function(t,n){Fs(this,4,t,fae,n,arguments.length>2?arguments[2]:!1)},setFloat64:function(t,n){Fs(this,8,t,dae,n,arguments.length>2?arguments[2]:!1)}});else{var DR=aae&&ai.name!==wu;!Zy(function(){ai(1)})||!Zy(function(){new ai(-1)})||Zy(function(){return new ai,new ai(1.5),new ai(NaN),ai.length!==1||DR&&!RR})?(yr=function(t){return fh(this,Bo),iae(new ai(Cp(t)),this,yr)},yr[Su]=Bo,Bo.constructor=yr,sae(yr,ai)):DR&&RR&&Jse(ai,"name",wu),CR&&tae(Na)!==PR&&CR(Na,PR);var hh=new Ai(new yr(2)),FR=_b(Na.setInt8);hh.setInt8(0,2147483648),hh.setInt8(1,2147483649),(hh.getInt8(0)||!hh.getInt8(1))&&IR(Na,{setInt8:function(t,n){FR(this,t,n<<24>>24)},setUint8:function(t,n){FR(this,t,n<<24>>24)}},{unsafe:!0})}MM(yr,wu);MM(Ai,Mv);var hae={ArrayBuffer:yr,DataView:Ai},pae=Ui,vae=RangeError,gae=function(e){var t=pae(e);if(t<0)throw new vae("The argument can't be less than 0");return t},mae=gae,yae=RangeError,FM=function(e,t){var n=mae(e);if(n%t)throw new yae("Wrong offset");return n},_ae=Math.round,wae=function(e){var t=_ae(e);return t<0?0:t>255?255:t&255},Sae=va,bae=function(e){var t=Sae(e);return t==="BigInt64Array"||t==="BigUint64Array"},Tae=w0,Eae=TypeError,jM=function(e){var t=Tae(e,"number");if(typeof t=="number")throw new Eae("Can't convert number to bigint");return BigInt(t)},kae=fo,Iae=wt,Cae=D0,Rae=Nn,xae=Mn,$ae=Q0,Pae=wv,Aae=K0,Oae=bae,Nae=bt.aTypedArrayConstructor,Mae=jM,Lae=function(t){var n=Cae(this),r=Rae(t),i=arguments.length,s=i>1?arguments[1]:void 0,a=s!==void 0,l=Pae(r),u,f,d,p,v,m,y,E;if(l&&!Aae(l))for(y=$ae(r,l),E=y.next,r=[];!(m=Iae(E,y)).done;)r.push(m.value);for(a&&i>2&&(s=kae(s,arguments[2])),f=xae(r),d=new(Nae(n))(f),p=Oae(d),u=0;f>u;u++)v=a?s(r[u],u):r[u],d[u]=p?Mae(v):+v;return d},Dae=Mn,UM=function(e,t,n){for(var r=0,i=arguments.length>2?n:Dae(t),s=new e(i);i>r;)s[r]=t[r++];return s},jR=Ze,BM=Ge,UR=wt,Fae=Pt,jae=bse,Ef=bt,WM=hae,BR=_f,Uae=zu,zl=bs,Bae=HN,Wae=pa,WR=PM,e_=FM,zae=wae,zM=sv,Hl=Jt,Hae=va,Yw=Ct,Vae=Gu,qae=co,Gae=Ss,ph=Ju,Kae=lo.f,zR=Lae,Qae=Zr.forEach,Jae=B0,Yae=ga,HM=qn,VM=da,HR=UM,Sb=ji,Xae=Ev,Xw=Sb.get,Zae=Sb.set,eoe=Sb.enforce,qM=HM.f,toe=VM.f,t_=BM.RangeError,GM=WM.ArrayBuffer,noe=GM.prototype,roe=WM.DataView,vh=Ef.NATIVE_ARRAY_BUFFER_VIEWS,VR=Ef.TYPED_ARRAY_TAG,qR=Ef.TypedArray,Vl=Ef.TypedArrayPrototype,Zw=Ef.isTypedArray,gh="BYTES_PER_ELEMENT",n_="Wrong length",mh=function(e,t){Yae(e,t,{configurable:!0,get:function(){return Xw(this)[t]}})},GR=function(e){var t;return Gae(noe,e)||(t=Hae(e))==="ArrayBuffer"||t==="SharedArrayBuffer"},KM=function(e,t){return Zw(e)&&!Vae(t)&&t in e&&Bae(+t)&&t>=0},KR=function(t,n){return n=zM(n),KM(t,n)?Uae(2,t[n]):toe(t,n)},QR=function(t,n,r){return n=zM(n),KM(t,n)&&Yw(r)&&Hl(r,"value")&&!Hl(r,"get")&&!Hl(r,"set")&&!r.configurable&&(!Hl(r,"writable")||r.writable)&&(!Hl(r,"enumerable")||r.enumerable)?(t[n]=r.value,t):qM(t,n,r)};Fae?(vh||(VM.f=KR,HM.f=QR,mh(Vl,"buffer"),mh(Vl,"byteOffset"),mh(Vl,"byteLength"),mh(Vl,"length")),jR({target:"Object",stat:!0,forced:!vh},{getOwnPropertyDescriptor:KR,defineProperty:QR}),Kw.exports=function(e,t,n){var r=e.match(/\d+/)[0]/8,i=e+(n?"Clamped":"")+"Array",s="get"+e,a="set"+e,l=BM[i],u=l,f=u&&u.prototype,d={},p=function(E,b){var w=Xw(E);return w.view[s](b*r+w.byteOffset,!0)},v=function(E,b,w){var T=Xw(E);T.view[a](b*r+T.byteOffset,n?zae(w):w,!0)},m=function(E,b){qM(E,b,{get:function(){return p(this,b)},set:function(w){return v(this,b,w)},enumerable:!0})};vh?jae&&(u=t(function(E,b,w,T){return BR(E,f),Xae(function(){return Yw(b)?GR(b)?T!==void 0?new l(b,e_(w,r),T):w!==void 0?new l(b,e_(w,r)):new l(b):Zw(b)?HR(u,b):UR(zR,u,b):new l(WR(b))}(),E,u)}),ph&&ph(u,qR),Qae(Kae(l),function(E){E in u||zl(u,E,l[E])}),u.prototype=f):(u=t(function(E,b,w,T){BR(E,f);var x=0,M=0,W,z,K;if(!Yw(b))K=WR(b),z=K*r,W=new GM(z);else if(GR(b)){W=b,M=e_(w,r);var A=b.byteLength;if(T===void 0){if(A%r)throw new t_(n_);if(z=A-M,z<0)throw new t_(n_)}else if(z=Wae(T)*r,z+M>A)throw new t_(n_);K=z/r}else return Zw(b)?HR(u,b):UR(zR,u,b);for(Zae(E,{buffer:W,byteOffset:M,byteLength:z,length:K,view:new roe(W)});x<K;)m(E,x++)}),ph&&ph(u,qR),f=u.prototype=qae(Vl)),f.constructor!==u&&zl(f,"constructor",u),eoe(f).TypedArrayConstructor=u,VR&&zl(f,VR,i);var y=u!==l;d[i]=u,jR({global:!0,constructor:!0,forced:y,sham:!vh},d),gh in u||zl(u,gh,r),gh in f||zl(f,gh,r),Jae(i)}):Kw.exports=function(){};var ioe=Kw.exports,soe=ioe;soe("Uint8",function(e){return function(n,r,i){return e(this,n,r,i)}});var QM=bt,aoe=Mn,ooe=Ui,uoe=QM.aTypedArray,loe=QM.exportTypedArrayMethod;loe("at",function(t){var n=uoe(this),r=aoe(n),i=ooe(t),s=i>=0?i:r+i;return s<0||s>=r?void 0:n[s]});var JR=oo,coe=TypeError,bb=function(e,t){if(!delete e[t])throw new coe("Cannot delete property "+JR(t)+" of "+JR(e))},foe=Nn,r_=Qu,doe=Mn,hoe=bb,poe=Math.min,voe=[].copyWithin||function(t,n){var r=foe(this),i=doe(r),s=r_(t,i),a=r_(n,i),l=arguments.length>2?arguments[2]:void 0,u=poe((l===void 0?i:r_(l,i))-a,i-s),f=1;for(a<s&&s<a+u&&(f=-1,a+=u-1,s+=u-1);u-- >0;)a in r?r[s]=r[a]:hoe(r,s),s+=f,a+=f;return r},goe=We,JM=bt,moe=voe,yoe=goe(moe),_oe=JM.aTypedArray,woe=JM.exportTypedArrayMethod;woe("copyWithin",function(t,n){return yoe(_oe(this),t,n,arguments.length>2?arguments[2]:void 0)});var YM=bt,Soe=Zr.every,boe=YM.aTypedArray,Toe=YM.exportTypedArrayMethod;Toe("every",function(t){return Soe(boe(this),t,arguments.length>1?arguments[1]:void 0)});var XM=bt,Eoe=AM,koe=jM,Ioe=va,Coe=wt,Roe=We,xoe=Ne,$oe=XM.aTypedArray,Poe=XM.exportTypedArrayMethod,Aoe=Roe("".slice),Ooe=xoe(function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),e!==1});Poe("fill",function(t){var n=arguments.length;$oe(this);var r=Aoe(Ioe(this),0,3)==="Big"?koe(t):+t;return Coe(Eoe,this,r,n>1?arguments[1]:void 0,n>2?arguments[2]:void 0)},Ooe);var Noe=UM,Moe=bt.getTypedArrayConstructor,Loe=function(e,t){return Noe(Moe(e),t)},ZM=bt,Doe=Zr.filter,Foe=Loe,joe=ZM.aTypedArray,Uoe=ZM.exportTypedArrayMethod;Uoe("filter",function(t){var n=Doe(joe(this),t,arguments.length>1?arguments[1]:void 0);return Foe(this,n)});var eL=bt,Boe=Zr.find,Woe=eL.aTypedArray,zoe=eL.exportTypedArrayMethod;zoe("find",function(t){return Boe(Woe(this),t,arguments.length>1?arguments[1]:void 0)});var tL=bt,Hoe=Zr.findIndex,Voe=tL.aTypedArray,qoe=tL.exportTypedArrayMethod;qoe("findIndex",function(t){return Hoe(Voe(this),t,arguments.length>1?arguments[1]:void 0)});var nL=bt,Goe=Zr.forEach,Koe=nL.aTypedArray,Qoe=nL.exportTypedArrayMethod;Qoe("forEach",function(t){Goe(Koe(this),t,arguments.length>1?arguments[1]:void 0)});var rL=bt,Joe=uv.includes,Yoe=rL.aTypedArray,Xoe=rL.exportTypedArrayMethod;Xoe("includes",function(t){return Joe(Yoe(this),t,arguments.length>1?arguments[1]:void 0)});var iL=bt,Zoe=uv.indexOf,eue=iL.aTypedArray,tue=iL.exportTypedArrayMethod;tue("indexOf",function(t){return Zoe(eue(this),t,arguments.length>1?arguments[1]:void 0)});var nue=Ge,rue=Ne,Tb=We,sL=bt,Eb=xN,iue=At,kb=iue("iterator"),YR=nue.Uint8Array,sue=Tb(Eb.values),aue=Tb(Eb.keys),oue=Tb(Eb.entries),Ib=sL.aTypedArray,Lv=sL.exportTypedArrayMethod,qo=YR&&YR.prototype,Dv=!rue(function(){qo[kb].call([1])}),aL=!!qo&&qo.values&&qo[kb]===qo.values&&qo.values.name==="values",oL=function(){return sue(Ib(this))};Lv("entries",function(){return oue(Ib(this))},Dv);Lv("keys",function(){return aue(Ib(this))},Dv);Lv("values",oL,Dv||!aL,{name:"values"});Lv(kb,oL,Dv||!aL,{name:"values"});var uL=bt,uue=We,lue=uL.aTypedArray,cue=uL.exportTypedArrayMethod,fue=uue([].join);cue("join",function(t){return fue(lue(this),t)});var due=ho,hue=xr,pue=Ui,vue=Mn,gue=gv,mue=Math.min,eS=[].lastIndexOf,lL=!!eS&&1/[1].lastIndexOf(1,-0)<0,yue=gue("lastIndexOf"),_ue=lL||!yue,wue=_ue?function(t){if(lL)return due(eS,this,arguments)||0;var n=hue(this),r=vue(n);if(r===0)return-1;var i=r-1;for(arguments.length>1&&(i=mue(i,pue(arguments[1]))),i<0&&(i=r+i);i>=0;i--)if(i in n&&n[i]===t)return i||0;return-1}:eS,cL=bt,Sue=ho,bue=wue,Tue=cL.aTypedArray,Eue=cL.exportTypedArrayMethod;Eue("lastIndexOf",function(t){var n=arguments.length;return Sue(bue,Tue(this),n>1?[t,arguments[1]]:[t])});var Cb=bt,kue=Zr.map,Iue=Cb.aTypedArray,Cue=Cb.getTypedArrayConstructor,Rue=Cb.exportTypedArrayMethod;Rue("map",function(t){return kue(Iue(this),t,arguments.length>1?arguments[1]:void 0,function(n,r){return new(Cue(n))(r)})});var xue=Xr,$ue=Nn,Pue=ef,Aue=Mn,XR=TypeError,ZR="Reduce of empty array with no initial value",ex=function(e){return function(t,n,r,i){var s=$ue(t),a=Pue(s),l=Aue(s);if(xue(n),l===0&&r<2)throw new XR(ZR);var u=e?l-1:0,f=e?-1:1;if(r<2)for(;;){if(u in a){i=a[u],u+=f;break}if(u+=f,e?u<0:l<=u)throw new XR(ZR)}for(;e?u>=0:l>u;u+=f)u in a&&(i=n(i,a[u],u,s));return i}},fL={left:ex(!1),right:ex(!0)},dL=bt,Oue=fL.left,Nue=dL.aTypedArray,Mue=dL.exportTypedArrayMethod;Mue("reduce",function(t){var n=arguments.length;return Oue(Nue(this),t,n,n>1?arguments[1]:void 0)});var hL=bt,Lue=fL.right,Due=hL.aTypedArray,Fue=hL.exportTypedArrayMethod;Fue("reduceRight",function(t){var n=arguments.length;return Lue(Due(this),t,n,n>1?arguments[1]:void 0)});var pL=bt,jue=pL.aTypedArray,Uue=pL.exportTypedArrayMethod,Bue=Math.floor;Uue("reverse",function(){for(var t=this,n=jue(t).length,r=Bue(n/2),i=0,s;i<r;)s=t[i],t[i++]=t[--n],t[n]=s;return t});var vL=Ge,gL=wt,Rb=bt,Wue=Mn,zue=FM,Hue=Nn,mL=Ne,Vue=vL.RangeError,tS=vL.Int8Array,tx=tS&&tS.prototype,yL=tx&&tx.set,que=Rb.aTypedArray,Gue=Rb.exportTypedArrayMethod,nS=!mL(function(){var e=new Uint8ClampedArray(2);return gL(yL,e,{length:1,0:3},1),e[1]!==3}),Kue=nS&&Rb.NATIVE_ARRAY_BUFFER_VIEWS&&mL(function(){var e=new tS(2);return e.set(1),e.set("2",1),e[0]!==0||e[1]!==2});Gue("set",function(t){que(this);var n=zue(arguments.length>1?arguments[1]:void 0,1),r=Hue(t);if(nS)return gL(yL,this,r,n);var i=this.length,s=Wue(r),a=0;if(s+n>i)throw new Vue("Wrong length");for(;a<s;)this[n+a]=r[a++]},!nS||Kue);var xb=bt,Que=Ne,Jue=Ts,Yue=xb.aTypedArray,Xue=xb.getTypedArrayConstructor,Zue=xb.exportTypedArrayMethod,ele=Que(function(){new Int8Array(1).slice()});Zue("slice",function(t,n){for(var r=Jue(Yue(this),t,n),i=Xue(this),s=0,a=r.length,l=new i(a);a>s;)l[s]=r[s++];return l},ele);var _L=bt,tle=Zr.some,nle=_L.aTypedArray,rle=_L.exportTypedArrayMethod;rle("some",function(t){return tle(nle(this),t,arguments.length>1?arguments[1]:void 0)});var nx=Ts,ile=Math.floor,rS=function(e,t){var n=e.length;if(n<8)for(var r=1,i,s;r<n;){for(s=r,i=e[r];s&&t(e[s-1],i)>0;)e[s]=e[--s];s!==r++&&(e[s]=i)}else for(var a=ile(n/2),l=rS(nx(e,0,a),t),u=rS(nx(e,a),t),f=l.length,d=u.length,p=0,v=0;p<f||v<d;)e[p+v]=p<f&&v<d?t(l[p],u[v])<=0?l[p++]:u[v++]:p<f?l[p++]:u[v++];return e},wL=rS,sle=ha,rx=sle.match(/firefox\/(\d+)/i),SL=!!rx&&+rx[1],ale=ha,bL=/MSIE|Trident/.test(ale),ole=ha,ix=ole.match(/AppleWebKit\/(\d+)\./),TL=!!ix&&+ix[1],ule=Ge,lle=CO,iS=Ne,cle=Xr,fle=wL,EL=bt,sx=SL,dle=bL,ax=Vu,ox=TL,hle=EL.aTypedArray,ple=EL.exportTypedArrayMethod,Bc=ule.Uint16Array,bu=Bc&&lle(Bc.prototype.sort),vle=!!bu&&!(iS(function(){bu(new Bc(2),null)})&&iS(function(){bu(new Bc(2),{})})),ux=!!bu&&!iS(function(){if(ax)return ax<74;if(sx)return sx<67;if(dle)return!0;if(ox)return ox<602;var e=new Bc(516),t=Array(516),n,r;for(n=0;n<516;n++)r=n%4,e[n]=515-n,t[n]=n-2*r+3;for(bu(e,function(i,s){return(i/4|0)-(s/4|0)}),n=0;n<516;n++)if(e[n]!==t[n])return!0}),gle=function(e){return function(t,n){return e!==void 0?+e(t,n)||0:n!==n?-1:t!==t?1:t===0&&n===0?1/t>0&&1/n<0?1:-1:t>n}};ple("sort",function(t){return t!==void 0&&cle(t),ux?bu(this,t):fle(hle(this),gle(t))},!ux||vle);var $b=bt,mle=pa,lx=Qu,yle=$b.aTypedArray,_le=$b.getTypedArrayConstructor,wle=$b.exportTypedArrayMethod;wle("subarray",function(t,n){var r=yle(this),i=r.length,s=lx(t,i),a=_le(r);return new a(r.buffer,r.byteOffset+s*r.BYTES_PER_ELEMENT,mle((n===void 0?i:lx(n,i))-s))});var Sle=Ge,ble=ho,kL=bt,sS=Ne,cx=Ts,xp=Sle.Int8Array,fx=kL.aTypedArray,Tle=kL.exportTypedArrayMethod,IL=[].toLocaleString,Ele=!!xp&&sS(function(){IL.call(new xp(1))}),kle=sS(function(){return[1,2].toLocaleString()!==new xp([1,2]).toLocaleString()})||!sS(function(){xp.prototype.toLocaleString.call([1,2])});Tle("toLocaleString",function(){return ble(IL,Ele?cx(fx(this)):fx(this),cx(arguments))},kle);var Ile=bt.exportTypedArrayMethod,Cle=Ne,Rle=Ge,xle=We,dx=Rle.Uint8Array,$le=dx&&dx.prototype||{},$p=[].toString,Ple=xle([].join);Cle(function(){$p.call({})})&&($p=function(){return Ple(this)});var Ale=$le.toString!==$p;Ile("toString",$p,Ale);var i_=wt,CL=We,Ole=$v,Nle=en,Mle=Ct,Lle=ws,Dle=k2,Fle=vb,jle=pa,hx=Gn,Ule=uo,px=Pv,Ble=FN,Wle=Ne,Wo=Ble.UNSUPPORTED_Y,zle=4294967295,Hle=Math.min,s_=CL([].push),a_=CL("".slice),Vle=!Wle(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return n.length!==2||n[0]!=="a"||n[1]!=="b"}),vx="abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length;Ole("split",function(e,t,n){var r="0".split(void 0,0).length?function(i,s){return i===void 0&&s===0?[]:i_(t,this,i,s)}:t;return[function(s,a){var l=Lle(this),u=Mle(s)?Ule(s,e):void 0;return u?i_(u,s,l,a):i_(r,hx(l),s,a)},function(i,s){var a=Nle(this),l=hx(i);if(!vx){var u=n(r,a,l,s,r!==t);if(u.done)return u.value}var f=Dle(a,RegExp),d=a.unicode,p=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(Wo?"g":"y"),v=new f(Wo?"^(?:"+a.source+")":a,p),m=s===void 0?zle:s>>>0;if(m===0)return[];if(l.length===0)return px(v,l)===null?[l]:[];for(var y=0,E=0,b=[];E<l.length;){v.lastIndex=Wo?0:E;var w=px(v,Wo?a_(l,E):l),T;if(w===null||(T=Hle(jle(v.lastIndex+(Wo?E:0)),l.length))===y)E=Fle(l,E,d);else{if(s_(b,a_(l,y,E)),b.length===m)return b;for(var x=1;x<=w.length-1;x++)if(s_(b,w[x]),b.length===m)return b;E=y=T}}return s_(b,a_(l,y)),b}]},vx||!Vle,Wo);var RL={exports:{}},xL={exports:{}};(function(e){function t(n){try{return Function.toString.call(n).indexOf("[native code]")!==-1}catch{return typeof n=="function"}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(xL);var qle=xL.exports,$L={exports:{}},PL={exports:{}};(function(e){function t(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e.exports=t=function(){return!!n},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(PL);var Gle=PL.exports;(function(e){var t=Gle,n=j0;function r(i,s,a){if(t())return Reflect.construct.apply(null,arguments);var l=[null];l.push.apply(l,s);var u=new(i.bind.apply(i,l));return a&&n(u,a.prototype),u}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})($L);var Kle=$L.exports;(function(e){var t=vo,n=j0,r=qle,i=Kle;function s(a){var l=typeof Map=="function"?new Map:void 0;return e.exports=s=function(f){if(f===null||!r(f))return f;if(typeof f!="function")throw new TypeError("Super expression must either be null or a function");if(l!==void 0){if(l.has(f))return l.get(f);l.set(f,d)}function d(){return i(f,arguments,t(this).constructor)}return d.prototype=Object.create(f.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),n(d,f)},e.exports.__esModule=!0,e.exports.default=e.exports,s(a)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports})(RL);var AL=RL.exports,Zu={};/*
@license
Copyright (c) 2016, Twilio, Inc.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted, provided that the above
copyright notice and this permission notice appear in all copies.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY
SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION
OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN
CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.

*/Object.defineProperty(Zu,"__esModule",{value:!0});var Qle=pf,Jle=vf,Yle=gf,Xle=mf,Zle=yf,ece=vo,tce=mv;function go(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var Pb=go(Qle),Ab=go(Jle),is=go(Yle),Ob=go(Xle),OL=go(Zle),Pp=go(ece),ss=go(tce),nce;function ra(){}ra.prototype=Object.create(null);function dt(){dt.init.call(this)}dt.EventEmitter=dt;dt.usingDomains=!1;dt.prototype.domain=void 0;dt.prototype._events=void 0;dt.prototype._maxListeners=void 0;dt.defaultMaxListeners=10;dt.init=function(){this.domain=null,dt.usingDomains&&nce.active,(!this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=new ra,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};dt.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this};function NL(e){return e._maxListeners===void 0?dt.defaultMaxListeners:e._maxListeners}dt.prototype.getMaxListeners=function(){return NL(this)};function rce(e,t,n){if(t)e.call(n);else for(var r=e.length,i=kf(e,r),s=0;s<r;++s)i[s].call(n)}function ice(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,s=kf(e,i),a=0;a<i;++a)s[a].call(n,r)}function sce(e,t,n,r,i){if(t)e.call(n,r,i);else for(var s=e.length,a=kf(e,s),l=0;l<s;++l)a[l].call(n,r,i)}function ace(e,t,n,r,i,s){if(t)e.call(n,r,i,s);else for(var a=e.length,l=kf(e,a),u=0;u<a;++u)l[u].call(n,r,i,s)}function oce(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,s=kf(e,i),a=0;a<i;++a)s[a].apply(n,r)}dt.prototype.emit=function(t){var n,r,i,s,a,l,u,f=t==="error";if(l=this._events,l)f=f&&l.error==null;else if(!f)return!1;if(u=this.domain,f){if(n=arguments[1],u)n||(n=new Error('Uncaught, unspecified "error" event')),n.domainEmitter=this,n.domain=u,n.domainThrown=!1,u.emit("error",n);else{if(n instanceof Error)throw n;var d=new Error('Uncaught, unspecified "error" event. ('+n+")");throw d.context=n,d}return!1}if(r=l[t],!r)return!1;var p=typeof r=="function";switch(i=arguments.length,i){case 1:rce(r,p,this);break;case 2:ice(r,p,this,arguments[1]);break;case 3:sce(r,p,this,arguments[1],arguments[2]);break;case 4:ace(r,p,this,arguments[1],arguments[2],arguments[3]);break;default:for(s=new Array(i-1),a=1;a<i;a++)s[a-1]=arguments[a];oce(r,p,this,s)}return!0};function ML(e,t,n,r){var i,s,a;if(typeof n!="function")throw new TypeError('"listener" argument must be a function');if(s=e._events,s?(s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),a=s[t]):(s=e._events=new ra,e._eventsCount=0),!a)a=s[t]=n,++e._eventsCount;else if(typeof a=="function"?a=s[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(i=NL(e),i&&i>0&&a.length>i)){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,uce(l)}return e}function uce(e){typeof console.warn=="function"?console.warn(e):console.log(e)}dt.prototype.addListener=function(t,n){return ML(this,t,n,!1)};dt.prototype.on=dt.prototype.addListener;dt.prototype.prependListener=function(t,n){return ML(this,t,n,!0)};function LL(e,t,n){var r=!1;function i(){e.removeListener(t,i),r||(r=!0,n.apply(e,arguments))}return i.listener=n,i}dt.prototype.once=function(t,n){if(typeof n!="function")throw new TypeError('"listener" argument must be a function');return this.on(t,LL(this,t,n)),this};dt.prototype.prependOnceListener=function(t,n){if(typeof n!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(t,LL(this,t,n)),this};dt.prototype.removeListener=function(t,n){var r,i,s,a,l;if(typeof n!="function")throw new TypeError('"listener" argument must be a function');if(i=this._events,!i)return this;if(r=i[t],!r)return this;if(r===n||r.listener&&r.listener===n)--this._eventsCount===0?this._events=new ra:(delete i[t],i.removeListener&&this.emit("removeListener",t,r.listener||n));else if(typeof r!="function"){for(s=-1,a=r.length;a-- >0;)if(r[a]===n||r[a].listener&&r[a].listener===n){l=r[a].listener,s=a;break}if(s<0)return this;if(r.length===1){if(r[0]=void 0,--this._eventsCount===0)return this._events=new ra,this;delete i[t]}else lce(r,s);i.removeListener&&this.emit("removeListener",t,l||n)}return this};dt.prototype.off=function(e,t){return this.removeListener(e,t)};dt.prototype.removeAllListeners=function(t){var n,r;if(r=this._events,!r)return this;if(!r.removeListener)return arguments.length===0?(this._events=new ra,this._eventsCount=0):r[t]&&(--this._eventsCount===0?this._events=new ra:delete r[t]),this;if(arguments.length===0){for(var i=Object.keys(r),s=0,a;s<i.length;++s)a=i[s],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=new ra,this._eventsCount=0,this}if(n=r[t],typeof n=="function")this.removeListener(t,n);else if(n)do this.removeListener(t,n[n.length-1]);while(n[0]);return this};dt.prototype.listeners=function(t){var n,r,i=this._events;return i?(n=i[t],n?typeof n=="function"?r=[n.listener||n]:r=cce(n):r=[]):r=[],r};dt.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):DL.call(e,t)};dt.prototype.listenerCount=DL;function DL(e){var t=this._events;if(t){var n=t[e];if(typeof n=="function")return 1;if(n)return n.length}return 0}dt.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function lce(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}function kf(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}function cce(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function FL(e){var t=fce();return function(){var r=Pp.default(e),i;if(t){var s=Pp.default(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return OL.default(this,i)}}function fce(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var jL=function(e){Ob.default(n,e);var t=FL(n);function n(r){var i;return Pb.default(this,n),i=t.call(this),ss.default(is.default(i),"timeout",null),ss.default(is.default(i),"startTimestamp",-1),i.minDelay=r.min,i.maxDelay=r.max,i.initialDelay=r.initial||0,i.maxAttemptsCount=r.maxAttemptsCount||0,i.maxAttemptsTime=r.maxAttemptsTime||0,i.randomness=r.randomness||0,i.inProgress=!1,i.attemptNum=0,i.prevDelay=0,i.currDelay=0,i}return Ab.default(n,[{key:"attempt",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.attemptNum++,this.emit("attempt",this)}},{key:"nextDelay",value:function(i){if(typeof i=="number")return this.prevDelay=0,this.currDelay=i,i;if(this.attemptNum==0)return this.initialDelay;if(this.attemptNum==1)return this.currDelay=this.minDelay,this.currDelay;this.prevDelay=this.currDelay;var s=this.currDelay+this.prevDelay;return this.maxDelay&&s>this.maxDelay&&(this.currDelay=this.maxDelay,s=this.maxDelay),this.currDelay=s,s}},{key:"randomize",value:function(i){var s=i*this.randomness,a=Math.round(Math.random()*s*2-s);return Math.max(0,i+a)}},{key:"scheduleAttempt",value:function(i){var s=this;if(this.maxAttemptsCount&&this.attemptNum>=this.maxAttemptsCount){this.cleanup(),this.emit("failed",new Error("Maximum attempt count limit reached"));return}var a=this.nextDelay(i);if(a=this.randomize(a),this.maxAttemptsTime&&this.startTimestamp+this.maxAttemptsTime<Date.now()+a){this.cleanup(),this.emit("failed",new Error("Maximum attempt time limit reached"));return}this.timeout=setTimeout(function(){return s.attempt()},a)}},{key:"cleanup",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.inProgress=!1,this.attemptNum=0,this.prevDelay=0,this.currDelay=0}},{key:"start",value:function(){if(this.inProgress)throw new Error("Retrier is already in progress");this.inProgress=!0,this.startTimestamp=Date.now(),this.scheduleAttempt(this.initialDelay)}},{key:"cancel",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null,this.inProgress=!1,this.emit("cancelled"))}},{key:"succeeded",value:function(i){this.emit("succeeded",i)}},{key:"failed",value:function(i,s){if(this.timeout)throw new Error("Retrier attempt is already in progress");this.scheduleAttempt(s)}}]),n}(dt),dce=function(e){Ob.default(n,e);var t=FL(n);function n(r){var i;return Pb.default(this,n),i=t.call(this),ss.default(is.default(i),"resolve",function(){}),ss.default(is.default(i),"reject",function(){}),i.retrier=new jL(r),i}return Ab.default(n,[{key:"run",value:function(i){var s=this;return this.retrier.on("attempt",function(){i().then(function(a){return s.retrier.succeeded(a)}).catch(function(a){return s.retrier.failed(a)})}),this.retrier.on("succeeded",function(a){return s.resolve(a)}),this.retrier.on("cancelled",function(){return s.reject(new Error("Cancelled"))}),this.retrier.on("failed",function(a){return s.reject(a)}),new Promise(function(a,l){s.resolve=a,s.reject=l,s.retrier.start()})}},{key:"cancel",value:function(){this.retrier.cancel()}}]),n}(dt);function hce(e){var t=pce();return function(){var r=Pp.default(e),i;if(t){var s=Pp.default(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return OL.default(this,i)}}function pce(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function yh(e){return e!=null}var vce=function(e){Ob.default(n,e);var t=hce(n);function n(r){var i;Pb.default(this,n),i=t.call(this),ss.default(is.default(i),"backoffDelay",0),ss.default(is.default(i),"nextBackoffDelay",0),ss.default(is.default(i),"backoffNumber",0),ss.default(is.default(i),"timeoutID",null),ss.default(is.default(i),"maxNumberOfRetry",-1),r=r||{};var s=r,a=s.initialDelay,l=s.maxDelay,u=s.randomisationFactor,f=s.factor;if(yh(a)&&a<1)throw new Error("The initial timeout must be equal to or greater than 1.");if(yh(l)&&l<=1)throw new Error("The maximal timeout must be greater than 1.");if(yh(u)&&(u<0||u>1))throw new Error("The randomisation factor must be between 0 and 1.");if(yh(f)&&f<=1)throw new Error("Exponential factor should be greater than 1.");if(i.initialDelay=a||100,i.maxDelay=l||1e4,i.maxDelay<=i.initialDelay)throw new Error("The maximal backoff delay must be greater than the initial backoff delay.");return i.randomisationFactor=u||0,i.factor=f||2,i.reset(),i}return Ab.default(n,[{key:"backoff",value:function(i){this.timeoutID==null&&(this.backoffNumber===this.maxNumberOfRetry?(this.emit("fail",i),this.reset()):(this.backoffDelay=this.next(),this.timeoutID=setTimeout(this.onBackoff.bind(this),this.backoffDelay),this.emit("backoff",this.backoffNumber,this.backoffDelay,i)))}},{key:"reset",value:function(){this.backoffDelay=0,this.nextBackoffDelay=this.initialDelay,this.backoffNumber=0,this.timeoutID&&clearTimeout(this.timeoutID),this.timeoutID=null}},{key:"failAfter",value:function(i){if(i<=0)throw new Error("Expected a maximum number of retry greater than 0 but got ".concat(i));this.maxNumberOfRetry=i}},{key:"next",value:function(){this.backoffDelay=Math.min(this.nextBackoffDelay,this.maxDelay),this.nextBackoffDelay=this.backoffDelay*this.factor;var i=1+Math.random()*this.randomisationFactor;return Math.min(this.maxDelay,Math.round(this.backoffDelay*i))}},{key:"onBackoff",value:function(){this.timeoutID=null,this.emit("ready",this.backoffNumber,this.backoffDelay),this.backoffNumber++}}],[{key:"exponential",value:function(i){return new n(i)}}]),n}(dt);Zu.AsyncRetrier=dce;Zu.Backoff=vce;Zu.Retrier=jL;var Fv={};/*
@license
Copyright (c) 2021 Twilio Inc.

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

*/Object.defineProperty(Fv,"__esModule",{value:!0});var gce=ib,mce=pf,yce=vf,_ce=gf,wce=ub,Sce=mf,bce=yf,Tce=vo,Ece=mv;function ks(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var gx=ks(gce),kce=ks(mce),Ice=ks(yce),Cce=ks(_ce),Ma=ks(wce),Rce=ks(Sce),xce=ks(bce),ns=ks(Tce),$ce=ks(Ece),Pce;function ia(){}ia.prototype=Object.create(null);function _t(){_t.init.call(this)}_t.EventEmitter=_t;_t.usingDomains=!1;_t.prototype.domain=void 0;_t.prototype._events=void 0;_t.prototype._maxListeners=void 0;_t.defaultMaxListeners=10;_t.init=function(){this.domain=null,_t.usingDomains&&Pce.active,(!this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=new ia,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};_t.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this};function UL(e){return e._maxListeners===void 0?_t.defaultMaxListeners:e._maxListeners}_t.prototype.getMaxListeners=function(){return UL(this)};function Ace(e,t,n){if(t)e.call(n);else for(var r=e.length,i=If(e,r),s=0;s<r;++s)i[s].call(n)}function Oce(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,s=If(e,i),a=0;a<i;++a)s[a].call(n,r)}function Nce(e,t,n,r,i){if(t)e.call(n,r,i);else for(var s=e.length,a=If(e,s),l=0;l<s;++l)a[l].call(n,r,i)}function Mce(e,t,n,r,i,s){if(t)e.call(n,r,i,s);else for(var a=e.length,l=If(e,a),u=0;u<a;++u)l[u].call(n,r,i,s)}function Lce(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,s=If(e,i),a=0;a<i;++a)s[a].apply(n,r)}_t.prototype.emit=function(t){var n,r,i,s,a,l,u,f=t==="error";if(l=this._events,l)f=f&&l.error==null;else if(!f)return!1;if(u=this.domain,f){if(n=arguments[1],u)n||(n=new Error('Uncaught, unspecified "error" event')),n.domainEmitter=this,n.domain=u,n.domainThrown=!1,u.emit("error",n);else{if(n instanceof Error)throw n;var d=new Error('Uncaught, unspecified "error" event. ('+n+")");throw d.context=n,d}return!1}if(r=l[t],!r)return!1;var p=typeof r=="function";switch(i=arguments.length,i){case 1:Ace(r,p,this);break;case 2:Oce(r,p,this,arguments[1]);break;case 3:Nce(r,p,this,arguments[1],arguments[2]);break;case 4:Mce(r,p,this,arguments[1],arguments[2],arguments[3]);break;default:for(s=new Array(i-1),a=1;a<i;a++)s[a-1]=arguments[a];Lce(r,p,this,s)}return!0};function BL(e,t,n,r){var i,s,a;if(typeof n!="function")throw new TypeError('"listener" argument must be a function');if(s=e._events,s?(s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),a=s[t]):(s=e._events=new ia,e._eventsCount=0),!a)a=s[t]=n,++e._eventsCount;else if(typeof a=="function"?a=s[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(i=UL(e),i&&i>0&&a.length>i)){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,Dce(l)}return e}function Dce(e){typeof console.warn=="function"?console.warn(e):console.log(e)}_t.prototype.addListener=function(t,n){return BL(this,t,n,!1)};_t.prototype.on=_t.prototype.addListener;_t.prototype.prependListener=function(t,n){return BL(this,t,n,!0)};function WL(e,t,n){var r=!1;function i(){e.removeListener(t,i),r||(r=!0,n.apply(e,arguments))}return i.listener=n,i}_t.prototype.once=function(t,n){if(typeof n!="function")throw new TypeError('"listener" argument must be a function');return this.on(t,WL(this,t,n)),this};_t.prototype.prependOnceListener=function(t,n){if(typeof n!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(t,WL(this,t,n)),this};_t.prototype.removeListener=function(t,n){var r,i,s,a,l;if(typeof n!="function")throw new TypeError('"listener" argument must be a function');if(i=this._events,!i)return this;if(r=i[t],!r)return this;if(r===n||r.listener&&r.listener===n)--this._eventsCount===0?this._events=new ia:(delete i[t],i.removeListener&&this.emit("removeListener",t,r.listener||n));else if(typeof r!="function"){for(s=-1,a=r.length;a-- >0;)if(r[a]===n||r[a].listener&&r[a].listener===n){l=r[a].listener,s=a;break}if(s<0)return this;if(r.length===1){if(r[0]=void 0,--this._eventsCount===0)return this._events=new ia,this;delete i[t]}else Fce(r,s);i.removeListener&&this.emit("removeListener",t,l||n)}return this};_t.prototype.off=function(e,t){return this.removeListener(e,t)};_t.prototype.removeAllListeners=function(t){var n,r;if(r=this._events,!r)return this;if(!r.removeListener)return arguments.length===0?(this._events=new ia,this._eventsCount=0):r[t]&&(--this._eventsCount===0?this._events=new ia:delete r[t]),this;if(arguments.length===0){for(var i=Object.keys(r),s=0,a;s<i.length;++s)a=i[s],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=new ia,this._eventsCount=0,this}if(n=r[t],typeof n=="function")this.removeListener(t,n);else if(n)do this.removeListener(t,n[n.length-1]);while(n[0]);return this};_t.prototype.listeners=function(t){var n,r,i=this._events;return i?(n=i[t],n?typeof n=="function"?r=[n.listener||n]:r=jce(n):r=[]):r=[],r};_t.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):zL.call(e,t)};_t.prototype.listenerCount=zL;function zL(e){var t=this._events;if(t){var n=t[e];if(typeof n=="function")return 1;if(n)return n.length}return 0}_t.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function Fce(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}function If(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}function jce(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function Uce(e){var t=Bce();return function(){var r=ns.default(e),i;if(t){var s=ns.default(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return xce.default(this,i)}}function Bce(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Wce=function(e){Rce.default(n,e);var t=Uce(n);function n(){var r;return kce.default(this,n),r=t.call(this),$ce.default(Cce.default(r),"eventHistory",new Map),r}return Ice.default(n,[{key:"on",value:function(i,s){return Ma.default(ns.default(n.prototype),"on",this).call(this,i,s)}},{key:"once",value:function(i,s){return Ma.default(ns.default(n.prototype),"once",this).call(this,i,s)}},{key:"off",value:function(i,s){return Ma.default(ns.default(n.prototype),"off",this).call(this,i,s)}},{key:"emit",value:function(i){for(var s,a=arguments.length,l=new Array(a>1?a-1:0),u=1;u<a;u++)l[u-1]=arguments[u];return this.eventHistory.set(i,l),(s=Ma.default(ns.default(n.prototype),"emit",this)).call.apply(s,[this,i].concat(l))}},{key:"addListener",value:function(i,s){return Ma.default(ns.default(n.prototype),"addListener",this).call(this,i,s)}},{key:"removeListener",value:function(i,s){return Ma.default(ns.default(n.prototype),"removeListener",this).call(this,i,s)}},{key:"addListenerWithReplay",value:function(i,s){var a=this.eventHistory.get(i);return a!==void 0&&s.apply(void 0,gx.default(a)),this.addListener(i,s)}},{key:"onWithReplay",value:function(i,s){return this.addListenerWithReplay(i,s)}},{key:"onceWithReplay",value:function(i,s){var a=this.eventHistory.get(i);return a!==void 0?(s.apply(void 0,gx.default(a)),this):Ma.default(ns.default(n.prototype),"once",this).call(this,i,s)}}]),n}(_t);Fv.ReplayEventEmitter=Wce;var zce=lM,Hce=dM;zce("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},Hce);var Ap={exports:{}};/*!
 * Platform.js v1.3.6
 * Copyright 2014-2020 Benjamin Tan
 * Copyright 2011-2013 John-David Dalton
 * Available under MIT license
 */Ap.exports;(function(e,t){(function(){var n={function:!0,object:!0},r=n[typeof window]&&window||this,i=t,s=e&&!e.nodeType&&e,a=i&&s&&typeof di=="object"&&di;a&&(a.global===a||a.window===a||a.self===a)&&(r=a);var l=Math.pow(2,53)-1,u=/\bOpera/,f=Object.prototype,d=f.hasOwnProperty,p=f.toString;function v(A){return A=String(A),A.charAt(0).toUpperCase()+A.slice(1)}function m(A,ne,X){var oe={"10.0":"10","6.4":"10 Technical Preview","6.3":"8.1","6.2":"8","6.1":"Server 2008 R2 / 7","6.0":"Server 2008 / Vista","5.2":"Server 2003 / XP 64-bit","5.1":"XP","5.01":"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return ne&&X&&/^Win/i.test(A)&&!/^Windows Phone /i.test(A)&&(oe=oe[/[\d.]+$/.exec(A)])&&(A="Windows "+oe),A=String(A),ne&&X&&(A=A.replace(RegExp(ne,"i"),X)),A=E(A.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0]),A}function y(A,ne){var X=-1,oe=A?A.length:0;if(typeof oe=="number"&&oe>-1&&oe<=l)for(;++X<oe;)ne(A[X],X,A);else b(A,ne)}function E(A){return A=W(A),/^(?:webOS|i(?:OS|P))/.test(A)?A:v(A)}function b(A,ne){for(var X in A)d.call(A,X)&&ne(A[X],X,A)}function w(A){return A==null?v(A):p.call(A).slice(8,-1)}function T(A,ne){var X=A!=null?typeof A[ne]:"number";return!/^(?:boolean|number|string|undefined)$/.test(X)&&(X=="object"?!!A[ne]:!0)}function x(A){return String(A).replace(/([ -])(?!$)/g,"$1?")}function M(A,ne){var X=null;return y(A,function(oe,he){X=ne(X,oe,he,A)}),X}function W(A){return String(A).replace(/^ +| +$/g,"")}function z(A){var ne=r,X=A&&typeof A=="object"&&w(A)!="String";X&&(ne=A,A=null);var oe=ne.navigator||{},he=oe.userAgent||"";A||(A=he);var ye=X?!!oe.likeChrome:/\bChrome\b/.test(A)&&!/internal|\n/i.test(p.toString()),Se="Object",Ie=X?Se:"ScriptBridgingProxyObject",we=X?Se:"Environment",ve=X&&ne.java?"JavaPackage":w(ne.java),J=X?Se:"RuntimeObject",fe=/\bJava/.test(ve)&&ne.java,be=fe&&w(ne.environment)==we,G=fe?"a":"",Qe=fe?"b":"",Tn=ne.document||{},ze=ne.operamini||ne.opera,ht=u.test(ht=X&&ze?ze["[[Class]]"]:w(ze))?ht:ze=null,B,pe=A,De=[],Ar=null,ln=A==he,Ce=ln&&ze&&typeof ze.version=="function"&&ze.version(),Si,Je=mo([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),ue=Bi(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),Me=bi([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),Wt=el({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),ce=Ln(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function mo(Yt){return M(Yt,function(ot,He){return ot||RegExp("\\b"+(He.pattern||x(He))+"\\b","i").exec(A)&&(He.label||He)})}function el(Yt){return M(Yt,function(ot,He,vn){return ot||(He[Me]||He[/^[a-z]+(?: +[a-z]+\b)*/i.exec(Me)]||RegExp("\\b"+x(vn)+"(?:\\b|\\w*\\d)","i").exec(A))&&vn})}function Bi(Yt){return M(Yt,function(ot,He){return ot||RegExp("\\b"+(He.pattern||x(He))+"\\b","i").exec(A)&&(He.label||He)})}function Ln(Yt){return M(Yt,function(ot,He){var vn=He.pattern||x(He);return!ot&&(ot=RegExp("\\b"+vn+"(?:/[\\d.]+|[ \\w.]*)","i").exec(A))&&(ot=m(ot,vn,He.label||He)),ot})}function bi(Yt){return M(Yt,function(ot,He){var vn=He.pattern||x(He);return!ot&&(ot=RegExp("\\b"+vn+" *\\d+[.\\w_]*","i").exec(A)||RegExp("\\b"+vn+" *\\w+-[\\w]*","i").exec(A)||RegExp("\\b"+vn+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(A))&&((ot=String(He.label&&!RegExp(vn,"i").test(He.label)?He.label:ot).split("/"))[1]&&!/[\d.]+/.test(ot[0])&&(ot[0]+=" "+ot[1]),He=He.label||He,ot=E(ot[0].replace(RegExp(vn,"i"),He).replace(RegExp("; *(?:"+He+"[_-])?","i")," ").replace(RegExp("("+He+")[-_.]?(\\w)","i"),"$1 $2"))),ot})}function Wi(Yt){return M(Yt,function(ot,He){return ot||(RegExp(He+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(A)||0)[1]||null})}function tl(){return this.description||""}if(Je&&(Je=[Je]),/\bAndroid\b/.test(ce)&&!Me&&(B=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(A))&&(Me=W(B[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),Wt&&!Me?Me=bi([Wt]):Wt&&Me&&(Me=Me.replace(RegExp("^("+x(Wt)+")[-_.\\s]","i"),Wt+" ").replace(RegExp("^("+x(Wt)+")[-_.]?(\\w)","i"),Wt+" $2")),(B=/\bGoogle TV\b/.exec(Me))&&(Me=B[0]),/\bSimulator\b/i.test(A)&&(Me=(Me?Me+" ":"")+"Simulator"),ue=="Opera Mini"&&/\bOPiOS\b/.test(A)&&De.push("running in Turbo/Uncompressed mode"),ue=="IE"&&/\blike iPhone OS\b/.test(A)?(B=z(A.replace(/like iPhone OS/,"")),Wt=B.manufacturer,Me=B.product):/^iP/.test(Me)?(ue||(ue="Safari"),ce="iOS"+((B=/ OS ([\d_]+)/i.exec(A))?" "+B[1].replace(/_/g,"."):"")):ue=="Konqueror"&&/^Linux\b/i.test(ce)?ce="Kubuntu":Wt&&Wt!="Google"&&(/Chrome/.test(ue)&&!/\bMobile Safari\b/i.test(A)||/\bVita\b/.test(Me))||/\bAndroid\b/.test(ce)&&/^Chrome/.test(ue)&&/\bVersion\//i.test(A)?(ue="Android Browser",ce=/\bAndroid\b/.test(ce)?ce:"Android"):ue=="Silk"?(/\bMobi/i.test(A)||(ce="Android",De.unshift("desktop mode")),/Accelerated *= *true/i.test(A)&&De.unshift("accelerated")):ue=="UC Browser"&&/\bUCWEB\b/.test(A)?De.push("speed mode"):ue=="PaleMoon"&&(B=/\bFirefox\/([\d.]+)\b/.exec(A))?De.push("identifying as Firefox "+B[1]):ue=="Firefox"&&(B=/\b(Mobile|Tablet|TV)\b/i.exec(A))?(ce||(ce="Firefox OS"),Me||(Me=B[1])):!ue||(B=!/\bMinefield\b/i.test(A)&&/\b(?:Firefox|Safari)\b/.exec(ue))?(ue&&!Me&&/[\/,]|^[^(]+?\)/.test(A.slice(A.indexOf(B+"/")+8))&&(ue=null),(B=Me||Wt||ce)&&(Me||Wt||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(ce))&&(ue=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(ce)?ce:B)+" Browser")):ue=="Electron"&&(B=(/\bChrome\/([\d.]+)\b/.exec(A)||0)[1])&&De.push("Chromium "+B),Ce||(Ce=Wi(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",x(ue),"(?:Firefox|Minefield|NetFront)"])),(B=Je=="iCab"&&parseFloat(Ce)>3&&"WebKit"||/\bOpera\b/.test(ue)&&(/\bOPR\b/.test(A)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(A)&&!/^(?:Trident|EdgeHTML)$/.test(Je)&&"WebKit"||!Je&&/\bMSIE\b/i.test(A)&&(ce=="Mac OS"?"Tasman":"Trident")||Je=="WebKit"&&/\bPlayStation\b(?! Vita\b)/i.test(ue)&&"NetFront")&&(Je=[B]),ue=="IE"&&(B=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(A)||0)[1])?(ue+=" Mobile",ce="Windows Phone "+(/\+$/.test(B)?B:B+".x"),De.unshift("desktop mode")):/\bWPDesktop\b/i.test(A)?(ue="IE Mobile",ce="Windows Phone 8.x",De.unshift("desktop mode"),Ce||(Ce=(/\brv:([\d.]+)/.exec(A)||0)[1])):ue!="IE"&&Je=="Trident"&&(B=/\brv:([\d.]+)/.exec(A))&&(ue&&De.push("identifying as "+ue+(Ce?" "+Ce:"")),ue="IE",Ce=B[1]),ln){if(T(ne,"global"))if(fe&&(B=fe.lang.System,pe=B.getProperty("os.arch"),ce=ce||B.getProperty("os.name")+" "+B.getProperty("os.version")),be){try{Ce=ne.require("ringo/engine").version.join("."),ue="RingoJS"}catch{(B=ne.system)&&B.global.system==ne.system&&(ue="Narwhal",ce||(ce=B[0].os||null))}ue||(ue="Rhino")}else typeof ne.process=="object"&&!ne.process.browser&&(B=ne.process)&&(typeof B.versions=="object"&&(typeof B.versions.electron=="string"?(De.push("Node "+B.versions.node),ue="Electron",Ce=B.versions.electron):typeof B.versions.nw=="string"&&(De.push("Chromium "+Ce,"Node "+B.versions.node),ue="NW.js",Ce=B.versions.nw)),ue||(ue="Node.js",pe=B.arch,ce=B.platform,Ce=/[\d.]+/.exec(B.version),Ce=Ce?Ce[0]:null));else w(B=ne.runtime)==Ie?(ue="Adobe AIR",ce=B.flash.system.Capabilities.os):w(B=ne.phantom)==J?(ue="PhantomJS",Ce=(B=B.version||null)&&B.major+"."+B.minor+"."+B.patch):typeof Tn.documentMode=="number"&&(B=/\bTrident\/(\d+)/i.exec(A))?(Ce=[Ce,Tn.documentMode],(B=+B[1]+4)!=Ce[1]&&(De.push("IE "+Ce[1]+" mode"),Je&&(Je[1]=""),Ce[1]=B),Ce=ue=="IE"?String(Ce[1].toFixed(1)):Ce[0]):typeof Tn.documentMode=="number"&&/^(?:Chrome|Firefox)\b/.test(ue)&&(De.push("masking as "+ue+" "+Ce),ue="IE",Ce="11.0",Je=["Trident"],ce="Windows");ce=ce&&E(ce)}if(Ce&&(B=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(Ce)||/(?:alpha|beta)(?: ?\d)?/i.exec(A+";"+(ln&&oe.appMinorVersion))||/\bMinefield\b/i.test(A)&&"a")&&(Ar=/b/i.test(B)?"beta":"alpha",Ce=Ce.replace(RegExp(B+"\\+?$"),"")+(Ar=="beta"?Qe:G)+(/\d+\+?/.exec(B)||"")),ue=="Fennec"||ue=="Firefox"&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(ce))ue="Firefox Mobile";else if(ue=="Maxthon"&&Ce)Ce=Ce.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(Me))Me=="Xbox 360"&&(ce=null),Me=="Xbox 360"&&/\bIEMobile\b/.test(A)&&De.unshift("mobile mode");else if((/^(?:Chrome|IE|Opera)$/.test(ue)||ue&&!Me&&!/Browser|Mobi/.test(ue))&&(ce=="Windows CE"||/Mobi/i.test(A)))ue+=" Mobile";else if(ue=="IE"&&ln)try{ne.external===null&&De.unshift("platform preview")}catch{De.unshift("embedded")}else(/\bBlackBerry\b/.test(Me)||/\bBB10\b/.test(A))&&(B=(RegExp(Me.replace(/ +/g," *")+"/([.\\d]+)","i").exec(A)||0)[1]||Ce)?(B=[B,/BB10/.test(A)],ce=(B[1]?(Me=null,Wt="BlackBerry"):"Device Software")+" "+B[0],Ce=null):this!=b&&Me!="Wii"&&(ln&&ze||/Opera/.test(ue)&&/\b(?:MSIE|Firefox)\b/i.test(A)||ue=="Firefox"&&/\bOS X (?:\d+\.){2,}/.test(ce)||ue=="IE"&&(ce&&!/^Win/.test(ce)&&Ce>5.5||/\bWindows XP\b/.test(ce)&&Ce>8||Ce==8&&!/\bTrident\b/.test(A)))&&!u.test(B=z.call(b,A.replace(u,"")+";"))&&B.name&&(B="ing as "+B.name+((B=B.version)?" "+B:""),u.test(ue)?(/\bIE\b/.test(B)&&ce=="Mac OS"&&(ce=null),B="identify"+B):(B="mask"+B,ht?ue=E(ht.replace(/([a-z])([A-Z])/g,"$1 $2")):ue="Opera",/\bIE\b/.test(B)&&(ce=null),ln||(Ce=null)),Je=["Presto"],De.push(B));(B=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(A)||0)[1])&&(B=[parseFloat(B.replace(/\.(\d)$/,".0$1")),B],ue=="Safari"&&B[1].slice(-1)=="+"?(ue="WebKit Nightly",Ar="alpha",Ce=B[1].slice(0,-1)):(Ce==B[1]||Ce==(B[2]=(/\bSafari\/([\d.]+\+?)/i.exec(A)||0)[1]))&&(Ce=null),B[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(A)||0)[1],B[0]==537.36&&B[2]==537.36&&parseFloat(B[1])>=28&&Je=="WebKit"&&(Je=["Blink"]),!ln||!ye&&!B[1]?(Je&&(Je[1]="like Safari"),B=(B=B[0],B<400?1:B<500?2:B<526?3:B<533?4:B<534?"4+":B<535?5:B<537?6:B<538?7:B<601?8:B<602?9:B<604?10:B<606?11:B<608?12:"12")):(Je&&(Je[1]="like Chrome"),B=B[1]||(B=B[0],B<530?1:B<532?2:B<532.05?3:B<533?4:B<534.03?5:B<534.07?6:B<534.1?7:B<534.13?8:B<534.16?9:B<534.24?10:B<534.3?11:B<535.01?12:B<535.02?"13+":B<535.07?15:B<535.11?16:B<535.19?17:B<536.05?18:B<536.1?19:B<537.01?20:B<537.11?"21+":B<537.13?23:B<537.18?24:B<537.24?25:B<537.36?26:Je!="Blink"?"27":"28")),Je&&(Je[1]+=" "+(B+=typeof B=="number"?".x":/[.+]/.test(B)?"":"+")),ue=="Safari"&&(!Ce||parseInt(Ce)>45)?Ce=B:ue=="Chrome"&&/\bHeadlessChrome/i.test(A)&&De.unshift("headless")),ue=="Opera"&&(B=/\bzbov|zvav$/.exec(ce))?(ue+=" ",De.unshift("desktop mode"),B=="zvav"?(ue+="Mini",Ce=null):ue+="Mobile",ce=ce.replace(RegExp(" *"+B+"$"),"")):ue=="Safari"&&/\bChrome\b/.exec(Je&&Je[1])?(De.unshift("desktop mode"),ue="Chrome Mobile",Ce=null,/\bOS X\b/.test(ce)?(Wt="Apple",ce="iOS 4.3+"):ce=null):/\bSRWare Iron\b/.test(ue)&&!Ce&&(Ce=Wi("Chrome")),Ce&&Ce.indexOf(B=/[\d.]+$/.exec(ce))==0&&A.indexOf("/"+B+"-")>-1&&(ce=W(ce.replace(B,""))),ce&&ce.indexOf(ue)!=-1&&!RegExp(ue+" OS").test(ce)&&(ce=ce.replace(RegExp(" *"+x(ue)+" *"),"")),Je&&!/\b(?:Avant|Nook)\b/.test(ue)&&(/Browser|Lunascape|Maxthon/.test(ue)||ue!="Safari"&&/^iOS/.test(ce)&&/\bSafari\b/.test(Je[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(ue)&&Je[1])&&(B=Je[Je.length-1])&&De.push(B),De.length&&(De=["("+De.join("; ")+")"]),Wt&&Me&&Me.indexOf(Wt)<0&&De.push("on "+Wt),Me&&De.push((/^on /.test(De[De.length-1])?"":"on ")+Me),ce&&(B=/ ([\d.+]+)$/.exec(ce),Si=B&&ce.charAt(ce.length-B[0].length-1)=="/",ce={architecture:32,family:B&&!Si?ce.replace(B[0],""):ce,version:B?B[1]:null,toString:function(){var Yt=this.version;return this.family+(Yt&&!Si?" "+Yt:"")+(this.architecture==64?" 64-bit":"")}}),(B=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(pe))&&!/\bi686\b/i.test(pe)?(ce&&(ce.architecture=64,ce.family=ce.family.replace(RegExp(" *"+B),"")),ue&&(/\bWOW64\b/i.test(A)||ln&&/\w(?:86|32)$/.test(oe.cpuClass||oe.platform)&&!/\bWin64; x64\b/i.test(A))&&De.unshift("32-bit")):ce&&/^OS X/.test(ce.family)&&ue=="Chrome"&&parseFloat(Ce)>=39&&(ce.architecture=64),A||(A=null);var Lt={};return Lt.description=A,Lt.layout=Je&&Je[0],Lt.manufacturer=Wt,Lt.name=ue,Lt.prerelease=Ar,Lt.product=Me,Lt.ua=A,Lt.version=ue&&Ce,Lt.os=ce||{architecture:null,family:null,version:null,toString:function(){return"null"}},Lt.parse=z,Lt.toString=tl,Lt.version&&De.unshift(Ce),Lt.name&&De.unshift(ue),ce&&ue&&!(ce==String(ce).split(" ")[0]&&(ce==ue.split(" ")[0]||Me))&&De.push(Me?"("+ce+")":"on "+ce),De.length&&(Lt.description=De.join(" ")),Lt}var K=z();i&&s?b(K,function(A,ne){i[ne]=A}):r.platform=K}).call(di)})(Ap,Ap.exports);var HL=Ap.exports,Vce=wt,qce=We,Gce=$v,Kce=en,Qce=Ct,Jce=pa,_h=Gn,Yce=ws,Xce=uo,Zce=vb,efe=lb,mx=Pv,yx=qce("".indexOf);Gce("match",function(e,t,n){return[function(i){var s=Yce(this),a=Qce(i)?Xce(i,e):void 0;return a?Vce(a,i,s):new RegExp(i)[e](_h(s))},function(r){var i=Kce(this),s=_h(r),a=n(t,i,s);if(a.done)return a.value;var l=_h(efe(i));if(yx(l,"g")===-1)return mx(i,s);var u=yx(l,"u")!==-1;i.lastIndex=0;for(var f=[],d=0,p;(p=mx(i,s))!==null;){var v=_h(p[0]);f[d]=v,v===""&&(i.lastIndex=Zce(s,Jce(i.lastIndex),u)),d++}return d===0?null:f}]});var tfe=Object.is||function(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n},nfe=wt,rfe=$v,ife=en,sfe=Ct,afe=ws,_x=tfe,wx=Gn,ofe=uo,ufe=Pv;rfe("search",function(e,t,n){return[function(i){var s=afe(this),a=sfe(i)?ofe(i,e):void 0;return a?nfe(a,i,s):new RegExp(i)[e](wx(s))},function(r){var i=ife(this),s=wx(r),a=n(t,i,s);if(a.done)return a.value;var l=i.lastIndex;_x(l,0)||(i.lastIndex=0);var u=ufe(i,s);return _x(i.lastIndex,l)||(i.lastIndex=l),u===null?-1:u.index}]});var lfe=Pt,cfe=uf,ffe=TypeError,dfe=Object.getOwnPropertyDescriptor,hfe=lfe&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}(),pfe=hfe?function(e,t){if(cfe(e)&&!dfe(e,"length").writable)throw new ffe("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t},vfe=Ze,gfe=Nn,mfe=Qu,yfe=Ui,_fe=Mn,wfe=pfe,Sfe=AN,bfe=A0,Tfe=hf,o_=bb,Efe=df,kfe=Efe("splice"),Ife=Math.max,Cfe=Math.min;vfe({target:"Array",proto:!0,forced:!kfe},{splice:function(t,n){var r=gfe(this),i=_fe(r),s=mfe(t,i),a=arguments.length,l,u,f,d,p,v;for(a===0?l=u=0:a===1?(l=0,u=i-s):(l=a-2,u=Cfe(Ife(yfe(n),0),i-s)),Sfe(i+l-u),f=bfe(r,u),d=0;d<u;d++)p=s+d,p in r&&Tfe(f,d,r[p]);if(f.length=u,l<u){for(d=s;d<i-u;d++)p=d+u,v=d+l,p in r?r[v]=r[p]:o_(r,v);for(d=i;d>i-u+l;d--)o_(r,d-1)}else if(l>u)for(d=i-u;d>s;d--)p=d+u-1,v=d+l-1,p in r?r[v]=r[p]:o_(r,v);for(d=0;d<l;d++)r[d+s]=arguments[d+2];return wfe(r,i-u+l),f}});/*
@license
The following license applies to all parts of this software except as
documented below.

    Copyright (c) 2016, Twilio, inc.
    All rights reserved.

    Redistribution and use in source and binary forms, with or without
    modification, are permitted provided that the following conditions are
    met:

      1. Redistributions of source code must retain the above copyright
         notice, this list of conditions and the following disclaimer.

      2. Redistributions in binary form must reproduce the above copyright
         notice, this list of conditions and the following disclaimer in
         the documentation and/or other materials provided with the
         distribution.

      3. Neither the name of Twilio nor the names of its contributors may
         be used to endorse or promote products derived from this software
         without specific prior written permission.

    THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
    "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
    LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
    A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
    HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
    SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
    LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
    DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
    THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
    (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
    OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

This software includes javascript-state-machine under the following license.

    Copyright (c) 2012, 2013, 2014, 2015, Jake Gordon and contributors

    Permission is hereby granted, free of charge, to any person obtaining a copy
    of this software and associated documentation files (the "Software"), to deal
    in the Software without restriction, including without limitation the rights
    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
    copies of the Software, and to permit persons to whom the Software is
    furnished to do so, subject to the following conditions:

    The above copyright notice and this permission notice shall be included in all
    copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE

This software includes loglevel under the following license.

    Copyright (c) 2013 Tim Perry

    Permission is hereby granted, free of charge, to any person
    obtaining a copy of this software and associated documentation
    files (the "Software"), to deal in the Software without
    restriction, including without limitation the rights to use,
    copy, modify, merge, publish, distribute, sublicense, and/or sell
    copies of the Software, and to permit persons to whom the
    Software is furnished to do so, subject to the following
    conditions:

    The above copyright notice and this permission notice shall be
    included in all copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
    OTHER DEALINGS IN THE SOFTWARE.


*/(function(e){var t=typeof t<"u"?t:typeof self<"u"?self:typeof window<"u"?window:{};Object.defineProperty(e,"__esModule",{value:!0});var n=f2,r=gf,i=ub,s=mf,a=yf,l=vo,u=vf,f=pf,d=mv,p=lN,v=po,m=bn,y=no,E=hie,b=yM,w=AL,T=Zu,x=Fv,M=HL;function W(N){return N&&typeof N=="object"&&"default"in N?N:{default:N}}function z(N){if(N&&N.__esModule)return N;var F=Object.create(null);return N&&Object.keys(N).forEach(function(R){if(R!=="default"){var I=Object.getOwnPropertyDescriptor(N,R);Object.defineProperty(F,R,I.get?I:{enumerable:!0,get:function(){return N[R]}})}}),F.default=N,Object.freeze(F)}var K=W(n),A=W(r),ne=W(i),X=W(s),oe=W(a),he=W(l),ye=W(u),Se=W(f),Ie=W(d),we=W(p),ve=W(v),J=z(y),fe=z(E),be=W(w),G=z(M);function Qe(N,F,R,I){var S=arguments.length,O=S<3?F:I===null?I=Object.getOwnPropertyDescriptor(F,R):I,$;if((typeof Reflect>"u"?"undefined":ve.default(Reflect))==="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(N,F,R,I);else for(var Q=N.length-1;Q>=0;Q--)($=N[Q])&&(O=(S<3?$(O):S>3?$(F,R,O):$(F,R))||O);return S>3&&O&&Object.defineProperty(F,R,O),O}function Tn(N,F){if((typeof Reflect>"u"?"undefined":ve.default(Reflect))==="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(N,F)}var ze=J.getLogger("twilsock");function ht(N,F){return["".concat(new Date().toISOString()," Twilsock ").concat(N,":")].concat(Array.from(F))}var B=function(){function N(F){Se.default(this,N),Ie.default(this,"prefix",""),this.prefix=F!=null&&F.length>0?" "+F+":":""}return ye.default(N,[{key:"setLevel",value:function(R){ze.setLevel(R)}},{key:"trace",value:function(){if(ze.getLevel()==ze.levels.TRACE){for(var R=arguments.length,I=new Array(R),S=0;S<R;S++)I[S]=arguments[S];ze.debug.apply(null,ht("T",I))}}},{key:"debug",value:function(){for(var R=arguments.length,I=new Array(R),S=0;S<R;S++)I[S]=arguments[S];ze.debug.apply(null,ht("D",I))}},{key:"info",value:function(){for(var R=arguments.length,I=new Array(R),S=0;S<R;S++)I[S]=arguments[S];ze.info.apply(null,ht("I",I))}},{key:"warn",value:function(){for(var R=arguments.length,I=new Array(R),S=0;S<R;S++)I[S]=arguments[S];ze.warn.apply(null,ht("W",I))}},{key:"error",value:function(){for(var R=arguments.length,I=new Array(R),S=0;S<R;S++)I[S]=arguments[S];ze.error.apply(null,ht("E",I))}}],[{key:"setLevel",value:function(R){ze.setLevel(R)}},{key:"trace",value:function(){if(ze.getLevel()==ze.levels.TRACE){for(var R=arguments.length,I=new Array(R),S=0;S<R;S++)I[S]=arguments[S];ze.debug.apply(null,ht("T",I))}}},{key:"debug",value:function(){for(var R=arguments.length,I=new Array(R),S=0;S<R;S++)I[S]=arguments[S];ze.debug.apply(null,ht("D",I))}},{key:"info",value:function(){for(var R=arguments.length,I=new Array(R),S=0;S<R;S++)I[S]=arguments[S];ze.info.apply(null,ht("I",I))}},{key:"warn",value:function(){for(var R=arguments.length,I=new Array(R),S=0;S<R;S++)I[S]=arguments[S];ze.warn.apply(null,ht("W",I))}},{key:"error",value:function(){for(var R=arguments.length,I=new Array(R),S=0;S<R;S++)I[S]=arguments[S];ze.error.apply(null,ht("E",I))}}]),N}(),pe=new B(""),De="0.13.11",Ar=function(){function N(F,R,I){Se.default(this,N),Ie.default(this,"confirmedCapabilities",new Set),this.activeGrant=R,this._token=F;var S=I.region||"us1",O="wss://tsock.".concat(S,".twilio.com/v3/wsconnect"),$=I.twilsock||I.Twilsock||{};this.url=$.uri||O,this._continuationToken=I.continuationToken?I.continuationToken:null,this.logLevel=I.logLevel?I.logLevel:"error",this.retryPolicy=I.retryPolicy?I.retryPolicy:{min:1*1e3,max:2*60*1e3,randomness:.2},this.clientMetadata=I.clientMetadata?I.clientMetadata:{},this.clientMetadata.ver=De,this.initRegistrations=I.initRegistrations?I.initRegistrations:null,this.tweaks=I.tweaks?I.tweaks:null}return ye.default(N,[{key:"token",get:function(){return this._token}},{key:"continuationToken",get:function(){return this._continuationToken}},{key:"updateToken",value:function(R){this._token=R}},{key:"updateContinuationToken",value:function(R){this._continuationToken=R}}]),N}(),ln=ye.default(function N(F){Se.default(this,N),this.id=F||"TM".concat(b.v4())});function Ce(N){var F=Si();return function(){var I=he.default(N),S;if(F){var O=he.default(this).constructor;S=Reflect.construct(I,arguments,O)}else S=I.apply(this,arguments);return oe.default(this,S)}}function Si(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Je=function(N){X.default(R,N);var F=Ce(R);function R(I,S,O,$,Q){var H;return Se.default(this,R),H=F.call(this),Ie.default(A.default(H),"method","init"),H.token=I,H.continuation_token=S,H.metadata=O,H.registrations=$,H.tweaks=Q,H.capabilities=["client_update","offline_storage","telemetry.v1"],H}return ye.default(R)}(ln);function ue(N){var F=Me();return function(){var I=he.default(N),S;if(F){var O=he.default(this).constructor;S=Reflect.construct(I,arguments,O)}else S=I.apply(this,arguments);return oe.default(this,S)}}function Me(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Wt=function(N){X.default(R,N);var F=ue(R);function R(I,S,O,$,Q,H,se){var de;return Se.default(this,R),de=F.call(this,I),de.continuationToken=S,de.continuationTokenStatus=$,de.offlineStorage=Q,de.initRegistrations=H,de.debugInfo=se,de.confirmedCapabilities=O,de}return ye.default(R)}(ln);function ce(N){var F=mo();return function(){var I=he.default(N),S;if(F){var O=he.default(this).constructor;S=Reflect.construct(I,arguments,O)}else S=I.apply(this,arguments);return oe.default(this,S)}}function mo(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var el=function(N){X.default(R,N);var F=ce(R);function R(I){var S;return Se.default(this,R),S=F.call(this),Ie.default(A.default(S),"method","update"),S.token=I,S}return ye.default(R)}(ln);function Bi(N){var F=Ln();return function(){var I=he.default(N),S;if(F){var O=he.default(this).constructor;S=Reflect.construct(I,arguments,O)}else S=I.apply(this,arguments);return oe.default(this,S)}}function Ln(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var bi=function(N){X.default(R,N);var F=Bi(R);function R(I,S,O){var $;return Se.default(this,R),$=F.call(this),Ie.default(A.default($),"method","message"),$.active_grant=I,$.payload_type=S,$.http_request=O,$}return ye.default(R)}(ln);function Wi(N){var F=tl();return function(){var I=he.default(N),S;if(F){var O=he.default(this).constructor;S=Reflect.construct(I,arguments,O)}else S=I.apply(this,arguments);return oe.default(this,S)}}function tl(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Lt=function(N){X.default(R,N);var F=Wi(R);function R(I){var S;return Se.default(this,R),S=F.call(this,I),Ie.default(A.default(S),"method","reply"),Ie.default(A.default(S),"payload_type","application/json"),Ie.default(A.default(S),"status",{code:200,status:"OK"}),S}return ye.default(R)}(ln);function Yt(N){var F=ot();return function(){var I=he.default(N),S;if(F){var O=he.default(this).constructor;S=Reflect.construct(I,arguments,O)}else S=I.apply(this,arguments);return oe.default(this,S)}}function ot(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var He=function(N){X.default(R,N);var F=Yt(R);function R(){var I;return Se.default(this,R),I=F.call(this),Ie.default(A.default(I),"method","close"),I}return ye.default(R)}(ln);function vn(N){var F=nl();return function(){var I=he.default(N),S;if(F){var O=he.default(this).constructor;S=Reflect.construct(I,arguments,O)}else S=I.apply(this,arguments);return oe.default(this,S)}}function nl(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var rl=ye.default(function N(F,R,I,S,O,$){Se.default(this,N),this.start=F,this.end=R,this.title=I,this.details=S,this.id=O,this.type=$}),il=function(N){X.default(R,N);var F=vn(R);function R(I){var S;return Se.default(this,R),S=F.call(this),Ie.default(A.default(S),"method","telemetry.v1"),S.events=I,S}return ye.default(R)}(ln);function yo(N){var F=encodeURIComponent(N),R=F.replace(/%([0-9A-F]{2})/g,function(I,S){return String.fromCharCode(+("0x"+S))});return R.length}function sl(N){var F=encodeURIComponent(N),R=F.replace(/%([0-9A-F]{2})/g,function(S,O){return String.fromCharCode(+("0x"+O))}),I=new Uint8Array(R.length);return Array.prototype.forEach.call(R,function(S,O){I[O]=S.charCodeAt(0)}),I}function _o(N){var F=Array.prototype.map.call(N,function(I){return String.fromCharCode(I)}).join(""),R=F.replace(/(.)/g,function(I,S){var O=S.charCodeAt(0).toString(16).toUpperCase();return O.length<2&&(O="0"+O),"%"+O});return decodeURIComponent(R)}function wo(N){return JSON.parse(_o(N))}function al(N){for(var F="",R=0;R<N.length;++R){var I=String.fromCharCode(N[R]);if(F+=I,I==="\r"){R+=2;break}}var S=F.split(" ");return{size:R,protocol:S[0],version:S[1],headerSize:Number(S[2])}}var Pf=function(){function N(){Se.default(this,N)}return ye.default(N,null,[{key:"parse",value:function(R){var I=2,S=new Uint8Array(R),O=al(S);if(O.protocol!=="TWILSOCK"||O.version!=="V3.0")return pe.error("unsupported protocol: ".concat(O.protocol," ver ").concat(O.version)),null;var $;try{$=wo(S.subarray(O.size,O.size+O.headerSize))}catch(de){return pe.error("failed to parse message header",de,R),null}pe.debug("message received:",$.method);var Q;if($.payload_size>0){var H=I+O.size+O.headerSize,se=$.payload_size;if(!$.hasOwnProperty("payload_type")||$.payload_type.indexOf("application/json")===0)try{Q=wo(S.subarray(H,H+se))}catch(de){return pe.error("failed to parse message body",de,R),null}else $.payload_type.indexOf("text/plain")===0&&(Q=_o(S.subarray(H,H+se)))}return{method:$.method,header:$,payload:Q}}},{key:"createPacket",value:function(R){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";R.payload_size=yo(I);var S=JSON.stringify(R),O="TWILSOCK V3.0 "+yo(S);pe.debug("send request:",O+S+I);var $=sl(O+`\r
`+S+`\r
`+I);return $.buffer}}]),N}();function jv(N){var F=Uv();return function(){var I=he.default(N),S;if(F){var O=he.default(this).constructor;S=Reflect.construct(I,arguments,O)}else S=I.apply(this,arguments);return oe.default(this,S)}}function Uv(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var cn=function(N){X.default(R,N);var F=jv(R);function R(I){return Se.default(this,R),F.call(this,I)}return ye.default(R)}(be.default(Error));function Af(N){var F=Bv();return function(){var I=he.default(N),S;if(F){var O=he.default(this).constructor;S=Reflect.construct(I,arguments,O)}else S=I.apply(this,arguments);return oe.default(this,S)}}function Bv(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ol=function(N){X.default(R,N);var F=Af(R);function R(I,S){var O;return Se.default(this,R),O=F.call(this,I),O.reply=S,O}return ye.default(R)}(cn);function Of(N,F){var R=Object.keys(N);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(N);F&&(I=I.filter(function(S){return Object.getOwnPropertyDescriptor(N,S).enumerable})),R.push.apply(R,I)}return R}function Nf(N){for(var F=1;F<arguments.length;F++){var R=arguments[F]!=null?arguments[F]:{};F%2?Of(Object(R),!0).forEach(function(I){Ie.default(N,I,R[I])}):Object.getOwnPropertyDescriptors?Object.defineProperties(N,Object.getOwnPropertyDescriptors(R)):Of(Object(R)).forEach(function(I){Object.defineProperty(N,I,Object.getOwnPropertyDescriptor(R,I))})}return N}function Mf(N){var F=Wv();return function(){var I=he.default(N),S;if(F){var O=he.default(this).constructor;S=Reflect.construct(I,arguments,O)}else S=I.apply(this,arguments);return oe.default(this,S)}}function Wv(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var zv=function(N){X.default(R,N);var F=Mf(R);function R(I){var S;return Se.default(this,R),S=F.call(this),Ie.default(A.default(S),"newBackoff",null),Ie.default(A.default(S),"usedBackoff",null),Ie.default(A.default(S),"retrier",null),S.options=I?Nf({},I):{},S}return ye.default(R,[{key:"inProgress",get:function(){return!!this.retrier}},{key:"start",value:function(){if(this.inProgress)throw new Error("Already waiting for next attempt, call finishAttempt(success : boolean) to finish it");this.createRetrier()}},{key:"stop",value:function(){this.cleanRetrier(),this.newBackoff=null,this.usedBackoff=null}},{key:"modifyBackoff",value:function(S){this.newBackoff=S}},{key:"attemptFailed",value:function(){if(!this.inProgress)throw new Error("No attempt is in progress");if(this.newBackoff){var S=!this.usedBackoff||this.usedBackoff<this.newBackoff;if(S)this.createRetrier();else{var O;(O=this.retrier)===null||O===void 0||O.failed(new Error)}}else{var $;($=this.retrier)===null||$===void 0||$.failed(new Error)}}},{key:"cancel",value:function(){var S;(S=this.retrier)===null||S===void 0||S.cancel()}},{key:"cleanRetrier",value:function(){var S,O;(S=this.retrier)===null||S===void 0||S.removeAllListeners(),(O=this.retrier)===null||O===void 0||O.cancel(),this.retrier=null}},{key:"getRetryPolicy",value:function(){var S=Nf({},this.options);return this.newBackoff&&(S.min=this.newBackoff,S.max=this.options.max&&this.options.max>this.newBackoff?this.options.max:this.newBackoff),S.maxAttemptsCount=this.options.maxAttemptsCount?this.options.maxAttemptsCount+1:void 0,S}},{key:"createRetrier",value:function(){var S=this;this.cleanRetrier();var O=this.getRetryPolicy();this.retrier=new T.Retrier(O),this.retrier.once("attempt",function(){var $,Q;($=S.retrier)===null||$===void 0||$.on("attempt",function(){return S.emit("attempt")}),(Q=S.retrier)===null||Q===void 0||Q.failed(new Error("Skipping first attempt"))}),this.retrier.on("failed",function($){return S.emit("failed",$)}),this.usedBackoff=this.newBackoff,this.newBackoff=null,this.retrier.start()}}]),R}(x.ReplayEventEmitter);function Hv(N){var F=ul();return function(){var I=he.default(N),S;if(F){var O=he.default(this).constructor;S=Reflect.construct(I,arguments,O)}else S=I.apply(this,arguments);return oe.default(this,S)}}function ul(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Vv=3e3;function ll(N){setTimeout(N,0)}var qv=function(N){X.default(R,N);var F=Hv(R);function R(I,S,O){var $;Se.default(this,R),$=F.call(this),Ie.default(A.default($),"disconnectingTimer",null),Ie.default(A.default($),"disconnectedPromiseResolve",null),Ie.default(A.default($),"terminalStates",["disconnected","rejected"]),Ie.default(A.default($),"tokenExpiredSasCode",20104),Ie.default(A.default($),"terminationReason","Connection is not initialized"),$.websocket=I,$.websocket.on("connected",function(){return $.fsm.socketConnected()}),$.websocket.on("disconnected",function(){return $.fsm.socketClosed()}),$.websocket.on("message",function(H){return $.onIncomingMessage(H)}),$.websocket.on("socketError",function(H){$.emit("connectionError",{terminal:!1,message:"Socket error: ".concat(H.message),httpStatusCode:null,errorCode:null}),$.emit("stateChanged","retrying")}),$.transport=S,$.config=O,$.retrier=new zv(O.retryPolicy),$.retrier.on("attempt",function(){return $.retry()}),$.retrier.on("failed",function(H){pe.warn("Retrying failed: ".concat(H.message)),$.disconnect()}),typeof window<"u"&&typeof window.addEventListener<"u"&&(window.addEventListener("online",function(){pe.debug("Browser reported connectivity state: online"),$.resetBackoff(),$.fsm.systemOnline()}),window.addEventListener("offline",function(){pe.debug("Browser reported connectivity state: offline"),$.websocket.close(),$.fsm.socketClosed()}));var Q=fe.factory({init:"disconnected",transitions:[{name:"userConnect",from:["disconnected","rejected"],to:"connecting"},{name:"userConnect",from:["connecting","connected"]},{name:"userDisconnect",from:["connecting","initialising","connected","updating","retrying","rejected","waitSocketClosed","waitOffloadSocketClosed"],to:"disconnecting"},{name:"userRetry",from:["retrying"],to:"connecting"},{name:"socketConnected",from:["connecting"],to:"initialising"},{name:"socketClosed",from:["connecting","initialising","connected","updating","error","waitOffloadSocketClosed"],to:"retrying"},{name:"socketClosed",from:["disconnecting"],to:"disconnected"},{name:"socketClosed",from:["waitSocketClosed"],to:"disconnected"},{name:"socketClosed",from:["rejected"],to:"rejected"},{name:"initSuccess",from:["initialising"],to:"connected"},{name:"initError",from:["initialising"],to:"error"},{name:"tokenRejected",from:["initialising","updating"],to:"rejected"},{name:"protocolError",from:["initialising","connected","updating"],to:"error"},{name:"receiveClose",from:["initialising","connected","updating"],to:"waitSocketClosed"},{name:"receiveOffload",from:["initialising","connected","updating"],to:"waitOffloadSocketClosed"},{name:"unsupportedProtocol",from:["initialising","connected","updating"],to:"unsupported"},{name:"receiveFatalClose",from:["initialising","connected","updating"],to:"unsupported"},{name:"userUpdateToken",from:["disconnected","rejected","connecting","retrying"],to:"connecting"},{name:"userUpdateToken",from:["connected"],to:"updating"},{name:"updateSuccess",from:["updating"],to:"connected"},{name:"updateError",from:["updating"],to:"error"},{name:"userSend",from:["connected"],to:"connected"},{name:"systemOnline",from:["retrying"],to:"connecting"}],methods:{onConnecting:function(){$.setupSocket(),$.emit("connecting")},onEnterInitialising:function(){$.sendInit()},onLeaveInitialising:function(){$.cancelInit()},onEnterUpdating:function(){$.sendUpdate()},onLeaveUpdating:function(){$.cancelUpdate()},onEnterRetrying:function(){$.initRetry(),$.emit("connecting")},onEnterConnected:function(){$.resetBackoff(),$.onConnected()},onUserUpdateToken:function(){$.resetBackoff()},onTokenRejected:function(){$.resetBackoff(),$.closeSocket(!0),$.finalizeSocket()},onUserDisconnect:function(){$.closeSocket(!0)},onEnterDisconnecting:function(){$.startDisconnectTimer()},onLeaveDisconnecting:function(){$.cancelDisconnectTimer()},onEnterWaitSocketClosed:function(){$.startDisconnectTimer()},onLeaveWaitSocketClosed:function(){$.cancelDisconnectTimer()},onEnterWaitOffloadSocketClosed:function(){$.startDisconnectTimer()},onLeaveWaitOffloadSocketClosed:function(){$.cancelDisconnectTimer()},onDisconnected:function(){$.resetBackoff(),$.finalizeSocket()},onReceiveClose:function(){$.onCloseReceived()},onReceiveOffload:function(se,de){pe.debug("onreceiveoffload: ",de),$.modifyBackoff(de.body),$.onCloseReceived()},onUnsupported:function(){$.closeSocket(!0),$.finalizeSocket()},onError:function(se,de){$.closeSocket(de),$.finalizeSocket()},onEnterState:function(se){se.from!=="none"&&$.changeState(se)},onInvalidTransition:function(se,de,Oe){pe.warn("FSM: unexpected transition",de,Oe)}}});return $.fsm=new Q,$}return ye.default(R,[{key:"changeState",value:function(S){pe.debug("FSM: ".concat(S.transition,": ").concat(S.from," --> ").concat(S.to)),this.lastEmittedState!==this.state&&(this.lastEmittedState=this.state,this.emit("stateChanged",this.state))}},{key:"resetBackoff",value:function(){pe.trace("resetBackoff"),this.retrier.stop()}},{key:"modifyBackoff",value:function(S){pe.trace("modifyBackoff",S);var O=S?S.backoff_policy:null;O&&typeof O.reconnect_min_ms=="number"&&this.retrier.modifyBackoff(O.reconnect_min_ms)}},{key:"startDisconnectTimer",value:function(){var S=this;pe.trace("startDisconnectTimer"),this.disconnectingTimer&&(clearTimeout(this.disconnectingTimer),this.disconnectingTimer=null),this.disconnectingTimer=setTimeout(function(){pe.debug("disconnecting is timed out"),S.closeSocket(!0)},Vv)}},{key:"cancelDisconnectTimer",value:function(){pe.trace("cancelDisconnectTimer"),this.disconnectingTimer&&(clearTimeout(this.disconnectingTimer),this.disconnectingTimer=null)}},{key:"isConnected",get:function(){return this.state==="connected"&&this.websocket.isConnected}},{key:"state",get:function(){switch(this.fsm.state){case"connecting":case"initialising":case"retrying":case"error":return"connecting";case"updating":case"connected":return"connected";case"rejected":return"denied";case"disconnecting":case"waitSocketClosed":case"waitOffloadSocketClosed":return"disconnecting";case"disconnected":default:return"disconnected"}}},{key:"initRetry",value:function(){pe.debug("initRetry"),this.retrier.inProgress?this.retrier.attemptFailed():this.retrier.start()}},{key:"retry",value:function(){this.fsm.state!="connecting"?(pe.trace("retry"),this.websocket.close(),this.fsm.userRetry()):pe.trace("can	 retry as already connecting")}},{key:"onConnected",value:function(){this.emit("connected")}},{key:"finalizeSocket",value:function(){pe.trace("finalizeSocket"),this.websocket.close(),this.emit("disconnected"),this.disconnectedPromiseResolve&&(this.disconnectedPromiseResolve(),this.disconnectedPromiseResolve=null)}},{key:"setupSocket",value:function(){pe.trace("setupSocket:",this.config.token),this.emit("beforeConnect"),this.websocket.connect()}},{key:"onIncomingMessage",value:function(S){var O=Pf.parse(S);if(O){var $=O.method,Q=O.header,H=O.payload;if($!=="reply"&&this.confirmReceiving(Q),$==="notification")this.emit("message",Q.message_type,H);else if(Q.method==="reply")this.transport.processReply({id:Q.id,status:Q.status,header:Q,body:H});else if(Q.method==="client_update")Q.client_update_type==="token_about_to_expire"&&this.emit("tokenAboutToExpire");else if(Q.method==="close")if(Q.status.code===308)pe.debug("Connection has been offloaded"),this.fsm.receiveOffload({status:Q.status.status,body:H});else if(Q.status.code===406){var se="Server closed connection because can't parse protocol: ".concat(JSON.stringify(Q.status));this.emitReplyConnectionError(se,Q,!0),pe.error(se),this.fsm.receiveFatalClose()}else Q.status.code===417?(pe.error("Server closed connection because can't parse client reply: ".concat(JSON.stringify(Q.status))),this.fsm.receiveFatalClose(Q.status.status)):Q.status.code===410?(pe.warn("Server closed connection: ".concat(JSON.stringify(Q.status))),this.fsm.receiveClose(Q.status.status),this.emit("tokenExpired")):Q.status.code===401?(pe.error("Server closed connection: ".concat(JSON.stringify(Q.status))),this.fsm.receiveClose(Q.status.status)):(pe.warn("unexpected message: ",Q.status),this.fsm.receiveOffload({status:Q.status.status,body:null}))}}},{key:"sendInit",value:function(){var I=K.default(we.default.mark(function O(){var $,Q;return we.default.wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return pe.trace("sendInit"),se.prev=1,this.emit("beforeSendInit"),se.next=5,this.transport.sendInit();case 5:$=se.sent,this.config.updateContinuationToken($.continuationToken),this.config.confirmedCapabilities=$.confirmedCapabilities,this.fsm.initSuccess($),this.emit("initialized",$),this.emit("tokenUpdated"),se.next=17;break;case 13:se.prev=13,se.t0=se.catch(1),se.t0 instanceof ol?(Q=!1,pe.warn("Init rejected by server: ".concat(JSON.stringify(se.t0.reply.status))),this.emit("sendInitFailed"),se.t0.reply.status.code===401||se.t0.reply.status.code===403?(Q=!0,this.fsm.tokenRejected(se.t0.reply.status),se.t0.reply.status.errorCode===this.tokenExpiredSasCode&&this.emit("tokenExpired")):se.t0.reply.status.code===429?(this.modifyBackoff(se.t0.reply.body),this.fsm.initError(!0)):se.t0.reply.status.code===500?this.fsm.initError(!1):this.fsm.initError(!0),this.emitReplyConnectionError(se.t0.message,se.t0.reply,Q)):(this.terminationReason=se.t0.message,this.emit("connectionError",{terminal:!0,message:"Unknown error during connection initialisation: ".concat(se.t0.message,`
`).concat(JSON.stringify(se.t0,null,2)),httpStatusCode:null,errorCode:null}),this.fsm.initError(!0)),this.emit("tokenUpdated",se.t0);case 17:case"end":return se.stop()}},O,this,[[1,13]])}));function S(){return I.apply(this,arguments)}return S}()},{key:"sendUpdate",value:function(){var I=K.default(we.default.mark(function O(){var $,Q,H;return we.default.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return pe.trace("sendUpdate"),$=new el(this.config.token),de.prev=2,de.next=5,this.transport.sendWithReply($);case 5:Q=de.sent,this.fsm.updateSuccess(Q.body),this.emit("tokenUpdated"),de.next=14;break;case 10:de.prev=10,de.t0=de.catch(2),de.t0 instanceof ol?(H=!1,pe.warn("Token update rejected by server: ".concat(JSON.stringify(de.t0.reply.status))),de.t0.reply.status.code===401||de.t0.reply.status.code===403?(H=!0,this.fsm.tokenRejected(de.t0.reply.status),de.t0.reply.status.errorCode===this.tokenExpiredSasCode&&this.emit("tokenExpired")):de.t0.reply.status.code===429?(this.modifyBackoff(de.t0.reply.body),this.fsm.updateError(de.t0.reply.status)):this.fsm.updateError(de.t0.reply.status),this.emitReplyConnectionError(de.t0.message,de.t0.reply,H)):(this.emit("error",!1,de.t0.message,null,null),this.fsm.updateError(de.t0)),this.emit("tokenUpdated",de.t0);case 14:case"end":return de.stop()}},O,this,[[2,10]])}));function S(){return I.apply(this,arguments)}return S}()},{key:"emitReplyConnectionError",value:function(S,O,$){var Q=O.status&&O.status.description?O.status.description:S,H=O.status.code,se=O.status&&O.status.errorCode?O.status.errorCode:null;$&&(this.terminationReason=Q),this.emit("connectionError",{terminal:$,message:"Connection error: ".concat(Q),httpStatusCode:H,errorCode:se})}},{key:"cancelInit",value:function(){pe.trace("cancelInit")}},{key:"cancelUpdate",value:function(){pe.trace("cancelUpdate")}},{key:"confirmReceiving",value:function(S){pe.trace("confirmReceiving");try{this.transport.send(new Lt(S.id))}catch(O){pe.debug("failed to confirm packet receiving",O)}}},{key:"closeSocket",value:function(S){var O=this;pe.trace("closeSocket (graceful: ".concat(S,")")),S&&this.transport.isConnected&&this.transport.sendClose(),this.websocket.close(),ll(function(){return O.fsm.socketClosed()})}},{key:"connect",value:function(){pe.trace("connect"),this.fsm.userConnect()}},{key:"disconnect",value:function(){var S=this;return pe.trace("disconnect"),this.fsm.is("disconnected")?Promise.resolve():new Promise(function(O){S.disconnectedPromiseResolve=O,S.fsm.userDisconnect()})}},{key:"updateToken",value:function(S){var O=this;return pe.trace("updateToken:",S),new Promise(function($,Q){O.once("tokenUpdated",function(H){H?Q(H):$()}),O.fsm.userUpdateToken()})}},{key:"isTerminalState",get:function(){return this.terminalStates.indexOf(this.fsm.state)!==-1}},{key:"getTerminationReason",get:function(){return this.terminationReason}},{key:"onCloseReceived",value:function(){this.websocket.close()}}]),R}(x.ReplayEventEmitter),Gv=function(){function N(){Se.default(this,N)}return ye.default(N,null,[{key:"getMetadata",value:function(R){var I,S,O,$,Q,H,se,de,Oe=R&&R.clientMetadata?R.clientMetadata:{},Qn=["ver","env","envv","os","osv","osa","type","sdk","sdkv","dev","devv","devt","app","appv"],To={env:(I=G.name)!==null&&I!==void 0?I:"unknown",envv:(S=G.version)!==null&&S!==void 0?S:"unknown",os:(O=($=G.os)===null||$===void 0?void 0:$.family)!==null&&O!==void 0?O:"unknown",osv:(Q=(H=G.os)===null||H===void 0?void 0:H.version)!==null&&Q!==void 0?Q:"unknown",osa:(se=(de=G.os)===null||de===void 0?void 0:de.architecture)!==null&&se!==void 0?se:"unknown",sdk:"js-default"},fr={};return Qn.filter(function(Ei){return Ei in Oe||Ei in To}).forEach(function(Ei){return fr[Ei]=Ei in Oe?Oe[Ei]:To[Ei]}),fr}}]),N}(),Kv=3e4;function Qv(N){return N>=200&&N<300}function Jv(N){switch(ve.default(N)){case"undefined":return"";case"object":return JSON.stringify(N);default:return N}}var Yv=function(){function N(F,R){var I=this;Se.default(this,N),this.config=R,this.activeRequests=new Map,this.channel=F,this.channel.on("reply",function(S){return I.processReply(S)}),this.channel.on("disconnected",function(){I.activeRequests.forEach(function(S){clearTimeout(S.timeout),S.reject(new cn("disconnected"))}),I.activeRequests.clear()})}return ye.default(N,[{key:"isConnected",get:function(){return this.channel.isConnected}},{key:"processReply",value:function(R){var I=this.activeRequests.get(R.id);I&&(clearTimeout(I.timeout),this.activeRequests.delete(R.id),Qv(R.status.code)?I.resolve(R):(I.reject(new ol("Transport failure: "+R.status.status,R)),pe.trace("message rejected")))}},{key:"storeRequest",value:function(R,I,S){var O={resolve:I,reject:S,timeout:setTimeout(function(){pe.trace("request",R,"is timed out"),S(new cn("Twilsock: request timeout: "+R))},Kv)};this.activeRequests.set(R,O)}},{key:"shutdown",value:function(){this.activeRequests.forEach(function(R){clearTimeout(R.timeout),R.reject(new cn("Twilsock: request cancelled by user"))}),this.activeRequests.clear()}},{key:"sendInit",value:function(){var F=K.default(we.default.mark(function I(){var S,O,$;return we.default.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return pe.trace("sendInit"),S=Gv.getMetadata(this.config),O=new Je(this.config.token,this.config.continuationToken,S,this.config.initRegistrations,this.config.tweaks),H.next=5,this.sendWithReply(O);case 5:return $=H.sent,H.abrupt("return",new Wt($.id,$.header.continuation_token,new Set($.header.capabilities),$.header.continuation_token_status,$.header.offline_storage,$.header.init_registrations,$.header.debug_info));case 7:case"end":return H.stop()}},I,this)}));function R(){return F.apply(this,arguments)}return R}()},{key:"sendClose",value:function(){var R=new He;this.send(R)}},{key:"sendWithReply",value:function(R,I){var S=this;return new Promise(function(O,$){var Q=S.send(R,I);S.storeRequest(Q,O,$)})}},{key:"send",value:function(R,I){R.id=R.id||"TM".concat(b.v4());var S=Pf.createPacket(R,Jv(I));try{return this.channel.send(S),R.id}catch(O){throw pe.debug("failed to send ",R,O),pe.trace(O.stack),O}}}]),N}();function Xv(N){var F=Zv();return function(){var I=he.default(N),S;if(F){var O=he.default(this).constructor;S=Reflect.construct(I,arguments,O)}else S=I.apply(this,arguments);return oe.default(this,S)}}function Zv(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Lf=function(N){X.default(R,N);var F=Xv(R);function R(I){var S;return Se.default(this,R),S=F.call(this),Ie.default(A.default(S),"socket",null),S.url=I,S.url=I,S.WebSocket=t.WebSocket||t.MozWebSocket||{},S}return ye.default(R,[{key:"isConnected",get:function(){return!!this.socket&&this.socket.readyState===1}},{key:"connect",value:function(){var S=this;pe.trace("connecting to socket");var O;try{O=new this.WebSocket(this.url)}catch($){pe.debug("Socket error: ".concat(this.url)),this.emit("socketError",$);return}O.binaryType="arraybuffer",O.onopen=function(){pe.debug("socket opened ".concat(S.url)),S.emit("connected")},O.onclose=function($){pe.debug("socket closed",$),S.emit("disconnected",$)},O.onerror=function($){pe.debug("Socket error:",$),S.emit("socketError",$)},O.onmessage=function($){S.emit("message",$.data)},this.socket=O}},{key:"send",value:function(S){return this.socket&&this.socket.send(S)}},{key:"close",value:function(){if(pe.trace("closing socket"),this.socket){this.socket.onopen=null,this.socket.onclose=null,this.socket.onerror=null,this.socket.onmessage=null;try{this.socket.close()}finally{}}}}]),R}(x.ReplayEventEmitter);function eg(N){var F=tg();return function(){var I=he.default(N),S;if(F){var O=he.default(this).constructor;S=Reflect.construct(I,arguments,O)}else S=I.apply(this,arguments);return oe.default(this,S)}}function tg(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ng=function(N){X.default(R,N);var F=eg(R);function R(I){var S;return Se.default(this,R),S=F.call(this),S.transport=I,S.registrations=new Map,S.registrationsInProgress=new Map,S}return ye.default(R,[{key:"putNotificationContext",value:function(){var I=K.default(we.default.mark(function O($,Q){var H;return we.default.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return H={method:"put_notification_ctx",notification_ctx_id:$},de.next=3,this.transport.sendWithReply(H,Q);case 3:case"end":return de.stop()}},O,this)}));function S(O,$){return I.apply(this,arguments)}return S}()},{key:"deleteNotificationContext",value:function(){var I=K.default(we.default.mark(function O($){var Q;return we.default.wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return Q={method:"delete_notification_ctx",notification_ctx_id:$},se.next=3,this.transport.sendWithReply(Q);case 3:case"end":return se.stop()}},O,this)}));function S(O){return I.apply(this,arguments)}return S}()},{key:"updateRegistration",value:function(){var I=K.default(we.default.mark(function O($,Q){var H,se;return we.default.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return pe.debug("update registration for context",$),H=this.registrationsInProgress.get($),H||(H=new Set,this.registrationsInProgress.set($,H)),se=b.v4(),H.add(se),Oe.prev=5,Oe.next=8,this.putNotificationContext($,Q);case 8:pe.debug("registration attempt succeeded for context",Q),H.delete(se),H.size===0&&(this.registrationsInProgress.delete($),this.emit("registered",$)),Oe.next=19;break;case 13:Oe.prev=13,Oe.t0=Oe.catch(5),pe.warn("registration attempt failed for context",Q),pe.debug(Oe.t0),H.delete(se),H.size===0&&(this.registrationsInProgress.delete($),this.emit("registrationFailed",$,Oe.t0));case 19:case"end":return Oe.stop()}},O,this,[[5,13]])}));function S(O,$){return I.apply(this,arguments)}return S}()},{key:"updateRegistrations",value:function(){var I=K.default(we.default.mark(function O(){var $=this,Q;return we.default.wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return pe.trace("refreshing ".concat(this.registrations.size," registrations")),Q=[],this.registrations.forEach(function(de,Oe){Q.push($.updateRegistration(Oe,de))}),se.next=5,Promise.all(Q);case 5:case"end":return se.stop()}},O,this)}));function S(){return I.apply(this,arguments)}return S}()},{key:"setNotificationsContext",value:function(){var I=K.default(we.default.mark(function O($,Q){return we.default.wrap(function(se){for(;;)switch(se.prev=se.next){case 0:if(!(!$||!Q)){se.next=2;break}throw new cn("Invalid arguments provided");case 2:return this.registrations.set($,Q),se.next=5,this.updateRegistration($,Q);case 5:return se.abrupt("return",se.sent);case 6:case"end":return se.stop()}},O,this)}));function S(O,$){return I.apply(this,arguments)}return S}()},{key:"removeNotificationsContext",value:function(){var I=K.default(we.default.mark(function O($){return we.default.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(this.registrations.has($)){H.next=2;break}return H.abrupt("return");case 2:return H.next=4,this.deleteNotificationContext($);case 4:this.transport.isConnected&&this.registrations.delete($);case 5:case"end":return H.stop()}},O,this)}));function S(O){return I.apply(this,arguments)}return S}()}]),R}(x.ReplayEventEmitter);function rg(N){var F=ig();return function(){var I=he.default(N),S;if(F){var O=he.default(this).constructor;S=Reflect.construct(I,arguments,O)}else S=I.apply(this,arguments);return oe.default(this,S)}}function ig(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var sg=function(N){X.default(R,N);var F=rg(R);function R(I,S,O){var $;return Se.default(this,R),$=F.call(this,S),$.status=I,$.description=S,$.body=O,$}return ye.default(R)}(cn);function So(N){var F=ag();return function(){var I=he.default(N),S;if(F){var O=he.default(this).constructor;S=Reflect.construct(I,arguments,O)}else S=I.apply(this,arguments);return oe.default(this,S)}}function ag(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Is=function(N){X.default(R,N);var F=So(R);function R(I){return Se.default(this,R),F.call(this,I)}return ye.default(R)}(cn),og=2e4;function ug(N){return N>=200&&N<300}function lg(N){return N&&N.header&&N.header.http_status}function Df(N){var F=N.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)(\/[^?#]*)(\?[^#]*|)(#.*|)$/);if(F){var R={protocol:F[1],host:F[2],hostname:F[3],port:F[4],pathname:F[5],search:F[6],hash:F[7],params:{}};if(R.search.length>0){var I=R.search.substring(1);R.params=I.split("&").map(function(S){return S.split("=")}).reduce(function(S,O){return S.hasOwnProperty(O[0])?Array.isArray(S[O[0]])?S[O[0]].push(O[1]):S[O[0]]=[S[O[0]],O[1]]:S[O[0]]=O[1],S},{})}return R}throw new cn("Incorrect URI: "+N)}function Ff(N,F){var R=Df(F),I={method:N,host:R.host,path:R.pathname};return R.params&&(I.params=R.params),I}function jf(N,F,R,I,S){return{to:Ff(N,F),headers:R,body:I,grant:S}}var cg=function(){function N(F,R,I){Se.default(this,N),this.config=I,this.transport=F,this.pendingMessages=[],this.twilsock=R}return ye.default(N,[{key:"saveMessage",value:function(R){var I=this;return new Promise(function(S,O){var $={message:R,resolve:S,reject:O,alreadyRejected:!1,timeout:setTimeout(function(){pe.debug("request is timed out"),O(new cn("request '".concat(R.to.method,"' to '").concat(R.to.host,"' timed out"))),$.alreadyRejected=!0},og)};I.pendingMessages.push($)})}},{key:"sendPendingMessages",value:function(){for(var R=this,I=function(){var $=R.pendingMessages[0];if(!$.alreadyRejected)try{var Q=$.message;R.actualSend(Q).then(function(H){return $.resolve(H)}).catch(function(H){return $.reject(H)}),clearTimeout($.timeout)}catch(H){return pe.debug("Failed to send pending message",H),"break"}R.pendingMessages.splice(0,1)};this.pendingMessages.length>0;){var S=I();if(S==="break")break}}},{key:"rejectPendingMessages",value:function(){var R=this;this.pendingMessages.forEach(function(I){I.reject(new Is("Unable to connect: "+R.twilsock.getTerminationReason)),I.alreadyRejected=!0,clearTimeout(I.timeout)}),this.pendingMessages.splice(0,this.pendingMessages.length)}},{key:"actualSend",value:function(){var F=K.default(we.default.mark(function I(S){var O,$,Q,H,se,de,Oe,Qn;return we.default.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return $=S.to,Q=S.headers,H=S.body,se=(O=S.grant)!==null&&O!==void 0?O:this.config.activeGrant,de={host:$.host,path:$.path,method:$.method,params:$.params,headers:Q},Oe=new bi(se,Q["Content-Type"]||"application/json",de),pe.trace("Sending upstream message",Oe),fr.next=9,this.transport.sendWithReply(Oe,H);case 9:if(Qn=fr.sent,pe.trace("Received upstream message response",Qn),!(lg(Qn)&&!ug(Qn.header.http_status.code))){fr.next=13;break}throw new sg(Qn.header.http_status.code,Qn.header.http_status.status,Qn.body);case 13:return fr.abrupt("return",{status:Qn.header.http_status,headers:Qn.header.http_headers,body:Qn.body});case 14:case"end":return fr.stop()}},I,this)}));function R(I){return F.apply(this,arguments)}return R}()},{key:"send",value:function(R,I){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},O=arguments.length>3?arguments[3]:void 0,$=arguments.length>4?arguments[4]:void 0;if(this.twilsock.isTerminalState)return Promise.reject(new Is("Unable to connect: "+this.twilsock.getTerminationReason));var Q=jf(R,I,S,O,$);return this.twilsock.isConnected?this.actualSend(Q):this.saveMessage(Q)}}]),N}(),fg=function(){function N(){var F=this;Se.default(this,N),this._promise=new Promise(function(R,I){F._resolve=R,F._reject=I})}return ye.default(N,[{key:"promise",get:function(){return this._promise}},{key:"update",value:function(R){this._resolve(R)}},{key:"set",value:function(R){this._resolve(R)}},{key:"fail",value:function(R){this._reject(R)}}]),N}(),dg=function(){function N(F){Se.default(this,N),this.id=F}return ye.default(N,null,[{key:"create",value:function(R){if(R instanceof Object&&"storage_id"in R)return new N(R.storage_id);throw new cn('Field "storage_id" is missing')}}]),N}(),Uf=function(){function N(){return Se.default(this,N),Ie.default(this,"initializedFlag","twilio_twilsock_token_storage"),Ie.default(this,"tokenStoragePrefix","twilio_continuation_token_"),N._instance||(this.initialize(),N._instance=this),N._instance}return ye.default(N,[{key:"sessionStorage",value:function(){try{return t.sessionStorage}catch{return null}}},{key:"window",value:function(){try{return t.window}catch{return null}}},{key:"storeToken",value:function(R,I){this.canStore()&&this.sessionStorage.setItem(this.getKeyName(I),R)}},{key:"getStoredToken",value:function(R){return this.canStore()?this.sessionStorage.getItem(this.getKeyName(R)):null}},{key:"initialize",value:function(){var R=this;if(this.canStore()){var I=this.sessionStorage.getItem(this.initializedFlag);I&&this.clear(),this.sessionStorage.setItem(this.initializedFlag,"true");var S=this.sessionStorage.removeItem;this.window.addEventListener("unload",function(){S(R.initializedFlag)})}}},{key:"clear",value:function(){if(this.canStore()){for(var R=[],I=0;I<this.sessionStorage.length;I++){var S=this.sessionStorage.key(I);S&&S.indexOf(this.tokenStoragePrefix)===0&&R.push(S)}var O=this.sessionStorage.removeItem;R.forEach(function($){return O($)}),O(this.initializedFlag)}}},{key:"getKeyName",value:function(R){return"".concat(this.tokenStoragePrefix).concat(R)}},{key:"canStore",value:function(){return!!(this.sessionStorage&&this.sessionStorage.length&&this.window)}}]),N}();Ie.default(Uf,"_instance",null);var cl=new Uf,ei=function(){function N(F,R,I,S,O,$){Se.default(this,N),this.title=F,this.details=R,this.start=I,this.type=O,this.id=$,this.end=S}return ye.default(N,[{key:"toTelemetryEvent",value:function(){var R=new Date,I=this.start,S=this.end?this.end:R;if(S<I){var O=S;S=I,I=O}var $=I.getTime()-R.getTime(),Q=S.getTime()-R.getTime(),H=new rl($,Q,this.title,this.details,this.id,this.type);return H}}]),N}();e.TelemetryPoint=void 0,function(N){N[N.Start=0]="Start",N[N.End=1]="End"}(e.TelemetryPoint||(e.TelemetryPoint={})),e.EventSendingLimitation=void 0,function(N){N[N.MinEventsPortion=0]="MinEventsPortion",N[N.AnyEvents=1]="AnyEvents",N[N.AnyEventsIncludingUnfinished=2]="AnyEventsIncludingUnfinished"}(e.EventSendingLimitation||(e.EventSendingLimitation={}));var fl=function(){function N(F,R){Se.default(this,N),Ie.default(this,"minEventsPortionToSend",50),Ie.default(this,"maxEventsPortionToSend",100),Ie.default(this,"pendingEvents",new Map),Ie.default(this,"readyEvents",[]),Ie.default(this,"hasInitializationFinished",!1),Ie.default(this,"_canSendTelemetry",!1),this.config=F,this.packetInterface=R}return ye.default(N,[{key:"isTelemetryEnabled",get:function(){return this.config.confirmedCapabilities.has("telemetry.v1")}},{key:"canSendTelemetry",get:function(){return this._canSendTelemetry&&this.isTelemetryEnabled},set:function(R){pe.debug("TelemetryTracker.canSendTelemetry: ".concat(R," TelemetryTracker.isTelemetryEnabled: ").concat(this.isTelemetryEnabled)),this._canSendTelemetry&&!R&&(this.pendingEvents.clear(),this.readyEvents=[]),this._canSendTelemetry=R,R&&this.sendTelemetry(e.EventSendingLimitation.AnyEvents),R&&!this.hasInitializationFinished&&(this.hasInitializationFinished=!0)}},{key:"addTelemetryEvent",value:function(R){!this.canSendTelemetry&&this.hasInitializationFinished||this.readyEvents.push(R)}},{key:"addPartialEvent",value:function(R,I,S){pe.debug("Adding ".concat(S===e.TelemetryPoint.Start?"starting":"ending"," timepoint for '").concat(I,"' event"));var O=this.pendingEvents.has(I);if(S===e.TelemetryPoint.Start)O&&pe.debug("Overwriting starting point for '".concat(I,"' event")),this.pendingEvents.set(I,R);else{if(!O){pe.info("Could not find started event for '".concat(I,"' event"));return}this.addTelemetryEvent(this.merge(this.pendingEvents.get(I),R)),this.pendingEvents.delete(I)}}},{key:"getTelemetryToSend",value:function(R){return!this.canSendTelemetry||this.readyEvents.length==0?[]:R==e.EventSendingLimitation.MinEventsPortion&&this.readyEvents.length<this.minEventsPortionToSend?[]:this.getTelemetryPortion(R==e.EventSendingLimitation.AnyEventsIncludingUnfinished)}},{key:"getTelemetryPortion",value:function(R){var I=this,S=Math.min(this.readyEvents.length,this.maxEventsPortionToSend),O=this.readyEvents.splice(0,S);return R&&O.length<this.maxEventsPortionToSend&&this.pendingEvents.forEach(function($,Q){if(!(O.length>=I.maxEventsPortionToSend)){var H=I.pendingEvents.get(Q);I.pendingEvents.delete(Q),O.push(new ei("[UNFINISHED] ".concat(H.title),H.details,H.start,null,H.type,H.id))}}),O}},{key:"merge",value:function(R,I){return new ei(I.title?I.title:R.title,I.details?I.details:R.details,R.start,I.end,I.type?I.type:R.type,I.id?I.id:R.id)}},{key:"sendTelemetryIfMinimalPortionCollected",value:function(){this.sendTelemetry(e.EventSendingLimitation.MinEventsPortion)}},{key:"sendTelemetry",value:function(R){var I=this.getTelemetryToSend(R);if(I.length!==0)try{this.packetInterface.send(new il(I.map(function(S){return S.toTelemetryEvent()})))}catch(S){pe.debug("Error while sending ".concat(I.length," telemetry events due to ").concat(S,"; they will be resubmitted")),this.readyEvents=this.readyEvents.concat(I)}}}]),N}();function dl(N){var F=hg();return function(){var I=he.default(N),S;if(F){var O=he.default(this).constructor;S=Reflect.construct(I,arguments,O)}else S=I.apply(this,arguments);return oe.default(this,S)}}function hg(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Ti=ye.default(function N(){Se.default(this,N)});Ie.default(Ti,"TWILSOCK_CONNECT","twilsock.sdk.connect"),Ie.default(Ti,"TWILSOCK_INIT","twilsock.sdk.init"),e.TwilsockClient=function(N){X.default(R,N);var F=dl(R);function R(I,S,O){var $;Se.default(this,R),$=F.call(this),Ie.default(A.default($),"version",De),Ie.default(A.default($),"offlineStorageDeferred",new fg),O.continuationToken=O.continuationToken?O.continuationToken:cl.getStoredToken(S);var Q=$.config=new Ar(I,S,O);pe.setLevel(Q.logLevel);var H=new Lf(Q.url),se=new Yv(H,Q);return $.channel=new qv(H,se,Q),$.registrations=new ng(se),$.upstream=new cg(se,$.channel,Q),$.telemetryTracker=new fl(Q,se),$.channel.on("initialized",function(){return $.telemetryTracker.canSendTelemetry=!0}),H.on("disconnected",function(){return $.telemetryTracker.canSendTelemetry=!1}),$.registrations.on("registered",function(de){return $.emit("registered",de)}),$.channel.on("message",function(de,Oe){return setTimeout(function(){return $.emit("message",de,Oe)},0)}),$.channel.on("stateChanged",function(de){return setTimeout(function(){return $.emit("stateChanged",de)},0)}),$.channel.on("connectionError",function(de){return setTimeout(function(){return $.emit("connectionError",de)},0)}),$.channel.on("tokenAboutToExpire",function(){return setTimeout(function(){return $.emit("tokenAboutToExpire")},0)}),$.channel.on("tokenExpired",function(){return setTimeout(function(){return $.emit("tokenExpired")},0)}),$.channel.on("connected",function(){return $.registrations.updateRegistrations()}),$.channel.on("connected",function(){return $.upstream.sendPendingMessages()}),$.channel.on("connected",function(){return setTimeout(function(){return $.emit("connected")},0)}),$.channel.on("beforeConnect",function(){return $.telemetryTracker.addPartialEvent(new ei("Establish WebSocket connection","",new Date),Ti.TWILSOCK_CONNECT,e.TelemetryPoint.Start)}),$.channel.on("connected",function(){return $.telemetryTracker.addPartialEvent(new ei("Establish WebSocket connection","",new Date,new Date),Ti.TWILSOCK_CONNECT,e.TelemetryPoint.End)}),$.channel.on("beforeSendInit",function(){return $.telemetryTracker.addPartialEvent(new ei("Send Twilsock init","",new Date),Ti.TWILSOCK_INIT,e.TelemetryPoint.Start)}),$.channel.on("initialized",function(){return $.telemetryTracker.addPartialEvent(new ei("Send Twilsock init","Succeeded",new Date,new Date),Ti.TWILSOCK_INIT,e.TelemetryPoint.End)}),$.channel.on("sendInitFailed",function(){return $.telemetryTracker.addPartialEvent(new ei("Send Twilsock init","Failed",new Date,new Date),Ti.TWILSOCK_INIT,e.TelemetryPoint.End)}),$.channel.on("initialized",function(de){$.handleStorageId(S,de),cl.storeToken(de.continuationToken,S),setTimeout(function(){return $.emit("initialized",de)},0)}),$.channel.on("disconnected",function(){return setTimeout(function(){return $.emit("disconnected")},0)}),$.channel.on("disconnected",function(){return $.upstream.rejectPendingMessages()}),$.channel.on("disconnected",function(){return $.offlineStorageDeferred.fail(new cn("Client disconnected"))}),$.offlineStorageDeferred.promise.catch(function(){}),$}return ye.default(R,[{key:"emit",value:function(S){for(var O,$=arguments.length,Q=new Array($>1?$-1:0),H=1;H<$;H++)Q[H-1]=arguments[H];return pe.debug("Emitting ".concat(S.toString(),"(").concat(Q.map(function(se){return JSON.stringify(se)}).join(", "),")")),(O=ne.default(he.default(R.prototype),"emit",this)).call.apply(O,[this,S].concat(Q))}},{key:"handleStorageId",value:function(S,O){if(!O.offlineStorage)this.offlineStorageDeferred.fail(new cn("No offline storage id"));else if(O.offlineStorage.hasOwnProperty(S))try{this.offlineStorageDeferred.set(dg.create(O.offlineStorage[S])),pe.debug("Offline storage for '".concat(S,"' product: ").concat(JSON.stringify(O.offlineStorage[S]),"."))}catch($){this.offlineStorageDeferred.fail(new cn("Failed to parse offline storage for ".concat(S," ").concat(JSON.stringify(O.offlineStorage[S]),". ").concat($,".")))}else this.offlineStorageDeferred.fail(new cn("No offline storage id for '".concat(S,"' product: ").concat(JSON.stringify(O.offlineStorage))))}},{key:"storageId",value:function(){return this.offlineStorageDeferred.promise}},{key:"isConnected",get:function(){return this.channel.isConnected}},{key:"state",get:function(){return this.channel.state}},{key:"updateToken",value:function(){var I=K.default(we.default.mark(function O($){return we.default.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(pe.trace("updating token '".concat($,"'")),this.config.token!==$){H.next=3;break}return H.abrupt("return");case 3:return this.config.updateToken($),H.next=6,this.channel.updateToken($);case 6:return H.abrupt("return",H.sent);case 7:case"end":return H.stop()}},O,this)}));function S(O){return I.apply(this,arguments)}return S}()},{key:"setNotificationsContext",value:function(){var I=K.default(we.default.mark(function O($,Q){return we.default.wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return se.next=2,this.registrations.setNotificationsContext($,Q);case 2:case"end":return se.stop()}},O,this)}));function S(O,$){return I.apply(this,arguments)}return S}()},{key:"removeNotificationsContext",value:function(){var I=K.default(we.default.mark(function O($){return we.default.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,this.registrations.removeNotificationsContext($);case 2:case"end":return H.stop()}},O,this)}));function S(O){return I.apply(this,arguments)}return S}()},{key:"connect",value:function(){return this.channel.connect()}},{key:"disconnect",value:function(){var I=K.default(we.default.mark(function O(){return we.default.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return this.telemetryTracker.sendTelemetry(e.EventSendingLimitation.AnyEventsIncludingUnfinished),Q.next=3,this.channel.disconnect();case 3:return Q.abrupt("return",Q.sent);case 4:case"end":return Q.stop()}},O,this)}));function S(){return I.apply(this,arguments)}return S}()},{key:"get",value:function(){var I=K.default(we.default.mark(function O($,Q,H){return we.default.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return this.telemetryTracker.sendTelemetry(e.EventSendingLimitation.AnyEvents),de.next=3,this.upstream.send("GET",$,Q,void 0,H);case 3:return de.abrupt("return",de.sent);case 4:case"end":return de.stop()}},O,this)}));function S(O,$,Q){return I.apply(this,arguments)}return S}()},{key:"post",value:function(){var I=K.default(we.default.mark(function O($,Q,H,se){return we.default.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return this.telemetryTracker.sendTelemetry(e.EventSendingLimitation.AnyEvents),Oe.next=3,this.upstream.send("POST",$,Q,H,se);case 3:return Oe.abrupt("return",Oe.sent);case 4:case"end":return Oe.stop()}},O,this)}));function S(O,$,Q,H){return I.apply(this,arguments)}return S}()},{key:"put",value:function(){var I=K.default(we.default.mark(function O($,Q,H,se){return we.default.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return this.telemetryTracker.sendTelemetry(e.EventSendingLimitation.AnyEvents),Oe.next=3,this.upstream.send("PUT",$,Q,H,se);case 3:return Oe.abrupt("return",Oe.sent);case 4:case"end":return Oe.stop()}},O,this)}));function S(O,$,Q,H){return I.apply(this,arguments)}return S}()},{key:"delete",value:function(){var I=K.default(we.default.mark(function O($,Q,H,se){return we.default.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return this.telemetryTracker.sendTelemetry(e.EventSendingLimitation.AnyEvents),Oe.next=3,this.upstream.send("DELETE",$,Q,H,se);case 3:return Oe.abrupt("return",Oe.sent);case 4:case"end":return Oe.stop()}},O,this)}));function S(O,$,Q,H){return I.apply(this,arguments)}return S}()},{key:"addTelemetryEvent",value:function(S){this.telemetryTracker.addTelemetryEvent(S),this.telemetryTracker.sendTelemetryIfMinimalPortionCollected()}},{key:"addPartialTelemetryEvent",value:function(S,O,$){this.telemetryTracker.addPartialEvent(S,O,$),$===e.TelemetryPoint.End&&this.telemetryTracker.sendTelemetryIfMinimalPortionCollected()}}]),R}(x.ReplayEventEmitter),e.TwilsockClient=Qe([m.validateConstructorTypes(m.nonEmptyString,m.nonEmptyString,[m.pureObject,"undefined",m.literal(null)]),Tn("design:paramtypes",[String,String,Object])],e.TwilsockClient);var bo=function(){function N(F){Se.default(this,N),this.product=F,this.type="ers",this.notification_protocol_version=0,this.message_types=[]}return ye.default(N,[{key:"populateInitRegistrations",value:function(R){var I=new Set(this.message_types);for(var S in R)I.add(R[S]);this.message_types=Array.from(I)}}]),N}();e.InitRegistration=bo,e.TelemetryEventDescription=ei,e.TelemetryTracker=fl,e.TransportUnavailableError=Is,e.Twilsock=e.TwilsockClient,e.TwilsockError=cn})(tM);var Sx=Pt,Rfe=We,xfe=wt,$fe=Ne,u_=of,Pfe=sf,Afe=Zc,Ofe=Nn,Nfe=ef,zo=Object.assign,bx=Object.defineProperty,Mfe=Rfe([].concat),Lfe=!zo||$fe(function(){if(Sx&&zo({b:1},zo(bx({},"a",{enumerable:!0,get:function(){bx(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},t={},n=Symbol("assign detection"),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(i){t[i]=i}),zo({},e)[n]!==7||u_(zo({},t)).join("")!==r})?function(t,n){for(var r=Ofe(t),i=arguments.length,s=1,a=Pfe.f,l=Afe.f;i>s;)for(var u=Nfe(arguments[s++]),f=a?Mfe(u_(u),a(u)):u_(u),d=f.length,p=0,v;d>p;)v=f[p++],(!Sx||xfe(l,u,v))&&(r[v]=u[v]);return r}:zo,Dfe=Ze,Tx=Lfe;Dfe({target:"Object",stat:!0,arity:2,forced:Object.assign!==Tx},{assign:Tx});var Ffe=Ze,VL=We,jfe=Xr,Ufe=Nn,Ex=Mn,Bfe=bb,kx=Gn,Nb=Ne,Wfe=wL,zfe=gv,Ix=SL,Hfe=bL,Cx=Vu,Rx=TL,Gs=[],xx=VL(Gs.sort),Vfe=VL(Gs.push),qfe=Nb(function(){Gs.sort(void 0)}),Gfe=Nb(function(){Gs.sort(null)}),Kfe=zfe("sort"),qL=!Nb(function(){if(Cx)return Cx<70;if(!(Ix&&Ix>3)){if(Hfe)return!0;if(Rx)return Rx<603;var e="",t,n,r,i;for(t=65;t<76;t++){switch(n=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(i=0;i<47;i++)Gs.push({k:n+i,v:r})}for(Gs.sort(function(s,a){return a.v-s.v}),i=0;i<Gs.length;i++)n=Gs[i].k.charAt(0),e.charAt(e.length-1)!==n&&(e+=n);return e!=="DGBEFHACIJK"}}),Qfe=qfe||!Gfe||!Kfe||!qL,Jfe=function(e){return function(t,n){return n===void 0?-1:t===void 0?1:e!==void 0?+e(t,n)||0:kx(t)>kx(n)?1:-1}};Ffe({target:"Array",proto:!0,forced:Qfe},{sort:function(t){t!==void 0&&jfe(t);var n=Ufe(this);if(qL)return t===void 0?xx(n):xx(n,t);var r=[],i=Ex(n),s,a;for(a=0;a<i;a++)a in n&&Vfe(r,n[a]);for(Wfe(r,Jfe(t)),s=Ex(r),a=0;a<s;)n[a]=r[a++];for(;a<i;)Bfe(n,a++);return n}});/*
@license
The following license applies to all parts of this software except as
documented below.

    Copyright (c) 2016, Twilio, inc.
    All rights reserved.

    Redistribution and use in source and binary forms, with or without
    modification, are permitted provided that the following conditions are
    met:

      1. Redistributions of source code must retain the above copyright
         notice, this list of conditions and the following disclaimer.

      2. Redistributions in binary form must reproduce the above copyright
         notice, this list of conditions and the following disclaimer in
         the documentation and/or other materials provided with the
         distribution.

      3. Neither the name of Twilio nor the names of its contributors may
         be used to endorse or promote products derived from this software
         without specific prior written permission.

    THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
    "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
    LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
    A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
    HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
    SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
    LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
    DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
    THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
    (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
    OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

This software includes loglevel under the following license.

    Copyright (c) 2013 Tim Perry

    Permission is hereby granted, free of charge, to any person
    obtaining a copy of this software and associated documentation
    files (the "Software"), to deal in the Software without
    restriction, including without limitation the rights to use,
    copy, modify, merge, publish, distribute, sublicense, and/or sell
    copies of the Software, and to permit persons to whom the
    Software is furnished to do so, subject to the following
    conditions:

    The above copyright notice and this permission notice shall be
    included in all copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
    OTHER DEALINGS IN THE SOFTWARE.

This software includes Backoff library under the following license

    Copyright (C) 2012 Mathieu Turcotte

    Permission is hereby granted, free of charge, to any person obtaining a copy of
    this software and associated documentation files (the "Software"), to deal in
    the Software without restriction, including without limitation the rights to
    use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies
    of the Software, and to permit persons to whom the Software is furnished to do
    so, subject to the following conditions:

    The above copyright notice and this permission notice shall be included in all
    copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
    SOFTWARE.

This software includes Event-to-Promise library under the following license

    Copyright (c) 2014, Julien Fontanet <julien.fontanet@isonoe.net>.

    Permission to use, copy, modify, and/or distribute this software for any purpose
    with or without fee is hereby granted, provided that the above copyright notice
    and this permission notice appear in all copies.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND
    FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS
    OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
    TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF
    THIS SOFTWARE.

*/Object.defineProperty(Rr,"__esModule",{value:!0});var Yfe=f2,Xfe=pf,Zfe=vf,ede=gf,tde=mf,nde=yf,rde=vo,ide=mv,sde=lN,ade=po,te=bn,Op=tM,ode=AL,ude=no,lde=SN,GL=Zu,KL=yM,cde=ub,Mb=Fv,fde=ib,dde=HL;function cr(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}function Lb(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(n){if(n!=="default"){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}}),t.default=e,Object.freeze(t)}var ae=cr(Yfe),tt=cr(Xfe),nt=cr(Zfe),Fi=cr(ede),Kn=cr(tde),_a=cr(nde),Qt=cr(rde),et=cr(ide),D=cr(sde),Br=cr(ade),hde=cr(ode),pde=Lb(ude),ic=cr(lde),vde=Lb(KL),Cf=cr(cde),gde=cr(fde),wh=Lb(dde);function it(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if((typeof Reflect>"u"?"undefined":Br.default(Reflect))==="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(s=(i<3?a(s):i>3?a(t,n,s):a(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}function ie(e,t){if((typeof Reflect>"u"?"undefined":Br.default(Reflect))==="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}var Du=function(){function e(t){tt.default(this,e),this.base=t,this.args=new Array,this.paths=new Array}return nt.default(e,[{key:"pathSegment",value:function(n){return this.paths.push(encodeURIComponent(n)),this}},{key:"queryParam",value:function(n,r){return typeof r<"u"&&this.args.push(encodeURIComponent(n)+"="+encodeURIComponent(r)),this}},{key:"build",value:function(){var n=this.base;return this.paths.length&&(n+="/"+this.paths.join("/")),this.args.length&&(n+="?"+this.args.join("&")),n}}]),e}();function QL(e){var t=mde();return function(){var r=Qt.default(e),i;if(t){var s=Qt.default(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return _a.default(this,i)}}function mde(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var lr=function(e){Kn.default(n,e);var t=QL(n);function n(r){var i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return tt.default(this,n),i=t.call(this),i.name=i.constructor.name,i.message="".concat(r," (status: ").concat(s,", code: ").concat(a,")"),i.status=s,i.code=a,i}return nt.default(n)}(hde.default(Error)),yde=function(e){Kn.default(n,e);var t=QL(n);function n(r){var i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,l=arguments.length>3?arguments[3]:void 0;return tt.default(this,n),i=t.call(this,r,s,a),i.body=l,i}return nt.default(n)}(lr);function pi(e){return JSON.parse(JSON.stringify(e))}function JL(e){var t=e===void 0||Db(e);if(!t)throw new lr("Invalid pageSize parameter. Expected a positive integer, was '".concat(e,"'."),400,20007)}function _de(e){return!isNaN(parseInt(e))&&isFinite(e)}function Db(e){return _de(e)&&e>0}var js=pde.getLogger("twilio-sync");function ql(e,t){return["".concat(new Date().toISOString()," Sync ").concat(e,":")].concat(Array.from(t))}var st={setLevel:function(t){js.setLevel(t)},trace:function(){if(js.getLevel()==js.levels.TRACE){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];js.debug.apply(null,ql("T",n))}},debug:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];js.debug.apply(null,ql("D",n))},info:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];js.info.apply(null,ql("I",n))},warn:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];js.warn.apply(null,ql("W",n))},error:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];js.error.apply(null,ql("E",n))}},wde="/v4/Subscriptions",Sde="/v3/Maps",bde="/v3/Lists",Tde="/v3/Documents",Ede="/v3/Streams",kde="/v3/Insights";function Ide(e,t,n){return e&&typeof e[t]<"u"?e[t]:n}var Cde=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};tt.default(this,e);var n=t.region||"us1",r="https://cds.".concat(n,".twilio.com"),i=t.cdsUri||r;this.settings={subscriptionsUri:i+wde,documentsUri:i+Tde,listsUri:i+bde,mapsUri:i+Sde,streamsUri:i+Ede,insightsUri:i+kde,sessionStorageEnabled:Ide(t.Sync,"enableSessionStorage",!0),productId:t.productId}}return nt.default(e,[{key:"subscriptionsUri",get:function(){return this.settings.subscriptionsUri}},{key:"documentsUri",get:function(){return this.settings.documentsUri}},{key:"listsUri",get:function(){return this.settings.listsUri}},{key:"mapsUri",get:function(){return this.settings.mapsUri}},{key:"streamsUri",get:function(){return this.settings.streamsUri}},{key:"insightsUri",get:function(){return this.settings.insightsUri}},{key:"backoffConfig",get:function(){return this.settings.backoffConfig||{}}},{key:"sessionStorageEnabled",get:function(){return this.settings.sessionStorageEnabled}},{key:"productId",get:function(){return this.settings.productId}}]),e}();function Gl(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Rde(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(f){throw f},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,l;return{s:function(){n=n.call(e)},n:function(){var f=n.next();return s=f.done,f},e:function(f){a=!0,l=f},f:function(){try{!s&&n.return!=null&&n.return()}finally{if(a)throw l}}}}function Rde(e,t){if(e){if(typeof e=="string")return $x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $x(e,t)}}function $x(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xde=function(){function e(t){tt.default(this,e),this.localObject=t,this.pendingCorrelationId=null,this.pendingAction=null,this.established=!1,this.retryCount=0}return nt.default(e,[{key:"sid",get:function(){return this.localObject.sid}},{key:"type",get:function(){return this.localObject.type}},{key:"lastEventId",get:function(){return this.localObject.lastEventId}},{key:"indexName",get:function(){return this.localObject.indexName}},{key:"queryString",get:function(){return this.localObject.queryString}},{key:"isEstablished",get:function(){return this.established}},{key:"update",value:function(n,r){this.localObject._update(n,r)}},{key:"updatePending",value:function(n,r){this.pendingAction=n,this.pendingCorrelationId=r}},{key:"reset",value:function(){this.updatePending(null,null),this.retryCount=0,this.established=!1,this.setSubscriptionState("none")}},{key:"markAsFailed",value:function(n){this.rejectedWithError=n.error,this.updatePending(null,null),this.localObject.reportFailure(new lr("Failed to subscribe on service events: ".concat(n.error.message),n.error.status,n.error.code))}},{key:"complete",value:function(n){this.updatePending(null,null),this.established=!0,this.localObject._advanceLastEventId(n)}},{key:"setSubscriptionState",value:function(n){this.localObject._setSubscriptionState(n)}}]),e}(),$de=function(){function e(t){var n=this;tt.default(this,e),et.default(this,"isConnected",!1),et.default(this,"maxBatchSize",100),et.default(this,"subscriptionTtlTimer",null),et.default(this,"pendingPokeReason",null),this.services=t,this.subscriptions=new Map,this.persisted=new Map,this.latestPokeResponseArrivalTimestampByCorrelationId=new Map;var r={randomisationFactor:.2,initialDelay:100,maxDelay:2*60*1e3};this.backoff=GL.Backoff.exponential(Object.assign(r,this.services.config.backoffConfig)),this.backoff.on("ready",function(){var i=n.getSubscriptionUpdateBatch(),s=i.action,a=i.subscriptions;s?n.applyNewSubscriptionUpdateBatch(s,a):(n.backoff.reset(),st.debug("All subscriptions resolved."))})}return nt.default(e,[{key:"getSubscriptionUpdateBatch",value:function(){function n(s,a,l,u){var f=[],d=Gl(s),p;try{for(d.s();!(p=d.n()).done;){var v=ic.default(p.value,2),m=v[0],y=v[1],E=a.get(m);if(!E&&l!==y.pendingAction&&!y.rejectedWithError&&(f.push(y),u&&f.length>=u))break}}catch(b){d.e(b)}finally{d.f()}return f}var r=n(this.subscriptions,this.persisted,"establish",this.maxBatchSize);if(r.length>0)return{action:"establish",subscriptions:r};var i=n(this.persisted,this.subscriptions,"cancel",this.maxBatchSize);return i.length>0?{action:"cancel",subscriptions:i}:{action:null,subscriptions:null}}},{key:"persist",value:function(){this.backoff.backoff()}},{key:"applyNewSubscriptionUpdateBatch",value:function(){var t=ae.default(D.default.mark(function r(i,s){var a=this,l,u,f,d,p,v,m,y,E,b,w,T,x,M,W,z;return D.default.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(this.isConnected){A.next=4;break}return st.debug("Twilsock connection (required for subscription) not ready; waiting"),this.backoff.reset(),A.abrupt("return");case 4:s=this.processLocalActions(i,s),l=new Date().getTime(),u=Gl(s);try{for(u.s();!(f=u.n()).done;)d=f.value,this.recordActionAttemptOn(d,i,l)}catch(ne){u.e(ne)}finally{u.f()}return p=this.pendingPokeReason,this.pendingPokeReason=null,A.prev=10,A.next=13,this.request(i,l,p,s);case 13:v=A.sent,m=v.body.max_batch_size,!isNaN(parseInt(m))&&isFinite(m)&&m>0&&(this.maxBatchSize=m),this.subscriptionTtlTimer||(y=v.body.ttl_in_s,E=!isNaN(parseFloat(y))&&isFinite(y),b=E&&y>0,b&&(this.subscriptionTtlTimer=setTimeout(function(){return a.onSubscriptionTtlElapsed()},y*1e3))),i==="establish"&&(w=v.body.estimated_delivery_in_ms,T=!isNaN(parseFloat(w))&&isFinite(w),x=T&&w>0,x?setTimeout(function(){return a.verifyPokeDelivery(l,w,s)},w):st.error("Invalid timeout: ".concat(w)),s.filter(function(ne){return ne.pendingCorrelationId===l}).forEach(function(ne){return ne.setSubscriptionState("response_in_flight")})),this.backoff.reset(),A.next=26;break;case 21:A.prev=21,A.t0=A.catch(10),M=Gl(s);try{for(M.s();!(W=M.n()).done;)z=W.value,this.recordActionFailureOn(z,i)}catch(ne){M.e(ne)}finally{M.f()}A.t0 instanceof Op.TransportUnavailableError?(st.debug("Twilsock connection (required for subscription) not ready (c:".concat(l,"); waiting")),this.backoff.reset()):(st.debug("Failed an attempt to ".concat(i," subscriptions (c:").concat(l,"); retrying"),A.t0),this.persist());case 26:case"end":return A.stop()}},r,this,[[10,21]])}));function n(r,i){return t.apply(this,arguments)}return n}()},{key:"verifyPokeDelivery",value:function(n,r,i){var s=this,a=this.latestPokeResponseArrivalTimestampByCorrelationId.get(n),l=a?new Date().getTime()-a:r;if(l>=r)i.filter(function(f){return f.pendingCorrelationId===n}).forEach(function(f){f.updatePending(null,null),f.retryCount++,s.persisted.delete(f.sid)}),this.persist(),this.latestPokeResponseArrivalTimestampByCorrelationId.delete(n);else{var u=r-l;setTimeout(function(){return s.verifyPokeDelivery(n,r,i)},u)}}},{key:"processLocalActions",value:function(n,r){return n==="cancel"?r.filter(function(i){return!i.rejectedWithError}):r}},{key:"recordActionAttemptOn",value:function(n,r,i){if(n.setSubscriptionState("request_in_flight"),r==="establish")this.persisted.set(n.sid,n),n.updatePending(r,i);else{var s=this.persisted.get(n.sid);s&&s.updatePending(r,i)}}},{key:"recordActionFailureOn",value:function(n,r){n.setSubscriptionState("none"),n.updatePending(null,null),r==="establish"&&this.persisted.delete(n.sid)}},{key:"request",value:function(n,r,i,s){var a=s.map(function(f){return{object_sid:f.sid,object_type:f.type,last_event_id:n==="establish"?f.lastEventId:void 0,index_name:n==="establish"?f.indexName:void 0,query_string:n==="establish"?f.queryString:void 0}}),l=s.filter(function(f){return f.retryCount>0}).length;st.debug("Attempting '".concat(n,"' request (c:").concat(r,"):"),a);var u={event_protocol_version:4,action:n,correlation_id:r,retried_requests:l,ttl_in_s:-1,requests:a};return i==="ttl"&&(u.reason=i),this.services.network.post(this.services.config.subscriptionsUri,u)}},{key:"add",value:function(n,r){st.debug("Establishing intent to subscribe to ".concat(n));var i=this.subscriptions.get(n);i&&r&&i.lastEventId===r.lastEventId||(this.persisted.delete(n),this.subscriptions.set(n,new xde(r)),this.persist())}},{key:"remove",value:function(n){st.debug("Establishing intent to unsubscribe from ".concat(n));var r=this.subscriptions.delete(n);r&&this.persist()}},{key:"acceptMessage",value:function(n,r){st.trace("Subscriptions received",n);var i=n.event_type,s=typeof n.events<"u"?n.events:[n.event],a=n.correlation_id;a&&this.latestPokeResponseArrivalTimestampByCorrelationId.set(a,new Date().getTime());var l=Gl(s),u;try{for(l.s();!(u=l.n()).done;){var f=u.value,d=void 0;switch(n.event_type){case"subscription_established":this.applySubscriptionEstablishedMessage(f,a);break;case"subscription_canceled":this.applySubscriptionCancelledMessage(f,a);break;case"subscription_failed":this.applySubscriptionFailedMessage(f,a);break;case(d=i.match(/^(?:map|list|document|stream|live_query)_/)||{}).input:{var p=void 0;switch(d[0]){case"map_":p=f.map_sid;break;case"list_":p=f.list_sid;break;case"document_":p=f.document_sid;break;case"stream_":p=f.stream_sid;break;case"live_query_":p=f.query_id,r=!1,n.strictly_ordered===!0&&(r=!0);break;default:p=void 0}this.applyEventToSubscribedEntity(p,f,i,r);break}default:st.debug("Dropping unknown message type ".concat(i));break}}}catch(v){l.e(v)}finally{l.f()}}},{key:"applySubscriptionEstablishedMessage",value:function(n,r){var i=n.object_sid,s=this.persisted.get(n.object_sid);s&&s.pendingCorrelationId===r?n.replay_status==="interrupted"?(st.debug("Event Replay for subscription to ".concat(i," (c:").concat(r,") interrupted; continuing eagerly.")),s.updatePending(null,null),this.persisted.delete(s.sid),this.backoff.reset()):n.replay_status==="completed"&&(st.debug("Event Replay for subscription to ".concat(i," (c:").concat(r,") completed. Subscription is ready.")),s.complete(n.last_event_id),this.persisted.set(n.object_sid,s),s.setSubscriptionState("established"),this.backoff.reset()):st.debug("Late message for ".concat(n.object_sid," (c:").concat(r,") dropped.")),this.persist()}},{key:"applySubscriptionCancelledMessage",value:function(n,r){var i=this.persisted.get(n.object_sid);i&&i.pendingCorrelationId===r?(i.updatePending(null,null),i.setSubscriptionState("none"),this.persisted.delete(n.object_sid)):st.debug("Late message for ".concat(n.object_sid," (c:").concat(r,") dropped.")),this.persist()}},{key:"applySubscriptionFailedMessage",value:function(n,r){var i=n.object_sid,s=this.subscriptions.get(i),a=this.persisted.get(i);s&&a?a.pendingCorrelationId===r&&(st.error("Failed to subscribe on ".concat(a.sid),n.error),a.markAsFailed(n),a.setSubscriptionState("none")):!s&&a&&(this.persisted.delete(i),a.setSubscriptionState("none")),this.persist()}},{key:"applyEventToSubscribedEntity",value:function(n,r,i,s){var a=this;if(n){s=s||function(){var u=a.persisted.get(n);return u&&u.isEstablished}();var l=this.subscriptions.get(n);l?(r.type=i,l.update(r,s)):st.debug("Message dropped for SID '".concat(n,"', for which there is no subscription."))}}},{key:"onConnectionStateChanged",value:function(n){this.isConnected=n,n&&this.poke("reconnect")}},{key:"onSubscriptionTtlElapsed",value:function(){this.isConnected&&this.poke("ttl")}},{key:"poke",value:function(n){st.debug("Triggering event replay for all subscriptions, reason=".concat(n)),this.pendingPokeReason=n,this.subscriptionTtlTimer&&(clearTimeout(this.subscriptionTtlTimer),this.subscriptionTtlTimer=null);var r=[],i=Gl(this.persisted.values()),s;try{for(i.s();!(s=i.n()).done;){var a=s.value;a.reset(),a.rejectedWithError&&r.push(a)}}catch(d){i.e(d)}finally{i.f()}this.persisted.clear();for(var l=0,u=r;l<u.length;l++){var f=u[l];this.persisted.set(f.sid,f)}this.persist()}},{key:"shutdown",value:function(){this.backoff.reset(),this.subscriptions.clear()}}]),e}(),Pde=4e3,Ade=6e4,Ode=9e4,Nde=.2;function Px(e){if(e.body&&e.body.message)return e.body.message;switch(e.status){case 429:return"Throttled by server";case 404:return"Not found from server";default:return"Error from server"}}function Ax(e){return e.body?e.body.code:0}function Kl(e){return e.status===409?new yde(Px(e),e.status,Ax(e),e.body):e.status?new lr(Px(e),e.status,Ax(e)):e instanceof Op.TransportUnavailableError?e:new lr(e.message,0,0)}var Mde=function(){function e(t,n,r){tt.default(this,e),this.clientInfo=t,this.config=n,this.transport=r}return nt.default(e,[{key:"createHeaders",value:function(){return{"Content-Type":"application/json","Twilio-Sync-Client-Info":JSON.stringify(this.clientInfo),"Twilio-Request-Id":"RQ"+vde.v4().replace(/-/g,"")}}},{key:"backoffConfig",value:function(){return Object.assign({min:Pde,max:Ade,maxAttemptsTime:Ode,randomness:Nde},this.config.backoffConfig)}},{key:"executeWithRetry",value:function(n){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return new Promise(function(s,a){var l=[502,503,504];i&&l.push(429);var u=new GL.Retrier(r.backoffConfig());u.on("attempt",function(){n().then(function(f){return u.succeeded(f)}).catch(function(f){if(l.includes(f.status)){var d=parseInt(f.headers?f.headers["Retry-After"]:null);u.failed(Kl(f),isNaN(d)?null:d*1e3)}else f.message==="Twilsock disconnected"?u.failed(Kl(f)):(u.removeAllListeners(),u.cancel(),a(Kl(f)))})}),u.on("succeeded",function(f){s(f)}),u.on("cancelled",function(f){return a(Kl(f))}),u.on("failed",function(f){return a(Kl(f))}),u.start()})}},{key:"get",value:function(n){var r=this,i=this.createHeaders();return st.debug("GET",n,"ID:",i["Twilio-Request-Id"]),this.executeWithRetry(function(){return r.transport.get(n,i,r.config.productId)},!0)}},{key:"post",value:function(n,r,i){var s=this,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,l=this.createHeaders();return typeof i<"u"&&i!==null&&(l["If-Match"]=i),st.debug("POST",n,"ID:",l["Twilio-Request-Id"]),this.executeWithRetry(function(){return s.transport.post(n,l,r,s.config.productId)},a)}},{key:"put",value:function(n,r,i){var s=this,a=this.createHeaders();return typeof i<"u"&&i!==null&&(a["If-Match"]=i),st.debug("PUT",n,"ID:",a["Twilio-Request-Id"]),this.executeWithRetry(function(){return s.transport.put(n,a,r,s.config.productId)},!1)}},{key:"delete",value:function(n){var r=this,i=this.createHeaders();return st.debug("DELETE",n,"ID:",i["Twilio-Request-Id"]),this.executeWithRetry(function(){return r.transport.delete(n,i,r.config.productId)},!1)}}]),e}(),Lde=function(){function e(t,n){tt.default(this,e),this.config=t,this.storageId=null;try{this.storage=n||sessionStorage}catch{}}return nt.default(e,[{key:"storageKey",value:function(n,r){return"".concat(this.storageId,"::").concat(n,"::").concat(r)}},{key:"isReady",get:function(){return this.config.sessionStorageEnabled&&!!this.storageId}},{key:"updateStorageId",value:function(n){this.storageId=n}},{key:"store",value:function(n,r,i){return this.isReady?this._store(this.storageKey(n,r),i):null}},{key:"read",value:function(n,r){return this.isReady?this._read(this.storageKey(n,r)):null}},{key:"remove",value:function(n,r,i){if(!this.isReady)return null;try{this.storage.removeItem(this.storageKey(n,r)),i&&this.storage.removeItem(this.storageKey(n,i))}catch{}}},{key:"update",value:function(n,r,i,s){if(!this.isReady)return null;this._apply(this.storageKey(n,r),s),i&&this._apply(this.storageKey(n,i),s)}},{key:"_store",value:function(n,r){try{this.storage.setItem(n,JSON.stringify(r))}catch{}}},{key:"_read",value:function(n){try{var r=this.storage.getItem(n);if(r)return JSON.parse(r)}catch{}return null}},{key:"_apply",value:function(n,r){var i=this._read(n);if(!i)return!1;this._store(n,Object.assign(i,r))}}]),e}();function Dde(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Fde(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(f){throw f},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,l;return{s:function(){n=n.call(e)},n:function(){var f=n.next();return s=f.done,f},e:function(f){a=!0,l=f},f:function(){try{!s&&n.return!=null&&n.return()}finally{if(a)throw l}}}}function Fde(e,t){if(e){if(typeof e=="string")return Ox(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ox(e,t)}}function Ox(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Rf=function(){function e(t,n){tt.default(this,e),this.services=t,this.removalHandler=n,this.subscriptionState="none",this._attachedListeners=new Map}return nt.default(e,[{key:"_advanceLastEventId",value:function(n,r){}},{key:"reportFailure",value:function(n){n.status===404?this.onRemoved(!1):this.broadcastEventToListeners("failure",n)}},{key:"_subscribe",value:function(){this.services.router._subscribe(this.sid,this)}},{key:"_unsubscribe",value:function(){this.services.router._unsubscribe(this.sid)}},{key:"_setSubscriptionState",value:function(n){this.subscriptionState=n,this.broadcastEventToListeners("_subscriptionStateChanged",n)}},{key:"close",value:function(){this._unsubscribe(),this.removalHandler!=null&&this.removalHandler(this.type,this.sid,this.uniqueName)}},{key:"attach",value:function(n){var r=n.listenerUuid,i=this._attachedListeners.get(r);i||(this._attachedListeners.size||this._subscribe(),this._attachedListeners.set(r,n))}},{key:"detach",value:function(n){this._attachedListeners.delete(n),this._attachedListeners.size||this.close()}},{key:"broadcastEventToListeners",value:function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];var a=Dde(this._attachedListeners.values()),l;try{for(a.s();!(l=a.n()).done;){var u=l.value;u.emit.apply(u,[n].concat(i))}}catch(f){a.e(f)}finally{a.f()}}}]),e}(),YL=function(){function e(t){tt.default(this,e),et.default(this,"queuedRequests",[]),et.default(this,"isRequestInFlight",!1),this.inputMergingFunction=t}return nt.default(e,[{key:"add",value:function(n,r){var i=this,s=new Promise(function(a,l){return i.queuedRequests.push({input:n,requestFunction:r,resolve:a,reject:l})});return this.wakeupQueue(),s}},{key:"squashAndAdd",value:function(n,r){var i=this.queuedRequests;this.queuedRequests=[];var s;i.length>0?(s=i.map(function(l){return l.input}).reduce(this.inputMergingFunction),s=this.inputMergingFunction(s,n)):s=n;var a=this.add(s,r);return i.forEach(function(l){return a.then(l.resolve,l.reject)}),a}},{key:"isEmpty",value:function(){return this.queuedRequests.length===0&&!this.isRequestInFlight}},{key:"wakeupQueue",value:function(){var n=this;if(!(this.queuedRequests.length===0||this.isRequestInFlight)){var r=this.queuedRequests.shift();this.isRequestInFlight=!0,r.requestFunction(r.input).then(r.resolve,r.reject).then(function(i){n.isRequestInFlight=!1,n.wakeupQueue()})}}}]),e}(),XL=function(){function e(t){tt.default(this,e),et.default(this,"queueByNamespaceKey",new Map),this.inputReducer=t}return nt.default(e,[{key:"add",value:function(){var t=ae.default(D.default.mark(function r(i,s,a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",this.invokeQueueMethod(i,function(f){return f.add(s,a)}));case 1:case"end":return u.stop()}},r,this)}));function n(r,i,s){return t.apply(this,arguments)}return n}()},{key:"squashAndAdd",value:function(){var t=ae.default(D.default.mark(function r(i,s,a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",this.invokeQueueMethod(i,function(f){return f.squashAndAdd(s,a)}));case 1:case"end":return u.stop()}},r,this)}));function n(r,i,s){return t.apply(this,arguments)}return n}()},{key:"invokeQueueMethod",value:function(){var t=ae.default(D.default.mark(function r(i,s){var a,l;return D.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return this.queueByNamespaceKey.has(i)||this.queueByNamespaceKey.set(i,new YL(this.inputReducer)),a=this.queueByNamespaceKey.get(i),l=s(a),this.queueByNamespaceKey.get(i).isEmpty()&&this.queueByNamespaceKey.delete(i),f.abrupt("return",l);case 5:case"end":return f.stop()}},r,this)}));function n(r,i){return t.apply(this,arguments)}return n}()}]),e}();function jde(e){var t=Ude();return function(){var r=Qt.default(e),i;if(t){var s=Qt.default(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return _a.default(this,i)}}function Ude(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var xf=function(e){Kn.default(n,e);var t=jde(n);function n(){var r;return tt.default(this,n),r=t.call(this),r.closed=!1,r.uuid=KL.v4(),r}return nt.default(n,[{key:"listenerUuid",get:function(){return this.uuid}},{key:"close",value:function(){this.removeAllListeners(),this.closed=!0}},{key:"ensureNotClosed",value:function(){if(this.closed)throw new Error("Invalid operation on closed object")}}]),n}(Mb.ReplayEventEmitter);function ZL(e){var t=Bde();return function(){var r=Qt.default(e),i;if(t){var s=Qt.default(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return _a.default(this,i)}}function Bde(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var aS=function(e){Kn.default(n,e);var t=ZL(n);function n(r,i,s){var a;tt.default(this,n),a=t.call(this,r,s),et.default(Fi.default(a),"isDeleted",!1);var l=function(f,d){return typeof d.ttl=="number"?{ttl:d.ttl}:f};return a.updateMergingQueue=new YL(l),a.descriptor=i,a.descriptor.data=a.descriptor.data||{},a.descriptor.date_updated=new Date(a.descriptor.date_updated),a}return nt.default(n,[{key:"uri",get:function(){return this.descriptor.url}},{key:"revision",get:function(){return this.descriptor.revision}},{key:"lastEventId",get:function(){return this.descriptor.last_event_id}},{key:"dateExpires",get:function(){return this.descriptor.date_expires}},{key:"type",get:function(){return"document"}},{key:"indexName",get:function(){}},{key:"queryString",get:function(){}},{key:"sid",get:function(){return this.descriptor.sid}},{key:"data",get:function(){return this.descriptor.data}},{key:"dateUpdated",get:function(){return this.descriptor.date_updated}},{key:"uniqueName",get:function(){return this.descriptor.unique_name||null}},{key:"_update",value:function(i){switch(i.date_created=new Date(i.date_created),i.type){case"document_updated":if(i.id<=this.lastEventId){st.trace("Document update skipped, current:",this.lastEventId,", remote:",i.id);break}var s=this.descriptor.data!==void 0?pi(this.descriptor.data):null;this.descriptor.last_event_id=i.id,this.descriptor.revision=i.document_revision,this.descriptor.date_updated=i.date_created,this.descriptor.data=i.document_data,this.broadcastEventToListeners("updated",{data:i.document_data,isLocal:!1,previousData:s}),this.services.storage.update(this.type,this.sid,this.uniqueName,{last_event_id:i.id,revision:i.document_revision,date_updated:i.date_created,data:i.document_data});break;case"document_removed":this.onRemoved(!1);break}}},{key:"set",value:function(){var r=ae.default(D.default.mark(function s(a,l){var u=this,f;return D.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return f=l||{},p.abrupt("return",this.updateMergingQueue.squashAndAdd(f,function(v){return u._setUnconditionally(a,v.ttl)}));case 2:case"end":return p.stop()}},s,this)}));function i(s,a){return r.apply(this,arguments)}return i}()},{key:"mutate",value:function(){var r=ae.default(D.default.mark(function s(a,l){var u=this,f;return D.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return f=l||{},p.abrupt("return",this.updateMergingQueue.add(f,function(v){return u._setWithIfMatch(a,v.ttl)}));case 2:case"end":return p.stop()}},s,this)}));function i(s,a){return r.apply(this,arguments)}return i}()},{key:"update",value:function(){var r=ae.default(D.default.mark(function s(a,l){return D.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this.mutate(function(d){return Object.assign(d,a)},l));case 1:case"end":return f.stop()}},s,this)}));function i(s,a){return r.apply(this,arguments)}return i}()},{key:"setTtl",value:function(){var r=ae.default(D.default.mark(function s(a){var l;return D.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this._postUpdateToServer({ttl:a});case 2:l=f.sent,this.descriptor.date_expires=l.date_expires;case 4:case"end":return f.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"_setUnconditionally",value:function(){var r=ae.default(D.default.mark(function s(a,l){var u;return D.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this._postUpdateToServer({data:a,revision:void 0,ttl:l});case 2:return u=d.sent,this._handleSuccessfulUpdateResult(u),d.abrupt("return",this.descriptor.data);case 5:case"end":return d.stop()}},s,this)}));function i(s,a){return r.apply(this,arguments)}return i}()},{key:"_setWithIfMatch",value:function(){var r=ae.default(D.default.mark(function s(a,l){var u,f,d;return D.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(u=a(pi(this.descriptor.data)),!u){v.next=22;break}return f=this.revision,v.prev=3,v.next=6,this._postUpdateToServer({data:u,revision:f,ttl:l});case 6:return d=v.sent,this._handleSuccessfulUpdateResult(d),v.abrupt("return",this.descriptor.data);case 11:if(v.prev=11,v.t0=v.catch(3),v.t0.status!==412){v.next=19;break}return v.next=16,this._softSync();case 16:return v.abrupt("return",this._setWithIfMatch(a));case 19:throw v.t0;case 20:v.next=23;break;case 22:return v.abrupt("return",this.descriptor.data);case 23:case"end":return v.stop()}},s,this,[[3,11]])}));function i(s,a){return r.apply(this,arguments)}return i}()},{key:"_handleSuccessfulUpdateResult",value:function(i){if(!(i.last_event_id<=this.descriptor.last_event_id)){var s=this.descriptor.data!==void 0?pi(this.descriptor.data):null;this.descriptor.revision=i.revision,this.descriptor.data=i.data,this.descriptor.last_event_id=i.last_event_id,this.descriptor.date_expires=i.date_expires,this.descriptor.date_updated=new Date(i.date_updated),this.services.storage.update(this.type,this.sid,this.uniqueName,{last_event_id:i.last_event_id,revision:i.revision,date_updated:i.date_updated,data:i.data}),this.broadcastEventToListeners("updated",{data:this.descriptor.data,isLocal:!0,previousData:s})}}},{key:"_postUpdateToServer",value:function(){var r=ae.default(D.default.mark(function s(a){var l,u,f;return D.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(this.isDeleted){p.next=17;break}return l={data:a.data},a.ttl!==void 0&&(l.ttl=a.ttl),u=a.revision,p.prev=4,p.next=7,this.services.network.post(this.uri,l,u);case 7:return f=p.sent,p.abrupt("return",{revision:f.body.revision,data:a.data,last_event_id:f.body.last_event_id,date_updated:f.body.date_updated,date_expires:f.body.date_expires});case 11:throw p.prev=11,p.t0=p.catch(4),p.t0.status===404&&this.onRemoved(!1),p.t0;case 15:p.next=18;break;case 17:return p.abrupt("return",Promise.reject(new lr("The Document has been removed",404,54100)));case 18:case"end":return p.stop()}},s,this,[[4,11]])}));function i(s){return r.apply(this,arguments)}return i}()},{key:"_softSync",value:function(){var r=ae.default(D.default.mark(function s(){var a=this;return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",this.services.network.get(this.uri).then(function(f){var d={type:"document_updated",id:f.body.last_event_id,document_revision:f.body.revision,document_data:f.body.data,date_created:f.body.date_updated};return a._update(d),a}).catch(function(f){f.status===404?a.onRemoved(!1):st.error("Can't get updates for ".concat(a.sid,":"),f)}));case 1:case"end":return u.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"onRemoved",value:function(i){if(!this.isDeleted){var s=this.descriptor.data!==void 0?pi(this.descriptor.data):null;this.isDeleted=!0,this._unsubscribe(),this.removalHandler(this.type,this.sid,this.uniqueName),this.broadcastEventToListeners("removed",{isLocal:i,previousData:s})}}},{key:"removeDocument",value:function(){var r=ae.default(D.default.mark(function s(){return D.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(this.isDeleted){l.next=6;break}return l.next=3,this.services.network.delete(this.uri);case 3:this.onRemoved(!0),l.next=7;break;case 6:return l.abrupt("return",Promise.reject(new lr("The Document has been removed",404,54100)));case 7:case"end":return l.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()}],[{key:"type",get:function(){return"document"}}]),n}(Rf),Hr=function(e){Kn.default(n,e);var t=ZL(n);function n(r){var i;return tt.default(this,n),i=t.call(this),i.syncDocumentImpl=r,i.syncDocumentImpl.attach(Fi.default(i)),i}return nt.default(n,[{key:"uri",get:function(){return this.syncDocumentImpl.uri}},{key:"revision",get:function(){return this.syncDocumentImpl.revision}},{key:"lastEventId",get:function(){return this.syncDocumentImpl.lastEventId}},{key:"dateExpires",get:function(){return this.syncDocumentImpl.dateExpires}},{key:"type",get:function(){return aS.type}},{key:"sid",get:function(){return this.syncDocumentImpl.sid}},{key:"data",get:function(){return this.syncDocumentImpl.data}},{key:"dateUpdated",get:function(){return this.syncDocumentImpl.dateUpdated}},{key:"uniqueName",get:function(){return this.syncDocumentImpl.uniqueName}},{key:"set",value:function(){var r=ae.default(D.default.mark(function s(a,l){return D.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return this.ensureNotClosed(),f.abrupt("return",this.syncDocumentImpl.set(a,l));case 2:case"end":return f.stop()}},s,this)}));function i(s,a){return r.apply(this,arguments)}return i}()},{key:"mutate",value:function(){var r=ae.default(D.default.mark(function s(a,l){return D.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return this.ensureNotClosed(),f.abrupt("return",this.syncDocumentImpl.mutate(a,l));case 2:case"end":return f.stop()}},s,this)}));function i(s,a){return r.apply(this,arguments)}return i}()},{key:"update",value:function(){var r=ae.default(D.default.mark(function s(a,l){return D.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return this.ensureNotClosed(),f.abrupt("return",this.syncDocumentImpl.update(a,l));case 2:case"end":return f.stop()}},s,this)}));function i(s,a){return r.apply(this,arguments)}return i}()},{key:"setTtl",value:function(){var r=ae.default(D.default.mark(function s(a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.ensureNotClosed(),u.abrupt("return",this.syncDocumentImpl.setTtl(a));case 2:case"end":return u.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"removeDocument",value:function(){var r=ae.default(D.default.mark(function s(){return D.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this.ensureNotClosed(),l.abrupt("return",this.syncDocumentImpl.removeDocument());case 2:case"end":return l.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"close",value:function(){Cf.default(Qt.default(n.prototype),"close",this).call(this),this.syncDocumentImpl.detach(this.listenerUuid)}}],[{key:"type",get:function(){return aS.type}}]),n}(xf);et.default(Hr,"removed","removed");et.default(Hr,"updated","updated");it([te.validateTypesAsync(te.pureObject,["undefined",te.objectSchema("document metadata",{ttl:[te.nonNegativeInteger,"undefined"]})]),ie("design:type",Function),ie("design:paramtypes",[Object,Object]),ie("design:returntype",Promise)],Hr.prototype,"set",null);it([te.validateTypesAsync("function",["undefined",te.objectSchema("document metadata",{ttl:[te.nonNegativeInteger,"undefined"]})]),ie("design:type",Function),ie("design:paramtypes",[Function,Object]),ie("design:returntype",Promise)],Hr.prototype,"mutate",null);it([te.validateTypesAsync(te.pureObject,["undefined",te.objectSchema("document metadata",{ttl:[te.nonNegativeInteger,"undefined"]})]),ie("design:type",Function),ie("design:paramtypes",[Object,Object]),ie("design:returntype",Promise)],Hr.prototype,"update",null);it([te.validateTypesAsync(te.nonNegativeInteger),ie("design:type",Function),ie("design:paramtypes",[Number]),ie("design:returntype",Promise)],Hr.prototype,"setTtl",null);var oS=function(){function e(t){tt.default(this,e),this.descriptor=t}return nt.default(e,[{key:"url",get:function(){return this.descriptor.url}},{key:"revision",get:function(){return this.descriptor.revision}},{key:"lastEventId",get:function(){return this.descriptor.lastEventId}},{key:"dateUpdated",get:function(){return this.descriptor.dateUpdated}},{key:"dateExpires",get:function(){return this.descriptor.dateExpires}},{key:"index",get:function(){return this.descriptor.index}},{key:"data",get:function(){return this.descriptor.data}},{key:"cacheKey",get:function(){return this.index}},{key:"update",value:function(n,r,i,s){return this.descriptor.lastEventId=n,this.descriptor.revision=r,this.descriptor.data=i,this.descriptor.dateUpdated=s,this}},{key:"updateDateExpires",value:function(n){this.descriptor.dateExpires=n}}]),e}(),Fb=function(){function e(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;tt.default(this,e),this.items=t,this.source=n,this.prevPageItemId=r,this.nextPageItemId=i}return nt.default(e,[{key:"nextPage",value:function(){var t=ae.default(D.default.mark(function r(){return D.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(this.hasNextPage){s.next=2;break}throw new Error("No next page");case 2:return s.abrupt("return",this.source({nextPageItemId:this.nextPageItemId}));case 3:case"end":return s.stop()}},r,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"prevPage",value:function(){var t=ae.default(D.default.mark(function r(){return D.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(this.hasPrevPage){s.next=2;break}throw new Error("No previous page");case 2:return s.abrupt("return",this.source({prevPageItemId:this.prevPageItemId}));case 3:case"end":return s.stop()}},r,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"hasNextPage",get:function(){return this.nextPageItemId!==null}},{key:"hasPrevPage",get:function(){return this.prevPageItemId!==null}}]),e}();function Wde(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=zde(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(f){throw f},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,l;return{s:function(){n=n.call(e)},n:function(){var f=n.next();return s=f.done,f},e:function(f){a=!0,l=f},f:function(){try{!s&&n.return!=null&&n.return()}finally{if(a)throw l}}}}function zde(e,t){if(e){if(typeof e=="string")return Nx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nx(e,t)}}function Nx(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Hde=function(){function e(t,n){tt.default(this,e),this.balanceFactor=0,this.key=t,this.value=n,this.parent=null,this.left=null,this.right=null}return nt.default(e,[{key:"isRoot",get:function(){return this.parent===null}},{key:"isLeaf",get:function(){return this.left===null&&this.right===null}},{key:"isLeftChild",get:function(){return this.parent.left===this}},{key:"update",value:function(n){this.value=n}},{key:"replace",value:function(n,r){n&&(this.left===r?this.left=r:this.right===r&&(this.right=r))}}]),e}(),Vde=function(e){function t(n,r){tt.default(this,t),this.isLessThan=n||function(i,s){return i<s},this.isEqual=r||function(i,s){return i===s},this.root=null,this.count=null}return nt.default(t,[{key:"size",get:function(){return this.count}},{key:"clear",value:function(){this.root=null,this.count=0}},{key:"set",value:function(r,i){var s=this.getNode(r);s?s.update(i):this.insert(r,i)}},{key:"insert",value:function(r,i){var s=new Hde(r,i);if(this.count++,!this.root){this.root=s;return}for(var a=this.root;;)if(this.isLessThan(r,a.key))if(a.left)a=a.left;else{a.left=s;break}else if(a.right)a=a.right;else{a.right=s;break}for(s.parent=a,a=s;a.parent;){var l=a.parent,u=l.balanceFactor;if(a.isLeftChild?l.balanceFactor++:l.balanceFactor--,Math.abs(l.balanceFactor)<Math.abs(u))break;if(l.balanceFactor<-1||l.balanceFactor>1){this.rebalance(l);break}a=l}}},{key:"get",value:function(r){for(var i=this.root;i;){if(this.isEqual(r,i.key))return i.value;this.isLessThan(r,i.key)?i=i.left:i=i.right}return null}},{key:"delete",value:function(r){var i=this.getNode(r);if(!i||i.key!==r)return null;var s=i.parent,a=i.left,l=i.right;if(!!a!=!!l){var u=a||l;!s&&!u?this.root=null:s&&!u?this.root=u:(s.replace(i,null),this.rebalance(s))}else{for(var f=i.left;f.right;)f=f.right;if(i.left===f)i.isRoot?(this.root=f,f.parent=null):(i.isLeftChild?i.parent.left=f:i.parent.right=f,f.parent=i.parent),f.right=i.right,f.right.parent=f,f.balanceFactor=i.balanceFactor,i={parent:f,isLeftChild:!0};else{var d=f.parent,p=f.left;d.right=p,p&&(p.parent=d),i.isRoot?(this.root=f,f.parent=null):(i.isLeftChild?i.parent.left=f:i.parent.right=f,f.parent=i.parent),f.right=i.right,f.right.parent=f,f.left=i.left,f.left.parent=f,f.balanceFactor=i.balanceFactor,i={parent:d,isLeftChild:!1}}}for(this.count--;i.parent;){var v=i.parent,m=v.balanceFactor;if(i.isLeftChild?v.balanceFactor-=1:v.balanceFactor+=1,Math.abs(v.balanceFactor)>Math.abs(m))if(v.balanceFactor<-1||v.balanceFactor>1)if(this.rebalance(v),v.parent.balanceFactor===0)i=v.parent;else break;else break;else i=v}return null}},{key:"getNode",value:function(r){for(var i=this.root;i;){if(this.isEqual(r,i.key))return i;this.isLessThan(r,i.key)?i=i.left:i=i.right}return null}},{key:"rebalance",value:function(r){r.balanceFactor<0?r.right.balanceFactor>0?(this.rotateRight(r.right),this.rotateLeft(r)):this.rotateLeft(r):r.balanceFactor>0&&(r.left.balanceFactor<0?(this.rotateLeft(r.left),this.rotateRight(r)):this.rotateRight(r))}},{key:"rotateLeft",value:function(r){var i=r.right;r.right=i.left,i.left!==null&&(i.left.parent=r),i.parent=r.parent,i.parent===null?this.root=i:r.isLeftChild?i.parent.left=i:i.parent.right=i,i.left=r,r.parent=i,r.balanceFactor=r.balanceFactor+1-Math.min(i.balanceFactor,0),i.balanceFactor=i.balanceFactor+1-Math.max(r.balanceFactor,0)}},{key:"rotateRight",value:function(r){var i=r.left;r.left=i.right,i.right!==null&&(i.right.parent=r),i.parent=r.parent,i.parent===null?this.root=i:r.isLeftChild?i.parent.left=i:i.parent.right=i,i.right=r,r.parent=i,r.balanceFactor=r.balanceFactor-1-Math.min(i.balanceFactor,0),i.balanceFactor=i.balanceFactor-1-Math.max(r.balanceFactor,0)}},{key:e,value:D.default.mark(function n(){var r,i,s;return D.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:r=Wde(this.getIterator()),l.prev=1,r.s();case 3:if((i=r.n()).done){l.next=9;break}return s=i.value,l.next=7,s;case 7:l.next=3;break;case 9:l.next=14;break;case 11:l.prev=11,l.t0=l.catch(1),r.e(l.t0);case 14:return l.prev=14,r.f(),l.finish(14);case 17:case"end":return l.stop()}},n,this,[[1,11,14,17]])})},{key:"getIterator",value:D.default.mark(function n(){var r,i,s,a=arguments;return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:r=a.length>0&&a[0]!==void 0?a[0]:null,i=this.root;case 2:if(!i){u.next=8;break}if(!(this.isEqual(r,i.key)||r===null&&!i.left)){u.next=5;break}return u.abrupt("break",8);case 5:this.isLessThan(r,i.key)||r===null?i=i.left:i=i.right,u.next=2;break;case 8:if(i){u.next=10;break}return u.abrupt("return",null);case 10:s=!0;case 11:if(!s){u.next=29;break}return u.next=14,[i.key,i.value];case 14:if(s=!1,!i.right){u.next=21;break}for(i=i.right;i.left;)i=i.left;s=!0,u.next=27;break;case 21:if(!i.parent){u.next=26;break}s=i.parent.left===i,i=i.parent,u.next=27;break;case 26:return u.abrupt("break",37);case 27:u.next=35;break;case 29:if(!i.parent){u.next=34;break}s=i.parent.left===i,i=i.parent,u.next=35;break;case 34:return u.abrupt("break",37);case 35:u.next=11;break;case 37:return u.abrupt("return",null);case 38:case"end":return u.stop()}},n,this)})},{key:"getReverseIterator",value:D.default.mark(function n(){var r,i,s,a=arguments;return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:r=a.length>0&&a[0]!==void 0?a[0]:null,i=this.root;case 2:if(!i){u.next=8;break}if(!(this.isEqual(r,i.key)||r===null&&!i.right)){u.next=5;break}return u.abrupt("break",8);case 5:!this.isLessThan(r,i.key)||r===null?i=i.right:i=i.left,u.next=2;break;case 8:if(i){u.next=10;break}return u.abrupt("return",null);case 10:s=!0;case 11:if(!s){u.next=29;break}return u.next=14,[i.key,i.value];case 14:if(s=!1,!i.left){u.next=21;break}for(i=i.left;i.right;)i=i.right;s=!0,u.next=27;break;case 21:if(!i.parent){u.next=26;break}s=i.parent.right===i,i=i.parent,u.next=27;break;case 26:return u.abrupt("break",37);case 27:u.next=35;break;case 29:if(!i.parent){u.next=34;break}s=i.parent.right===i,i=i.parent,u.next=35;break;case 34:return u.abrupt("break",37);case 35:u.next=11;break;case 37:return u.abrupt("return",null);case 38:case"end":return u.stop()}},n,this)})}]),t}(Symbol.iterator);function Sh(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=qde(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(f){throw f},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,l;return{s:function(){n=n.call(e)},n:function(){var f=n.next();return s=f.done,f},e:function(f){a=!0,l=f},f:function(){try{!s&&n.return!=null&&n.return()}finally{if(a)throw l}}}}function qde(e,t){if(e){if(typeof e=="string")return Mx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mx(e,t)}}function Mx(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Gde=function(){function e(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;tt.default(this,e),this._data=t,this.lastEventId=n||0,this.isLeftBound=r,this.isRightBound=i}return nt.default(e,[{key:"isValid",get:function(){return!0}},{key:"value",get:function(){return this._data}}]),e}(),Kde=function(){function e(t){tt.default(this,e),this.lastEventId=t,this.isLeftBound=!1,this.isRightBound=!1}return nt.default(e,[{key:"isValid",get:function(){return!1}},{key:"value",get:function(){return null}}]),e}(),jb=function(){function e(){tt.default(this,e),et.default(this,"items",new Vde),et.default(this,"beginKey",null),et.default(this,"endKey",null),this.items.clear()}return nt.default(e,[{key:"size",get:function(){return this.items.size}},{key:"collectionBegin",get:function(){return this.beginKey}},{key:"collectionEnd",get:function(){return this.endKey}},{key:"has",value:function(n){var r,i=this.items.get(n);return(r=i==null?void 0:i.isValid)!==null&&r!==void 0?r:!1}},{key:"exists",value:function(n){var r=this.items.get(n);return!!r}},{key:"getValue",value:function(n){var r,i=this.items.get(n);return(r=i==null?void 0:i.value)!==null&&r!==void 0?r:null}},{key:"get",value:function(n){return this.items.get(n)}},{key:"getNextItem",value:function(n,r,i){return n===null?this.getFirstItem(r):i?this.getValue(n):this.getAdjacentItem(n,r)}},{key:"getFirstItem",value:function(n){var r=n==="asc"?this.beginKey:this.endKey;if(this.exists(r)){var i=this.items.get(r);return i.isValid?i.value:this.getAdjacentItem(r,n)}return null}},{key:"getAdjacentItem",value:function(n,r){var i=r==="asc"?this.items.getIterator(n):this.items.getReverseIterator(n),s=Sh(i),a;try{for(s.s();!(a=s.n()).done;){var l=ic.default(a.value,2),u=l[0],f=l[1];if(r==="asc"?f.isRightBound:f.isLeftBound)break;if(f.isValid)return f.value}}catch(d){s.e(d)}finally{s.f()}return null}},{key:"store",value:function(n,r,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,l=this.items.get(n);return l&&l.lastEventId>i?l.value:(this.items.set(n,new Gde(r,i,l?l.isLeftBound&&s:s,l?l.isRightBound&&a:a)),this.beginKey&&n<this.beginKey&&(this.beginKey=n),this.endKey&&this.endKey<n&&(this.endKey=n),r)}},{key:"populate",value:function(n,r,i){var s=this;if(n.length){var a=gde.default(n);if(a.sort(function(f,d){return f.cacheKey===d.cacheKey?0:f.cacheKey>d.cacheKey?1:-1}),a.forEach(function(f,d){s.store(f.cacheKey,f,f.lastEventId,d===0,d===a.length-1)}),r){var l=a[0].cacheKey;(!this.beginKey||l<this.beginKey)&&(this.beginKey=l)}if(i){var u=a[a.length-1].cacheKey;(!this.endKey||this.endKey<u)&&(this.endKey=u)}}}},{key:"delete",value:function(n,r){var i=this.items.get(n);(i===null||r===null||i.lastEventId<r)&&this.items.set(n,new Kde(r))}},{key:"isKnown",value:function(n,r){var i=this.items.get(n);return i&&i.lastEventId>=r}},{key:"getIterator",value:D.default.mark(function t(n){var r,i,s,a;return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(n===null&&this.beginKey!==null&&(n=this.beginKey),n!==null){u.next=3;break}return u.abrupt("return");case 3:r=Sh(this.items.getIterator(n)),u.prev=4,r.s();case 6:if((i=r.n()).done){u.next=16;break}if(s=ic.default(i.value,2),a=s[1],a.isValid){u.next=10;break}return u.abrupt("continue",14);case 10:return u.next=12,a;case 12:if(!a.isRightBound){u.next=14;break}return u.abrupt("break",16);case 14:u.next=6;break;case 16:u.next=21;break;case 18:u.prev=18,u.t0=u.catch(4),r.e(u.t0);case 21:return u.prev=21,r.f(),u.finish(21);case 24:case"end":return u.stop()}},t,this,[[4,18,21,24]])})},{key:"getReverseIterator",value:D.default.mark(function t(n){var r,i,s,a;return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(n===null&&this.endKey!==null&&(n=this.endKey),n!==null){u.next=3;break}return u.abrupt("return");case 3:r=Sh(this.items.getReverseIterator(n)),u.prev=4,r.s();case 6:if((i=r.n()).done){u.next=16;break}if(s=ic.default(i.value,2),a=s[1],a.isValid){u.next=10;break}return u.abrupt("continue",14);case 10:return u.next=12,a;case 12:if(!a.isLeftBound){u.next=14;break}return u.abrupt("break",16);case 14:u.next=6;break;case 16:u.next=21;break;case 18:u.prev=18,u.t0=u.catch(4),r.e(u.t0);case 21:return u.prev=21,r.f(),u.finish(21);case 24:case"end":return u.stop()}},t,this,[[4,18,21,24]])})},{key:"forEach",value:function(n){if(this.items){var r=Sh(this.items),i;try{for(r.s();!(i=r.n()).done;){var s=ic.default(i.value,2),a=s[0],l=s[1];l.isValid&&n(a,l.value)}}catch(u){r.e(u)}finally{r.f()}}}}]),e}(),Ql=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof di<"u"?di:typeof self<"u"?self:{},$n={exports:{}};(function(e,t){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",l="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",f=500,d="__lodash_placeholder__",p=1,v=2,m=4,y=1,E=2,b=1,w=2,T=4,x=8,M=16,W=32,z=64,K=128,A=256,ne=512,X=30,oe="...",he=800,ye=16,Se=1,Ie=2,we=3,ve=1/0,J=9007199254740991,fe=17976931348623157e292,be=NaN,G=4294967295,Qe=G-1,Tn=G>>>1,ze=[["ary",K],["bind",b],["bindKey",w],["curry",x],["curryRight",M],["flip",ne],["partial",W],["partialRight",z],["rearg",A]],ht="[object Arguments]",B="[object Array]",pe="[object AsyncFunction]",De="[object Boolean]",Ar="[object Date]",ln="[object DOMException]",Ce="[object Error]",Si="[object Function]",Je="[object GeneratorFunction]",ue="[object Map]",Me="[object Number]",Wt="[object Null]",ce="[object Object]",mo="[object Promise]",el="[object Proxy]",Bi="[object RegExp]",Ln="[object Set]",bi="[object String]",Wi="[object Symbol]",tl="[object Undefined]",Lt="[object WeakMap]",Yt="[object WeakSet]",ot="[object ArrayBuffer]",He="[object DataView]",vn="[object Float32Array]",nl="[object Float64Array]",rl="[object Int8Array]",il="[object Int16Array]",yo="[object Int32Array]",sl="[object Uint8Array]",_o="[object Uint8ClampedArray]",wo="[object Uint16Array]",al="[object Uint32Array]",Pf=/\b__p \+= '';/g,jv=/\b(__p \+=) '' \+/g,Uv=/(__e\(.*?\)|\b__t\)) \+\n'';/g,cn=/&(?:amp|lt|gt|quot|#39);/g,Af=/[&<>"']/g,Bv=RegExp(cn.source),ol=RegExp(Af.source),Of=/<%-([\s\S]+?)%>/g,Nf=/<%([\s\S]+?)%>/g,Mf=/<%=([\s\S]+?)%>/g,Wv=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,zv=/^\w*$/,Hv=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ul=/[\\^$.*+?()[\]{}|]/g,Vv=RegExp(ul.source),ll=/^\s+/,qv=/\s/,Gv=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Kv=/\{\n\/\* \[wrapped with (.+)\] \*/,Qv=/,? & /,Jv=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Yv=/[()=,{}\[\]\/\s]/,Xv=/\\(\\)?/g,Zv=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Lf=/\w*$/,eg=/^[-+]0x[0-9a-f]+$/i,tg=/^0b[01]+$/i,ng=/^\[object .+?Constructor\]$/,rg=/^0o[0-7]+$/i,ig=/^(?:0|[1-9]\d*)$/,sg=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,So=/($^)/,ag=/['\n\r\u2028\u2029\\]/g,Is="\\ud800-\\udfff",og="\\u0300-\\u036f",ug="\\ufe20-\\ufe2f",lg="\\u20d0-\\u20ff",Df=og+ug+lg,Ff="\\u2700-\\u27bf",jf="a-z\\xdf-\\xf6\\xf8-\\xff",cg="\\xac\\xb1\\xd7\\xf7",fg="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",dg="\\u2000-\\u206f",Uf=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",cl="A-Z\\xc0-\\xd6\\xd8-\\xde",ei="\\ufe0e\\ufe0f",fl=cg+fg+dg+Uf,dl="[']",hg="["+Is+"]",Ti="["+fl+"]",bo="["+Df+"]",N="\\d+",F="["+Ff+"]",R="["+jf+"]",I="[^"+Is+fl+N+Ff+jf+cl+"]",S="\\ud83c[\\udffb-\\udfff]",O="(?:"+bo+"|"+S+")",$="[^"+Is+"]",Q="(?:\\ud83c[\\udde6-\\uddff]){2}",H="[\\ud800-\\udbff][\\udc00-\\udfff]",se="["+cl+"]",de="\\u200d",Oe="(?:"+R+"|"+I+")",Qn="(?:"+se+"|"+I+")",To="(?:"+dl+"(?:d|ll|m|re|s|t|ve))?",fr="(?:"+dl+"(?:D|LL|M|RE|S|T|VE))?",Ei=O+"?",Bb="["+ei+"]?",iD="(?:"+de+"(?:"+[$,Q,H].join("|")+")"+Bb+Ei+")*",sD="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",aD="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Wb=Bb+Ei+iD,oD="(?:"+[F,Q,H].join("|")+")"+Wb,uD="(?:"+[$+bo+"?",bo,Q,H,hg].join("|")+")",lD=RegExp(dl,"g"),cD=RegExp(bo,"g"),pg=RegExp(S+"(?="+S+")|"+uD+Wb,"g"),fD=RegExp([se+"?"+R+"+"+To+"(?="+[Ti,se,"$"].join("|")+")",Qn+"+"+fr+"(?="+[Ti,se+Oe,"$"].join("|")+")",se+"?"+Oe+"+"+To,se+"+"+fr,aD,sD,N,oD].join("|"),"g"),dD=RegExp("["+de+Is+Df+ei+"]"),hD=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,pD=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],vD=-1,Rt={};Rt[vn]=Rt[nl]=Rt[rl]=Rt[il]=Rt[yo]=Rt[sl]=Rt[_o]=Rt[wo]=Rt[al]=!0,Rt[ht]=Rt[B]=Rt[ot]=Rt[De]=Rt[He]=Rt[Ar]=Rt[Ce]=Rt[Si]=Rt[ue]=Rt[Me]=Rt[ce]=Rt[Bi]=Rt[Ln]=Rt[bi]=Rt[Lt]=!1;var Et={};Et[ht]=Et[B]=Et[ot]=Et[He]=Et[De]=Et[Ar]=Et[vn]=Et[nl]=Et[rl]=Et[il]=Et[yo]=Et[ue]=Et[Me]=Et[ce]=Et[Bi]=Et[Ln]=Et[bi]=Et[Wi]=Et[sl]=Et[_o]=Et[wo]=Et[al]=!0,Et[Ce]=Et[Si]=Et[Lt]=!1;var gD={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},mD={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},yD={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},_D={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},wD=parseFloat,SD=parseInt,zb=Br.default(Ql)=="object"&&Ql&&Ql.Object===Object&&Ql,bD=(typeof self>"u"?"undefined":Br.default(self))=="object"&&self&&self.Object===Object&&self,gn=zb||bD||Function("return this")(),vg=t&&!t.nodeType&&t,wa=vg&&!0&&e&&!e.nodeType&&e,Hb=wa&&wa.exports===vg,gg=Hb&&zb.process,Or=function(){try{var j=wa&&wa.require&&wa.require("util").types;return j||gg&&gg.binding&&gg.binding("util")}catch{}}(),Vb=Or&&Or.isArrayBuffer,qb=Or&&Or.isDate,Gb=Or&&Or.isMap,Kb=Or&&Or.isRegExp,Qb=Or&&Or.isSet,Jb=Or&&Or.isTypedArray;function dr(j,Y,q){switch(q.length){case 0:return j.call(Y);case 1:return j.call(Y,q[0]);case 2:return j.call(Y,q[0],q[1]);case 3:return j.call(Y,q[0],q[1],q[2])}return j.apply(Y,q)}function TD(j,Y,q,Ee){for(var Le=-1,ut=j==null?0:j.length;++Le<ut;){var tn=j[Le];Y(Ee,tn,q(tn),j)}return Ee}function Nr(j,Y){for(var q=-1,Ee=j==null?0:j.length;++q<Ee&&Y(j[q],q,j)!==!1;);return j}function ED(j,Y){for(var q=j==null?0:j.length;q--&&Y(j[q],q,j)!==!1;);return j}function Yb(j,Y){for(var q=-1,Ee=j==null?0:j.length;++q<Ee;)if(!Y(j[q],q,j))return!1;return!0}function Cs(j,Y){for(var q=-1,Ee=j==null?0:j.length,Le=0,ut=[];++q<Ee;){var tn=j[q];Y(tn,q,j)&&(ut[Le++]=tn)}return ut}function Bf(j,Y){var q=j==null?0:j.length;return!!q&&Eo(j,Y,0)>-1}function mg(j,Y,q){for(var Ee=-1,Le=j==null?0:j.length;++Ee<Le;)if(q(Y,j[Ee]))return!0;return!1}function Ot(j,Y){for(var q=-1,Ee=j==null?0:j.length,Le=Array(Ee);++q<Ee;)Le[q]=Y(j[q],q,j);return Le}function Rs(j,Y){for(var q=-1,Ee=Y.length,Le=j.length;++q<Ee;)j[Le+q]=Y[q];return j}function yg(j,Y,q,Ee){var Le=-1,ut=j==null?0:j.length;for(Ee&&ut&&(q=j[++Le]);++Le<ut;)q=Y(q,j[Le],Le,j);return q}function kD(j,Y,q,Ee){var Le=j==null?0:j.length;for(Ee&&Le&&(q=j[--Le]);Le--;)q=Y(q,j[Le],Le,j);return q}function _g(j,Y){for(var q=-1,Ee=j==null?0:j.length;++q<Ee;)if(Y(j[q],q,j))return!0;return!1}var ID=wg("length");function CD(j){return j.split("")}function RD(j){return j.match(Jv)||[]}function Xb(j,Y,q){var Ee;return q(j,function(Le,ut,tn){if(Y(Le,ut,tn))return Ee=ut,!1}),Ee}function Wf(j,Y,q,Ee){for(var Le=j.length,ut=q+(Ee?1:-1);Ee?ut--:++ut<Le;)if(Y(j[ut],ut,j))return ut;return-1}function Eo(j,Y,q){return Y===Y?UD(j,Y,q):Wf(j,Zb,q)}function xD(j,Y,q,Ee){for(var Le=q-1,ut=j.length;++Le<ut;)if(Ee(j[Le],Y))return Le;return-1}function Zb(j){return j!==j}function e1(j,Y){var q=j==null?0:j.length;return q?bg(j,Y)/q:be}function wg(j){return function(Y){return Y==null?n:Y[j]}}function Sg(j){return function(Y){return j==null?n:j[Y]}}function t1(j,Y,q,Ee,Le){return Le(j,function(ut,tn,Tt){q=Ee?(Ee=!1,ut):Y(q,ut,tn,Tt)}),q}function $D(j,Y){var q=j.length;for(j.sort(Y);q--;)j[q]=j[q].value;return j}function bg(j,Y){for(var q,Ee=-1,Le=j.length;++Ee<Le;){var ut=Y(j[Ee]);ut!==n&&(q=q===n?ut:q+ut)}return q}function Tg(j,Y){for(var q=-1,Ee=Array(j);++q<j;)Ee[q]=Y(q);return Ee}function PD(j,Y){return Ot(Y,function(q){return[q,j[q]]})}function n1(j){return j&&j.slice(0,a1(j)+1).replace(ll,"")}function hr(j){return function(Y){return j(Y)}}function Eg(j,Y){return Ot(Y,function(q){return j[q]})}function hl(j,Y){return j.has(Y)}function r1(j,Y){for(var q=-1,Ee=j.length;++q<Ee&&Eo(Y,j[q],0)>-1;);return q}function i1(j,Y){for(var q=j.length;q--&&Eo(Y,j[q],0)>-1;);return q}function AD(j,Y){for(var q=j.length,Ee=0;q--;)j[q]===Y&&++Ee;return Ee}var OD=Sg(gD),ND=Sg(mD);function MD(j){return"\\"+_D[j]}function LD(j,Y){return j==null?n:j[Y]}function ko(j){return dD.test(j)}function DD(j){return hD.test(j)}function FD(j){for(var Y,q=[];!(Y=j.next()).done;)q.push(Y.value);return q}function kg(j){var Y=-1,q=Array(j.size);return j.forEach(function(Ee,Le){q[++Y]=[Le,Ee]}),q}function s1(j,Y){return function(q){return j(Y(q))}}function xs(j,Y){for(var q=-1,Ee=j.length,Le=0,ut=[];++q<Ee;){var tn=j[q];(tn===Y||tn===d)&&(j[q]=d,ut[Le++]=q)}return ut}function zf(j){var Y=-1,q=Array(j.size);return j.forEach(function(Ee){q[++Y]=Ee}),q}function jD(j){var Y=-1,q=Array(j.size);return j.forEach(function(Ee){q[++Y]=[Ee,Ee]}),q}function UD(j,Y,q){for(var Ee=q-1,Le=j.length;++Ee<Le;)if(j[Ee]===Y)return Ee;return-1}function BD(j,Y,q){for(var Ee=q+1;Ee--;)if(j[Ee]===Y)return Ee;return Ee}function Io(j){return ko(j)?zD(j):ID(j)}function ti(j){return ko(j)?HD(j):CD(j)}function a1(j){for(var Y=j.length;Y--&&qv.test(j.charAt(Y)););return Y}var WD=Sg(yD);function zD(j){for(var Y=pg.lastIndex=0;pg.test(j);)++Y;return Y}function HD(j){return j.match(pg)||[]}function VD(j){return j.match(fD)||[]}var qD=function j(Y){Y=Y==null?gn:Co.defaults(gn.Object(),Y,Co.pick(gn,pD));var q=Y.Array,Ee=Y.Date,Le=Y.Error,ut=Y.Function,tn=Y.Math,Tt=Y.Object,Ig=Y.RegExp,GD=Y.String,Mr=Y.TypeError,Hf=q.prototype,KD=ut.prototype,Ro=Tt.prototype,Vf=Y["__core-js_shared__"],qf=KD.toString,pt=Ro.hasOwnProperty,QD=0,o1=function(){var o=/[^.]+$/.exec(Vf&&Vf.keys&&Vf.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),Gf=Ro.toString,JD=qf.call(Tt),YD=gn._,XD=Ig("^"+qf.call(pt).replace(ul,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Kf=Hb?Y.Buffer:n,$s=Y.Symbol,Qf=Y.Uint8Array,u1=Kf?Kf.allocUnsafe:n,Jf=s1(Tt.getPrototypeOf,Tt),l1=Tt.create,c1=Ro.propertyIsEnumerable,Yf=Hf.splice,f1=$s?$s.isConcatSpreadable:n,pl=$s?$s.iterator:n,Sa=$s?$s.toStringTag:n,Xf=function(){try{var o=Ia(Tt,"defineProperty");return o({},"",{}),o}catch{}}(),ZD=Y.clearTimeout!==gn.clearTimeout&&Y.clearTimeout,e3=Ee&&Ee.now!==gn.Date.now&&Ee.now,t3=Y.setTimeout!==gn.setTimeout&&Y.setTimeout,Zf=tn.ceil,ed=tn.floor,Cg=Tt.getOwnPropertySymbols,n3=Kf?Kf.isBuffer:n,d1=Y.isFinite,r3=Hf.join,i3=s1(Tt.keys,Tt),nn=tn.max,En=tn.min,s3=Ee.now,a3=Y.parseInt,h1=tn.random,o3=Hf.reverse,Rg=Ia(Y,"DataView"),vl=Ia(Y,"Map"),xg=Ia(Y,"Promise"),xo=Ia(Y,"Set"),gl=Ia(Y,"WeakMap"),ml=Ia(Tt,"create"),td=gl&&new gl,$o={},u3=Ca(Rg),l3=Ca(vl),c3=Ca(xg),f3=Ca(xo),d3=Ca(gl),nd=$s?$s.prototype:n,yl=nd?nd.valueOf:n,p1=nd?nd.toString:n;function k(o){if(zt(o)&&!Fe(o)&&!(o instanceof Ye)){if(o instanceof Lr)return o;if(pt.call(o,"__wrapped__"))return vT(o)}return new Lr(o)}var Po=function(){function o(){}return function(c){if(!Dt(c))return{};if(l1)return l1(c);o.prototype=c;var h=new o;return o.prototype=n,h}}();function rd(){}function Lr(o,c){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=n}k.templateSettings={escape:Of,evaluate:Nf,interpolate:Mf,variable:"",imports:{_:k}},k.prototype=rd.prototype,k.prototype.constructor=k,Lr.prototype=Po(rd.prototype),Lr.prototype.constructor=Lr;function Ye(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=G,this.__views__=[]}function h3(){var o=new Ye(this.__wrapped__);return o.__actions__=Jn(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=Jn(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=Jn(this.__views__),o}function p3(){if(this.__filtered__){var o=new Ye(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function v3(){var o=this.__wrapped__.value(),c=this.__dir__,h=Fe(o),g=c<0,_=h?o.length:0,C=CF(0,_,this.__views__),P=C.start,L=C.end,U=L-P,Z=g?L:P-1,ee=this.__iteratees__,re=ee.length,ge=0,Re=En(U,this.__takeCount__);if(!h||!g&&_==U&&Re==U)return F1(o,this.__actions__);var $e=[];e:for(;U--&&ge<Re;){Z+=c;for(var Ve=-1,Pe=o[Z];++Ve<re;){var Xe=ee[Ve],rt=Xe.iteratee,In=Xe.type,jn=rt(Pe);if(In==Ie)Pe=jn;else if(!jn){if(In==Se)continue e;break e}}$e[ge++]=Pe}return $e}Ye.prototype=Po(rd.prototype),Ye.prototype.constructor=Ye;function ba(o){var c=-1,h=o==null?0:o.length;for(this.clear();++c<h;){var g=o[c];this.set(g[0],g[1])}}function g3(){this.__data__=ml?ml(null):{},this.size=0}function m3(o){var c=this.has(o)&&delete this.__data__[o];return this.size-=c?1:0,c}function y3(o){var c=this.__data__;if(ml){var h=c[o];return h===u?n:h}return pt.call(c,o)?c[o]:n}function _3(o){var c=this.__data__;return ml?c[o]!==n:pt.call(c,o)}function w3(o,c){var h=this.__data__;return this.size+=this.has(o)?0:1,h[o]=ml&&c===n?u:c,this}ba.prototype.clear=g3,ba.prototype.delete=m3,ba.prototype.get=y3,ba.prototype.has=_3,ba.prototype.set=w3;function zi(o){var c=-1,h=o==null?0:o.length;for(this.clear();++c<h;){var g=o[c];this.set(g[0],g[1])}}function S3(){this.__data__=[],this.size=0}function b3(o){var c=this.__data__,h=id(c,o);if(h<0)return!1;var g=c.length-1;return h==g?c.pop():Yf.call(c,h,1),--this.size,!0}function T3(o){var c=this.__data__,h=id(c,o);return h<0?n:c[h][1]}function E3(o){return id(this.__data__,o)>-1}function k3(o,c){var h=this.__data__,g=id(h,o);return g<0?(++this.size,h.push([o,c])):h[g][1]=c,this}zi.prototype.clear=S3,zi.prototype.delete=b3,zi.prototype.get=T3,zi.prototype.has=E3,zi.prototype.set=k3;function Hi(o){var c=-1,h=o==null?0:o.length;for(this.clear();++c<h;){var g=o[c];this.set(g[0],g[1])}}function I3(){this.size=0,this.__data__={hash:new ba,map:new(vl||zi),string:new ba}}function C3(o){var c=gd(this,o).delete(o);return this.size-=c?1:0,c}function R3(o){return gd(this,o).get(o)}function x3(o){return gd(this,o).has(o)}function $3(o,c){var h=gd(this,o),g=h.size;return h.set(o,c),this.size+=h.size==g?0:1,this}Hi.prototype.clear=I3,Hi.prototype.delete=C3,Hi.prototype.get=R3,Hi.prototype.has=x3,Hi.prototype.set=$3;function Ta(o){var c=-1,h=o==null?0:o.length;for(this.__data__=new Hi;++c<h;)this.add(o[c])}function P3(o){return this.__data__.set(o,u),this}function A3(o){return this.__data__.has(o)}Ta.prototype.add=Ta.prototype.push=P3,Ta.prototype.has=A3;function ni(o){var c=this.__data__=new zi(o);this.size=c.size}function O3(){this.__data__=new zi,this.size=0}function N3(o){var c=this.__data__,h=c.delete(o);return this.size=c.size,h}function M3(o){return this.__data__.get(o)}function L3(o){return this.__data__.has(o)}function D3(o,c){var h=this.__data__;if(h instanceof zi){var g=h.__data__;if(!vl||g.length<i-1)return g.push([o,c]),this.size=++h.size,this;h=this.__data__=new Hi(g)}return h.set(o,c),this.size=h.size,this}ni.prototype.clear=O3,ni.prototype.delete=N3,ni.prototype.get=M3,ni.prototype.has=L3,ni.prototype.set=D3;function v1(o,c){var h=Fe(o),g=!h&&Ra(o),_=!h&&!g&&Ms(o),C=!h&&!g&&!_&&Mo(o),P=h||g||_||C,L=P?Tg(o.length,GD):[],U=L.length;for(var Z in o)(c||pt.call(o,Z))&&!(P&&(Z=="length"||_&&(Z=="offset"||Z=="parent")||C&&(Z=="buffer"||Z=="byteLength"||Z=="byteOffset")||Ki(Z,U)))&&L.push(Z);return L}function g1(o){var c=o.length;return c?o[Ug(0,c-1)]:n}function F3(o,c){return md(Jn(o),Ea(c,0,o.length))}function j3(o){return md(Jn(o))}function $g(o,c,h){(h!==n&&!ri(o[c],h)||h===n&&!(c in o))&&Vi(o,c,h)}function _l(o,c,h){var g=o[c];(!(pt.call(o,c)&&ri(g,h))||h===n&&!(c in o))&&Vi(o,c,h)}function id(o,c){for(var h=o.length;h--;)if(ri(o[h][0],c))return h;return-1}function U3(o,c,h,g){return Ps(o,function(_,C,P){c(g,_,h(_),P)}),g}function m1(o,c){return o&&Ii(c,fn(c),o)}function B3(o,c){return o&&Ii(c,Xn(c),o)}function Vi(o,c,h){c=="__proto__"&&Xf?Xf(o,c,{configurable:!0,enumerable:!0,value:h,writable:!0}):o[c]=h}function Pg(o,c){for(var h=-1,g=c.length,_=q(g),C=o==null;++h<g;)_[h]=C?n:fm(o,c[h]);return _}function Ea(o,c,h){return o===o&&(h!==n&&(o=o<=h?o:h),c!==n&&(o=o>=c?o:c)),o}function Dr(o,c,h,g,_,C){var P,L=c&p,U=c&v,Z=c&m;if(h&&(P=_?h(o,g,_,C):h(o)),P!==n)return P;if(!Dt(o))return o;var ee=Fe(o);if(ee){if(P=xF(o),!L)return Jn(o,P)}else{var re=kn(o),ge=re==Si||re==Je;if(Ms(o))return B1(o,L);if(re==ce||re==ht||ge&&!_){if(P=U||ge?{}:aT(o),!L)return U?yF(o,B3(P,o)):mF(o,m1(P,o))}else{if(!Et[re])return _?o:{};P=$F(o,re,L)}}C||(C=new ni);var Re=C.get(o);if(Re)return Re;C.set(o,P),MT(o)?o.forEach(function(Pe){P.add(Dr(Pe,c,h,Pe,o,C))}):OT(o)&&o.forEach(function(Pe,Xe){P.set(Xe,Dr(Pe,c,h,Xe,o,C))});var $e=Z?U?Yg:Jg:U?Xn:fn,Ve=ee?n:$e(o);return Nr(Ve||o,function(Pe,Xe){Ve&&(Xe=Pe,Pe=o[Xe]),_l(P,Xe,Dr(Pe,c,h,Xe,o,C))}),P}function W3(o){var c=fn(o);return function(h){return y1(h,o,c)}}function y1(o,c,h){var g=h.length;if(o==null)return!g;for(o=Tt(o);g--;){var _=h[g],C=c[_],P=o[_];if(P===n&&!(_ in o)||!C(P))return!1}return!0}function _1(o,c,h){if(typeof o!="function")throw new Mr(a);return Il(function(){o.apply(n,h)},c)}function wl(o,c,h,g){var _=-1,C=Bf,P=!0,L=o.length,U=[],Z=c.length;if(!L)return U;h&&(c=Ot(c,hr(h))),g?(C=mg,P=!1):c.length>=i&&(C=hl,P=!1,c=new Ta(c));e:for(;++_<L;){var ee=o[_],re=h==null?ee:h(ee);if(ee=g||ee!==0?ee:0,P&&re===re){for(var ge=Z;ge--;)if(c[ge]===re)continue e;U.push(ee)}else C(c,re,g)||U.push(ee)}return U}var Ps=q1(ki),w1=q1(Og,!0);function z3(o,c){var h=!0;return Ps(o,function(g,_,C){return h=!!c(g,_,C),h}),h}function sd(o,c,h){for(var g=-1,_=o.length;++g<_;){var C=o[g],P=c(C);if(P!=null&&(L===n?P===P&&!vr(P):h(P,L)))var L=P,U=C}return U}function H3(o,c,h,g){var _=o.length;for(h=Ue(h),h<0&&(h=-h>_?0:_+h),g=g===n||g>_?_:Ue(g),g<0&&(g+=_),g=h>g?0:DT(g);h<g;)o[h++]=c;return o}function S1(o,c){var h=[];return Ps(o,function(g,_,C){c(g,_,C)&&h.push(g)}),h}function mn(o,c,h,g,_){var C=-1,P=o.length;for(h||(h=AF),_||(_=[]);++C<P;){var L=o[C];c>0&&h(L)?c>1?mn(L,c-1,h,g,_):Rs(_,L):g||(_[_.length]=L)}return _}var Ag=G1(),b1=G1(!0);function ki(o,c){return o&&Ag(o,c,fn)}function Og(o,c){return o&&b1(o,c,fn)}function ad(o,c){return Cs(c,function(h){return Qi(o[h])})}function ka(o,c){c=Os(c,o);for(var h=0,g=c.length;o!=null&&h<g;)o=o[Ci(c[h++])];return h&&h==g?o:n}function T1(o,c,h){var g=c(o);return Fe(o)?g:Rs(g,h(o))}function Dn(o){return o==null?o===n?tl:Wt:Sa&&Sa in Tt(o)?IF(o):jF(o)}function Ng(o,c){return o>c}function V3(o,c){return o!=null&&pt.call(o,c)}function q3(o,c){return o!=null&&c in Tt(o)}function G3(o,c,h){return o>=En(c,h)&&o<nn(c,h)}function Mg(o,c,h){for(var g=h?mg:Bf,_=o[0].length,C=o.length,P=C,L=q(C),U=1/0,Z=[];P--;){var ee=o[P];P&&c&&(ee=Ot(ee,hr(c))),U=En(ee.length,U),L[P]=!h&&(c||_>=120&&ee.length>=120)?new Ta(P&&ee):n}ee=o[0];var re=-1,ge=L[0];e:for(;++re<_&&Z.length<U;){var Re=ee[re],$e=c?c(Re):Re;if(Re=h||Re!==0?Re:0,!(ge?hl(ge,$e):g(Z,$e,h))){for(P=C;--P;){var Ve=L[P];if(!(Ve?hl(Ve,$e):g(o[P],$e,h)))continue e}ge&&ge.push($e),Z.push(Re)}}return Z}function K3(o,c,h,g){return ki(o,function(_,C,P){c(g,h(_),C,P)}),g}function Sl(o,c,h){c=Os(c,o),o=cT(o,c);var g=o==null?o:o[Ci(jr(c))];return g==null?n:dr(g,o,h)}function E1(o){return zt(o)&&Dn(o)==ht}function Q3(o){return zt(o)&&Dn(o)==ot}function J3(o){return zt(o)&&Dn(o)==Ar}function bl(o,c,h,g,_){return o===c?!0:o==null||c==null||!zt(o)&&!zt(c)?o!==o&&c!==c:Y3(o,c,h,g,bl,_)}function Y3(o,c,h,g,_,C){var P=Fe(o),L=Fe(c),U=P?B:kn(o),Z=L?B:kn(c);U=U==ht?ce:U,Z=Z==ht?ce:Z;var ee=U==ce,re=Z==ce,ge=U==Z;if(ge&&Ms(o)){if(!Ms(c))return!1;P=!0,ee=!1}if(ge&&!ee)return C||(C=new ni),P||Mo(o)?rT(o,c,h,g,_,C):EF(o,c,U,h,g,_,C);if(!(h&y)){var Re=ee&&pt.call(o,"__wrapped__"),$e=re&&pt.call(c,"__wrapped__");if(Re||$e){var Ve=Re?o.value():o,Pe=$e?c.value():c;return C||(C=new ni),_(Ve,Pe,h,g,C)}}return ge?(C||(C=new ni),kF(o,c,h,g,_,C)):!1}function X3(o){return zt(o)&&kn(o)==ue}function Lg(o,c,h,g){var _=h.length,C=_,P=!g;if(o==null)return!C;for(o=Tt(o);_--;){var L=h[_];if(P&&L[2]?L[1]!==o[L[0]]:!(L[0]in o))return!1}for(;++_<C;){L=h[_];var U=L[0],Z=o[U],ee=L[1];if(P&&L[2]){if(Z===n&&!(U in o))return!1}else{var re=new ni;if(g)var ge=g(Z,ee,U,o,c,re);if(!(ge===n?bl(ee,Z,y|E,g,re):ge))return!1}}return!0}function k1(o){if(!Dt(o)||NF(o))return!1;var c=Qi(o)?XD:ng;return c.test(Ca(o))}function Z3(o){return zt(o)&&Dn(o)==Bi}function eF(o){return zt(o)&&kn(o)==Ln}function tF(o){return zt(o)&&Td(o.length)&&!!Rt[Dn(o)]}function I1(o){return typeof o=="function"?o:o==null?Zn:Br.default(o)=="object"?Fe(o)?x1(o[0],o[1]):R1(o):KT(o)}function Dg(o){if(!kl(o))return i3(o);var c=[];for(var h in Tt(o))pt.call(o,h)&&h!="constructor"&&c.push(h);return c}function nF(o){if(!Dt(o))return FF(o);var c=kl(o),h=[];for(var g in o)g=="constructor"&&(c||!pt.call(o,g))||h.push(g);return h}function Fg(o,c){return o<c}function C1(o,c){var h=-1,g=Yn(o)?q(o.length):[];return Ps(o,function(_,C,P){g[++h]=c(_,C,P)}),g}function R1(o){var c=Zg(o);return c.length==1&&c[0][2]?uT(c[0][0],c[0][1]):function(h){return h===o||Lg(h,o,c)}}function x1(o,c){return tm(o)&&oT(c)?uT(Ci(o),c):function(h){var g=fm(h,o);return g===n&&g===c?dm(h,o):bl(c,g,y|E)}}function od(o,c,h,g,_){o!==c&&Ag(c,function(C,P){if(_||(_=new ni),Dt(C))rF(o,c,P,h,od,g,_);else{var L=g?g(rm(o,P),C,P+"",o,c,_):n;L===n&&(L=C),$g(o,P,L)}},Xn)}function rF(o,c,h,g,_,C,P){var L=rm(o,h),U=rm(c,h),Z=P.get(U);if(Z){$g(o,h,Z);return}var ee=C?C(L,U,h+"",o,c,P):n,re=ee===n;if(re){var ge=Fe(U),Re=!ge&&Ms(U),$e=!ge&&!Re&&Mo(U);ee=U,ge||Re||$e?Fe(L)?ee=L:qt(L)?ee=Jn(L):Re?(re=!1,ee=B1(U,!0)):$e?(re=!1,ee=W1(U,!0)):ee=[]:Cl(U)||Ra(U)?(ee=L,Ra(L)?ee=FT(L):(!Dt(L)||Qi(L))&&(ee=aT(U))):re=!1}re&&(P.set(U,ee),_(ee,U,g,C,P),P.delete(U)),$g(o,h,ee)}function $1(o,c){var h=o.length;if(h)return c+=c<0?h:0,Ki(c,h)?o[c]:n}function P1(o,c,h){c.length?c=Ot(c,function(C){return Fe(C)?function(P){return ka(P,C.length===1?C[0]:C)}:C}):c=[Zn];var g=-1;c=Ot(c,hr(xe()));var _=C1(o,function(C,P,L){var U=Ot(c,function(Z){return Z(C)});return{criteria:U,index:++g,value:C}});return $D(_,function(C,P){return gF(C,P,h)})}function iF(o,c){return A1(o,c,function(h,g){return dm(o,g)})}function A1(o,c,h){for(var g=-1,_=c.length,C={};++g<_;){var P=c[g],L=ka(o,P);h(L,P)&&Tl(C,Os(P,o),L)}return C}function sF(o){return function(c){return ka(c,o)}}function jg(o,c,h,g){var _=g?xD:Eo,C=-1,P=c.length,L=o;for(o===c&&(c=Jn(c)),h&&(L=Ot(o,hr(h)));++C<P;)for(var U=0,Z=c[C],ee=h?h(Z):Z;(U=_(L,ee,U,g))>-1;)L!==o&&Yf.call(L,U,1),Yf.call(o,U,1);return o}function O1(o,c){for(var h=o?c.length:0,g=h-1;h--;){var _=c[h];if(h==g||_!==C){var C=_;Ki(_)?Yf.call(o,_,1):zg(o,_)}}return o}function Ug(o,c){return o+ed(h1()*(c-o+1))}function aF(o,c,h,g){for(var _=-1,C=nn(Zf((c-o)/(h||1)),0),P=q(C);C--;)P[g?C:++_]=o,o+=h;return P}function Bg(o,c){var h="";if(!o||c<1||c>J)return h;do c%2&&(h+=o),c=ed(c/2),c&&(o+=o);while(c);return h}function qe(o,c){return im(lT(o,c,Zn),o+"")}function oF(o){return g1(Lo(o))}function uF(o,c){var h=Lo(o);return md(h,Ea(c,0,h.length))}function Tl(o,c,h,g){if(!Dt(o))return o;c=Os(c,o);for(var _=-1,C=c.length,P=C-1,L=o;L!=null&&++_<C;){var U=Ci(c[_]),Z=h;if(U==="__proto__"||U==="constructor"||U==="prototype")return o;if(_!=P){var ee=L[U];Z=g?g(ee,U,L):n,Z===n&&(Z=Dt(ee)?ee:Ki(c[_+1])?[]:{})}_l(L,U,Z),L=L[U]}return o}var N1=td?function(o,c){return td.set(o,c),o}:Zn,lF=Xf?function(o,c){return Xf(o,"toString",{configurable:!0,enumerable:!1,value:pm(c),writable:!0})}:Zn;function cF(o){return md(Lo(o))}function Fr(o,c,h){var g=-1,_=o.length;c<0&&(c=-c>_?0:_+c),h=h>_?_:h,h<0&&(h+=_),_=c>h?0:h-c>>>0,c>>>=0;for(var C=q(_);++g<_;)C[g]=o[g+c];return C}function fF(o,c){var h;return Ps(o,function(g,_,C){return h=c(g,_,C),!h}),!!h}function ud(o,c,h){var g=0,_=o==null?g:o.length;if(typeof c=="number"&&c===c&&_<=Tn){for(;g<_;){var C=g+_>>>1,P=o[C];P!==null&&!vr(P)&&(h?P<=c:P<c)?g=C+1:_=C}return _}return Wg(o,c,Zn,h)}function Wg(o,c,h,g){var _=0,C=o==null?0:o.length;if(C===0)return 0;c=h(c);for(var P=c!==c,L=c===null,U=vr(c),Z=c===n;_<C;){var ee=ed((_+C)/2),re=h(o[ee]),ge=re!==n,Re=re===null,$e=re===re,Ve=vr(re);if(P)var Pe=g||$e;else Z?Pe=$e&&(g||ge):L?Pe=$e&&ge&&(g||!Re):U?Pe=$e&&ge&&!Re&&(g||!Ve):Re||Ve?Pe=!1:Pe=g?re<=c:re<c;Pe?_=ee+1:C=ee}return En(C,Qe)}function M1(o,c){for(var h=-1,g=o.length,_=0,C=[];++h<g;){var P=o[h],L=c?c(P):P;if(!h||!ri(L,U)){var U=L;C[_++]=P===0?0:P}}return C}function L1(o){return typeof o=="number"?o:vr(o)?be:+o}function pr(o){if(typeof o=="string")return o;if(Fe(o))return Ot(o,pr)+"";if(vr(o))return p1?p1.call(o):"";var c=o+"";return c=="0"&&1/o==-ve?"-0":c}function As(o,c,h){var g=-1,_=Bf,C=o.length,P=!0,L=[],U=L;if(h)P=!1,_=mg;else if(C>=i){var Z=c?null:bF(o);if(Z)return zf(Z);P=!1,_=hl,U=new Ta}else U=c?[]:L;e:for(;++g<C;){var ee=o[g],re=c?c(ee):ee;if(ee=h||ee!==0?ee:0,P&&re===re){for(var ge=U.length;ge--;)if(U[ge]===re)continue e;c&&U.push(re),L.push(ee)}else _(U,re,h)||(U!==L&&U.push(re),L.push(ee))}return L}function zg(o,c){return c=Os(c,o),o=cT(o,c),o==null||delete o[Ci(jr(c))]}function D1(o,c,h,g){return Tl(o,c,h(ka(o,c)),g)}function ld(o,c,h,g){for(var _=o.length,C=g?_:-1;(g?C--:++C<_)&&c(o[C],C,o););return h?Fr(o,g?0:C,g?C+1:_):Fr(o,g?C+1:0,g?_:C)}function F1(o,c){var h=o;return h instanceof Ye&&(h=h.value()),yg(c,function(g,_){return _.func.apply(_.thisArg,Rs([g],_.args))},h)}function Hg(o,c,h){var g=o.length;if(g<2)return g?As(o[0]):[];for(var _=-1,C=q(g);++_<g;)for(var P=o[_],L=-1;++L<g;)L!=_&&(C[_]=wl(C[_]||P,o[L],c,h));return As(mn(C,1),c,h)}function j1(o,c,h){for(var g=-1,_=o.length,C=c.length,P={};++g<_;){var L=g<C?c[g]:n;h(P,o[g],L)}return P}function Vg(o){return qt(o)?o:[]}function qg(o){return typeof o=="function"?o:Zn}function Os(o,c){return Fe(o)?o:tm(o,c)?[o]:pT(ct(o))}var dF=qe;function Ns(o,c,h){var g=o.length;return h=h===n?g:h,!c&&h>=g?o:Fr(o,c,h)}var U1=ZD||function(o){return gn.clearTimeout(o)};function B1(o,c){if(c)return o.slice();var h=o.length,g=u1?u1(h):new o.constructor(h);return o.copy(g),g}function Gg(o){var c=new o.constructor(o.byteLength);return new Qf(c).set(new Qf(o)),c}function hF(o,c){var h=c?Gg(o.buffer):o.buffer;return new o.constructor(h,o.byteOffset,o.byteLength)}function pF(o){var c=new o.constructor(o.source,Lf.exec(o));return c.lastIndex=o.lastIndex,c}function vF(o){return yl?Tt(yl.call(o)):{}}function W1(o,c){var h=c?Gg(o.buffer):o.buffer;return new o.constructor(h,o.byteOffset,o.length)}function z1(o,c){if(o!==c){var h=o!==n,g=o===null,_=o===o,C=vr(o),P=c!==n,L=c===null,U=c===c,Z=vr(c);if(!L&&!Z&&!C&&o>c||C&&P&&U&&!L&&!Z||g&&P&&U||!h&&U||!_)return 1;if(!g&&!C&&!Z&&o<c||Z&&h&&_&&!g&&!C||L&&h&&_||!P&&_||!U)return-1}return 0}function gF(o,c,h){for(var g=-1,_=o.criteria,C=c.criteria,P=_.length,L=h.length;++g<P;){var U=z1(_[g],C[g]);if(U){if(g>=L)return U;var Z=h[g];return U*(Z=="desc"?-1:1)}}return o.index-c.index}function H1(o,c,h,g){for(var _=-1,C=o.length,P=h.length,L=-1,U=c.length,Z=nn(C-P,0),ee=q(U+Z),re=!g;++L<U;)ee[L]=c[L];for(;++_<P;)(re||_<C)&&(ee[h[_]]=o[_]);for(;Z--;)ee[L++]=o[_++];return ee}function V1(o,c,h,g){for(var _=-1,C=o.length,P=-1,L=h.length,U=-1,Z=c.length,ee=nn(C-L,0),re=q(ee+Z),ge=!g;++_<ee;)re[_]=o[_];for(var Re=_;++U<Z;)re[Re+U]=c[U];for(;++P<L;)(ge||_<C)&&(re[Re+h[P]]=o[_++]);return re}function Jn(o,c){var h=-1,g=o.length;for(c||(c=q(g));++h<g;)c[h]=o[h];return c}function Ii(o,c,h,g){var _=!h;h||(h={});for(var C=-1,P=c.length;++C<P;){var L=c[C],U=g?g(h[L],o[L],L,h,o):n;U===n&&(U=o[L]),_?Vi(h,L,U):_l(h,L,U)}return h}function mF(o,c){return Ii(o,em(o),c)}function yF(o,c){return Ii(o,iT(o),c)}function cd(o,c){return function(h,g){var _=Fe(h)?TD:U3,C=c?c():{};return _(h,o,xe(g,2),C)}}function Ao(o){return qe(function(c,h){var g=-1,_=h.length,C=_>1?h[_-1]:n,P=_>2?h[2]:n;for(C=o.length>3&&typeof C=="function"?(_--,C):n,P&&Fn(h[0],h[1],P)&&(C=_<3?n:C,_=1),c=Tt(c);++g<_;){var L=h[g];L&&o(c,L,g,C)}return c})}function q1(o,c){return function(h,g){if(h==null)return h;if(!Yn(h))return o(h,g);for(var _=h.length,C=c?_:-1,P=Tt(h);(c?C--:++C<_)&&g(P[C],C,P)!==!1;);return h}}function G1(o){return function(c,h,g){for(var _=-1,C=Tt(c),P=g(c),L=P.length;L--;){var U=P[o?L:++_];if(h(C[U],U,C)===!1)break}return c}}function _F(o,c,h){var g=c&b,_=El(o);function C(){var P=this&&this!==gn&&this instanceof C?_:o;return P.apply(g?h:this,arguments)}return C}function K1(o){return function(c){c=ct(c);var h=ko(c)?ti(c):n,g=h?h[0]:c.charAt(0),_=h?Ns(h,1).join(""):c.slice(1);return g[o]()+_}}function Oo(o){return function(c){return yg(qT(VT(c).replace(lD,"")),o,"")}}function El(o){return function(){var c=arguments;switch(c.length){case 0:return new o;case 1:return new o(c[0]);case 2:return new o(c[0],c[1]);case 3:return new o(c[0],c[1],c[2]);case 4:return new o(c[0],c[1],c[2],c[3]);case 5:return new o(c[0],c[1],c[2],c[3],c[4]);case 6:return new o(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new o(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var h=Po(o.prototype),g=o.apply(h,c);return Dt(g)?g:h}}function wF(o,c,h){var g=El(o);function _(){for(var C=arguments.length,P=q(C),L=C,U=No(_);L--;)P[L]=arguments[L];var Z=C<3&&P[0]!==U&&P[C-1]!==U?[]:xs(P,U);if(C-=Z.length,C<h)return Z1(o,c,fd,_.placeholder,n,P,Z,n,n,h-C);var ee=this&&this!==gn&&this instanceof _?g:o;return dr(ee,this,P)}return _}function Q1(o){return function(c,h,g){var _=Tt(c);if(!Yn(c)){var C=xe(h,3);c=fn(c),h=function(U){return C(_[U],U,_)}}var P=o(c,h,g);return P>-1?_[C?c[P]:P]:n}}function J1(o){return Gi(function(c){var h=c.length,g=h,_=Lr.prototype.thru;for(o&&c.reverse();g--;){var C=c[g];if(typeof C!="function")throw new Mr(a);if(_&&!P&&vd(C)=="wrapper")var P=new Lr([],!0)}for(g=P?g:h;++g<h;){C=c[g];var L=vd(C),U=L=="wrapper"?Xg(C):n;U&&nm(U[0])&&U[1]==(K|x|W|A)&&!U[4].length&&U[9]==1?P=P[vd(U[0])].apply(P,U[3]):P=C.length==1&&nm(C)?P[L]():P.thru(C)}return function(){var Z=arguments,ee=Z[0];if(P&&Z.length==1&&Fe(ee))return P.plant(ee).value();for(var re=0,ge=h?c[re].apply(this,Z):ee;++re<h;)ge=c[re].call(this,ge);return ge}})}function fd(o,c,h,g,_,C,P,L,U,Z){var ee=c&K,re=c&b,ge=c&w,Re=c&(x|M),$e=c&ne,Ve=ge?n:El(o);function Pe(){for(var Xe=arguments.length,rt=q(Xe),In=Xe;In--;)rt[In]=arguments[In];if(Re)var jn=No(Pe),gr=AD(rt,jn);if(g&&(rt=H1(rt,g,_,Re)),C&&(rt=V1(rt,C,P,Re)),Xe-=gr,Re&&Xe<Z){var Gt=xs(rt,jn);return Z1(o,c,fd,Pe.placeholder,h,rt,Gt,L,U,Z-Xe)}var ii=re?h:this,Yi=ge?ii[o]:o;return Xe=rt.length,L?rt=UF(rt,L):$e&&Xe>1&&rt.reverse(),ee&&U<Xe&&(rt.length=U),this&&this!==gn&&this instanceof Pe&&(Yi=Ve||El(Yi)),Yi.apply(ii,rt)}return Pe}function Y1(o,c){return function(h,g){return K3(h,o,c(g),{})}}function dd(o,c){return function(h,g){var _;if(h===n&&g===n)return c;if(h!==n&&(_=h),g!==n){if(_===n)return g;typeof h=="string"||typeof g=="string"?(h=pr(h),g=pr(g)):(h=L1(h),g=L1(g)),_=o(h,g)}return _}}function Kg(o){return Gi(function(c){return c=Ot(c,hr(xe())),qe(function(h){var g=this;return o(c,function(_){return dr(_,g,h)})})})}function hd(o,c){c=c===n?" ":pr(c);var h=c.length;if(h<2)return h?Bg(c,o):c;var g=Bg(c,Zf(o/Io(c)));return ko(c)?Ns(ti(g),0,o).join(""):g.slice(0,o)}function SF(o,c,h,g){var _=c&b,C=El(o);function P(){for(var L=-1,U=arguments.length,Z=-1,ee=g.length,re=q(ee+U),ge=this&&this!==gn&&this instanceof P?C:o;++Z<ee;)re[Z]=g[Z];for(;U--;)re[Z++]=arguments[++L];return dr(ge,_?h:this,re)}return P}function X1(o){return function(c,h,g){return g&&typeof g!="number"&&Fn(c,h,g)&&(h=g=n),c=Ji(c),h===n?(h=c,c=0):h=Ji(h),g=g===n?c<h?1:-1:Ji(g),aF(c,h,g,o)}}function pd(o){return function(c,h){return typeof c=="string"&&typeof h=="string"||(c=Ur(c),h=Ur(h)),o(c,h)}}function Z1(o,c,h,g,_,C,P,L,U,Z){var ee=c&x,re=ee?P:n,ge=ee?n:P,Re=ee?C:n,$e=ee?n:C;c|=ee?W:z,c&=~(ee?z:W),c&T||(c&=-4);var Ve=[o,c,_,Re,re,$e,ge,L,U,Z],Pe=h.apply(n,Ve);return nm(o)&&fT(Pe,Ve),Pe.placeholder=g,dT(Pe,o,c)}function Qg(o){var c=tn[o];return function(h,g){if(h=Ur(h),g=g==null?0:En(Ue(g),292),g&&d1(h)){var _=(ct(h)+"e").split("e"),C=c(_[0]+"e"+(+_[1]+g));return _=(ct(C)+"e").split("e"),+(_[0]+"e"+(+_[1]-g))}return c(h)}}var bF=xo&&1/zf(new xo([,-0]))[1]==ve?function(o){return new xo(o)}:mm;function eT(o){return function(c){var h=kn(c);return h==ue?kg(c):h==Ln?jD(c):PD(c,o(c))}}function qi(o,c,h,g,_,C,P,L){var U=c&w;if(!U&&typeof o!="function")throw new Mr(a);var Z=g?g.length:0;if(Z||(c&=-97,g=_=n),P=P===n?P:nn(Ue(P),0),L=L===n?L:Ue(L),Z-=_?_.length:0,c&z){var ee=g,re=_;g=_=n}var ge=U?n:Xg(o),Re=[o,c,h,g,_,ee,re,C,P,L];if(ge&&DF(Re,ge),o=Re[0],c=Re[1],h=Re[2],g=Re[3],_=Re[4],L=Re[9]=Re[9]===n?U?0:o.length:nn(Re[9]-Z,0),!L&&c&(x|M)&&(c&=-25),!c||c==b)var $e=_F(o,c,h);else c==x||c==M?$e=wF(o,c,L):(c==W||c==(b|W))&&!_.length?$e=SF(o,c,h,g):$e=fd.apply(n,Re);var Ve=ge?N1:fT;return dT(Ve($e,Re),o,c)}function tT(o,c,h,g){return o===n||ri(o,Ro[h])&&!pt.call(g,h)?c:o}function nT(o,c,h,g,_,C){return Dt(o)&&Dt(c)&&(C.set(c,o),od(o,c,n,nT,C),C.delete(c)),o}function TF(o){return Cl(o)?n:o}function rT(o,c,h,g,_,C){var P=h&y,L=o.length,U=c.length;if(L!=U&&!(P&&U>L))return!1;var Z=C.get(o),ee=C.get(c);if(Z&&ee)return Z==c&&ee==o;var re=-1,ge=!0,Re=h&E?new Ta:n;for(C.set(o,c),C.set(c,o);++re<L;){var $e=o[re],Ve=c[re];if(g)var Pe=P?g(Ve,$e,re,c,o,C):g($e,Ve,re,o,c,C);if(Pe!==n){if(Pe)continue;ge=!1;break}if(Re){if(!_g(c,function(Xe,rt){if(!hl(Re,rt)&&($e===Xe||_($e,Xe,h,g,C)))return Re.push(rt)})){ge=!1;break}}else if(!($e===Ve||_($e,Ve,h,g,C))){ge=!1;break}}return C.delete(o),C.delete(c),ge}function EF(o,c,h,g,_,C,P){switch(h){case He:if(o.byteLength!=c.byteLength||o.byteOffset!=c.byteOffset)return!1;o=o.buffer,c=c.buffer;case ot:return!(o.byteLength!=c.byteLength||!C(new Qf(o),new Qf(c)));case De:case Ar:case Me:return ri(+o,+c);case Ce:return o.name==c.name&&o.message==c.message;case Bi:case bi:return o==c+"";case ue:var L=kg;case Ln:var U=g&y;if(L||(L=zf),o.size!=c.size&&!U)return!1;var Z=P.get(o);if(Z)return Z==c;g|=E,P.set(o,c);var ee=rT(L(o),L(c),g,_,C,P);return P.delete(o),ee;case Wi:if(yl)return yl.call(o)==yl.call(c)}return!1}function kF(o,c,h,g,_,C){var P=h&y,L=Jg(o),U=L.length,Z=Jg(c),ee=Z.length;if(U!=ee&&!P)return!1;for(var re=U;re--;){var ge=L[re];if(!(P?ge in c:pt.call(c,ge)))return!1}var Re=C.get(o),$e=C.get(c);if(Re&&$e)return Re==c&&$e==o;var Ve=!0;C.set(o,c),C.set(c,o);for(var Pe=P;++re<U;){ge=L[re];var Xe=o[ge],rt=c[ge];if(g)var In=P?g(rt,Xe,ge,c,o,C):g(Xe,rt,ge,o,c,C);if(!(In===n?Xe===rt||_(Xe,rt,h,g,C):In)){Ve=!1;break}Pe||(Pe=ge=="constructor")}if(Ve&&!Pe){var jn=o.constructor,gr=c.constructor;jn!=gr&&"constructor"in o&&"constructor"in c&&!(typeof jn=="function"&&jn instanceof jn&&typeof gr=="function"&&gr instanceof gr)&&(Ve=!1)}return C.delete(o),C.delete(c),Ve}function Gi(o){return im(lT(o,n,yT),o+"")}function Jg(o){return T1(o,fn,em)}function Yg(o){return T1(o,Xn,iT)}var Xg=td?function(o){return td.get(o)}:mm;function vd(o){for(var c=o.name+"",h=$o[c],g=pt.call($o,c)?h.length:0;g--;){var _=h[g],C=_.func;if(C==null||C==o)return _.name}return c}function No(o){var c=pt.call(k,"placeholder")?k:o;return c.placeholder}function xe(){var o=k.iteratee||vm;return o=o===vm?I1:o,arguments.length?o(arguments[0],arguments[1]):o}function gd(o,c){var h=o.__data__;return OF(c)?h[typeof c=="string"?"string":"hash"]:h.map}function Zg(o){for(var c=fn(o),h=c.length;h--;){var g=c[h],_=o[g];c[h]=[g,_,oT(_)]}return c}function Ia(o,c){var h=LD(o,c);return k1(h)?h:n}function IF(o){var c=pt.call(o,Sa),h=o[Sa];try{o[Sa]=n;var g=!0}catch{}var _=Gf.call(o);return g&&(c?o[Sa]=h:delete o[Sa]),_}var em=Cg?function(o){return o==null?[]:(o=Tt(o),Cs(Cg(o),function(c){return c1.call(o,c)}))}:ym,iT=Cg?function(o){for(var c=[];o;)Rs(c,em(o)),o=Jf(o);return c}:ym,kn=Dn;(Rg&&kn(new Rg(new ArrayBuffer(1)))!=He||vl&&kn(new vl)!=ue||xg&&kn(xg.resolve())!=mo||xo&&kn(new xo)!=Ln||gl&&kn(new gl)!=Lt)&&(kn=function(c){var h=Dn(c),g=h==ce?c.constructor:n,_=g?Ca(g):"";if(_)switch(_){case u3:return He;case l3:return ue;case c3:return mo;case f3:return Ln;case d3:return Lt}return h});function CF(o,c,h){for(var g=-1,_=h.length;++g<_;){var C=h[g],P=C.size;switch(C.type){case"drop":o+=P;break;case"dropRight":c-=P;break;case"take":c=En(c,o+P);break;case"takeRight":o=nn(o,c-P);break}}return{start:o,end:c}}function RF(o){var c=o.match(Kv);return c?c[1].split(Qv):[]}function sT(o,c,h){c=Os(c,o);for(var g=-1,_=c.length,C=!1;++g<_;){var P=Ci(c[g]);if(!(C=o!=null&&h(o,P)))break;o=o[P]}return C||++g!=_?C:(_=o==null?0:o.length,!!_&&Td(_)&&Ki(P,_)&&(Fe(o)||Ra(o)))}function xF(o){var c=o.length,h=new o.constructor(c);return c&&typeof o[0]=="string"&&pt.call(o,"index")&&(h.index=o.index,h.input=o.input),h}function aT(o){return typeof o.constructor=="function"&&!kl(o)?Po(Jf(o)):{}}function $F(o,c,h){var g=o.constructor;switch(c){case ot:return Gg(o);case De:case Ar:return new g(+o);case He:return hF(o,h);case vn:case nl:case rl:case il:case yo:case sl:case _o:case wo:case al:return W1(o,h);case ue:return new g;case Me:case bi:return new g(o);case Bi:return pF(o);case Ln:return new g;case Wi:return vF(o)}}function PF(o,c){var h=c.length;if(!h)return o;var g=h-1;return c[g]=(h>1?"& ":"")+c[g],c=c.join(h>2?", ":" "),o.replace(Gv,`{
/* [wrapped with `+c+`] */
`)}function AF(o){return Fe(o)||Ra(o)||!!(f1&&o&&o[f1])}function Ki(o,c){var h=Br.default(o);return c=c??J,!!c&&(h=="number"||h!="symbol"&&ig.test(o))&&o>-1&&o%1==0&&o<c}function Fn(o,c,h){if(!Dt(h))return!1;var g=Br.default(c);return(g=="number"?Yn(h)&&Ki(c,h.length):g=="string"&&c in h)?ri(h[c],o):!1}function tm(o,c){if(Fe(o))return!1;var h=Br.default(o);return h=="number"||h=="symbol"||h=="boolean"||o==null||vr(o)?!0:zv.test(o)||!Wv.test(o)||c!=null&&o in Tt(c)}function OF(o){var c=Br.default(o);return c=="string"||c=="number"||c=="symbol"||c=="boolean"?o!=="__proto__":o===null}function nm(o){var c=vd(o),h=k[c];if(typeof h!="function"||!(c in Ye.prototype))return!1;if(o===h)return!0;var g=Xg(h);return!!g&&o===g[0]}function NF(o){return!!o1&&o1 in o}var MF=Vf?Qi:_m;function kl(o){var c=o&&o.constructor,h=typeof c=="function"&&c.prototype||Ro;return o===h}function oT(o){return o===o&&!Dt(o)}function uT(o,c){return function(h){return h==null?!1:h[o]===c&&(c!==n||o in Tt(h))}}function LF(o){var c=Sd(o,function(g){return h.size===f&&h.clear(),g}),h=c.cache;return c}function DF(o,c){var h=o[1],g=c[1],_=h|g,C=_<(b|w|K),P=g==K&&h==x||g==K&&h==A&&o[7].length<=c[8]||g==(K|A)&&c[7].length<=c[8]&&h==x;if(!(C||P))return o;g&b&&(o[2]=c[2],_|=h&b?0:T);var L=c[3];if(L){var U=o[3];o[3]=U?H1(U,L,c[4]):L,o[4]=U?xs(o[3],d):c[4]}return L=c[5],L&&(U=o[5],o[5]=U?V1(U,L,c[6]):L,o[6]=U?xs(o[5],d):c[6]),L=c[7],L&&(o[7]=L),g&K&&(o[8]=o[8]==null?c[8]:En(o[8],c[8])),o[9]==null&&(o[9]=c[9]),o[0]=c[0],o[1]=_,o}function FF(o){var c=[];if(o!=null)for(var h in Tt(o))c.push(h);return c}function jF(o){return Gf.call(o)}function lT(o,c,h){return c=nn(c===n?o.length-1:c,0),function(){for(var g=arguments,_=-1,C=nn(g.length-c,0),P=q(C);++_<C;)P[_]=g[c+_];_=-1;for(var L=q(c+1);++_<c;)L[_]=g[_];return L[c]=h(P),dr(o,this,L)}}function cT(o,c){return c.length<2?o:ka(o,Fr(c,0,-1))}function UF(o,c){for(var h=o.length,g=En(c.length,h),_=Jn(o);g--;){var C=c[g];o[g]=Ki(C,h)?_[C]:n}return o}function rm(o,c){if(!(c==="constructor"&&typeof o[c]=="function")&&c!="__proto__")return o[c]}var fT=hT(N1),Il=t3||function(o,c){return gn.setTimeout(o,c)},im=hT(lF);function dT(o,c,h){var g=c+"";return im(o,PF(g,BF(RF(g),h)))}function hT(o){var c=0,h=0;return function(){var g=s3(),_=ye-(g-h);if(h=g,_>0){if(++c>=he)return arguments[0]}else c=0;return o.apply(n,arguments)}}function md(o,c){var h=-1,g=o.length,_=g-1;for(c=c===n?g:c;++h<c;){var C=Ug(h,_),P=o[C];o[C]=o[h],o[h]=P}return o.length=c,o}var pT=LF(function(o){var c=[];return o.charCodeAt(0)===46&&c.push(""),o.replace(Hv,function(h,g,_,C){c.push(_?C.replace(Xv,"$1"):g||h)}),c});function Ci(o){if(typeof o=="string"||vr(o))return o;var c=o+"";return c=="0"&&1/o==-ve?"-0":c}function Ca(o){if(o!=null){try{return qf.call(o)}catch{}try{return o+""}catch{}}return""}function BF(o,c){return Nr(ze,function(h){var g="_."+h[0];c&h[1]&&!Bf(o,g)&&o.push(g)}),o.sort()}function vT(o){if(o instanceof Ye)return o.clone();var c=new Lr(o.__wrapped__,o.__chain__);return c.__actions__=Jn(o.__actions__),c.__index__=o.__index__,c.__values__=o.__values__,c}function WF(o,c,h){(h?Fn(o,c,h):c===n)?c=1:c=nn(Ue(c),0);var g=o==null?0:o.length;if(!g||c<1)return[];for(var _=0,C=0,P=q(Zf(g/c));_<g;)P[C++]=Fr(o,_,_+=c);return P}function zF(o){for(var c=-1,h=o==null?0:o.length,g=0,_=[];++c<h;){var C=o[c];C&&(_[g++]=C)}return _}function HF(){var o=arguments.length;if(!o)return[];for(var c=q(o-1),h=arguments[0],g=o;g--;)c[g-1]=arguments[g];return Rs(Fe(h)?Jn(h):[h],mn(c,1))}var VF=qe(function(o,c){return qt(o)?wl(o,mn(c,1,qt,!0)):[]}),qF=qe(function(o,c){var h=jr(c);return qt(h)&&(h=n),qt(o)?wl(o,mn(c,1,qt,!0),xe(h,2)):[]}),GF=qe(function(o,c){var h=jr(c);return qt(h)&&(h=n),qt(o)?wl(o,mn(c,1,qt,!0),n,h):[]});function KF(o,c,h){var g=o==null?0:o.length;return g?(c=h||c===n?1:Ue(c),Fr(o,c<0?0:c,g)):[]}function QF(o,c,h){var g=o==null?0:o.length;return g?(c=h||c===n?1:Ue(c),c=g-c,Fr(o,0,c<0?0:c)):[]}function JF(o,c){return o&&o.length?ld(o,xe(c,3),!0,!0):[]}function YF(o,c){return o&&o.length?ld(o,xe(c,3),!0):[]}function XF(o,c,h,g){var _=o==null?0:o.length;return _?(h&&typeof h!="number"&&Fn(o,c,h)&&(h=0,g=_),H3(o,c,h,g)):[]}function gT(o,c,h){var g=o==null?0:o.length;if(!g)return-1;var _=h==null?0:Ue(h);return _<0&&(_=nn(g+_,0)),Wf(o,xe(c,3),_)}function mT(o,c,h){var g=o==null?0:o.length;if(!g)return-1;var _=g-1;return h!==n&&(_=Ue(h),_=h<0?nn(g+_,0):En(_,g-1)),Wf(o,xe(c,3),_,!0)}function yT(o){var c=o==null?0:o.length;return c?mn(o,1):[]}function ZF(o){var c=o==null?0:o.length;return c?mn(o,ve):[]}function ej(o,c){var h=o==null?0:o.length;return h?(c=c===n?1:Ue(c),mn(o,c)):[]}function tj(o){for(var c=-1,h=o==null?0:o.length,g={};++c<h;){var _=o[c];g[_[0]]=_[1]}return g}function _T(o){return o&&o.length?o[0]:n}function nj(o,c,h){var g=o==null?0:o.length;if(!g)return-1;var _=h==null?0:Ue(h);return _<0&&(_=nn(g+_,0)),Eo(o,c,_)}function rj(o){var c=o==null?0:o.length;return c?Fr(o,0,-1):[]}var ij=qe(function(o){var c=Ot(o,Vg);return c.length&&c[0]===o[0]?Mg(c):[]}),sj=qe(function(o){var c=jr(o),h=Ot(o,Vg);return c===jr(h)?c=n:h.pop(),h.length&&h[0]===o[0]?Mg(h,xe(c,2)):[]}),aj=qe(function(o){var c=jr(o),h=Ot(o,Vg);return c=typeof c=="function"?c:n,c&&h.pop(),h.length&&h[0]===o[0]?Mg(h,n,c):[]});function oj(o,c){return o==null?"":r3.call(o,c)}function jr(o){var c=o==null?0:o.length;return c?o[c-1]:n}function uj(o,c,h){var g=o==null?0:o.length;if(!g)return-1;var _=g;return h!==n&&(_=Ue(h),_=_<0?nn(g+_,0):En(_,g-1)),c===c?BD(o,c,_):Wf(o,Zb,_,!0)}function lj(o,c){return o&&o.length?$1(o,Ue(c)):n}var cj=qe(wT);function wT(o,c){return o&&o.length&&c&&c.length?jg(o,c):o}function fj(o,c,h){return o&&o.length&&c&&c.length?jg(o,c,xe(h,2)):o}function dj(o,c,h){return o&&o.length&&c&&c.length?jg(o,c,n,h):o}var hj=Gi(function(o,c){var h=o==null?0:o.length,g=Pg(o,c);return O1(o,Ot(c,function(_){return Ki(_,h)?+_:_}).sort(z1)),g});function pj(o,c){var h=[];if(!(o&&o.length))return h;var g=-1,_=[],C=o.length;for(c=xe(c,3);++g<C;){var P=o[g];c(P,g,o)&&(h.push(P),_.push(g))}return O1(o,_),h}function sm(o){return o==null?o:o3.call(o)}function vj(o,c,h){var g=o==null?0:o.length;return g?(h&&typeof h!="number"&&Fn(o,c,h)?(c=0,h=g):(c=c==null?0:Ue(c),h=h===n?g:Ue(h)),Fr(o,c,h)):[]}function gj(o,c){return ud(o,c)}function mj(o,c,h){return Wg(o,c,xe(h,2))}function yj(o,c){var h=o==null?0:o.length;if(h){var g=ud(o,c);if(g<h&&ri(o[g],c))return g}return-1}function _j(o,c){return ud(o,c,!0)}function wj(o,c,h){return Wg(o,c,xe(h,2),!0)}function Sj(o,c){var h=o==null?0:o.length;if(h){var g=ud(o,c,!0)-1;if(ri(o[g],c))return g}return-1}function bj(o){return o&&o.length?M1(o):[]}function Tj(o,c){return o&&o.length?M1(o,xe(c,2)):[]}function Ej(o){var c=o==null?0:o.length;return c?Fr(o,1,c):[]}function kj(o,c,h){return o&&o.length?(c=h||c===n?1:Ue(c),Fr(o,0,c<0?0:c)):[]}function Ij(o,c,h){var g=o==null?0:o.length;return g?(c=h||c===n?1:Ue(c),c=g-c,Fr(o,c<0?0:c,g)):[]}function Cj(o,c){return o&&o.length?ld(o,xe(c,3),!1,!0):[]}function Rj(o,c){return o&&o.length?ld(o,xe(c,3)):[]}var xj=qe(function(o){return As(mn(o,1,qt,!0))}),$j=qe(function(o){var c=jr(o);return qt(c)&&(c=n),As(mn(o,1,qt,!0),xe(c,2))}),Pj=qe(function(o){var c=jr(o);return c=typeof c=="function"?c:n,As(mn(o,1,qt,!0),n,c)});function Aj(o){return o&&o.length?As(o):[]}function Oj(o,c){return o&&o.length?As(o,xe(c,2)):[]}function Nj(o,c){return c=typeof c=="function"?c:n,o&&o.length?As(o,n,c):[]}function am(o){if(!(o&&o.length))return[];var c=0;return o=Cs(o,function(h){if(qt(h))return c=nn(h.length,c),!0}),Tg(c,function(h){return Ot(o,wg(h))})}function ST(o,c){if(!(o&&o.length))return[];var h=am(o);return c==null?h:Ot(h,function(g){return dr(c,n,g)})}var Mj=qe(function(o,c){return qt(o)?wl(o,c):[]}),Lj=qe(function(o){return Hg(Cs(o,qt))}),Dj=qe(function(o){var c=jr(o);return qt(c)&&(c=n),Hg(Cs(o,qt),xe(c,2))}),Fj=qe(function(o){var c=jr(o);return c=typeof c=="function"?c:n,Hg(Cs(o,qt),n,c)}),jj=qe(am);function Uj(o,c){return j1(o||[],c||[],_l)}function Bj(o,c){return j1(o||[],c||[],Tl)}var Wj=qe(function(o){var c=o.length,h=c>1?o[c-1]:n;return h=typeof h=="function"?(o.pop(),h):n,ST(o,h)});function bT(o){var c=k(o);return c.__chain__=!0,c}function zj(o,c){return c(o),o}function yd(o,c){return c(o)}var Hj=Gi(function(o){var c=o.length,h=c?o[0]:0,g=this.__wrapped__,_=function(P){return Pg(P,o)};return c>1||this.__actions__.length||!(g instanceof Ye)||!Ki(h)?this.thru(_):(g=g.slice(h,+h+(c?1:0)),g.__actions__.push({func:yd,args:[_],thisArg:n}),new Lr(g,this.__chain__).thru(function(C){return c&&!C.length&&C.push(n),C}))});function Vj(){return bT(this)}function qj(){return new Lr(this.value(),this.__chain__)}function Gj(){this.__values__===n&&(this.__values__=LT(this.value()));var o=this.__index__>=this.__values__.length,c=o?n:this.__values__[this.__index__++];return{done:o,value:c}}function Kj(){return this}function Qj(o){for(var c,h=this;h instanceof rd;){var g=vT(h);g.__index__=0,g.__values__=n,c?_.__wrapped__=g:c=g;var _=g;h=h.__wrapped__}return _.__wrapped__=o,c}function Jj(){var o=this.__wrapped__;if(o instanceof Ye){var c=o;return this.__actions__.length&&(c=new Ye(this)),c=c.reverse(),c.__actions__.push({func:yd,args:[sm],thisArg:n}),new Lr(c,this.__chain__)}return this.thru(sm)}function Yj(){return F1(this.__wrapped__,this.__actions__)}var Xj=cd(function(o,c,h){pt.call(o,h)?++o[h]:Vi(o,h,1)});function Zj(o,c,h){var g=Fe(o)?Yb:z3;return h&&Fn(o,c,h)&&(c=n),g(o,xe(c,3))}function eU(o,c){var h=Fe(o)?Cs:S1;return h(o,xe(c,3))}var tU=Q1(gT),nU=Q1(mT);function rU(o,c){return mn(_d(o,c),1)}function iU(o,c){return mn(_d(o,c),ve)}function sU(o,c,h){return h=h===n?1:Ue(h),mn(_d(o,c),h)}function TT(o,c){var h=Fe(o)?Nr:Ps;return h(o,xe(c,3))}function ET(o,c){var h=Fe(o)?ED:w1;return h(o,xe(c,3))}var aU=cd(function(o,c,h){pt.call(o,h)?o[h].push(c):Vi(o,h,[c])});function oU(o,c,h,g){o=Yn(o)?o:Lo(o),h=h&&!g?Ue(h):0;var _=o.length;return h<0&&(h=nn(_+h,0)),Ed(o)?h<=_&&o.indexOf(c,h)>-1:!!_&&Eo(o,c,h)>-1}var uU=qe(function(o,c,h){var g=-1,_=typeof c=="function",C=Yn(o)?q(o.length):[];return Ps(o,function(P){C[++g]=_?dr(c,P,h):Sl(P,c,h)}),C}),lU=cd(function(o,c,h){Vi(o,h,c)});function _d(o,c){var h=Fe(o)?Ot:C1;return h(o,xe(c,3))}function cU(o,c,h,g){return o==null?[]:(Fe(c)||(c=c==null?[]:[c]),h=g?n:h,Fe(h)||(h=h==null?[]:[h]),P1(o,c,h))}var fU=cd(function(o,c,h){o[h?0:1].push(c)},function(){return[[],[]]});function dU(o,c,h){var g=Fe(o)?yg:t1,_=arguments.length<3;return g(o,xe(c,4),h,_,Ps)}function hU(o,c,h){var g=Fe(o)?kD:t1,_=arguments.length<3;return g(o,xe(c,4),h,_,w1)}function pU(o,c){var h=Fe(o)?Cs:S1;return h(o,bd(xe(c,3)))}function vU(o){var c=Fe(o)?g1:oF;return c(o)}function gU(o,c,h){(h?Fn(o,c,h):c===n)?c=1:c=Ue(c);var g=Fe(o)?F3:uF;return g(o,c)}function mU(o){var c=Fe(o)?j3:cF;return c(o)}function yU(o){if(o==null)return 0;if(Yn(o))return Ed(o)?Io(o):o.length;var c=kn(o);return c==ue||c==Ln?o.size:Dg(o).length}function _U(o,c,h){var g=Fe(o)?_g:fF;return h&&Fn(o,c,h)&&(c=n),g(o,xe(c,3))}var wU=qe(function(o,c){if(o==null)return[];var h=c.length;return h>1&&Fn(o,c[0],c[1])?c=[]:h>2&&Fn(c[0],c[1],c[2])&&(c=[c[0]]),P1(o,mn(c,1),[])}),wd=e3||function(){return gn.Date.now()};function SU(o,c){if(typeof c!="function")throw new Mr(a);return o=Ue(o),function(){if(--o<1)return c.apply(this,arguments)}}function kT(o,c,h){return c=h?n:c,c=o&&c==null?o.length:c,qi(o,K,n,n,n,n,c)}function IT(o,c){var h;if(typeof c!="function")throw new Mr(a);return o=Ue(o),function(){return--o>0&&(h=c.apply(this,arguments)),o<=1&&(c=n),h}}var om=qe(function(o,c,h){var g=b;if(h.length){var _=xs(h,No(om));g|=W}return qi(o,g,c,h,_)}),CT=qe(function(o,c,h){var g=b|w;if(h.length){var _=xs(h,No(CT));g|=W}return qi(c,g,o,h,_)});function RT(o,c,h){c=h?n:c;var g=qi(o,x,n,n,n,n,n,c);return g.placeholder=RT.placeholder,g}function xT(o,c,h){c=h?n:c;var g=qi(o,M,n,n,n,n,n,c);return g.placeholder=xT.placeholder,g}function $T(o,c,h){var g,_,C,P,L,U,Z=0,ee=!1,re=!1,ge=!0;if(typeof o!="function")throw new Mr(a);c=Ur(c)||0,Dt(h)&&(ee=!!h.leading,re="maxWait"in h,C=re?nn(Ur(h.maxWait)||0,c):C,ge="trailing"in h?!!h.trailing:ge);function Re(Gt){var ii=g,Yi=_;return g=_=n,Z=Gt,P=o.apply(Yi,ii),P}function $e(Gt){return Z=Gt,L=Il(Xe,c),ee?Re(Gt):P}function Ve(Gt){var ii=Gt-U,Yi=Gt-Z,QT=c-ii;return re?En(QT,C-Yi):QT}function Pe(Gt){var ii=Gt-U,Yi=Gt-Z;return U===n||ii>=c||ii<0||re&&Yi>=C}function Xe(){var Gt=wd();if(Pe(Gt))return rt(Gt);L=Il(Xe,Ve(Gt))}function rt(Gt){return L=n,ge&&g?Re(Gt):(g=_=n,P)}function In(){L!==n&&U1(L),Z=0,g=U=_=L=n}function jn(){return L===n?P:rt(wd())}function gr(){var Gt=wd(),ii=Pe(Gt);if(g=arguments,_=this,U=Gt,ii){if(L===n)return $e(U);if(re)return U1(L),L=Il(Xe,c),Re(U)}return L===n&&(L=Il(Xe,c)),P}return gr.cancel=In,gr.flush=jn,gr}var bU=qe(function(o,c){return _1(o,1,c)}),TU=qe(function(o,c,h){return _1(o,Ur(c)||0,h)});function EU(o){return qi(o,ne)}function Sd(o,c){if(typeof o!="function"||c!=null&&typeof c!="function")throw new Mr(a);var h=function g(){var _=arguments,C=c?c.apply(this,_):_[0],P=g.cache;if(P.has(C))return P.get(C);var L=o.apply(this,_);return g.cache=P.set(C,L)||P,L};return h.cache=new(Sd.Cache||Hi),h}Sd.Cache=Hi;function bd(o){if(typeof o!="function")throw new Mr(a);return function(){var c=arguments;switch(c.length){case 0:return!o.call(this);case 1:return!o.call(this,c[0]);case 2:return!o.call(this,c[0],c[1]);case 3:return!o.call(this,c[0],c[1],c[2])}return!o.apply(this,c)}}function kU(o){return IT(2,o)}var IU=dF(function(o,c){c=c.length==1&&Fe(c[0])?Ot(c[0],hr(xe())):Ot(mn(c,1),hr(xe()));var h=c.length;return qe(function(g){for(var _=-1,C=En(g.length,h);++_<C;)g[_]=c[_].call(this,g[_]);return dr(o,this,g)})}),um=qe(function(o,c){var h=xs(c,No(um));return qi(o,W,n,c,h)}),PT=qe(function(o,c){var h=xs(c,No(PT));return qi(o,z,n,c,h)}),CU=Gi(function(o,c){return qi(o,A,n,n,n,c)});function RU(o,c){if(typeof o!="function")throw new Mr(a);return c=c===n?c:Ue(c),qe(o,c)}function xU(o,c){if(typeof o!="function")throw new Mr(a);return c=c==null?0:nn(Ue(c),0),qe(function(h){var g=h[c],_=Ns(h,0,c);return g&&Rs(_,g),dr(o,this,_)})}function $U(o,c,h){var g=!0,_=!0;if(typeof o!="function")throw new Mr(a);return Dt(h)&&(g="leading"in h?!!h.leading:g,_="trailing"in h?!!h.trailing:_),$T(o,c,{leading:g,maxWait:c,trailing:_})}function PU(o){return kT(o,1)}function AU(o,c){return um(qg(c),o)}function OU(){if(!arguments.length)return[];var o=arguments[0];return Fe(o)?o:[o]}function NU(o){return Dr(o,m)}function MU(o,c){return c=typeof c=="function"?c:n,Dr(o,m,c)}function LU(o){return Dr(o,p|m)}function DU(o,c){return c=typeof c=="function"?c:n,Dr(o,p|m,c)}function FU(o,c){return c==null||y1(o,c,fn(c))}function ri(o,c){return o===c||o!==o&&c!==c}var jU=pd(Ng),UU=pd(function(o,c){return o>=c}),Ra=E1(function(){return arguments}())?E1:function(o){return zt(o)&&pt.call(o,"callee")&&!c1.call(o,"callee")},Fe=q.isArray,BU=Vb?hr(Vb):Q3;function Yn(o){return o!=null&&Td(o.length)&&!Qi(o)}function qt(o){return zt(o)&&Yn(o)}function WU(o){return o===!0||o===!1||zt(o)&&Dn(o)==De}var Ms=n3||_m,zU=qb?hr(qb):J3;function HU(o){return zt(o)&&o.nodeType===1&&!Cl(o)}function VU(o){if(o==null)return!0;if(Yn(o)&&(Fe(o)||typeof o=="string"||typeof o.splice=="function"||Ms(o)||Mo(o)||Ra(o)))return!o.length;var c=kn(o);if(c==ue||c==Ln)return!o.size;if(kl(o))return!Dg(o).length;for(var h in o)if(pt.call(o,h))return!1;return!0}function qU(o,c){return bl(o,c)}function GU(o,c,h){h=typeof h=="function"?h:n;var g=h?h(o,c):n;return g===n?bl(o,c,n,h):!!g}function lm(o){if(!zt(o))return!1;var c=Dn(o);return c==Ce||c==ln||typeof o.message=="string"&&typeof o.name=="string"&&!Cl(o)}function KU(o){return typeof o=="number"&&d1(o)}function Qi(o){if(!Dt(o))return!1;var c=Dn(o);return c==Si||c==Je||c==pe||c==el}function AT(o){return typeof o=="number"&&o==Ue(o)}function Td(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=J}function Dt(o){var c=Br.default(o);return o!=null&&(c=="object"||c=="function")}function zt(o){return o!=null&&Br.default(o)=="object"}var OT=Gb?hr(Gb):X3;function QU(o,c){return o===c||Lg(o,c,Zg(c))}function JU(o,c,h){return h=typeof h=="function"?h:n,Lg(o,c,Zg(c),h)}function YU(o){return NT(o)&&o!=+o}function XU(o){if(MF(o))throw new Le(s);return k1(o)}function ZU(o){return o===null}function e4(o){return o==null}function NT(o){return typeof o=="number"||zt(o)&&Dn(o)==Me}function Cl(o){if(!zt(o)||Dn(o)!=ce)return!1;var c=Jf(o);if(c===null)return!0;var h=pt.call(c,"constructor")&&c.constructor;return typeof h=="function"&&h instanceof h&&qf.call(h)==JD}var cm=Kb?hr(Kb):Z3;function t4(o){return AT(o)&&o>=-J&&o<=J}var MT=Qb?hr(Qb):eF;function Ed(o){return typeof o=="string"||!Fe(o)&&zt(o)&&Dn(o)==bi}function vr(o){return Br.default(o)=="symbol"||zt(o)&&Dn(o)==Wi}var Mo=Jb?hr(Jb):tF;function n4(o){return o===n}function r4(o){return zt(o)&&kn(o)==Lt}function i4(o){return zt(o)&&Dn(o)==Yt}var s4=pd(Fg),a4=pd(function(o,c){return o<=c});function LT(o){if(!o)return[];if(Yn(o))return Ed(o)?ti(o):Jn(o);if(pl&&o[pl])return FD(o[pl]());var c=kn(o),h=c==ue?kg:c==Ln?zf:Lo;return h(o)}function Ji(o){if(!o)return o===0?o:0;if(o=Ur(o),o===ve||o===-ve){var c=o<0?-1:1;return c*fe}return o===o?o:0}function Ue(o){var c=Ji(o),h=c%1;return c===c?h?c-h:c:0}function DT(o){return o?Ea(Ue(o),0,G):0}function Ur(o){if(typeof o=="number")return o;if(vr(o))return be;if(Dt(o)){var c=typeof o.valueOf=="function"?o.valueOf():o;o=Dt(c)?c+"":c}if(typeof o!="string")return o===0?o:+o;o=n1(o);var h=tg.test(o);return h||rg.test(o)?SD(o.slice(2),h?2:8):eg.test(o)?be:+o}function FT(o){return Ii(o,Xn(o))}function o4(o){return o?Ea(Ue(o),-J,J):o===0?o:0}function ct(o){return o==null?"":pr(o)}var u4=Ao(function(o,c){if(kl(c)||Yn(c)){Ii(c,fn(c),o);return}for(var h in c)pt.call(c,h)&&_l(o,h,c[h])}),jT=Ao(function(o,c){Ii(c,Xn(c),o)}),kd=Ao(function(o,c,h,g){Ii(c,Xn(c),o,g)}),l4=Ao(function(o,c,h,g){Ii(c,fn(c),o,g)}),c4=Gi(Pg);function f4(o,c){var h=Po(o);return c==null?h:m1(h,c)}var d4=qe(function(o,c){o=Tt(o);var h=-1,g=c.length,_=g>2?c[2]:n;for(_&&Fn(c[0],c[1],_)&&(g=1);++h<g;)for(var C=c[h],P=Xn(C),L=-1,U=P.length;++L<U;){var Z=P[L],ee=o[Z];(ee===n||ri(ee,Ro[Z])&&!pt.call(o,Z))&&(o[Z]=C[Z])}return o}),h4=qe(function(o){return o.push(n,nT),dr(UT,n,o)});function p4(o,c){return Xb(o,xe(c,3),ki)}function v4(o,c){return Xb(o,xe(c,3),Og)}function g4(o,c){return o==null?o:Ag(o,xe(c,3),Xn)}function m4(o,c){return o==null?o:b1(o,xe(c,3),Xn)}function y4(o,c){return o&&ki(o,xe(c,3))}function _4(o,c){return o&&Og(o,xe(c,3))}function w4(o){return o==null?[]:ad(o,fn(o))}function S4(o){return o==null?[]:ad(o,Xn(o))}function fm(o,c,h){var g=o==null?n:ka(o,c);return g===n?h:g}function b4(o,c){return o!=null&&sT(o,c,V3)}function dm(o,c){return o!=null&&sT(o,c,q3)}var T4=Y1(function(o,c,h){c!=null&&typeof c.toString!="function"&&(c=Gf.call(c)),o[c]=h},pm(Zn)),E4=Y1(function(o,c,h){c!=null&&typeof c.toString!="function"&&(c=Gf.call(c)),pt.call(o,c)?o[c].push(h):o[c]=[h]},xe),k4=qe(Sl);function fn(o){return Yn(o)?v1(o):Dg(o)}function Xn(o){return Yn(o)?v1(o,!0):nF(o)}function I4(o,c){var h={};return c=xe(c,3),ki(o,function(g,_,C){Vi(h,c(g,_,C),g)}),h}function C4(o,c){var h={};return c=xe(c,3),ki(o,function(g,_,C){Vi(h,_,c(g,_,C))}),h}var R4=Ao(function(o,c,h){od(o,c,h)}),UT=Ao(function(o,c,h,g){od(o,c,h,g)}),x4=Gi(function(o,c){var h={};if(o==null)return h;var g=!1;c=Ot(c,function(C){return C=Os(C,o),g||(g=C.length>1),C}),Ii(o,Yg(o),h),g&&(h=Dr(h,p|v|m,TF));for(var _=c.length;_--;)zg(h,c[_]);return h});function $4(o,c){return BT(o,bd(xe(c)))}var P4=Gi(function(o,c){return o==null?{}:iF(o,c)});function BT(o,c){if(o==null)return{};var h=Ot(Yg(o),function(g){return[g]});return c=xe(c),A1(o,h,function(g,_){return c(g,_[0])})}function A4(o,c,h){c=Os(c,o);var g=-1,_=c.length;for(_||(_=1,o=n);++g<_;){var C=o==null?n:o[Ci(c[g])];C===n&&(g=_,C=h),o=Qi(C)?C.call(o):C}return o}function O4(o,c,h){return o==null?o:Tl(o,c,h)}function N4(o,c,h,g){return g=typeof g=="function"?g:n,o==null?o:Tl(o,c,h,g)}var WT=eT(fn),zT=eT(Xn);function M4(o,c,h){var g=Fe(o),_=g||Ms(o)||Mo(o);if(c=xe(c,4),h==null){var C=o&&o.constructor;_?h=g?new C:[]:Dt(o)?h=Qi(C)?Po(Jf(o)):{}:h={}}return(_?Nr:ki)(o,function(P,L,U){return c(h,P,L,U)}),h}function L4(o,c){return o==null?!0:zg(o,c)}function D4(o,c,h){return o==null?o:D1(o,c,qg(h))}function F4(o,c,h,g){return g=typeof g=="function"?g:n,o==null?o:D1(o,c,qg(h),g)}function Lo(o){return o==null?[]:Eg(o,fn(o))}function j4(o){return o==null?[]:Eg(o,Xn(o))}function U4(o,c,h){return h===n&&(h=c,c=n),h!==n&&(h=Ur(h),h=h===h?h:0),c!==n&&(c=Ur(c),c=c===c?c:0),Ea(Ur(o),c,h)}function B4(o,c,h){return c=Ji(c),h===n?(h=c,c=0):h=Ji(h),o=Ur(o),G3(o,c,h)}function W4(o,c,h){if(h&&typeof h!="boolean"&&Fn(o,c,h)&&(c=h=n),h===n&&(typeof c=="boolean"?(h=c,c=n):typeof o=="boolean"&&(h=o,o=n)),o===n&&c===n?(o=0,c=1):(o=Ji(o),c===n?(c=o,o=0):c=Ji(c)),o>c){var g=o;o=c,c=g}if(h||o%1||c%1){var _=h1();return En(o+_*(c-o+wD("1e-"+((_+"").length-1))),c)}return Ug(o,c)}var z4=Oo(function(o,c,h){return c=c.toLowerCase(),o+(h?HT(c):c)});function HT(o){return hm(ct(o).toLowerCase())}function VT(o){return o=ct(o),o&&o.replace(sg,OD).replace(cD,"")}function H4(o,c,h){o=ct(o),c=pr(c);var g=o.length;h=h===n?g:Ea(Ue(h),0,g);var _=h;return h-=c.length,h>=0&&o.slice(h,_)==c}function V4(o){return o=ct(o),o&&ol.test(o)?o.replace(Af,ND):o}function q4(o){return o=ct(o),o&&Vv.test(o)?o.replace(ul,"\\$&"):o}var G4=Oo(function(o,c,h){return o+(h?"-":"")+c.toLowerCase()}),K4=Oo(function(o,c,h){return o+(h?" ":"")+c.toLowerCase()}),Q4=K1("toLowerCase");function J4(o,c,h){o=ct(o),c=Ue(c);var g=c?Io(o):0;if(!c||g>=c)return o;var _=(c-g)/2;return hd(ed(_),h)+o+hd(Zf(_),h)}function Y4(o,c,h){o=ct(o),c=Ue(c);var g=c?Io(o):0;return c&&g<c?o+hd(c-g,h):o}function X4(o,c,h){o=ct(o),c=Ue(c);var g=c?Io(o):0;return c&&g<c?hd(c-g,h)+o:o}function Z4(o,c,h){return h||c==null?c=0:c&&(c=+c),a3(ct(o).replace(ll,""),c||0)}function eB(o,c,h){return(h?Fn(o,c,h):c===n)?c=1:c=Ue(c),Bg(ct(o),c)}function tB(){var o=arguments,c=ct(o[0]);return o.length<3?c:c.replace(o[1],o[2])}var nB=Oo(function(o,c,h){return o+(h?"_":"")+c.toLowerCase()});function rB(o,c,h){return h&&typeof h!="number"&&Fn(o,c,h)&&(c=h=n),h=h===n?G:h>>>0,h?(o=ct(o),o&&(typeof c=="string"||c!=null&&!cm(c))&&(c=pr(c),!c&&ko(o))?Ns(ti(o),0,h):o.split(c,h)):[]}var iB=Oo(function(o,c,h){return o+(h?" ":"")+hm(c)});function sB(o,c,h){return o=ct(o),h=h==null?0:Ea(Ue(h),0,o.length),c=pr(c),o.slice(h,h+c.length)==c}function aB(o,c,h){var g=k.templateSettings;h&&Fn(o,c,h)&&(c=n),o=ct(o),c=kd({},c,g,tT);var _=kd({},c.imports,g.imports,tT),C=fn(_),P=Eg(_,C),L,U,Z=0,ee=c.interpolate||So,re="__p += '",ge=Ig((c.escape||So).source+"|"+ee.source+"|"+(ee===Mf?Zv:So).source+"|"+(c.evaluate||So).source+"|$","g"),Re="//# sourceURL="+(pt.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++vD+"]")+`
`;o.replace(ge,function(Pe,Xe,rt,In,jn,gr){return rt||(rt=In),re+=o.slice(Z,gr).replace(ag,MD),Xe&&(L=!0,re+=`' +
__e(`+Xe+`) +
'`),jn&&(U=!0,re+=`';
`+jn+`;
__p += '`),rt&&(re+=`' +
((__t = (`+rt+`)) == null ? '' : __t) +
'`),Z=gr+Pe.length,Pe}),re+=`';
`;var $e=pt.call(c,"variable")&&c.variable;if(!$e)re=`with (obj) {
`+re+`
}
`;else if(Yv.test($e))throw new Le(l);re=(U?re.replace(Pf,""):re).replace(jv,"$1").replace(Uv,"$1;"),re="function("+($e||"obj")+`) {
`+($e?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(L?", __e = _.escape":"")+(U?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+re+`return __p
}`;var Ve=GT(function(){return ut(C,Re+"return "+re).apply(n,P)});if(Ve.source=re,lm(Ve))throw Ve;return Ve}function oB(o){return ct(o).toLowerCase()}function uB(o){return ct(o).toUpperCase()}function lB(o,c,h){if(o=ct(o),o&&(h||c===n))return n1(o);if(!o||!(c=pr(c)))return o;var g=ti(o),_=ti(c),C=r1(g,_),P=i1(g,_)+1;return Ns(g,C,P).join("")}function cB(o,c,h){if(o=ct(o),o&&(h||c===n))return o.slice(0,a1(o)+1);if(!o||!(c=pr(c)))return o;var g=ti(o),_=i1(g,ti(c))+1;return Ns(g,0,_).join("")}function fB(o,c,h){if(o=ct(o),o&&(h||c===n))return o.replace(ll,"");if(!o||!(c=pr(c)))return o;var g=ti(o),_=r1(g,ti(c));return Ns(g,_).join("")}function dB(o,c){var h=X,g=oe;if(Dt(c)){var _="separator"in c?c.separator:_;h="length"in c?Ue(c.length):h,g="omission"in c?pr(c.omission):g}o=ct(o);var C=o.length;if(ko(o)){var P=ti(o);C=P.length}if(h>=C)return o;var L=h-Io(g);if(L<1)return g;var U=P?Ns(P,0,L).join(""):o.slice(0,L);if(_===n)return U+g;if(P&&(L+=U.length-L),cm(_)){if(o.slice(L).search(_)){var Z,ee=U;for(_.global||(_=Ig(_.source,ct(Lf.exec(_))+"g")),_.lastIndex=0;Z=_.exec(ee);)var re=Z.index;U=U.slice(0,re===n?L:re)}}else if(o.indexOf(pr(_),L)!=L){var ge=U.lastIndexOf(_);ge>-1&&(U=U.slice(0,ge))}return U+g}function hB(o){return o=ct(o),o&&Bv.test(o)?o.replace(cn,WD):o}var pB=Oo(function(o,c,h){return o+(h?" ":"")+c.toUpperCase()}),hm=K1("toUpperCase");function qT(o,c,h){return o=ct(o),c=h?n:c,c===n?DD(o)?VD(o):RD(o):o.match(c)||[]}var GT=qe(function(o,c){try{return dr(o,n,c)}catch(h){return lm(h)?h:new Le(h)}}),vB=Gi(function(o,c){return Nr(c,function(h){h=Ci(h),Vi(o,h,om(o[h],o))}),o});function gB(o){var c=o==null?0:o.length,h=xe();return o=c?Ot(o,function(g){if(typeof g[1]!="function")throw new Mr(a);return[h(g[0]),g[1]]}):[],qe(function(g){for(var _=-1;++_<c;){var C=o[_];if(dr(C[0],this,g))return dr(C[1],this,g)}})}function mB(o){return W3(Dr(o,p))}function pm(o){return function(){return o}}function yB(o,c){return o==null||o!==o?c:o}var _B=J1(),wB=J1(!0);function Zn(o){return o}function vm(o){return I1(typeof o=="function"?o:Dr(o,p))}function SB(o){return R1(Dr(o,p))}function bB(o,c){return x1(o,Dr(c,p))}var TB=qe(function(o,c){return function(h){return Sl(h,o,c)}}),EB=qe(function(o,c){return function(h){return Sl(o,h,c)}});function gm(o,c,h){var g=fn(c),_=ad(c,g);h==null&&!(Dt(c)&&(_.length||!g.length))&&(h=c,c=o,o=this,_=ad(c,fn(c)));var C=!(Dt(h)&&"chain"in h)||!!h.chain,P=Qi(o);return Nr(_,function(L){var U=c[L];o[L]=U,P&&(o.prototype[L]=function(){var Z=this.__chain__;if(C||Z){var ee=o(this.__wrapped__),re=ee.__actions__=Jn(this.__actions__);return re.push({func:U,args:arguments,thisArg:o}),ee.__chain__=Z,ee}return U.apply(o,Rs([this.value()],arguments))})}),o}function kB(){return gn._===this&&(gn._=YD),this}function mm(){}function IB(o){return o=Ue(o),qe(function(c){return $1(c,o)})}var CB=Kg(Ot),RB=Kg(Yb),xB=Kg(_g);function KT(o){return tm(o)?wg(Ci(o)):sF(o)}function $B(o){return function(c){return o==null?n:ka(o,c)}}var PB=X1(),AB=X1(!0);function ym(){return[]}function _m(){return!1}function OB(){return{}}function NB(){return""}function MB(){return!0}function LB(o,c){if(o=Ue(o),o<1||o>J)return[];var h=G,g=En(o,G);c=xe(c),o-=G;for(var _=Tg(g,c);++h<o;)c(h);return _}function DB(o){return Fe(o)?Ot(o,Ci):vr(o)?[o]:Jn(pT(ct(o)))}function FB(o){var c=++QD;return ct(o)+c}var jB=dd(function(o,c){return o+c},0),UB=Qg("ceil"),BB=dd(function(o,c){return o/c},1),WB=Qg("floor");function zB(o){return o&&o.length?sd(o,Zn,Ng):n}function HB(o,c){return o&&o.length?sd(o,xe(c,2),Ng):n}function VB(o){return e1(o,Zn)}function qB(o,c){return e1(o,xe(c,2))}function GB(o){return o&&o.length?sd(o,Zn,Fg):n}function KB(o,c){return o&&o.length?sd(o,xe(c,2),Fg):n}var QB=dd(function(o,c){return o*c},1),JB=Qg("round"),YB=dd(function(o,c){return o-c},0);function XB(o){return o&&o.length?bg(o,Zn):0}function ZB(o,c){return o&&o.length?bg(o,xe(c,2)):0}return k.after=SU,k.ary=kT,k.assign=u4,k.assignIn=jT,k.assignInWith=kd,k.assignWith=l4,k.at=c4,k.before=IT,k.bind=om,k.bindAll=vB,k.bindKey=CT,k.castArray=OU,k.chain=bT,k.chunk=WF,k.compact=zF,k.concat=HF,k.cond=gB,k.conforms=mB,k.constant=pm,k.countBy=Xj,k.create=f4,k.curry=RT,k.curryRight=xT,k.debounce=$T,k.defaults=d4,k.defaultsDeep=h4,k.defer=bU,k.delay=TU,k.difference=VF,k.differenceBy=qF,k.differenceWith=GF,k.drop=KF,k.dropRight=QF,k.dropRightWhile=JF,k.dropWhile=YF,k.fill=XF,k.filter=eU,k.flatMap=rU,k.flatMapDeep=iU,k.flatMapDepth=sU,k.flatten=yT,k.flattenDeep=ZF,k.flattenDepth=ej,k.flip=EU,k.flow=_B,k.flowRight=wB,k.fromPairs=tj,k.functions=w4,k.functionsIn=S4,k.groupBy=aU,k.initial=rj,k.intersection=ij,k.intersectionBy=sj,k.intersectionWith=aj,k.invert=T4,k.invertBy=E4,k.invokeMap=uU,k.iteratee=vm,k.keyBy=lU,k.keys=fn,k.keysIn=Xn,k.map=_d,k.mapKeys=I4,k.mapValues=C4,k.matches=SB,k.matchesProperty=bB,k.memoize=Sd,k.merge=R4,k.mergeWith=UT,k.method=TB,k.methodOf=EB,k.mixin=gm,k.negate=bd,k.nthArg=IB,k.omit=x4,k.omitBy=$4,k.once=kU,k.orderBy=cU,k.over=CB,k.overArgs=IU,k.overEvery=RB,k.overSome=xB,k.partial=um,k.partialRight=PT,k.partition=fU,k.pick=P4,k.pickBy=BT,k.property=KT,k.propertyOf=$B,k.pull=cj,k.pullAll=wT,k.pullAllBy=fj,k.pullAllWith=dj,k.pullAt=hj,k.range=PB,k.rangeRight=AB,k.rearg=CU,k.reject=pU,k.remove=pj,k.rest=RU,k.reverse=sm,k.sampleSize=gU,k.set=O4,k.setWith=N4,k.shuffle=mU,k.slice=vj,k.sortBy=wU,k.sortedUniq=bj,k.sortedUniqBy=Tj,k.split=rB,k.spread=xU,k.tail=Ej,k.take=kj,k.takeRight=Ij,k.takeRightWhile=Cj,k.takeWhile=Rj,k.tap=zj,k.throttle=$U,k.thru=yd,k.toArray=LT,k.toPairs=WT,k.toPairsIn=zT,k.toPath=DB,k.toPlainObject=FT,k.transform=M4,k.unary=PU,k.union=xj,k.unionBy=$j,k.unionWith=Pj,k.uniq=Aj,k.uniqBy=Oj,k.uniqWith=Nj,k.unset=L4,k.unzip=am,k.unzipWith=ST,k.update=D4,k.updateWith=F4,k.values=Lo,k.valuesIn=j4,k.without=Mj,k.words=qT,k.wrap=AU,k.xor=Lj,k.xorBy=Dj,k.xorWith=Fj,k.zip=jj,k.zipObject=Uj,k.zipObjectDeep=Bj,k.zipWith=Wj,k.entries=WT,k.entriesIn=zT,k.extend=jT,k.extendWith=kd,gm(k,k),k.add=jB,k.attempt=GT,k.camelCase=z4,k.capitalize=HT,k.ceil=UB,k.clamp=U4,k.clone=NU,k.cloneDeep=LU,k.cloneDeepWith=DU,k.cloneWith=MU,k.conformsTo=FU,k.deburr=VT,k.defaultTo=yB,k.divide=BB,k.endsWith=H4,k.eq=ri,k.escape=V4,k.escapeRegExp=q4,k.every=Zj,k.find=tU,k.findIndex=gT,k.findKey=p4,k.findLast=nU,k.findLastIndex=mT,k.findLastKey=v4,k.floor=WB,k.forEach=TT,k.forEachRight=ET,k.forIn=g4,k.forInRight=m4,k.forOwn=y4,k.forOwnRight=_4,k.get=fm,k.gt=jU,k.gte=UU,k.has=b4,k.hasIn=dm,k.head=_T,k.identity=Zn,k.includes=oU,k.indexOf=nj,k.inRange=B4,k.invoke=k4,k.isArguments=Ra,k.isArray=Fe,k.isArrayBuffer=BU,k.isArrayLike=Yn,k.isArrayLikeObject=qt,k.isBoolean=WU,k.isBuffer=Ms,k.isDate=zU,k.isElement=HU,k.isEmpty=VU,k.isEqual=qU,k.isEqualWith=GU,k.isError=lm,k.isFinite=KU,k.isFunction=Qi,k.isInteger=AT,k.isLength=Td,k.isMap=OT,k.isMatch=QU,k.isMatchWith=JU,k.isNaN=YU,k.isNative=XU,k.isNil=e4,k.isNull=ZU,k.isNumber=NT,k.isObject=Dt,k.isObjectLike=zt,k.isPlainObject=Cl,k.isRegExp=cm,k.isSafeInteger=t4,k.isSet=MT,k.isString=Ed,k.isSymbol=vr,k.isTypedArray=Mo,k.isUndefined=n4,k.isWeakMap=r4,k.isWeakSet=i4,k.join=oj,k.kebabCase=G4,k.last=jr,k.lastIndexOf=uj,k.lowerCase=K4,k.lowerFirst=Q4,k.lt=s4,k.lte=a4,k.max=zB,k.maxBy=HB,k.mean=VB,k.meanBy=qB,k.min=GB,k.minBy=KB,k.stubArray=ym,k.stubFalse=_m,k.stubObject=OB,k.stubString=NB,k.stubTrue=MB,k.multiply=QB,k.nth=lj,k.noConflict=kB,k.noop=mm,k.now=wd,k.pad=J4,k.padEnd=Y4,k.padStart=X4,k.parseInt=Z4,k.random=W4,k.reduce=dU,k.reduceRight=hU,k.repeat=eB,k.replace=tB,k.result=A4,k.round=JB,k.runInContext=j,k.sample=vU,k.size=yU,k.snakeCase=nB,k.some=_U,k.sortedIndex=gj,k.sortedIndexBy=mj,k.sortedIndexOf=yj,k.sortedLastIndex=_j,k.sortedLastIndexBy=wj,k.sortedLastIndexOf=Sj,k.startCase=iB,k.startsWith=sB,k.subtract=YB,k.sum=XB,k.sumBy=ZB,k.template=aB,k.times=LB,k.toFinite=Ji,k.toInteger=Ue,k.toLength=DT,k.toLower=oB,k.toNumber=Ur,k.toSafeInteger=o4,k.toString=ct,k.toUpper=uB,k.trim=lB,k.trimEnd=cB,k.trimStart=fB,k.truncate=dB,k.unescape=hB,k.uniqueId=FB,k.upperCase=pB,k.upperFirst=hm,k.each=TT,k.eachRight=ET,k.first=_T,gm(k,function(){var o={};return ki(k,function(c,h){pt.call(k.prototype,h)||(o[h]=c)}),o}(),{chain:!1}),k.VERSION=r,Nr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){k[o].placeholder=k}),Nr(["drop","take"],function(o,c){Ye.prototype[o]=function(h){h=h===n?1:nn(Ue(h),0);var g=this.__filtered__&&!c?new Ye(this):this.clone();return g.__filtered__?g.__takeCount__=En(h,g.__takeCount__):g.__views__.push({size:En(h,G),type:o+(g.__dir__<0?"Right":"")}),g},Ye.prototype[o+"Right"]=function(h){return this.reverse()[o](h).reverse()}}),Nr(["filter","map","takeWhile"],function(o,c){var h=c+1,g=h==Se||h==we;Ye.prototype[o]=function(_){var C=this.clone();return C.__iteratees__.push({iteratee:xe(_,3),type:h}),C.__filtered__=C.__filtered__||g,C}}),Nr(["head","last"],function(o,c){var h="take"+(c?"Right":"");Ye.prototype[o]=function(){return this[h](1).value()[0]}}),Nr(["initial","tail"],function(o,c){var h="drop"+(c?"":"Right");Ye.prototype[o]=function(){return this.__filtered__?new Ye(this):this[h](1)}}),Ye.prototype.compact=function(){return this.filter(Zn)},Ye.prototype.find=function(o){return this.filter(o).head()},Ye.prototype.findLast=function(o){return this.reverse().find(o)},Ye.prototype.invokeMap=qe(function(o,c){return typeof o=="function"?new Ye(this):this.map(function(h){return Sl(h,o,c)})}),Ye.prototype.reject=function(o){return this.filter(bd(xe(o)))},Ye.prototype.slice=function(o,c){o=Ue(o);var h=this;return h.__filtered__&&(o>0||c<0)?new Ye(h):(o<0?h=h.takeRight(-o):o&&(h=h.drop(o)),c!==n&&(c=Ue(c),h=c<0?h.dropRight(-c):h.take(c-o)),h)},Ye.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},Ye.prototype.toArray=function(){return this.take(G)},ki(Ye.prototype,function(o,c){var h=/^(?:filter|find|map|reject)|While$/.test(c),g=/^(?:head|last)$/.test(c),_=k[g?"take"+(c=="last"?"Right":""):c],C=g||/^find/.test(c);_&&(k.prototype[c]=function(){var P=this.__wrapped__,L=g?[1]:arguments,U=P instanceof Ye,Z=L[0],ee=U||Fe(P),re=function(rt){var In=_.apply(k,Rs([rt],L));return g&&ge?In[0]:In};ee&&h&&typeof Z=="function"&&Z.length!=1&&(U=ee=!1);var ge=this.__chain__,Re=!!this.__actions__.length,$e=C&&!ge,Ve=U&&!Re;if(!C&&ee){P=Ve?P:new Ye(this);var Pe=o.apply(P,L);return Pe.__actions__.push({func:yd,args:[re],thisArg:n}),new Lr(Pe,ge)}return $e&&Ve?o.apply(this,L):(Pe=this.thru(re),$e?g?Pe.value()[0]:Pe.value():Pe)})}),Nr(["pop","push","shift","sort","splice","unshift"],function(o){var c=Hf[o],h=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",g=/^(?:pop|shift)$/.test(o);k.prototype[o]=function(){var _=arguments;if(g&&!this.__chain__){var C=this.value();return c.apply(Fe(C)?C:[],_)}return this[h](function(P){return c.apply(Fe(P)?P:[],_)})}}),ki(Ye.prototype,function(o,c){var h=k[c];if(h){var g=h.name+"";pt.call($o,g)||($o[g]=[]),$o[g].push({name:c,func:h})}}),$o[fd(n,w).name]=[{name:"wrapper",func:n}],Ye.prototype.clone=h3,Ye.prototype.reverse=p3,Ye.prototype.value=v3,k.prototype.at=Hj,k.prototype.chain=Vj,k.prototype.commit=qj,k.prototype.next=Gj,k.prototype.plant=Qj,k.prototype.reverse=Jj,k.prototype.toJSON=k.prototype.valueOf=k.prototype.value=Yj,k.prototype.first=k.prototype.head,pl&&(k.prototype[pl]=Kj),k},Co=qD();wa?((wa.exports=Co)._=Co,vg._=Co):gn._=Co}).call(Ql)})($n,$n.exports);function Lx(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Qde(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(f){throw f},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,l;return{s:function(){n=n.call(e)},n:function(){var f=n.next();return s=f.done,f},e:function(f){a=!0,l=f},f:function(){try{!s&&n.return!=null&&n.return()}finally{if(a)throw l}}}}function Qde(e,t){if(e){if(typeof e=="string")return Dx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dx(e,t)}}function Dx(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Jl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Fx(Object(n),!0).forEach(function(r){et.default(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fx(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function eD(e){var t=Jde();return function(){var r=Qt.default(e),i;if(t){var s=Qt.default(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return _a.default(this,i)}}function Jde(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var uS=function(e){Kn.default(n,e);var t=eD(n);function n(r,i,s){var a;tt.default(this,n),a=t.call(this,r,s);var l=function(f,d){return typeof d.ttl=="number"?{ttl:d.ttl}:f};return a.updateMergingQueue=new XL(l),a.cache=new jb,a.descriptor=i,a.descriptor.date_updated=new Date(a.descriptor.date_updated),a}return nt.default(n,[{key:"uri",get:function(){return this.descriptor.url}},{key:"revision",get:function(){return this.descriptor.revision}},{key:"lastEventId",get:function(){return this.descriptor.last_event_id}},{key:"links",get:function(){return this.descriptor.links}},{key:"dateExpires",get:function(){return this.descriptor.date_expires}},{key:"type",get:function(){return"list"}},{key:"indexName",get:function(){}},{key:"queryString",get:function(){}},{key:"sid",get:function(){return this.descriptor.sid}},{key:"uniqueName",get:function(){return this.descriptor.unique_name||null}},{key:"dateUpdated",get:function(){return this.descriptor.date_updated}},{key:"_addOrUpdateItemOnServer",value:function(){var r=ae.default(D.default.mark(function s(a,l,u,f){var d,p;return D.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return d={data:l},f!==void 0&&(d.ttl=f),m.next=4,this.services.network.post(a,d,u);case 4:return p=m.sent,p.body.data=l,p.body.date_updated=new Date(p.body.date_updated),m.abrupt("return",p.body);case 8:case"end":return m.stop()}},s,this)}));function i(s,a,l,u){return r.apply(this,arguments)}return i}()},{key:"push",value:function(){var r=ae.default(D.default.mark(function s(a,l){var u,f,d;return D.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return u=(l||{}).ttl,v.next=3,this._addOrUpdateItemOnServer(this.links.items,a,void 0,u);case 3:return f=v.sent,d=Number(f.index),this._handleItemMutated(d,f.url,f.last_event_id,f.revision,a,f.date_updated,f.date_expires,!0,!1),v.abrupt("return",this.cache.getValue(d));case 7:case"end":return v.stop()}},s,this)}));function i(s,a){return r.apply(this,arguments)}return i}()},{key:"set",value:function(){var r=ae.default(D.default.mark(function s(a,l,u){var f=this,d;return D.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return d=u||{},v.abrupt("return",this.updateMergingQueue.squashAndAdd(a,d,function(m){return f._updateItemUnconditionally(a,l,m.ttl)}));case 2:case"end":return v.stop()}},s,this)}));function i(s,a,l){return r.apply(this,arguments)}return i}()},{key:"_updateItemUnconditionally",value:function(){var r=ae.default(D.default.mark(function s(a,l,u){var f,d;return D.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,this.get(a);case 2:return f=v.sent,v.next=5,this._addOrUpdateItemOnServer(f.url,l,void 0,u);case 5:return d=v.sent,this._handleItemMutated(a,d.url,d.last_event_id,d.revision,d.data,d.date_updated,d.date_expires,!1,!1),v.abrupt("return",this.cache.getValue(a));case 8:case"end":return v.stop()}},s,this)}));function i(s,a,l){return r.apply(this,arguments)}return i}()},{key:"_updateItemWithIfMatch",value:function(){var r=ae.default(D.default.mark(function s(a,l,u){var f,d,p,v;return D.default.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,this.get(a);case 2:if(f=y.sent,d=l(pi(f.data)),!d){y.next=25;break}return p=f.revision,y.prev=6,y.next=9,this._addOrUpdateItemOnServer(f.url,d,p,u);case 9:return v=y.sent,this._handleItemMutated(a,v.url,v.last_event_id,v.revision,v.data,v.date_updated,v.date_expires,!1,!1),y.abrupt("return",this.cache.getValue(a));case 14:if(y.prev=14,y.t0=y.catch(6),y.t0.status!==412){y.next=22;break}return y.next=19,this._getItemFromServer(a);case 19:return y.abrupt("return",this._updateItemWithIfMatch(a,l,u));case 22:throw y.t0;case 23:y.next=26;break;case 25:return y.abrupt("return",f);case 26:case"end":return y.stop()}},s,this,[[6,14]])}));function i(s,a,l){return r.apply(this,arguments)}return i}()},{key:"mutate",value:function(){var r=ae.default(D.default.mark(function s(a,l,u){var f=this,d;return D.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return d=u||{},v.abrupt("return",this.updateMergingQueue.add(a,d,function(m){return f._updateItemWithIfMatch(a,l,m.ttl)}));case 2:case"end":return v.stop()}},s,this)}));function i(s,a,l){return r.apply(this,arguments)}return i}()},{key:"update",value:function(){var r=ae.default(D.default.mark(function s(a,l,u){return D.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.mutate(a,function(p){return Object.assign(p,l)},u));case 1:case"end":return d.stop()}},s,this)}));function i(s,a,l){return r.apply(this,arguments)}return i}()},{key:"remove",value:function(){var r=ae.default(D.default.mark(function s(a){var l,u,f;return D.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.get(a);case 2:return l=p.sent,u=pi(l.data),p.next=6,this.services.network.delete(l.url);case 6:f=p.sent,this._handleItemRemoved(a,f.body.last_event_id,u,new Date(f.body.date_updated),!1);case 8:case"end":return p.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"get",value:function(){var r=ae.default(D.default.mark(function s(a){var l;return D.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(l=this.cache.get(a),!l){f.next=3;break}return f.abrupt("return",l.value);case 3:return f.abrupt("return",this._getItemFromServer(a));case 4:case"end":return f.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"_getItemFromServer",value:function(){var r=ae.default(D.default.mark(function s(a){var l;return D.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this._queryItemsFromServer({index:a});case 2:if(l=f.sent,!(l.items.length<1)){f.next=7;break}throw new lr("No item with index ".concat(a," found"),404,54151);case 7:return f.abrupt("return",l.items[0]);case 8:case"end":return f.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"queryItems",value:function(){var r=ae.default(D.default.mark(function s(a){var l,u,f,d,p,v,m,y,E,b,w,T,x,M,W,z,K,A,ne,X,oe,he,ye,Se,Ie,we,ve,J,fe;return D.default.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(!a.index){G.next=5;break}if(E=this.cache.get(a.index),!E){G.next=4;break}return G.abrupt("return",this.makePaginator(E.isValid?[E.value]:[],a,!1,!1));case 4:return G.abrupt("return",this._querySingleItemFromServer(a.index));case 5:b=!!a.nextPageItemId||!!a.prevPageItemId,w=Jl({},a),b&&(a.from=(T=(x=a.nextPageItemId)!==null&&x!==void 0?x:a.prevPageItemId)!==null&&T!==void 0?T:a.from),M=!!a.prevPageItemId,W=a.order==="desc"?M?this.cache.getIterator((l=(u=a.prevPageItemId)!==null&&u!==void 0?u:a.from)!==null&&l!==void 0?l:null):this.cache.getReverseIterator((f=(d=a.nextPageItemId)!==null&&d!==void 0?d:a.from)!==null&&f!==void 0?f:null):M?this.cache.getReverseIterator((p=(v=a.prevPageItemId)!==null&&v!==void 0?v:a.from)!==null&&p!==void 0?p:null):this.cache.getIterator((m=(y=a.nextPageItemId)!==null&&y!==void 0?y:a.from)!==null&&m!==void 0?m:null),z=[],K=b?a.limit+1:a.limit,A=Lx(W),G.prev=13,A.s();case 15:if((ne=A.n()).done){G.next=25;break}if(X=ne.value,!(b&&X.value.index==a.from)){G.next=19;break}return G.abrupt("continue",23);case 19:if(z.push(X.value),!(z.length>=a.limit)){G.next=23;break}return M&&$n.exports.reverse(z),G.abrupt("return",this.makePaginator(z,a,this._prevPageAllowed(z,a.order),this._nextPageAllowed(z,a.order)));case 23:G.next=15;break;case 25:G.next=30;break;case 27:G.prev=27,G.t0=G.catch(13),A.e(G.t0);case 30:return G.prev=30,A.f(),G.finish(30);case 33:if(z.length>0&&(a.from=$n.exports.last(z).index),oe=Math.max(K-z.length,10),M&&(a.order=a.order==="desc"?"asc":"desc"),he=a.from!==(w.order==="desc"?M?this.cache.collectionEnd:this.cache.collectionBegin:M?this.cache.collectionBegin:this.cache.collectionEnd),!he){G.next=66;break}return G.next=40,this._queryItemsFromServer(Jl(Jl({},a),{},{limit:oe}));case 40:ye=G.sent,Se=ye.items,w.order==="desc"?(Ie=!ye.hasNextPage,we=!ye.hasPrevPage):(Ie=!ye.hasPrevPage,we=!ye.hasNextPage),this.cache.populate(Se,Ie,we),ve=Lx(Se),G.prev=45,ve.s();case 47:if((J=ve.n()).done){G.next=56;break}if(fe=J.value,!((z.length>0||b)&&fe.index==a.from)){G.next=51;break}return G.abrupt("continue",54);case 51:if(M?z.unshift(fe):z.push(fe),!(z.length>=a.limit)){G.next=54;break}return G.abrupt("break",56);case 54:G.next=47;break;case 56:G.next=61;break;case 58:G.prev=58,G.t1=G.catch(45),ve.e(G.t1);case 61:return G.prev=61,ve.f(),G.finish(61);case 64:G.next=67;break;case 66:M&&$n.exports.reverse(z);case 67:return G.abrupt("return",this.makePaginator(z,w,this._prevPageAllowed(z,w.order),this._nextPageAllowed(z,w.order)));case 68:case"end":return G.stop()}},s,this,[[13,27,30,33],[45,58,61,64]])}));function i(s){return r.apply(this,arguments)}return i}()},{key:"_prevPageAllowed",value:function(i,s){return i.length>0&&$n.exports.head(i).index!==(s==="desc"?this.cache.collectionEnd:this.cache.collectionBegin)}},{key:"_nextPageAllowed",value:function(i,s){return i.length>0&&$n.exports.last(i).index!==(s==="desc"?this.cache.collectionBegin:this.cache.collectionEnd)}},{key:"makePaginator",value:function(i,s,a,l){var u=this;s.nextPageItemId=s.prevPageItemId=null;var f=a&&this._prevPageAllowed(i,s.order),d=l&&this._nextPageAllowed(i,s.order);return new Fb(i,function(p){return u.queryItems(Jl(Jl({},s),p))},f?$n.exports.head(i).index:null,d?$n.exports.last(i).index:null)}},{key:"_querySingleItemFromServer",value:function(){var r=ae.default(D.default.mark(function s(a){var l;return D.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this._queryItemsFromServer({index:a});case 2:return l=f.sent,l.items.length===0&&this.cache.delete(a,null),f.abrupt("return",l);case 5:case"end":return f.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"_queryItemsFromServer",value:function(){var r=ae.default(D.default.mark(function s(a){var l,u,f=this,d,p,v,m;return D.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return d=new Du(this.links.items).queryParam("HideExpired",!0).queryParam("Index",a.index).queryParam("PageToken",a.pageToken).queryParam("From",a.from).queryParam("PageSize",a.limit).queryParam("Order",a.order).build(),E.next=3,this.services.network.get(d);case 3:return p=E.sent,v=((l=(u=p.body)===null||u===void 0?void 0:u.items)!==null&&l!==void 0?l:[]).map(function(b){b.date_updated=new Date(b.date_updated);var w=f.cache.get(b.index),T=w&&w.value;if(T)f._handleItemMutated(b.index,b.url,b.last_event_id,b.revision,b.data,b.date_updated,b.date_expires,!1,!0);else{var x=new oS({index:b.index,url:b.url,lastEventId:b.last_event_id,revision:b.revision,data:b.data,dateUpdated:b.date_updated,dateExpires:b.date_expires});f.cache.store(b.index,x,b.last_event_id)}return f.cache.getValue(b.index)}),m=p.body.meta,E.abrupt("return",this.makePaginator(v,a,!!m.previous_token,!!m.next_token));case 7:case"end":return E.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"getItems",value:function(){var r=ae.default(D.default.mark(function s(a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return a=a||{},JL(a.pageSize),a.limit=a.pageSize||a.limit||50,a.order=a.order||"asc",u.abrupt("return",this.queryItems(a));case 5:case"end":return u.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"getContext",value:function(){var r=ae.default(D.default.mark(function s(){var a;return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(this.context){u.next=5;break}return u.next=3,this.services.network.get(this.links.context);case 3:a=u.sent,this._updateContextIfRequired(a.body.data,a.body.last_event_id);case 5:return u.abrupt("return",this.context);case 6:case"end":return u.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"setTtl",value:function(){var r=ae.default(D.default.mark(function s(a){var l,u;return D.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,l={ttl:a},d.next=4,this.services.network.post(this.uri,l);case 4:u=d.sent,this.descriptor.date_expires=u.body.date_expires,d.next=12;break;case 8:throw d.prev=8,d.t0=d.catch(0),d.t0.status===404&&this.onRemoved(!1),d.t0;case 12:case"end":return d.stop()}},s,this,[[0,8]])}));function i(s){return r.apply(this,arguments)}return i}()},{key:"setItemTtl",value:function(){var r=ae.default(D.default.mark(function s(a,l){var u,f,d;return D.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,this.get(a);case 2:return u=v.sent,f={ttl:l},v.next=6,this.services.network.post(u.url,f);case 6:d=v.sent,u.updateDateExpires(d.body.date_expires);case 8:case"end":return v.stop()}},s,this)}));function i(s,a){return r.apply(this,arguments)}return i}()},{key:"removeList",value:function(){var r=ae.default(D.default.mark(function s(){return D.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.services.network.delete(this.uri);case 2:this.onRemoved(!0);case 3:case"end":return l.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"onRemoved",value:function(i){this._unsubscribe(),this.removalHandler(this.type,this.sid,this.uniqueName),this.broadcastEventToListeners("removed",{isLocal:i})}},{key:"shouldIgnoreEvent",value:function(i,s){return this.cache.isKnown(i,s)}},{key:"_update",value:function(i,s){var a=Number(i.item_index);switch(i.date_created=new Date(i.date_created),i.type){case"list_item_added":case"list_item_updated":this._handleItemMutated(a,i.item_url,i.id,i.item_revision,i.item_data,i.date_created,i.date_expires,i.type==="list_item_added",!0);break;case"list_item_removed":this._handleItemRemoved(a,i.id,i.item_data,i.date_created,!0);break;case"list_context_updated":this._handleContextUpdate(i.context_data,i.id,i.date_created);break;case"list_removed":this.onRemoved(!1);break}s&&this._advanceLastEventId(i.id,i.list_revision)}},{key:"_advanceLastEventId",value:function(i,s){this.lastEventId<i&&(this.descriptor.last_event_id=i,s&&(this.descriptor.revision=s))}},{key:"_updateRootDateUpdated",value:function(i){(!this.descriptor.date_updated||i.getTime()>this.descriptor.date_updated.getTime())&&(this.descriptor.date_updated=i,this.services.storage.update(this.type,this.sid,this.uniqueName,{date_updated:i}))}},{key:"_handleItemMutated",value:function(i,s,a,l,u,f,d,p,v){if(this.shouldIgnoreEvent(i,a)){st.trace("Item ".concat(i," update skipped, current: ").concat(this.lastEventId,", remote: ").concat(a));return}this._updateRootDateUpdated(f);var m=this.cache.getValue(i);if(!m){var y=new oS({index:i,url:s,lastEventId:a,revision:l,data:u,dateUpdated:f,dateExpires:d});this.cache.store(i,y,a),this.emitItemMutationEvent(y,v,p);return}var E=pi(m.data);m.update(a,l,u,f),this.cache.store(i,m,a),d!==void 0&&m.updateDateExpires(d),this.emitItemMutationEvent(m,v,!1,E)}},{key:"emitItemMutationEvent",value:function(i,s,a){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,u=a?"itemAdded":"itemUpdated",f={item:i,isLocal:!s};a||(f.previousItemData=l),this.broadcastEventToListeners(u,f)}},{key:"_handleItemRemoved",value:function(i,s,a,l,u){this._updateRootDateUpdated(l),this.cache.delete(i,s),this.broadcastEventToListeners("itemRemoved",{index:i,isLocal:!u,previousItemData:a})}},{key:"_handleContextUpdate",value:function(i,s,a){this._updateRootDateUpdated(a),this._updateContextIfRequired(i,s)&&this.broadcastEventToListeners("contextUpdated",{context:i,isLocal:!1})}},{key:"_updateContextIfRequired",value:function(i,s){return!this.contextEventId||s>this.contextEventId?(this.context=i,this.contextEventId=s,!0):(st.trace("Context update skipped, current:",this.lastEventId,", remote:",s),!1)}}],[{key:"type",get:function(){return"list"}}]),n}(Rf),Xt=function(e){Kn.default(n,e);var t=eD(n);function n(r){var i;return tt.default(this,n),i=t.call(this),i.syncListImpl=r,i.syncListImpl.attach(Fi.default(i)),i}return nt.default(n,[{key:"uri",get:function(){return this.syncListImpl.uri}},{key:"revision",get:function(){return this.syncListImpl.revision}},{key:"lastEventId",get:function(){return this.syncListImpl.lastEventId}},{key:"links",get:function(){return this.syncListImpl.links}},{key:"dateExpires",get:function(){return this.syncListImpl.dateExpires}},{key:"type",get:function(){return uS.type}},{key:"sid",get:function(){return this.syncListImpl.sid}},{key:"uniqueName",get:function(){return this.syncListImpl.uniqueName}},{key:"dateUpdated",get:function(){return this.syncListImpl.dateUpdated}},{key:"push",value:function(){var r=ae.default(D.default.mark(function s(a,l){return D.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return this.ensureNotClosed(),f.abrupt("return",this.syncListImpl.push(a,l));case 2:case"end":return f.stop()}},s,this)}));function i(s,a){return r.apply(this,arguments)}return i}()},{key:"set",value:function(){var r=ae.default(D.default.mark(function s(a,l,u){return D.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.ensureNotClosed(),d.abrupt("return",this.syncListImpl.set(a,l,u));case 2:case"end":return d.stop()}},s,this)}));function i(s,a,l){return r.apply(this,arguments)}return i}()},{key:"mutate",value:function(){var r=ae.default(D.default.mark(function s(a,l,u){return D.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.ensureNotClosed(),d.abrupt("return",this.syncListImpl.mutate(a,l,u));case 2:case"end":return d.stop()}},s,this)}));function i(s,a,l){return r.apply(this,arguments)}return i}()},{key:"update",value:function(){var r=ae.default(D.default.mark(function s(a,l,u){return D.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.ensureNotClosed(),d.abrupt("return",this.syncListImpl.update(a,l,u));case 2:case"end":return d.stop()}},s,this)}));function i(s,a,l){return r.apply(this,arguments)}return i}()},{key:"remove",value:function(){var r=ae.default(D.default.mark(function s(a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.ensureNotClosed(),u.abrupt("return",this.syncListImpl.remove(a));case 2:case"end":return u.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"get",value:function(){var r=ae.default(D.default.mark(function s(a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.ensureNotClosed(),u.abrupt("return",this.syncListImpl.get(a));case 2:case"end":return u.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"getContext",value:function(){var r=ae.default(D.default.mark(function s(){return D.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this.ensureNotClosed(),l.abrupt("return",this.syncListImpl.getContext());case 2:case"end":return l.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"getItems",value:function(){var r=ae.default(D.default.mark(function s(a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.ensureNotClosed(),u.abrupt("return",this.syncListImpl.getItems(a));case 2:case"end":return u.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"setTtl",value:function(){var r=ae.default(D.default.mark(function s(a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.ensureNotClosed(),u.abrupt("return",this.syncListImpl.setTtl(a));case 2:case"end":return u.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"setItemTtl",value:function(){var r=ae.default(D.default.mark(function s(a,l){return D.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return this.ensureNotClosed(),f.abrupt("return",this.syncListImpl.setItemTtl(a,l));case 2:case"end":return f.stop()}},s,this)}));function i(s,a){return r.apply(this,arguments)}return i}()},{key:"removeList",value:function(){var r=ae.default(D.default.mark(function s(){return D.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this.ensureNotClosed(),l.abrupt("return",this.syncListImpl.removeList());case 2:case"end":return l.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"close",value:function(){Cf.default(Qt.default(n.prototype),"close",this).call(this),this.syncListImpl.detach(this.listenerUuid)}}],[{key:"type",get:function(){return uS.type}}]),n}(xf);et.default(Xt,"itemAdded","itemAdded");et.default(Xt,"itemUpdated","itemUpdated");et.default(Xt,"itemRemoved","itemRemoved");et.default(Xt,"removed","removed");it([te.validateTypesAsync(te.pureObject,["undefined",te.objectSchema("item metadata",{ttl:[te.nonNegativeInteger,"undefined"]})]),ie("design:type",Function),ie("design:paramtypes",[Object,Object]),ie("design:returntype",Promise)],Xt.prototype,"push",null);it([te.validateTypesAsync(te.nonNegativeInteger,te.pureObject,["undefined",te.objectSchema("item metadata",{ttl:[te.nonNegativeInteger,"undefined"]})]),ie("design:type",Function),ie("design:paramtypes",[Number,Object,Object]),ie("design:returntype",Promise)],Xt.prototype,"set",null);it([te.validateTypesAsync(te.nonNegativeInteger,"function",["undefined",te.objectSchema("item metadata",{ttl:[te.nonNegativeInteger,"undefined"]})]),ie("design:type",Function),ie("design:paramtypes",[Number,Function,Object]),ie("design:returntype",Promise)],Xt.prototype,"mutate",null);it([te.validateTypesAsync(te.nonNegativeInteger,te.pureObject,["undefined",te.objectSchema("item metadata",{ttl:[te.nonNegativeInteger,"undefined"]})]),ie("design:type",Function),ie("design:paramtypes",[Number,Object,Object]),ie("design:returntype",Promise)],Xt.prototype,"update",null);it([te.validateTypesAsync(te.nonNegativeInteger),ie("design:type",Function),ie("design:paramtypes",[Number]),ie("design:returntype",Promise)],Xt.prototype,"remove",null);it([te.validateTypesAsync(te.nonNegativeInteger),ie("design:type",Function),ie("design:paramtypes",[Number]),ie("design:returntype",Promise)],Xt.prototype,"get",null);it([te.validateTypesAsync(["undefined",te.objectSchema("query options",{from:[te.nonNegativeInteger,"undefined"],pageSize:[te.custom(function(e){return[Db(e),"a positive integer"]}),"undefined"],order:[te.custom(function(e){return[e==="asc"||e==="desc","either 'asc' or 'desc'"]}),"undefined"]})]),ie("design:type",Function),ie("design:paramtypes",[Object]),ie("design:returntype",Promise)],Xt.prototype,"getItems",null);it([te.validateTypesAsync(te.nonNegativeInteger),ie("design:type",Function),ie("design:paramtypes",[Number]),ie("design:returntype",Promise)],Xt.prototype,"setTtl",null);it([te.validateTypesAsync(te.nonNegativeInteger,te.nonNegativeInteger),ie("design:type",Function),ie("design:paramtypes",[Number,Number]),ie("design:returntype",Promise)],Xt.prototype,"setItemTtl",null);var sc=function(){function e(t){tt.default(this,e),this.descriptor=t}return nt.default(e,[{key:"uri",get:function(){return this.descriptor.url}},{key:"revision",get:function(){return this.descriptor.revision}},{key:"lastEventId",get:function(){return this.descriptor.last_event_id}},{key:"dateExpires",get:function(){return this.descriptor.date_expires}},{key:"key",get:function(){return this.descriptor.key}},{key:"data",get:function(){return this.descriptor.data}},{key:"dateUpdated",get:function(){return this.descriptor.date_updated}},{key:"cacheKey",get:function(){return this.key}},{key:"update",value:function(n,r,i,s){return this.descriptor.last_event_id=n,this.descriptor.revision=r,this.descriptor.data=i,this.descriptor.date_updated=s,this}},{key:"updateDateExpires",value:function(n){this.descriptor.date_expires=n}}]),e}();function jx(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Yde(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(f){throw f},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,l;return{s:function(){n=n.call(e)},n:function(){var f=n.next();return s=f.done,f},e:function(f){a=!0,l=f},f:function(){try{!s&&n.return!=null&&n.return()}finally{if(a)throw l}}}}function Yde(e,t){if(e){if(typeof e=="string")return Ux(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ux(e,t)}}function Ux(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Yl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Bx(Object(n),!0).forEach(function(r){et.default(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bx(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function tD(e){var t=Xde();return function(){var r=Qt.default(e),i;if(t){var s=Qt.default(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return _a.default(this,i)}}function Xde(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var lS=function(e){Kn.default(n,e);var t=tD(n);function n(r,i,s){var a;tt.default(this,n),a=t.call(this,r,s);var l=function(f,d){return typeof d.ttl=="number"?{ttl:d.ttl}:f};return a.updateMergingQueue=new XL(l),a.cache=new jb,a.descriptor=i,a.descriptor.date_updated=new Date(a.descriptor.date_updated),i.items&&i.items.forEach(function(u){u.date_updated=new Date(u.date_updated),a.cache.store(u.key,new sc(u),u.last_event_id)}),a}return nt.default(n,[{key:"uri",get:function(){return this.descriptor.url}},{key:"links",get:function(){return this.descriptor.links}},{key:"revision",get:function(){return this.descriptor.revision}},{key:"lastEventId",get:function(){return this.descriptor.last_event_id}},{key:"dateExpires",get:function(){return this.descriptor.date_expires}},{key:"type",get:function(){return"map"}},{key:"indexName",get:function(){}},{key:"queryString",get:function(){}},{key:"sid",get:function(){return this.descriptor.sid}},{key:"uniqueName",get:function(){return this.descriptor.unique_name||null}},{key:"dateUpdated",get:function(){return this.descriptor.date_updated}},{key:"set",value:function(){var r=ae.default(D.default.mark(function s(a,l,u){var f=this,d;return D.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return d=u||{},v.abrupt("return",this.updateMergingQueue.squashAndAdd(a,d,function(m){return f._putItemUnconditionally(a,l,m.ttl)}));case 2:case"end":return v.stop()}},s,this)}));function i(s,a,l){return r.apply(this,arguments)}return i}()},{key:"get",value:function(){var r=ae.default(D.default.mark(function s(a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(a!=null){u.next=2;break}throw new lr("SyncMapItem key may not be empty",400,54209);case 2:if(!this.cache.has(a)){u.next=6;break}return u.abrupt("return",this.cache.getValue(a));case 6:return u.abrupt("return",this._getItemFromServer(a));case 7:case"end":return u.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"_getItemFromServer",value:function(){var r=ae.default(D.default.mark(function s(a){var l;return D.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this._queryItemsFromServer({key:a});case 2:if(l=f.sent,!(l.items.length<1)){f.next=7;break}throw new lr("The specified Map Item does not exist",404,54201);case 7:return f.abrupt("return",l.items[0]);case 8:case"end":return f.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"mutate",value:function(){var r=ae.default(D.default.mark(function s(a,l,u){var f=this,d;return D.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return d=u||{},v.abrupt("return",this.updateMergingQueue.add(a,d,function(m){return f._putItemWithIfMatch(a,l,m.ttl)}));case 2:case"end":return v.stop()}},s,this)}));function i(s,a,l){return r.apply(this,arguments)}return i}()},{key:"update",value:function(){var r=ae.default(D.default.mark(function s(a,l,u){return D.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.mutate(a,function(p){return Object.assign(p,l)},u));case 1:case"end":return d.stop()}},s,this)}));function i(s,a,l){return r.apply(this,arguments)}return i}()},{key:"_putItemUnconditionally",value:function(){var r=ae.default(D.default.mark(function s(a,l,u){var f,d;return D.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,this._putItemToServer(a,l,void 0,u);case 2:return f=v.sent,d=f.item,this._handleItemMutated(d.key,d.url,d.last_event_id,d.revision,d.data,d.date_updated,d.date_expires,f.added,!1),v.abrupt("return",this.cache.getValue(d.key));case 6:case"end":return v.stop()}},s,this)}));function i(s,a,l){return r.apply(this,arguments)}return i}()},{key:"_putItemWithIfMatch",value:function(){var r=ae.default(D.default.mark(function s(a,l,u){var f,d,p,v,m;return D.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,this.get(a).catch(function(b){if(b.status===404)return new sc({key:a,data:{},last_event_id:-1,revision:"-1",url:null,date_updated:null,date_expires:null});throw b});case 2:if(f=E.sent,d=l(pi(f.data)),!d){E.next=26;break}return p=f.revision,E.prev=6,E.next=9,this._putItemToServer(a,d,p,u);case 9:return v=E.sent,m=v.item,this._handleItemMutated(m.key,m.url,m.last_event_id,m.revision,m.data,m.date_updated,m.date_expires,v.added,!1),E.abrupt("return",this.cache.getValue(m.key));case 15:if(E.prev=15,E.t0=E.catch(6),E.t0.status!==412){E.next=23;break}return E.next=20,this._getItemFromServer(a);case 20:return E.abrupt("return",this._putItemWithIfMatch(a,l,u));case 23:throw E.t0;case 24:E.next=27;break;case 26:return E.abrupt("return",f);case 27:case"end":return E.stop()}},s,this,[[6,15]])}));function i(s,a,l){return r.apply(this,arguments)}return i}()},{key:"_putItemToServer",value:function(){var r=ae.default(D.default.mark(function s(a,l,u,f){var d,p,v,m,y;return D.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return d=new Du(this.links.items).pathSegment(a).build(),p={data:l},f!==void 0&&(p.ttl=f),b.prev=3,b.next=6,this.services.network.put(d,p,u);case 6:return v=b.sent,m=v.body,m.data=l,m.date_updated=new Date(m.date_updated),y=v.status.code===201,b.abrupt("return",{added:y,item:m});case 14:throw b.prev=14,b.t0=b.catch(3),b.t0.status===404&&this.onRemoved(!1),b.t0;case 18:case"end":return b.stop()}},s,this,[[3,14]])}));function i(s,a,l,u){return r.apply(this,arguments)}return i}()},{key:"remove",value:function(){var r=ae.default(D.default.mark(function s(a){var l,u,f;return D.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.get(a);case 2:return l=p.sent,u=pi(l.data),p.next=6,this.services.network.delete(l.uri);case 6:f=p.sent,this._handleItemRemoved(a,f.body.last_event_id,u,new Date(f.body.date_updated),!1);case 8:case"end":return p.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"queryItems",value:function(){var r=ae.default(D.default.mark(function s(a){var l,u,f,d,p,v,m,y,E,b,w,T,x,M,W,z,K,A,ne,X,oe,he,ye,Se,Ie,we,ve,J,fe;return D.default.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(!a.key){G.next=5;break}if(E=this.cache.get(a.key),!E){G.next=4;break}return G.abrupt("return",this.makePaginator(E.isValid?[E.value]:[],a,!1,!1));case 4:return G.abrupt("return",this._querySingleItemFromServer(a.key));case 5:b=!!a.nextPageItemId||!!a.prevPageItemId,w=Yl({},a),b&&(a.from=(T=(x=a.nextPageItemId)!==null&&x!==void 0?x:a.prevPageItemId)!==null&&T!==void 0?T:a.from),M=!!a.prevPageItemId,W=a.order==="desc"?M?this.cache.getIterator((l=(u=a.prevPageItemId)!==null&&u!==void 0?u:a.from)!==null&&l!==void 0?l:null):this.cache.getReverseIterator((f=(d=a.nextPageItemId)!==null&&d!==void 0?d:a.from)!==null&&f!==void 0?f:null):M?this.cache.getReverseIterator((p=(v=a.prevPageItemId)!==null&&v!==void 0?v:a.from)!==null&&p!==void 0?p:null):this.cache.getIterator((m=(y=a.nextPageItemId)!==null&&y!==void 0?y:a.from)!==null&&m!==void 0?m:null),z=[],K=b?a.limit+1:a.limit,A=jx(W),G.prev=13,A.s();case 15:if((ne=A.n()).done){G.next=25;break}if(X=ne.value,!(b&&X.value.key==a.from)){G.next=19;break}return G.abrupt("continue",23);case 19:if(z.push(X.value),!(z.length>=a.limit)){G.next=23;break}return M&&$n.exports.reverse(z),G.abrupt("return",this.makePaginator(z,a,this._prevPageAllowed(z,a.order),this._nextPageAllowed(z,a.order)));case 23:G.next=15;break;case 25:G.next=30;break;case 27:G.prev=27,G.t0=G.catch(13),A.e(G.t0);case 30:return G.prev=30,A.f(),G.finish(30);case 33:if(z.length>0&&(a.from=$n.exports.last(z).key),oe=Math.max(K-z.length,10),M&&(a.order=a.order==="desc"?"asc":"desc"),he=a.from!==(w.order==="desc"?M?this.cache.collectionEnd:this.cache.collectionBegin:M?this.cache.collectionBegin:this.cache.collectionEnd),!he){G.next=66;break}return G.next=40,this._queryItemsFromServer(Yl(Yl({},a),{},{limit:oe}));case 40:ye=G.sent,Se=ye.items,w.order==="desc"?(Ie=!ye.hasNextPage,we=!ye.hasPrevPage):(Ie=!ye.hasPrevPage,we=!ye.hasNextPage),this.cache.populate(Se,Ie,we),ve=jx(Se),G.prev=45,ve.s();case 47:if((J=ve.n()).done){G.next=56;break}if(fe=J.value,!((z.length>0||b)&&fe.key==a.from)){G.next=51;break}return G.abrupt("continue",54);case 51:if(M?z.unshift(fe):z.push(fe),!(z.length>=a.limit)){G.next=54;break}return G.abrupt("break",56);case 54:G.next=47;break;case 56:G.next=61;break;case 58:G.prev=58,G.t1=G.catch(45),ve.e(G.t1);case 61:return G.prev=61,ve.f(),G.finish(61);case 64:G.next=67;break;case 66:M&&$n.exports.reverse(z);case 67:return G.abrupt("return",this.makePaginator(z,w,this._prevPageAllowed(z,w.order),this._nextPageAllowed(z,w.order)));case 68:case"end":return G.stop()}},s,this,[[13,27,30,33],[45,58,61,64]])}));function i(s){return r.apply(this,arguments)}return i}()},{key:"_prevPageAllowed",value:function(i,s){return i.length>0&&$n.exports.head(i).key!==(s==="desc"?this.cache.collectionEnd:this.cache.collectionBegin)}},{key:"_nextPageAllowed",value:function(i,s){return i.length>0&&$n.exports.last(i).key!==(s==="desc"?this.cache.collectionBegin:this.cache.collectionEnd)}},{key:"makePaginator",value:function(i,s,a,l){var u=this;s.nextPageItemId=s.prevPageItemId=null;var f=a&&this._prevPageAllowed(i,s.order),d=l&&this._nextPageAllowed(i,s.order);return new Fb(i,function(p){return u.queryItems(Yl(Yl({},s),p))},f?$n.exports.head(i).key:null,d?$n.exports.last(i).key:null)}},{key:"_querySingleItemFromServer",value:function(){var r=ae.default(D.default.mark(function s(a){var l;return D.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this._queryItemsFromServer({key:a});case 2:return l=f.sent,l.items.length===0&&this.cache.delete(a,null),f.abrupt("return",l);case 5:case"end":return f.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"_queryItemsFromServer",value:function(){var r=ae.default(D.default.mark(function s(a){var l,u,f=this,d,p,v,m;return D.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return d=new Du(this.links.items).queryParam("HideExpired",!0).queryParam("Key",a.key).queryParam("PageToken",a.pageToken).queryParam("From",a.from).queryParam("PageSize",a.limit).queryParam("Order",a.order).build(),E.next=3,this.services.network.get(d);case 3:return p=E.sent,v=((l=(u=p.body)===null||u===void 0?void 0:u.items)!==null&&l!==void 0?l:[]).map(function(b){b.date_updated=new Date(b.date_updated);var w=f.cache.get(b.key),T=w&&w.value;if(T)f._handleItemMutated(b.key,b.url,b.last_event_id,b.revision,b.data,b.date_updated,b.date_expires,!1,!0);else{var x=new sc({key:b.key,url:b.url,last_event_id:b.last_event_id,revision:b.revision,data:b.data,date_updated:b.date_updated,date_expires:b.date_expires});f.cache.store(b.key,x,b.last_event_id)}return f.cache.getValue(b.key)}),m=p.body.meta,E.abrupt("return",this.makePaginator(v,a,!!m.previous_token,!!m.next_token));case 7:case"end":return E.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"getItems",value:function(){var r=ae.default(D.default.mark(function s(a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return a=a||{},JL(a.pageSize),a.limit=a.pageSize||a.limit||50,a.order=a.order||"asc",u.abrupt("return",this.queryItems(a));case 5:case"end":return u.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"shouldIgnoreEvent",value:function(i,s){return this.cache.isKnown(i,s)}},{key:"_update",value:function(i,s){switch(i.date_created=new Date(i.date_created),i.type){case"map_item_added":case"map_item_updated":this._handleItemMutated(i.item_key,i.item_url,i.id,i.item_revision,i.item_data,i.date_created,i.date_expires,i.type==="map_item_added",!0);break;case"map_item_removed":this._handleItemRemoved(i.item_key,i.id,i.item_data,i.date_created,!0);break;case"map_removed":this.onRemoved(!1);break}s&&this._advanceLastEventId(i.id,i.map_revision)}},{key:"_advanceLastEventId",value:function(i,s){this.lastEventId<i&&(this.descriptor.last_event_id=i,s&&(this.descriptor.revision=s))}},{key:"_updateRootDateUpdated",value:function(i){(!this.descriptor.date_updated||i.getTime()>this.descriptor.date_updated.getTime())&&(this.descriptor.date_updated=i,this.services.storage.update(this.type,this.sid,this.uniqueName,{date_updated:i}))}},{key:"_handleItemMutated",value:function(i,s,a,l,u,f,d,p,v){if(this.shouldIgnoreEvent(i,a)){st.trace("SyncMapItem ",i," update skipped, current:",this.lastEventId,", remote:",a);return}this._updateRootDateUpdated(f);var m=this.cache.getValue(i);if(!m){var y=new sc({key:i,url:s,last_event_id:a,revision:l,data:u,date_updated:f,date_expires:d});this.cache.store(i,y,a),this.emitItemMutationEvent(y,v,p);return}var E=pi(m.data);m.update(a,l,u,f),this.cache.store(i,m,a),d!==void 0&&m.updateDateExpires(d),this.emitItemMutationEvent(m,v,!1,E)}},{key:"emitItemMutationEvent",value:function(i,s,a){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,u=a?"itemAdded":"itemUpdated",f={item:i,isLocal:!s};a||(f.previousItemData=l),this.broadcastEventToListeners(u,f)}},{key:"_handleItemRemoved",value:function(i,s,a,l,u){this._updateRootDateUpdated(l),this.cache.delete(i,s),this.broadcastEventToListeners("itemRemoved",{key:i,isLocal:!u,previousItemData:a})}},{key:"onRemoved",value:function(i){this._unsubscribe(),this.removalHandler(this.type,this.sid,this.uniqueName),this.broadcastEventToListeners("removed",{isLocal:i})}},{key:"setTtl",value:function(){var r=ae.default(D.default.mark(function s(a){var l,u;return D.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,l={ttl:a},d.next=4,this.services.network.post(this.uri,l);case 4:u=d.sent,this.descriptor.date_expires=u.body.date_expires,d.next=12;break;case 8:throw d.prev=8,d.t0=d.catch(0),d.t0.status===404&&this.onRemoved(!1),d.t0;case 12:case"end":return d.stop()}},s,this,[[0,8]])}));function i(s){return r.apply(this,arguments)}return i}()},{key:"setItemTtl",value:function(){var r=ae.default(D.default.mark(function s(a,l){var u,f,d;return D.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,this.get(a);case 2:return u=v.sent,f={ttl:l},v.next=6,this.services.network.post(u.uri,f);case 6:d=v.sent,u.updateDateExpires(d.body.date_expires);case 8:case"end":return v.stop()}},s,this)}));function i(s,a){return r.apply(this,arguments)}return i}()},{key:"removeMap",value:function(){var r=ae.default(D.default.mark(function s(){return D.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.services.network.delete(this.uri);case 2:this.onRemoved(!0);case 3:case"end":return l.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()}],[{key:"type",get:function(){return"map"}}]),n}(Rf),an=function(e){Kn.default(n,e);var t=tD(n);function n(r){var i;return tt.default(this,n),i=t.call(this),i.syncMapImpl=r,i.syncMapImpl.attach(Fi.default(i)),i}return nt.default(n,[{key:"uri",get:function(){return this.syncMapImpl.uri}},{key:"links",get:function(){return this.syncMapImpl.links}},{key:"revision",get:function(){return this.syncMapImpl.revision}},{key:"lastEventId",get:function(){return this.syncMapImpl.lastEventId}},{key:"dateExpires",get:function(){return this.syncMapImpl.dateExpires}},{key:"type",get:function(){return lS.type}},{key:"sid",get:function(){return this.syncMapImpl.sid}},{key:"uniqueName",get:function(){return this.syncMapImpl.uniqueName}},{key:"dateUpdated",get:function(){return this.syncMapImpl.dateUpdated}},{key:"set",value:function(){var r=ae.default(D.default.mark(function s(a,l,u){return D.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.ensureNotClosed(),d.abrupt("return",this.syncMapImpl.set(a,l,u));case 2:case"end":return d.stop()}},s,this)}));function i(s,a,l){return r.apply(this,arguments)}return i}()},{key:"get",value:function(){var r=ae.default(D.default.mark(function s(a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.ensureNotClosed(),u.abrupt("return",this.syncMapImpl.get(a));case 2:case"end":return u.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"mutate",value:function(){var r=ae.default(D.default.mark(function s(a,l,u){return D.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.ensureNotClosed(),d.abrupt("return",this.syncMapImpl.mutate(a,l,u));case 2:case"end":return d.stop()}},s,this)}));function i(s,a,l){return r.apply(this,arguments)}return i}()},{key:"update",value:function(){var r=ae.default(D.default.mark(function s(a,l,u){return D.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.ensureNotClosed(),d.abrupt("return",this.syncMapImpl.update(a,l,u));case 2:case"end":return d.stop()}},s,this)}));function i(s,a,l){return r.apply(this,arguments)}return i}()},{key:"remove",value:function(){var r=ae.default(D.default.mark(function s(a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.ensureNotClosed(),u.abrupt("return",this.syncMapImpl.remove(a));case 2:case"end":return u.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"getItems",value:function(){var r=ae.default(D.default.mark(function s(a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.ensureNotClosed(),u.abrupt("return",this.syncMapImpl.getItems(a));case 2:case"end":return u.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"setTtl",value:function(){var r=ae.default(D.default.mark(function s(a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.ensureNotClosed(),u.abrupt("return",this.syncMapImpl.setTtl(a));case 2:case"end":return u.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"setItemTtl",value:function(){var r=ae.default(D.default.mark(function s(a,l){return D.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return this.ensureNotClosed(),f.abrupt("return",this.syncMapImpl.setItemTtl(a,l));case 2:case"end":return f.stop()}},s,this)}));function i(s,a){return r.apply(this,arguments)}return i}()},{key:"removeMap",value:function(){var r=ae.default(D.default.mark(function s(){return D.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this.ensureNotClosed(),l.next=3,this.syncMapImpl.removeMap();case 3:case"end":return l.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"close",value:function(){Cf.default(Qt.default(n.prototype),"close",this).call(this),this.syncMapImpl.detach(this.listenerUuid)}}],[{key:"type",get:function(){return lS.type}}]),n}(xf);et.default(an,"itemAdded","itemAdded");et.default(an,"itemUpdated","itemUpdated");et.default(an,"itemRemoved","itemRemoved");et.default(an,"removed","removed");it([te.validateTypesAsync("string",te.pureObject,["undefined",te.objectSchema("item metadata",{ttl:[te.nonNegativeInteger,"undefined"]})]),ie("design:type",Function),ie("design:paramtypes",[String,Object,Object]),ie("design:returntype",Promise)],an.prototype,"set",null);it([te.validateTypesAsync("string"),ie("design:type",Function),ie("design:paramtypes",[String]),ie("design:returntype",Promise)],an.prototype,"get",null);it([te.validateTypesAsync("string","function",["undefined",te.objectSchema("item metadata",{ttl:[te.nonNegativeInteger,"undefined"]})]),ie("design:type",Function),ie("design:paramtypes",[String,Function,Object]),ie("design:returntype",Promise)],an.prototype,"mutate",null);it([te.validateTypesAsync("string",te.pureObject,["undefined",te.objectSchema("item metadata",{ttl:[te.nonNegativeInteger,"undefined"]})]),ie("design:type",Function),ie("design:paramtypes",[String,Object,Object]),ie("design:returntype",Promise)],an.prototype,"update",null);it([te.validateTypesAsync("string"),ie("design:type",Function),ie("design:paramtypes",[String]),ie("design:returntype",Promise)],an.prototype,"remove",null);it([te.validateTypesAsync(["undefined",te.objectSchema("query options",{from:["string","undefined"],pageSize:[te.custom(function(e){return[Db(e),"a positive integer"]}),"undefined"],order:[te.custom(function(e){return[e==="asc"||e==="desc","either 'asc' or 'desc'"]}),"undefined"]})]),ie("design:type",Function),ie("design:paramtypes",[Object]),ie("design:returntype",Promise)],an.prototype,"getItems",null);it([te.validateTypesAsync(te.nonNegativeInteger),ie("design:type",Function),ie("design:paramtypes",[Number]),ie("design:returntype",Promise)],an.prototype,"setTtl",null);it([te.validateTypesAsync("string",te.nonNegativeInteger),ie("design:type",Function),ie("design:paramtypes",[String,Number]),ie("design:returntype",Promise)],an.prototype,"setItemTtl",null);function nD(e){var t=Zde();return function(){var r=Qt.default(e),i;if(t){var s=Qt.default(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return _a.default(this,i)}}function Zde(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Wc=function(e){Kn.default(n,e);var t=nD(n);function n(r,i,s){var a;return tt.default(this,n),a=t.call(this,r,s),a.descriptor=i,a}return nt.default(n,[{key:"uri",get:function(){return this.descriptor.url}},{key:"links",get:function(){return this.descriptor.links}},{key:"dateExpires",get:function(){return this.descriptor.date_expires}},{key:"type",get:function(){return"stream"}},{key:"lastEventId",get:function(){return null}},{key:"indexName",get:function(){}},{key:"queryString",get:function(){}},{key:"sid",get:function(){return this.descriptor.sid}},{key:"uniqueName",get:function(){return this.descriptor.unique_name||null}},{key:"publishMessage",value:function(){var r=ae.default(D.default.mark(function s(a){var l,u,f,d;return D.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return l={data:a},v.next=3,this.services.network.post(this.links.messages,l);case 3:return u=v.sent,f=u.body,d=this._handleMessagePublished(f.sid,a,!1),v.abrupt("return",d);case 7:case"end":return v.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"setTtl",value:function(){var r=ae.default(D.default.mark(function s(a){var l,u;return D.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,l={ttl:a},d.next=4,this.services.network.post(this.uri,l);case 4:u=d.sent,this.descriptor.date_expires=u.body.date_expires,d.next=12;break;case 8:throw d.prev=8,d.t0=d.catch(0),d.t0.status===404&&this.onRemoved(!1),d.t0;case 12:case"end":return d.stop()}},s,this,[[0,8]])}));function i(s){return r.apply(this,arguments)}return i}()},{key:"removeStream",value:function(){var r=ae.default(D.default.mark(function s(){return D.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.services.network.delete(this.uri);case 2:this.onRemoved(!0);case 3:case"end":return l.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"_update",value:function(i){switch(i.type){case"stream_message_published":{this._handleMessagePublished(i.message_sid,i.message_data,!0);break}case"stream_removed":{this.onRemoved(!1);break}}}},{key:"_handleMessagePublished",value:function(i,s,a){var l={sid:i,data:s};return this.broadcastEventToListeners("messagePublished",{message:l,isLocal:!a}),l}},{key:"onRemoved",value:function(i){this._unsubscribe(),this.removalHandler(this.type,this.sid,this.uniqueName),this.broadcastEventToListeners("removed",{isLocal:i})}}],[{key:"type",get:function(){return"stream"}}]),n}(Rf);it([te.validateTypesAsync(te.pureObject),ie("design:type",Function),ie("design:paramtypes",[Object]),ie("design:returntype",Promise)],Wc.prototype,"publishMessage",null);it([te.validateTypesAsync(te.nonNegativeInteger),ie("design:type",Function),ie("design:paramtypes",[Number]),ie("design:returntype",Promise)],Wc.prototype,"setTtl",null);var Ni=function(e){Kn.default(n,e);var t=nD(n);function n(r){var i;return tt.default(this,n),i=t.call(this),i.syncStreamImpl=r,i.syncStreamImpl.attach(Fi.default(i)),i}return nt.default(n,[{key:"uri",get:function(){return this.syncStreamImpl.uri}},{key:"links",get:function(){return this.syncStreamImpl.links}},{key:"dateExpires",get:function(){return this.syncStreamImpl.dateExpires}},{key:"type",get:function(){return Wc.type}},{key:"lastEventId",get:function(){return null}},{key:"sid",get:function(){return this.syncStreamImpl.sid}},{key:"uniqueName",get:function(){return this.syncStreamImpl.uniqueName}},{key:"publishMessage",value:function(){var r=ae.default(D.default.mark(function s(a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.ensureNotClosed(),u.abrupt("return",this.syncStreamImpl.publishMessage(a));case 2:case"end":return u.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"setTtl",value:function(){var r=ae.default(D.default.mark(function s(a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.ensureNotClosed(),u.abrupt("return",this.syncStreamImpl.setTtl(a));case 2:case"end":return u.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"removeStream",value:function(){var r=ae.default(D.default.mark(function s(){return D.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this.ensureNotClosed(),l.abrupt("return",this.syncStreamImpl.removeStream());case 2:case"end":return l.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"close",value:function(){Cf.default(Qt.default(n.prototype),"close",this).call(this),this.syncStreamImpl.detach(this.listenerUuid)}}],[{key:"type",get:function(){return Wc.type}}]),n}(xf);et.default(Ni,"messagePublished","messagePublished");et.default(Ni,"removed","removed");it([te.validateTypesAsync(te.pureObject),ie("design:type",Function),ie("design:paramtypes",[Object]),ie("design:returntype",Promise)],Ni.prototype,"publishMessage",null);it([te.validateTypesAsync(te.nonNegativeInteger),ie("design:type",Function),ie("design:paramtypes",[Number]),ie("design:returntype",Promise)],Ni.prototype,"setTtl",null);var ehe=nt.default(function e(t){tt.default(this,e),this.sdk="js",this.sdkVer=t,this.os=wh.os.family,this.osVer=wh.os.version,this.pl=wh.name,this.plVer=wh.version}),the=function(){function e(){tt.default(this,e),this.names=new Map,this.entities=new Map}return nt.default(e,[{key:"store",value:function(n){var r=this.entities.get(n.sid);return r||(this.entities.set(n.sid,n),n.uniqueName&&this.names.set(n.type+"::"+n.uniqueName,n.sid),n)}},{key:"getResolved",value:function(n,r){var i=this.names.get(r+"::"+n);return i?this.entities.get(i):null}},{key:"get",value:function(n,r){return this.entities.get(n)||this.getResolved(n,r)||null}},{key:"remove",value:function(n){var r=this.entities.get(n);r&&(this.entities.delete(n),r.uniqueName&&this.names.delete(r.type+"::"+r.uniqueName))}}]),e}();function Ub(e){var t=nhe();return function(){var r=Qt.default(e),i;if(t){var s=Qt.default(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return _a.default(this,i)}}function nhe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var cS=function(){function e(t,n,r){tt.default(this,e),this.key=t,this.value=n,this.lastEventId=r}return nt.default(e,[{key:"cacheKey",get:function(){return this.key}}]),e}(),fS=function(e){Kn.default(n,e);var t=Ub(n);function n(r,i,s,a){var l;return tt.default(this,n),l=t.call(this,i,s),l.descriptor=r,l.cache=new jb,a&&a.forEach(function(u){var f=new cS(u.key,u.data,u.revision);l.cache.store(u.key,f,u.revision)}),l}return nt.default(n,[{key:"sid",get:function(){return this.descriptor.sid}},{key:"uniqueName",get:function(){return null}},{key:"type",get:function(){return n.type}},{key:"lastEventId",get:function(){return this.descriptor.last_event_id}},{key:"indexName",get:function(){return this.descriptor.indexName}},{key:"queryString",get:function(){return this.descriptor.queryExpression}},{key:"queryUri",get:function(){return this.descriptor.queryUri}},{key:"liveQueryDescriptor",get:function(){return this.descriptor}},{key:"onRemoved",value:function(){}},{key:"getItems",value:function(){var i={};return this.cache.forEach(function(s,a){i[s]=a.value}),i}},{key:"_update",value:function(i,s){switch(i.type){case"live_query_item_updated":this.handleItemMutated(i.item_key,i.item_data,i.item_revision);break;case"live_query_item_removed":this.handleItemRemoved(i.item_key,i.item_revision);break;case"live_query_updated":this.handleBatchUpdate(i.items);break}s&&this._advanceLastEventId(i.last_event_id)}},{key:"handleItemMutated",value:function(i,s,a){if(this.shouldIgnoreEvent(i,a)){st.trace("Item ".concat(i," update skipped, revision: ").concat(a));return}var l=new cS(i,s,a);this.cache.store(i,l,a),this.broadcastEventToListeners("itemUpdated",l)}},{key:"handleItemRemoved",value:function(i,s){if(this.shouldIgnoreEvent(i,s)){st.trace("Item ".concat(i," delete skipped, revision: ").concat(s));return}this.cache.delete(i,s),this.broadcastEventToListeners("itemRemoved",{key:i})}},{key:"handleBatchUpdate",value:function(i){var s=this,a={};i!=null&&i.forEach(function(u){a[u.key]={data:u.data,revision:u.revision}}),this.cache.forEach(function(u,f){var d=a[u];d!=null?s.handleItemMutated(u,d.data,d.revision):s.handleItemRemoved(u,null),delete a[u]});for(var l in a)this.handleItemMutated(l,a[l].data,a[l].revision)}},{key:"shouldIgnoreEvent",value:function(i,s){return i!=null&&s!=null&&this.cache.isKnown(i,s)}},{key:"_advanceLastEventId",value:function(i,s){this.lastEventId<i&&(this.descriptor.last_event_id=i)}}],[{key:"type",get:function(){return"live_query"}}]),n}(Rf);function rD(e){return dS.apply(this,arguments)}function dS(){return dS=ae.default(D.default.mark(function e(t){var n,r,i,s,a,l;return D.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(n=t.network,r=t.queryString,i=t.uri,s=t.type,r!=null){f.next=3;break}throw new lr("Invalid query",400,54507);case 3:return a={query_string:r},s===as.type&&(a.type=s),f.next=7,n.post(i,a,void 0,!0);case 7:return l=f.sent,f.abrupt("return",l.body);case 9:case"end":return f.stop()}},e)})),dS.apply(this,arguments)}var as=function(e){Kn.default(n,e);var t=Ub(n);function n(r){var i;return tt.default(this,n),i=t.call(this),i.liveQueryImpl=r,i.liveQueryImpl.attach(Fi.default(i)),i}return nt.default(n,[{key:"type",get:function(){return fS.type}},{key:"lastEventId",get:function(){return this.liveQueryImpl.lastEventId}},{key:"sid",get:function(){return this.liveQueryImpl.sid}},{key:"close",value:function(){Cf.default(Qt.default(n.prototype),"close",this).call(this),this.liveQueryImpl.detach(this.listenerUuid)}},{key:"getItems",value:function(){return this.ensureNotClosed(),this.liveQueryImpl.getItems()}}],[{key:"type",get:function(){return fS.type}}]),n}(xf);et.default(as,"itemUpdated","itemUpdated");et.default(as,"itemRemoved","itemRemoved");var $f=function(e){Kn.default(n,e);var t=Ub(n);function n(r){var i;return tt.default(this,n),i=t.call(this),et.default(Fi.default(i),"queryExpression",null),et.default(Fi.default(i),"items",{}),Object.assign(Fi.default(i),r),i.updateIndexName(r.indexName),i}return nt.default(n,[{key:"type",get:function(){return n.type}},{key:"search",value:function(){var r=ae.default(D.default.mark(function s(a){var l=this,u;return D.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.items={},d.prev=1,d.next=4,rD({network:this.network,uri:this.queryUri,queryString:a});case 4:u=d.sent,this.queryExpression=a,u.items&&u.items.forEach(function(p){l.items[p.key]=p.data}),this.emit("searchResult",this.getItems()),d.next=15;break;case 10:throw d.prev=10,d.t0=d.catch(1),st.error("Error '".concat(d.t0.message,"' while executing query '").concat(a,"'")),this.queryExpression=null,d.t0;case 15:case"end":return d.stop()}},s,this,[[1,10]])}));function i(s){return r.apply(this,arguments)}return i}()},{key:"subscribe",value:function(){var r=ae.default(D.default.mark(function s(){return D.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(this.queryExpression!=null){l.next=2;break}return l.abrupt("return",Promise.reject(new lr("Invalid query",400,54507)));case 2:return l.abrupt("return",this.liveQueryCreator(this.indexName,this.queryExpression));case 3:case"end":return l.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"getItems",value:function(){return this.items}},{key:"updateIndexName",value:function(i){this.indexName=i,this.queryUri=this.generateQueryUri(this.indexName)}},{key:"generateQueryUri",value:function(i){return new Du(this.insightsUri).pathSegment(i).pathSegment("Items").build()}}],[{key:"type",get:function(){return"instant_query"}}]),n}(Mb.ReplayEventEmitter);et.default($f,"searchResult","searchResult");it([te.validateTypesAsync("string"),ie("design:type",Function),ie("design:paramtypes",[String]),ie("design:returntype",Promise)],$f.prototype,"search",null);it([te.validateTypes(te.nonEmptyString),ie("design:type",Function),ie("design:paramtypes",[String]),ie("design:returntype",void 0)],$f.prototype,"updateIndexName",null);var rhe="3.3.9";function ihe(e){var t=she();return function(){var r=Qt.default(e),i;if(t){var s=Qt.default(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return _a.default(this,i)}}function she(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Wx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function zx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Wx(Object(n),!0).forEach(function(r){et.default(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wx(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var ahe="data_sync",l_=rhe;function bh(e){if(e){if(typeof e=="string")return{id:e,mode:"open_or_create"};var t=e.mode||(e.id?"open_or_create":"create_new");return zx(zx({},e),{},{mode:t})}else return{mode:"create_new"}}var Hx="com.twilio.rtd.cds.document",Vx="com.twilio.rtd.cds.list",qx="com.twilio.rtd.cds.map",Gx="twilio.sync.event",Pr=function(e){Kn.default(n,e);var t=ihe(n);function n(r){var i,s,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(tt.default(this,n),s=t.call(this),!r)throw new Error("Sync library needs a valid Twilio token to be passed");a.hasOwnProperty("logLevel")?st.setLevel(a.logLevel):st.setLevel("silent");var l=a.productId=a.productId||ahe;a.clientMetadata=a.clientMetadata||{},a.clientMetadata.hasOwnProperty("type")||(a.clientMetadata.type="sync"),a.clientMetadata.hasOwnProperty("sdk")||(a.clientMetadata.sdk="JS",a.clientMetadata.sdkv=l_);var u=!a.twilsockClient;if(!a.initRegistrations){var f=new Op.InitRegistration(l);n.populateInitRegistrations(f),a.initRegistrations=[f]}var d=a.twilsockClient=(i=a.twilsockClient)!==null&&i!==void 0?i:new Op.Twilsock(r,l,a);d.on("tokenAboutToExpire",function(){return s.emit("tokenAboutToExpire")}),d.on("tokenExpired",function(){return s.emit("tokenExpired")}),d.on("connectionError",function(y){return s.emit("connectionError",y)}),d.on("stateChanged",function(y){s.emit("connectionStateChanged",y),s.services.subscriptions.onConnectionStateChanged(y==="connected")}),d.on("message",function(y,E){return s._routeMessage(y,E)});var p=new Cde(a),v=new Mde(new ehe(l_),p,d),m=new Lde(p);return s.services={config:p,twilsock:d,network:v,storage:m,router:Fi.default(s),subscriptions:null},s.services.subscriptions=new $de(s.services),s.entities=new the,u&&d.connect(),s}return nt.default(n,[{key:"_routeMessage",value:function(i,s){switch(st.trace("Notification type:",i,"content:",s),i){case Hx:case Vx:case qx:this.services.subscriptions.acceptMessage(s,!1);break;case Gx:this.services.subscriptions.acceptMessage(s,!0);break}}},{key:"_subscribe",value:function(i,s){this.services.subscriptions.add(i,s)}},{key:"_unsubscribe",value:function(i){this.services.subscriptions.remove(i)}},{key:"connectionState",get:function(){return this.services.twilsock.state}},{key:"ensureReady",value:function(){var r=ae.default(D.default.mark(function s(){var a;return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(this.services.config.sessionStorageEnabled){u.next=2;break}return u.abrupt("return");case 2:return u.prev=2,u.next=5,this.services.twilsock.storageId();case 5:a=u.sent,this.services.storage.updateStorageId(a.id),u.next=12;break;case 9:u.prev=9,u.t0=u.catch(2),st.warn("Failed to initialize storage",u.t0);case 12:case"end":return u.stop()}},s,this,[[2,9]])}));function i(){return r.apply(this,arguments)}return i}()},{key:"storeRootInSessionCache",value:function(i,s,a){if(!(!this.services.config.sessionStorageEnabled||!s)){var l=pi(a);(i===Xt.type||i===an.type)&&(l.last_event_id=null,delete l.items),this.services.storage.store(i,s,l)}}},{key:"readRootFromSessionCache",value:function(i,s){return!this.services.config.sessionStorageEnabled||!s?null:this.services.storage.read(i,s)}},{key:"_get",value:function(){var r=ae.default(D.default.mark(function s(a,l){var u,f,d,p=arguments;return D.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(u=p.length>2&&p[2]!==void 0?p[2]:!1,l){m.next=3;break}throw new lr("Cannot get entity without id",404);case 3:return f=new Du(a).pathSegment(l).queryParam("Include",u?"items":void 0).build(),m.next=6,this.services.network.get(f);case 6:return d=m.sent,m.abrupt("return",d.body);case 8:case"end":return m.stop()}},s,this)}));function i(s,a){return r.apply(this,arguments)}return i}()},{key:"_createDocument",value:function(i,s,a){var l={unique_name:i,data:s||{}};return a!==void 0&&(l.ttl=a),this.services.network.post(this.services.config.documentsUri,l).then(function(u){return u.body.data=l.data,u.body})}},{key:"_getDocument",value:function(){var r=ae.default(D.default.mark(function s(a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",this.readRootFromSessionCache(Hr.type,a)||this._get(this.services.config.documentsUri,a));case 1:case"end":return u.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"_createList",value:function(i,s,a,l){var u={unique_name:i,purpose:s,context:a};return l!==void 0&&(u.ttl=l),this.services.network.post(this.services.config.listsUri,u).then(function(f){return f.body})}},{key:"_getList",value:function(){var r=ae.default(D.default.mark(function s(a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",this.readRootFromSessionCache(Xt.type,a)||this._get(this.services.config.listsUri,a));case 1:case"end":return u.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"_createMap",value:function(i,s){var a={unique_name:i};return s!==void 0&&(a.ttl=s),this.services.network.post(this.services.config.mapsUri,a).then(function(l){return l.body})}},{key:"_getMap",value:function(){var r=ae.default(D.default.mark(function s(a){var l,u=arguments;return D.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return l=u.length>1&&u[1]!==void 0?u[1]:!1,d.abrupt("return",this.readRootFromSessionCache(an.type,a)||this._get(this.services.config.mapsUri,a,l));case 2:case"end":return d.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"_getStream",value:function(){var r=ae.default(D.default.mark(function s(a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",this.readRootFromSessionCache(Ni.type,a)||this._get(this.services.config.streamsUri,a,!1));case 1:case"end":return u.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"_createStream",value:function(){var r=ae.default(D.default.mark(function s(a,l){var u,f;return D.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return u={unique_name:a},l!==void 0&&(u.ttl=l),p.next=4,this.services.network.post(this.services.config.streamsUri,u);case 4:return f=p.sent,p.abrupt("return",f.body);case 6:case"end":return p.stop()}},s,this)}));function i(s,a){return r.apply(this,arguments)}return i}()},{key:"_getLiveQuery",value:function(i){return this.readRootFromSessionCache(as.type,i)}},{key:"getCached",value:function(i,s){return i&&this.entities.get(i,s)||null}},{key:"removeFromCacheAndSession",value:function(i,s,a){this.entities.remove(s),this.services.config.sessionStorageEnabled&&this.services.storage.remove(i,s,a)}},{key:"document",value:function(){var r=ae.default(D.default.mark(function s(a){var l=this,u,f,d,p;return D.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.ensureReady();case 2:if(u=bh(a),u.mode!=="create_new"){m.next=9;break}return m.next=6,this._createDocument(u.id,u.data,u.ttl);case 6:f=m.sent,m.next=39;break;case 9:if(d=this.getCached(u.id,Hr.type),!d){m.next=14;break}return m.abrupt("return",new Hr(d));case 14:return m.prev=14,m.next=17,this._getDocument(u.id);case 17:f=m.sent,m.next=39;break;case 20:if(m.prev=20,m.t0=m.catch(14),!(m.t0.status!==404||u.mode==="open_existing")){m.next=26;break}throw m.t0;case 26:return m.prev=26,m.next=29,this._createDocument(u.id,u.data,u.ttl);case 29:f=m.sent,m.next=39;break;case 32:if(m.prev=32,m.t1=m.catch(26),m.t1.status!==409){m.next=38;break}return m.abrupt("return",this.document(a));case 38:throw m.t1;case 39:return this.storeRootInSessionCache(Hr.type,u.id,f),p=new aS(this.services,f,function(y,E,b){return l.removeFromCacheAndSession(y,E,b)}),p=this.entities.store(p),m.abrupt("return",new Hr(p));case 43:case"end":return m.stop()}},s,this,[[14,20],[26,32]])}));function i(s){return r.apply(this,arguments)}return i}()},{key:"map",value:function(){var r=ae.default(D.default.mark(function s(a){var l=this,u,f,d,p;return D.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.ensureReady();case 2:if(u=bh(a),u.mode!=="create_new"){m.next=9;break}return m.next=6,this._createMap(u.id,u.ttl);case 6:f=m.sent,m.next=39;break;case 9:if(d=this.getCached(u.id,an.type),!d){m.next=14;break}return m.abrupt("return",new an(d));case 14:return m.prev=14,m.next=17,this._getMap(u.id,u.includeItems);case 17:f=m.sent,m.next=39;break;case 20:if(m.prev=20,m.t0=m.catch(14),!(m.t0.status!==404||u.mode==="open_existing")){m.next=26;break}throw m.t0;case 26:return m.prev=26,m.next=29,this._createMap(u.id,u.ttl);case 29:f=m.sent,m.next=39;break;case 32:if(m.prev=32,m.t1=m.catch(26),m.t1.status!==409){m.next=38;break}return m.abrupt("return",this.map(a));case 38:throw m.t1;case 39:return this.storeRootInSessionCache(an.type,u.id,f),p=new lS(this.services,f,function(y,E,b){return l.removeFromCacheAndSession(y,E,b)}),p=this.entities.store(p),m.abrupt("return",new an(p));case 43:case"end":return m.stop()}},s,this,[[14,20],[26,32]])}));function i(s){return r.apply(this,arguments)}return i}()},{key:"list",value:function(){var r=ae.default(D.default.mark(function s(a){var l=this,u,f,d,p;return D.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.ensureReady();case 2:if(u=bh(a),u.mode!=="create_new"){m.next=9;break}return m.next=6,this._createList(u.id,u.purpose,u.context,u.ttl);case 6:f=m.sent,m.next=39;break;case 9:if(d=this.getCached(u.id,Xt.type),!d){m.next=14;break}return m.abrupt("return",new Xt(d));case 14:return m.prev=14,m.next=17,this._getList(u.id);case 17:f=m.sent,m.next=39;break;case 20:if(m.prev=20,m.t0=m.catch(14),!(m.t0.status!==404||u.mode==="open_existing")){m.next=26;break}throw m.t0;case 26:return m.prev=26,m.next=29,this._createList(u.id,u.purpose,u.context,u.ttl);case 29:f=m.sent,m.next=39;break;case 32:if(m.prev=32,m.t1=m.catch(26),m.t1.status!==409){m.next=38;break}return m.abrupt("return",this.list(a));case 38:throw m.t1;case 39:return this.storeRootInSessionCache(Xt.type,u.id,f),p=new uS(this.services,f,function(y,E,b){return l.removeFromCacheAndSession(y,E,b)}),p=this.entities.store(p),m.abrupt("return",new Xt(p));case 43:case"end":return m.stop()}},s,this,[[14,20],[26,32]])}));function i(s){return r.apply(this,arguments)}return i}()},{key:"stream",value:function(){var r=ae.default(D.default.mark(function s(a){var l=this,u,f,d,p,v;return D.default.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,this.ensureReady();case 2:if(u=bh(a),u.mode!=="create_new"){y.next=9;break}return y.next=6,this._createStream(u.id,u.ttl);case 6:f=y.sent,y.next=39;break;case 9:if(d=this.getCached(u.id,Ni.type),!d){y.next=14;break}return y.abrupt("return",new Ni(d));case 14:return y.prev=14,y.next=17,this._getStream(u.id);case 17:f=y.sent,y.next=39;break;case 20:if(y.prev=20,y.t0=y.catch(14),!(y.t0.status!==404||u.mode==="open_existing")){y.next=26;break}throw y.t0;case 26:return y.prev=26,y.next=29,this._createStream(u.id,u.ttl);case 29:f=y.sent,y.next=39;break;case 32:if(y.prev=32,y.t1=y.catch(26),y.t1.status!==409){y.next=38;break}return y.abrupt("return",this.stream(a));case 38:throw y.t1;case 39:return this.storeRootInSessionCache(Ni.type,u.id,f),p=function(b,w,T){return l.removeFromCacheAndSession(b,w,T)},v=new Wc(this.services,f,p),v=this.entities.store(v),y.abrupt("return",new Ni(v));case 44:case"end":return y.stop()}},s,this,[[14,20],[26,32]])}));function i(s){return r.apply(this,arguments)}return i}()},{key:"shutdown",value:function(){var r=ae.default(D.default.mark(function s(){return D.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.services.subscriptions.shutdown();case 2:return l.next=4,this.services.twilsock.disconnect();case 4:case"end":return l.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"updateToken",value:function(){var r=ae.default(D.default.mark(function s(a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",this.services.twilsock.updateToken(a).catch(function(f){var d,p=f==null||(d=f.reply)===null||d===void 0?void 0:d.status;throw(p==null?void 0:p.code)===401&&(p==null?void 0:p.status)==="UNAUTHORIZED"?new lr("Updated token was rejected by server",400,51130):f}));case 1:case"end":return u.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"liveQuery",value:function(){var r=ae.default(D.default.mark(function s(a,l){var u=this,f,d,p,v,m;return D.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,this.ensureReady();case 2:return f=new Du(this.services.config.insightsUri).pathSegment(a).pathSegment("Items").build(),E.next=5,rD({network:this.services.network,uri:f,queryString:l,type:as.type});case 5:return d=E.sent,p=this.getCached(d.query_id,as.type),p||(v=this._getLiveQuery(d.query_id),v||(v={indexName:a,queryExpression:l,sid:d.query_id,queryUri:f,last_event_id:d.last_event_id}),m=function(w,T,x){return u.removeFromCacheAndSession(w,T,x)},p=new fS(v,this.services,m,d.items)),this.storeRootInSessionCache(as.type,d.query_id,p.liveQueryDescriptor),p=this.entities.store(p),E.abrupt("return",new as(p));case 11:case"end":return E.stop()}},s,this)}));function i(s,a){return r.apply(this,arguments)}return i}()},{key:"instantQuery",value:function(){var r=ae.default(D.default.mark(function s(a){var l=this,u;return D.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.ensureReady();case 2:return u=function(v,m){return l.liveQuery(v,m)},d.abrupt("return",new $f({indexName:a,network:this.services.network,insightsUri:this.services.config.insightsUri,liveQueryCreator:u}));case 4:case"end":return d.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()}],[{key:"populateInitRegistrations",value:function(i){i.populateInitRegistrations([Gx,Hx,Vx,qx])}},{key:"version",get:function(){return l_}}]),n}(Mb.ReplayEventEmitter);et.default(Pr,"connectionStateChanged","connectionStateChanged");et.default(Pr,"connectionError","connectionError");et.default(Pr,"tokenAboutToExpire","tokenAboutToExpire");et.default(Pr,"tokenExpired","tokenExpired");it([te.validateTypesAsync(["undefined","string",te.objectSchema("open document options",{id:["string","undefined"],mode:[te.literal("open_or_create","open_existing","create_new"),"undefined"],ttl:[te.nonNegativeInteger,"undefined"],data:[te.pureObject,"undefined",te.literal(null)]})]),ie("design:type",Function),ie("design:paramtypes",[Object]),ie("design:returntype",Promise)],Pr.prototype,"document",null);it([te.validateTypesAsync(["undefined","string",te.objectSchema("open map options",{id:["string","undefined"],mode:[te.literal("open_or_create","open_existing","create_new"),"undefined"],ttl:[te.nonNegativeInteger,"undefined"],data:[te.pureObject,"undefined",te.literal(null)],includeItems:["boolean","undefined"]})]),ie("design:type",Function),ie("design:paramtypes",[Object]),ie("design:returntype",Promise)],Pr.prototype,"map",null);it([te.validateTypesAsync(["undefined","string",te.objectSchema("open list options",{id:["string","undefined"],mode:[te.literal("open_or_create","open_existing","create_new"),"undefined"],ttl:[te.nonNegativeInteger,"undefined"],data:[te.pureObject,"undefined",te.literal(null)],purpose:["string","undefined"],context:[te.pureObject,"undefined"],includeItems:["boolean","undefined"]})]),ie("design:type",Function),ie("design:paramtypes",[Object]),ie("design:returntype",Promise)],Pr.prototype,"list",null);it([te.validateTypesAsync(["undefined","string",te.objectSchema("open stream options",{id:["string","undefined"],mode:[te.literal("open_or_create","open_existing","create_new"),"undefined"],ttl:[te.nonNegativeInteger,"undefined"],data:[te.pureObject,"undefined",te.literal(null)]})]),ie("design:type",Function),ie("design:paramtypes",[Object]),ie("design:returntype",Promise)],Pr.prototype,"stream",null);it([te.validateTypesAsync(te.nonEmptyString),ie("design:type",Function),ie("design:paramtypes",[String]),ie("design:returntype",Promise)],Pr.prototype,"updateToken",null);it([te.validateTypesAsync(te.nonEmptyString,"string"),ie("design:type",Function),ie("design:paramtypes",[String,String]),ie("design:returntype",Promise)],Pr.prototype,"liveQuery",null);it([te.validateTypesAsync(te.nonEmptyString),ie("design:type",Function),ie("design:paramtypes",[String]),ie("design:returntype",Promise)],Pr.prototype,"instantQuery",null);var ohe=Rr.Client=Pr;Rr.InsightsItem=cS;Rr.InstantQuery=$f;Rr.LiveQuery=as;Rr.Paginator=Fb;Rr.SyncClient=Pr;Rr.SyncDocument=Hr;Rr.SyncList=Xt;Rr.SyncListItem=oS;Rr.SyncMap=an;Rr.SyncMapItem=sc;Rr.SyncStream=Ni;const Kx="https://callburner-functions-2333-dev.twil.io",uhe=e=>{const t=lt.useRef(null),[n,r]=lt.useState([]),[i,s]=lt.useState(!1),a=lt.useCallback(()=>{r([])},[]);return lt.useEffect(()=>{var d;if(!e){(d=t.current)==null||d.shutdown(),t.current=null,s(!1),a();return}let l,u=!1;return(async()=>{try{console.log("[Sync] Requesting token from:",`${Kx}/sync-token`);const p=await fetch(`${Kx}/sync-token`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identity:`callburner-${Date.now()}`})});if(!p.ok){const b=await p.text();throw console.error("[Sync] Token request failed:",p.status,b),new Error(`Failed to get Sync token: ${p.status}`)}const v=await p.text();console.log("[Sync] Token response:",v);const m=JSON.parse(v),{token:y}=m;if(u)return;l=new ohe(y),t.current=l,l.on("connectionStateChanged",b=>{console.log("Sync connection state:",b),s(b==="connected")});const E=`transcriptions-${e}`;try{const b=await l.list(E),T=(await b.getItems({limit:100})).items.map(x=>x.data);u||r(T),b.on("itemAdded",x=>{const M=x.item.data;console.log("New transcription:",M),u||r(W=>{const z=W.findIndex(K=>K.chunkId===M.chunkId);if(z>=0){const K=[...W];return K[z]=M,K}return[...W,M]})}),b.on("itemUpdated",x=>{const M=x.item.data;console.log("Updated transcription:",M),u||r(W=>{const z=[...W],K=z.findIndex(A=>A.chunkId===M.chunkId);return K>=0?(z[K]=M,z):[...W,M]})})}catch(b){console.log("Transcription list not yet created:",b.message)}}catch(p){console.error("Error initializing Sync:",p),s(!1)}})(),()=>{u=!0,l==null||l.shutdown(),t.current=null,s(!1)}},[e,a]),{events:n,reset:a,isConnected:i}},lhe="callburner-operator",Qx=e=>e.replace(/[^0-9#+*]/g,"");function che(){const[e]=lt.useState(lhe),[t,n]=lt.useState(""),[r,i]=lt.useState("idle"),[s,a]=lt.useState(),l=lt.useRef(),[u,f]=lt.useState(!0),[d,p]=lt.useState(!1),[v,m]=lt.useState(null),[y,E]=lt.useState(!1),[b,w]=lt.useState([]),[T,x]=lt.useState(null),{events:M}=uhe(s),W=async(ve,J)=>{try{const fe=await lV(ve);m(fe??{callSid:ve,dialedNumber:J,startedAt:new Date().toISOString()}),E(!0);const be=await Wk();w(be)}catch(fe){console.warn("Unable to fetch call summary",fe)}},{connect:z,disconnect:K,phase:A,error:ne}=cV({identity:e,onCallEnded:()=>{i("ended"),p(!1),x("Call ended");const ve=l.current;ve&&W(ve,t)}});lt.useEffect(()=>{i(A),A!=="recording"&&p(!1)},[A]),lt.useEffect(()=>{ne&&x(ne)},[ne]),lt.useEffect(()=>{(async()=>{try{const J=await Wk();w(J)}catch(J){console.warn("Unable to fetch recent calls",J)}})()},[]);const X=lt.useMemo(()=>t.length>=3,[t.length]),oe=ve=>{n(Qx(ve))},he=ve=>{n(J=>Qx(`${J}${ve}`))},ye=()=>{n(ve=>ve.slice(0,-1))},Se=async()=>{if(!X){x("Enter at least 3 digits");return}x(null);try{const ve=await z({to:t,record:u});ve.on("accept",async()=>{const J=ve.parameters.CallSid,fe=new Date().toISOString();a(J),l.current=J,m({callSid:J,dialedNumber:t,startedAt:fe}),await aV({callSid:J,to:t,startedAt:fe}),p(u),x("Call connected")}),ve.on("error",J=>{x(J.message)})}catch(ve){const J=ve instanceof Error?ve.message:"Unable to place call";x(J)}},Ie=async()=>{K();const ve=l.current;if(ve)try{await oV(ve)}catch(J){console.warn("Unable to hang up via server",J)}},we=async()=>{const ve=l.current;if(!ve)return;const J=d?"stop":"start";try{await uV(ve,J),p(!d),x(J==="start"?"Recording started":"Recording stopped")}catch(fe){const be=fe instanceof Error?fe.message:"Unable to toggle recording";x(be)}};return me.jsxs("div",{className:"app-shell",children:[me.jsxs("header",{className:"top-bar",children:[me.jsxs("div",{children:[me.jsx("h1",{children:"CallBurner"}),me.jsx("p",{className:"subtitle",children:"Twilio powered web dialer"})]}),me.jsxs("div",{className:"identity-chip",children:["Signed in as ",me.jsx("span",{children:e})]})]}),me.jsxs("main",{className:"layout",children:[me.jsxs("section",{className:"panel dialer-panel",children:[me.jsxs("div",{className:"number-entry",children:[me.jsx(A8,{value:t,onChange:oe,disabled:r==="dialing"}),me.jsxs("label",{className:"checkbox",children:[me.jsx("input",{type:"checkbox",checked:u,onChange:ve=>f(ve.target.checked)}),"Auto-start recording"]})]}),me.jsx($8,{onInput:he,onBackspace:ye,disabled:r==="dialing"}),me.jsx(P8,{callPhase:r,isRecording:d,onDial:Se,onHangup:Ie,onToggleRecording:we}),T&&me.jsx("div",{className:"banner",children:T}),me.jsxs("div",{className:"recent-calls",children:[me.jsx("h2",{children:"Recent Calls"}),b.length===0&&me.jsx("p",{className:"placeholder",children:"No calls yet"}),b.map(ve=>me.jsxs("button",{className:"recent-call",onClick:()=>W(ve.callSid,ve.dialedNumber),children:[me.jsx("span",{className:"number",children:ve.dialedNumber}),me.jsx("span",{className:"meta",children:new Date(ve.startedAt).toLocaleString()})]},ve.callSid))]})]}),me.jsx("section",{className:"panel transcription-panel",children:me.jsx(O8,{events:M,isStreaming:r==="in-call"||r==="recording"})})]}),me.jsx(N8,{open:y,summary:v,onClose:()=>E(!1)})]})}c_.createRoot(document.getElementById("root")).render(me.jsx(g6.StrictMode,{children:me.jsx(che,{})}));
