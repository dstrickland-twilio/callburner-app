function c6(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var di=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function i$(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var s$={exports:{}},Lp={},a$={exports:{}},Je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vc=Symbol.for("react.element"),f6=Symbol.for("react.portal"),d6=Symbol.for("react.fragment"),h6=Symbol.for("react.strict_mode"),p6=Symbol.for("react.profiler"),v6=Symbol.for("react.provider"),g6=Symbol.for("react.context"),m6=Symbol.for("react.forward_ref"),y6=Symbol.for("react.suspense"),_6=Symbol.for("react.memo"),w6=Symbol.for("react.lazy"),iE=Symbol.iterator;function S6(e){return e===null||typeof e!="object"?null:(e=iE&&e[iE]||e["@@iterator"],typeof e=="function"?e:null)}var o$={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},u$=Object.assign,l$={};function ju(e,t,n){this.props=e,this.context=t,this.refs=l$,this.updater=n||o$}ju.prototype.isReactComponent={};ju.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ju.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function c$(){}c$.prototype=ju.prototype;function wS(e,t,n){this.props=e,this.context=t,this.refs=l$,this.updater=n||o$}var SS=wS.prototype=new c$;SS.constructor=wS;u$(SS,ju.prototype);SS.isPureReactComponent=!0;var sE=Array.isArray,f$=Object.prototype.hasOwnProperty,bS={current:null},d$={key:!0,ref:!0,__self:!0,__source:!0};function h$(e,t,n){var r,i={},s=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)f$.call(t,r)&&!d$.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),f=0;f<l;f++)u[f]=arguments[f+2];i.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Vc,type:e,key:s,ref:a,props:i,_owner:bS.current}}function b6(e,t){return{$$typeof:Vc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function TS(e){return typeof e=="object"&&e!==null&&e.$$typeof===Vc}function T6(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var aE=/\/+/g;function bm(e,t){return typeof e=="object"&&e!==null&&e.key!=null?T6(""+e.key):t.toString(36)}function Eh(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Vc:case f6:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+bm(a,0):r,sE(i)?(n="",e!=null&&(n=e.replace(aE,"$&/")+"/"),Eh(i,t,n,"",function(f){return f})):i!=null&&(TS(i)&&(i=b6(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(aE,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",sE(e))for(var l=0;l<e.length;l++){s=e[l];var u=r+bm(s,l);a+=Eh(s,t,n,u,i)}else if(u=S6(e),typeof u=="function")for(e=u.call(e),l=0;!(s=e.next()).done;)s=s.value,u=r+bm(s,l++),a+=Eh(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Id(e,t,n){if(e==null)return e;var r=[],i=0;return Eh(e,r,"","",function(s){return t.call(n,s,i++)}),r}function E6(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Hn={current:null},kh={transition:null},k6={ReactCurrentDispatcher:Hn,ReactCurrentBatchConfig:kh,ReactCurrentOwner:bS};function p$(){throw Error("act(...) is not supported in production builds of React.")}Je.Children={map:Id,forEach:function(e,t,n){Id(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Id(e,function(){t++}),t},toArray:function(e){return Id(e,function(t){return t})||[]},only:function(e){if(!TS(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Je.Component=ju;Je.Fragment=d6;Je.Profiler=p6;Je.PureComponent=wS;Je.StrictMode=h6;Je.Suspense=y6;Je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k6;Je.act=p$;Je.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=u$({},e.props),i=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=bS.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)f$.call(t,u)&&!d$.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&l!==void 0?l[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var f=0;f<u;f++)l[f]=arguments[f+2];r.children=l}return{$$typeof:Vc,type:e.type,key:i,ref:s,props:r,_owner:a}};Je.createContext=function(e){return e={$$typeof:g6,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:v6,_context:e},e.Consumer=e};Je.createElement=h$;Je.createFactory=function(e){var t=h$.bind(null,e);return t.type=e,t};Je.createRef=function(){return{current:null}};Je.forwardRef=function(e){return{$$typeof:m6,render:e}};Je.isValidElement=TS;Je.lazy=function(e){return{$$typeof:w6,_payload:{_status:-1,_result:e},_init:E6}};Je.memo=function(e,t){return{$$typeof:_6,type:e,compare:t===void 0?null:t}};Je.startTransition=function(e){var t=kh.transition;kh.transition={};try{e()}finally{kh.transition=t}};Je.unstable_act=p$;Je.useCallback=function(e,t){return Hn.current.useCallback(e,t)};Je.useContext=function(e){return Hn.current.useContext(e)};Je.useDebugValue=function(){};Je.useDeferredValue=function(e){return Hn.current.useDeferredValue(e)};Je.useEffect=function(e,t){return Hn.current.useEffect(e,t)};Je.useId=function(){return Hn.current.useId()};Je.useImperativeHandle=function(e,t,n){return Hn.current.useImperativeHandle(e,t,n)};Je.useInsertionEffect=function(e,t){return Hn.current.useInsertionEffect(e,t)};Je.useLayoutEffect=function(e,t){return Hn.current.useLayoutEffect(e,t)};Je.useMemo=function(e,t){return Hn.current.useMemo(e,t)};Je.useReducer=function(e,t,n){return Hn.current.useReducer(e,t,n)};Je.useRef=function(e){return Hn.current.useRef(e)};Je.useState=function(e){return Hn.current.useState(e)};Je.useSyncExternalStore=function(e,t,n){return Hn.current.useSyncExternalStore(e,t,n)};Je.useTransition=function(){return Hn.current.useTransition()};Je.version="18.3.1";a$.exports=Je;var Qe=a$.exports;const I6=i$(Qe);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C6=Qe,R6=Symbol.for("react.element"),x6=Symbol.for("react.fragment"),$6=Object.prototype.hasOwnProperty,P6=C6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,A6={key:!0,ref:!0,__self:!0,__source:!0};function v$(e,t,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)$6.call(t,r)&&!A6.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:R6,type:e,key:s,ref:a,props:i,_owner:P6.current}}Lp.Fragment=x6;Lp.jsx=v$;Lp.jsxs=v$;s$.exports=Lp;var pe=s$.exports,p_={},g$={exports:{}},Ir={},m$={exports:{}},y$={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(te,ve){var be=te.length;te.push(ve);e:for(;0<be;){var W=be-1>>>1,Re=te[W];if(0<i(Re,ve))te[W]=ve,te[be]=Re,be=W;else break e}}function n(te){return te.length===0?null:te[0]}function r(te){if(te.length===0)return null;var ve=te[0],be=te.pop();if(be!==ve){te[0]=be;e:for(var W=0,Re=te.length,kt=Re>>>1;W<kt;){var De=2*(W+1)-1,ht=te[De],B=De+1,he=te[B];if(0>i(ht,be))B<Re&&0>i(he,ht)?(te[W]=he,te[B]=be,W=B):(te[W]=ht,te[De]=be,W=De);else if(B<Re&&0>i(he,be))te[W]=he,te[B]=be,W=B;else break e}}return ve}function i(te,ve){var be=te.sortIndex-ve.sortIndex;return be!==0?be:te.id-ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],f=[],d=1,p=null,v=3,m=!1,y=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(te){for(var ve=n(f);ve!==null;){if(ve.callback===null)r(f);else if(ve.startTime<=te)r(f),ve.sortIndex=ve.expirationTime,t(u,ve);else break;ve=n(f)}}function N(te){if(E=!1,$(te),!y)if(n(u)!==null)y=!0,_e(z);else{var ve=n(f);ve!==null&&Me(N,ve.startTime-te)}}function z(te,ve){y=!1,E&&(E=!1,w(P),P=-1),m=!0;var be=v;try{for($(ve),p=n(u);p!==null&&(!(p.expirationTime>ve)||te&&!oe());){var W=p.callback;if(typeof W=="function"){p.callback=null,v=p.priorityLevel;var Re=W(p.expirationTime<=ve);ve=e.unstable_now(),typeof Re=="function"?p.callback=Re:p===n(u)&&r(u),$(ve)}else r(u);p=n(u)}if(p!==null)var kt=!0;else{var De=n(f);De!==null&&Me(N,De.startTime-ve),kt=!1}return kt}finally{p=null,v=be,m=!1}}var H=!1,K=null,P=-1,ee=5,Y=-1;function oe(){return!(e.unstable_now()-Y<ee)}function de(){if(K!==null){var te=e.unstable_now();Y=te;var ve=!0;try{ve=K(!0,te)}finally{ve?me():(H=!1,K=null)}}else H=!1}var me;if(typeof b=="function")me=function(){b(de)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,ke=we.port2;we.port1.onmessage=de,me=function(){ke.postMessage(null)}}else me=function(){T(de,0)};function _e(te){K=te,H||(H=!0,me())}function Me(te,ve){P=T(function(){te(e.unstable_now())},ve)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(te){te.callback=null},e.unstable_continueExecution=function(){y||m||(y=!0,_e(z))},e.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<te?Math.floor(1e3/te):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(te){switch(v){case 1:case 2:case 3:var ve=3;break;default:ve=v}var be=v;v=ve;try{return te()}finally{v=be}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(te,ve){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var be=v;v=te;try{return ve()}finally{v=be}},e.unstable_scheduleCallback=function(te,ve,be){var W=e.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?W+be:W):be=W,te){case 1:var Re=-1;break;case 2:Re=250;break;case 5:Re=1073741823;break;case 4:Re=1e4;break;default:Re=5e3}return Re=be+Re,te={id:d++,callback:ve,priorityLevel:te,startTime:be,expirationTime:Re,sortIndex:-1},be>W?(te.sortIndex=be,t(f,te),n(u)===null&&te===n(f)&&(E?(w(P),P=-1):E=!0,Me(N,be-W))):(te.sortIndex=Re,t(u,te),y||m||(y=!0,_e(z))),te},e.unstable_shouldYield=oe,e.unstable_wrapCallback=function(te){var ve=v;return function(){var be=v;v=ve;try{return te.apply(this,arguments)}finally{v=be}}}})(y$);m$.exports=y$;var O6=m$.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N6=Qe,Tr=O6;function le(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _$=new Set,Sc={};function so(e,t){Eu(e,t),Eu(e+"Capture",t)}function Eu(e,t){for(Sc[e]=t,e=0;e<t.length;e++)_$.add(t[e])}var cs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v_=Object.prototype.hasOwnProperty,M6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,oE={},uE={};function L6(e){return v_.call(uE,e)?!0:v_.call(oE,e)?!1:M6.test(e)?uE[e]=!0:(oE[e]=!0,!1)}function D6(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function F6(e,t,n,r){if(t===null||typeof t>"u"||D6(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Vn(e,t,n,r,i,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var bn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){bn[e]=new Vn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];bn[t]=new Vn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){bn[e]=new Vn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){bn[e]=new Vn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){bn[e]=new Vn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){bn[e]=new Vn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){bn[e]=new Vn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){bn[e]=new Vn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){bn[e]=new Vn(e,5,!1,e.toLowerCase(),null,!1,!1)});var ES=/[\-:]([a-z])/g;function kS(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ES,kS);bn[t]=new Vn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ES,kS);bn[t]=new Vn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ES,kS);bn[t]=new Vn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){bn[e]=new Vn(e,1,!1,e.toLowerCase(),null,!1,!1)});bn.xlinkHref=new Vn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){bn[e]=new Vn(e,1,!1,e.toLowerCase(),null,!0,!0)});function IS(e,t,n,r){var i=bn.hasOwnProperty(t)?bn[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(F6(t,n,i,r)&&(n=null),r||i===null?L6(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ys=N6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cd=Symbol.for("react.element"),Ko=Symbol.for("react.portal"),Qo=Symbol.for("react.fragment"),CS=Symbol.for("react.strict_mode"),g_=Symbol.for("react.profiler"),w$=Symbol.for("react.provider"),S$=Symbol.for("react.context"),RS=Symbol.for("react.forward_ref"),m_=Symbol.for("react.suspense"),y_=Symbol.for("react.suspense_list"),xS=Symbol.for("react.memo"),Us=Symbol.for("react.lazy"),b$=Symbol.for("react.offscreen"),lE=Symbol.iterator;function $l(e){return e===null||typeof e!="object"?null:(e=lE&&e[lE]||e["@@iterator"],typeof e=="function"?e:null)}var Wt=Object.assign,Tm;function ec(e){if(Tm===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Tm=t&&t[1]||""}return`
`+Tm+e}var Em=!1;function km(e,t){if(!e||Em)return"";Em=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var r=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){r=f}e.call(t.prototype)}else{try{throw Error()}catch(f){r=f}e()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,l=s.length-1;1<=a&&0<=l&&i[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==s[l]){var u=`
`+i[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=a&&0<=l);break}}}finally{Em=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ec(e):""}function j6(e){switch(e.tag){case 5:return ec(e.type);case 16:return ec("Lazy");case 13:return ec("Suspense");case 19:return ec("SuspenseList");case 0:case 2:case 15:return e=km(e.type,!1),e;case 11:return e=km(e.type.render,!1),e;case 1:return e=km(e.type,!0),e;default:return""}}function __(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Qo:return"Fragment";case Ko:return"Portal";case g_:return"Profiler";case CS:return"StrictMode";case m_:return"Suspense";case y_:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case S$:return(e.displayName||"Context")+".Consumer";case w$:return(e._context.displayName||"Context")+".Provider";case RS:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case xS:return t=e.displayName||null,t!==null?t:__(e.type)||"Memo";case Us:t=e._payload,e=e._init;try{return __(e(t))}catch{}}return null}function U6(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return __(t);case 8:return t===CS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function sa(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function T$(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function B6(e){var t=T$(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Rd(e){e._valueTracker||(e._valueTracker=B6(e))}function E$(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=T$(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Kh(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function w_(e,t){var n=t.checked;return Wt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function cE(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=sa(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function k$(e,t){t=t.checked,t!=null&&IS(e,"checked",t,!1)}function S_(e,t){k$(e,t);var n=sa(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?b_(e,t.type,n):t.hasOwnProperty("defaultValue")&&b_(e,t.type,sa(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function fE(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function b_(e,t,n){(t!=="number"||Kh(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var tc=Array.isArray;function lu(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+sa(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function T_(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(le(91));return Wt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function dE(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(le(92));if(tc(n)){if(1<n.length)throw Error(le(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:sa(n)}}function I$(e,t){var n=sa(t.value),r=sa(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function hE(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function C$(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function E_(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?C$(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var xd,R$=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(xd=xd||document.createElement("div"),xd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=xd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function bc(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var uc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},W6=["Webkit","ms","Moz","O"];Object.keys(uc).forEach(function(e){W6.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),uc[t]=uc[e]})});function x$(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||uc.hasOwnProperty(e)&&uc[e]?(""+t).trim():t+"px"}function $$(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=x$(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var z6=Wt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function k_(e,t){if(t){if(z6[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(le(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(le(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(le(61))}if(t.style!=null&&typeof t.style!="object")throw Error(le(62))}}function I_(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var C_=null;function $S(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var R_=null,cu=null,fu=null;function pE(e){if(e=Kc(e)){if(typeof R_!="function")throw Error(le(280));var t=e.stateNode;t&&(t=Bp(t),R_(e.stateNode,e.type,t))}}function P$(e){cu?fu?fu.push(e):fu=[e]:cu=e}function A$(){if(cu){var e=cu,t=fu;if(fu=cu=null,pE(e),t)for(e=0;e<t.length;e++)pE(t[e])}}function O$(e,t){return e(t)}function N$(){}var Im=!1;function M$(e,t,n){if(Im)return e(t,n);Im=!0;try{return O$(e,t,n)}finally{Im=!1,(cu!==null||fu!==null)&&(N$(),A$())}}function Tc(e,t){var n=e.stateNode;if(n===null)return null;var r=Bp(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(le(231,t,typeof n));return n}var x_=!1;if(cs)try{var Pl={};Object.defineProperty(Pl,"passive",{get:function(){x_=!0}}),window.addEventListener("test",Pl,Pl),window.removeEventListener("test",Pl,Pl)}catch{x_=!1}function H6(e,t,n,r,i,s,a,l,u){var f=Array.prototype.slice.call(arguments,3);try{t.apply(n,f)}catch(d){this.onError(d)}}var lc=!1,Qh=null,Jh=!1,$_=null,V6={onError:function(e){lc=!0,Qh=e}};function q6(e,t,n,r,i,s,a,l,u){lc=!1,Qh=null,H6.apply(V6,arguments)}function G6(e,t,n,r,i,s,a,l,u){if(q6.apply(this,arguments),lc){if(lc){var f=Qh;lc=!1,Qh=null}else throw Error(le(198));Jh||(Jh=!0,$_=f)}}function ao(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function L$(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function vE(e){if(ao(e)!==e)throw Error(le(188))}function K6(e){var t=e.alternate;if(!t){if(t=ao(e),t===null)throw Error(le(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return vE(i),e;if(s===r)return vE(i),t;s=s.sibling}throw Error(le(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(le(189))}}if(n.alternate!==r)throw Error(le(190))}if(n.tag!==3)throw Error(le(188));return n.stateNode.current===n?e:t}function D$(e){return e=K6(e),e!==null?F$(e):null}function F$(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=F$(e);if(t!==null)return t;e=e.sibling}return null}var j$=Tr.unstable_scheduleCallback,gE=Tr.unstable_cancelCallback,Q6=Tr.unstable_shouldYield,J6=Tr.unstable_requestPaint,Jt=Tr.unstable_now,Y6=Tr.unstable_getCurrentPriorityLevel,PS=Tr.unstable_ImmediatePriority,U$=Tr.unstable_UserBlockingPriority,Yh=Tr.unstable_NormalPriority,X6=Tr.unstable_LowPriority,B$=Tr.unstable_IdlePriority,Dp=null,Li=null;function Z6(e){if(Li&&typeof Li.onCommitFiberRoot=="function")try{Li.onCommitFiberRoot(Dp,e,void 0,(e.current.flags&128)===128)}catch{}}var vi=Math.clz32?Math.clz32:n5,e5=Math.log,t5=Math.LN2;function n5(e){return e>>>=0,e===0?32:31-(e5(e)/t5|0)|0}var $d=64,Pd=4194304;function nc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Xh(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~i;l!==0?r=nc(l):(s&=a,s!==0&&(r=nc(s)))}else a=n&~i,a!==0?r=nc(a):s!==0&&(r=nc(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-vi(t),i=1<<n,r|=e[n],t&=~i;return r}function r5(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function i5(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-vi(s),l=1<<a,u=i[a];u===-1?(!(l&n)||l&r)&&(i[a]=r5(l,t)):u<=t&&(e.expiredLanes|=l),s&=~l}}function P_(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function W$(){var e=$d;return $d<<=1,!($d&4194240)&&($d=64),e}function Cm(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function qc(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-vi(t),e[t]=n}function s5(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-vi(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function AS(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-vi(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var mt=0;function z$(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var H$,OS,V$,q$,G$,A_=!1,Ad=[],Ks=null,Qs=null,Js=null,Ec=new Map,kc=new Map,Ws=[],a5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mE(e,t){switch(e){case"focusin":case"focusout":Ks=null;break;case"dragenter":case"dragleave":Qs=null;break;case"mouseover":case"mouseout":Js=null;break;case"pointerover":case"pointerout":Ec.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":kc.delete(t.pointerId)}}function Al(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Kc(t),t!==null&&OS(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function o5(e,t,n,r,i){switch(t){case"focusin":return Ks=Al(Ks,e,t,n,r,i),!0;case"dragenter":return Qs=Al(Qs,e,t,n,r,i),!0;case"mouseover":return Js=Al(Js,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ec.set(s,Al(Ec.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,kc.set(s,Al(kc.get(s)||null,e,t,n,r,i)),!0}return!1}function K$(e){var t=ja(e.target);if(t!==null){var n=ao(t);if(n!==null){if(t=n.tag,t===13){if(t=L$(n),t!==null){e.blockedOn=t,G$(e.priority,function(){V$(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ih(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=O_(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);C_=r,n.target.dispatchEvent(r),C_=null}else return t=Kc(n),t!==null&&OS(t),e.blockedOn=n,!1;t.shift()}return!0}function yE(e,t,n){Ih(e)&&n.delete(t)}function u5(){A_=!1,Ks!==null&&Ih(Ks)&&(Ks=null),Qs!==null&&Ih(Qs)&&(Qs=null),Js!==null&&Ih(Js)&&(Js=null),Ec.forEach(yE),kc.forEach(yE)}function Ol(e,t){e.blockedOn===t&&(e.blockedOn=null,A_||(A_=!0,Tr.unstable_scheduleCallback(Tr.unstable_NormalPriority,u5)))}function Ic(e){function t(i){return Ol(i,e)}if(0<Ad.length){Ol(Ad[0],e);for(var n=1;n<Ad.length;n++){var r=Ad[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Ks!==null&&Ol(Ks,e),Qs!==null&&Ol(Qs,e),Js!==null&&Ol(Js,e),Ec.forEach(t),kc.forEach(t),n=0;n<Ws.length;n++)r=Ws[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ws.length&&(n=Ws[0],n.blockedOn===null);)K$(n),n.blockedOn===null&&Ws.shift()}var du=ys.ReactCurrentBatchConfig,Zh=!0;function l5(e,t,n,r){var i=mt,s=du.transition;du.transition=null;try{mt=1,NS(e,t,n,r)}finally{mt=i,du.transition=s}}function c5(e,t,n,r){var i=mt,s=du.transition;du.transition=null;try{mt=4,NS(e,t,n,r)}finally{mt=i,du.transition=s}}function NS(e,t,n,r){if(Zh){var i=O_(e,t,n,r);if(i===null)Dm(e,t,r,ep,n),mE(e,r);else if(o5(i,e,t,n,r))r.stopPropagation();else if(mE(e,r),t&4&&-1<a5.indexOf(e)){for(;i!==null;){var s=Kc(i);if(s!==null&&H$(s),s=O_(e,t,n,r),s===null&&Dm(e,t,r,ep,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Dm(e,t,r,null,n)}}var ep=null;function O_(e,t,n,r){if(ep=null,e=$S(r),e=ja(e),e!==null)if(t=ao(e),t===null)e=null;else if(n=t.tag,n===13){if(e=L$(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ep=e,null}function Q$(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Y6()){case PS:return 1;case U$:return 4;case Yh:case X6:return 16;case B$:return 536870912;default:return 16}default:return 16}}var Hs=null,MS=null,Ch=null;function J$(){if(Ch)return Ch;var e,t=MS,n=t.length,r,i="value"in Hs?Hs.value:Hs.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[s-r];r++);return Ch=i.slice(e,1<r?1-r:void 0)}function Rh(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Od(){return!0}function _E(){return!1}function Cr(e){function t(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Od:_E,this.isPropagationStopped=_E,this}return Wt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Od)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Od)},persist:function(){},isPersistent:Od}),t}var Uu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},LS=Cr(Uu),Gc=Wt({},Uu,{view:0,detail:0}),f5=Cr(Gc),Rm,xm,Nl,Fp=Wt({},Gc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:DS,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Nl&&(Nl&&e.type==="mousemove"?(Rm=e.screenX-Nl.screenX,xm=e.screenY-Nl.screenY):xm=Rm=0,Nl=e),Rm)},movementY:function(e){return"movementY"in e?e.movementY:xm}}),wE=Cr(Fp),d5=Wt({},Fp,{dataTransfer:0}),h5=Cr(d5),p5=Wt({},Gc,{relatedTarget:0}),$m=Cr(p5),v5=Wt({},Uu,{animationName:0,elapsedTime:0,pseudoElement:0}),g5=Cr(v5),m5=Wt({},Uu,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),y5=Cr(m5),_5=Wt({},Uu,{data:0}),SE=Cr(_5),w5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},S5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},b5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function T5(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=b5[e])?!!t[e]:!1}function DS(){return T5}var E5=Wt({},Gc,{key:function(e){if(e.key){var t=w5[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Rh(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?S5[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:DS,charCode:function(e){return e.type==="keypress"?Rh(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Rh(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),k5=Cr(E5),I5=Wt({},Fp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bE=Cr(I5),C5=Wt({},Gc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:DS}),R5=Cr(C5),x5=Wt({},Uu,{propertyName:0,elapsedTime:0,pseudoElement:0}),$5=Cr(x5),P5=Wt({},Fp,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),A5=Cr(P5),O5=[9,13,27,32],FS=cs&&"CompositionEvent"in window,cc=null;cs&&"documentMode"in document&&(cc=document.documentMode);var N5=cs&&"TextEvent"in window&&!cc,Y$=cs&&(!FS||cc&&8<cc&&11>=cc),TE=" ",EE=!1;function X$(e,t){switch(e){case"keyup":return O5.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Z$(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Jo=!1;function M5(e,t){switch(e){case"compositionend":return Z$(t);case"keypress":return t.which!==32?null:(EE=!0,TE);case"textInput":return e=t.data,e===TE&&EE?null:e;default:return null}}function L5(e,t){if(Jo)return e==="compositionend"||!FS&&X$(e,t)?(e=J$(),Ch=MS=Hs=null,Jo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Y$&&t.locale!=="ko"?null:t.data;default:return null}}var D5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!D5[e.type]:t==="textarea"}function eP(e,t,n,r){P$(r),t=tp(t,"onChange"),0<t.length&&(n=new LS("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var fc=null,Cc=null;function F5(e){fP(e,0)}function jp(e){var t=Zo(e);if(E$(t))return e}function j5(e,t){if(e==="change")return t}var tP=!1;if(cs){var Pm;if(cs){var Am="oninput"in document;if(!Am){var IE=document.createElement("div");IE.setAttribute("oninput","return;"),Am=typeof IE.oninput=="function"}Pm=Am}else Pm=!1;tP=Pm&&(!document.documentMode||9<document.documentMode)}function CE(){fc&&(fc.detachEvent("onpropertychange",nP),Cc=fc=null)}function nP(e){if(e.propertyName==="value"&&jp(Cc)){var t=[];eP(t,Cc,e,$S(e)),M$(F5,t)}}function U5(e,t,n){e==="focusin"?(CE(),fc=t,Cc=n,fc.attachEvent("onpropertychange",nP)):e==="focusout"&&CE()}function B5(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return jp(Cc)}function W5(e,t){if(e==="click")return jp(t)}function z5(e,t){if(e==="input"||e==="change")return jp(t)}function H5(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var yi=typeof Object.is=="function"?Object.is:H5;function Rc(e,t){if(yi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!v_.call(t,i)||!yi(e[i],t[i]))return!1}return!0}function RE(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function xE(e,t){var n=RE(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=RE(n)}}function rP(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?rP(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function iP(){for(var e=window,t=Kh();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Kh(e.document)}return t}function jS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function V5(e){var t=iP(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&rP(n.ownerDocument.documentElement,n)){if(r!==null&&jS(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=xE(n,s);var a=xE(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var q5=cs&&"documentMode"in document&&11>=document.documentMode,Yo=null,N_=null,dc=null,M_=!1;function $E(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;M_||Yo==null||Yo!==Kh(r)||(r=Yo,"selectionStart"in r&&jS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),dc&&Rc(dc,r)||(dc=r,r=tp(N_,"onSelect"),0<r.length&&(t=new LS("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Yo)))}function Nd(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Xo={animationend:Nd("Animation","AnimationEnd"),animationiteration:Nd("Animation","AnimationIteration"),animationstart:Nd("Animation","AnimationStart"),transitionend:Nd("Transition","TransitionEnd")},Om={},sP={};cs&&(sP=document.createElement("div").style,"AnimationEvent"in window||(delete Xo.animationend.animation,delete Xo.animationiteration.animation,delete Xo.animationstart.animation),"TransitionEvent"in window||delete Xo.transitionend.transition);function Up(e){if(Om[e])return Om[e];if(!Xo[e])return e;var t=Xo[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in sP)return Om[e]=t[n];return e}var aP=Up("animationend"),oP=Up("animationiteration"),uP=Up("animationstart"),lP=Up("transitionend"),cP=new Map,PE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function la(e,t){cP.set(e,t),so(t,[e])}for(var Nm=0;Nm<PE.length;Nm++){var Mm=PE[Nm],G5=Mm.toLowerCase(),K5=Mm[0].toUpperCase()+Mm.slice(1);la(G5,"on"+K5)}la(aP,"onAnimationEnd");la(oP,"onAnimationIteration");la(uP,"onAnimationStart");la("dblclick","onDoubleClick");la("focusin","onFocus");la("focusout","onBlur");la(lP,"onTransitionEnd");Eu("onMouseEnter",["mouseout","mouseover"]);Eu("onMouseLeave",["mouseout","mouseover"]);Eu("onPointerEnter",["pointerout","pointerover"]);Eu("onPointerLeave",["pointerout","pointerover"]);so("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));so("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));so("onBeforeInput",["compositionend","keypress","textInput","paste"]);so("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));so("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));so("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Q5=new Set("cancel close invalid load scroll toggle".split(" ").concat(rc));function AE(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,G6(r,t,void 0,e),e.currentTarget=null}function fP(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],u=l.instance,f=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;AE(i,l,f),s=u}else for(a=0;a<r.length;a++){if(l=r[a],u=l.instance,f=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;AE(i,l,f),s=u}}}if(Jh)throw e=$_,Jh=!1,$_=null,e}function $t(e,t){var n=t[U_];n===void 0&&(n=t[U_]=new Set);var r=e+"__bubble";n.has(r)||(dP(t,e,2,!1),n.add(r))}function Lm(e,t,n){var r=0;t&&(r|=4),dP(n,e,r,t)}var Md="_reactListening"+Math.random().toString(36).slice(2);function xc(e){if(!e[Md]){e[Md]=!0,_$.forEach(function(n){n!=="selectionchange"&&(Q5.has(n)||Lm(n,!1,e),Lm(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Md]||(t[Md]=!0,Lm("selectionchange",!1,t))}}function dP(e,t,n,r){switch(Q$(t)){case 1:var i=l5;break;case 4:i=c5;break;default:i=NS}n=i.bind(null,t,n,e),i=void 0,!x_||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Dm(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;a=a.return}for(;l!==null;){if(a=ja(l),a===null)return;if(u=a.tag,u===5||u===6){r=s=a;continue e}l=l.parentNode}}r=r.return}M$(function(){var f=s,d=$S(n),p=[];e:{var v=cP.get(e);if(v!==void 0){var m=LS,y=e;switch(e){case"keypress":if(Rh(n)===0)break e;case"keydown":case"keyup":m=k5;break;case"focusin":y="focus",m=$m;break;case"focusout":y="blur",m=$m;break;case"beforeblur":case"afterblur":m=$m;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=wE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=h5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=R5;break;case aP:case oP:case uP:m=g5;break;case lP:m=$5;break;case"scroll":m=f5;break;case"wheel":m=A5;break;case"copy":case"cut":case"paste":m=y5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=bE}var E=(t&4)!==0,T=!E&&e==="scroll",w=E?v!==null?v+"Capture":null:v;E=[];for(var b=f,$;b!==null;){$=b;var N=$.stateNode;if($.tag===5&&N!==null&&($=N,w!==null&&(N=Tc(b,w),N!=null&&E.push($c(b,N,$)))),T)break;b=b.return}0<E.length&&(v=new m(v,y,null,n,d),p.push({event:v,listeners:E}))}}if(!(t&7)){e:{if(v=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",v&&n!==C_&&(y=n.relatedTarget||n.fromElement)&&(ja(y)||y[fs]))break e;if((m||v)&&(v=d.window===d?d:(v=d.ownerDocument)?v.defaultView||v.parentWindow:window,m?(y=n.relatedTarget||n.toElement,m=f,y=y?ja(y):null,y!==null&&(T=ao(y),y!==T||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=f),m!==y)){if(E=wE,N="onMouseLeave",w="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(E=bE,N="onPointerLeave",w="onPointerEnter",b="pointer"),T=m==null?v:Zo(m),$=y==null?v:Zo(y),v=new E(N,b+"leave",m,n,d),v.target=T,v.relatedTarget=$,N=null,ja(d)===f&&(E=new E(w,b+"enter",y,n,d),E.target=$,E.relatedTarget=T,N=E),T=N,m&&y)t:{for(E=m,w=y,b=0,$=E;$;$=Fo($))b++;for($=0,N=w;N;N=Fo(N))$++;for(;0<b-$;)E=Fo(E),b--;for(;0<$-b;)w=Fo(w),$--;for(;b--;){if(E===w||w!==null&&E===w.alternate)break t;E=Fo(E),w=Fo(w)}E=null}else E=null;m!==null&&OE(p,v,m,E,!1),y!==null&&T!==null&&OE(p,T,y,E,!0)}}e:{if(v=f?Zo(f):window,m=v.nodeName&&v.nodeName.toLowerCase(),m==="select"||m==="input"&&v.type==="file")var z=j5;else if(kE(v))if(tP)z=z5;else{z=B5;var H=U5}else(m=v.nodeName)&&m.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(z=W5);if(z&&(z=z(e,f))){eP(p,z,n,d);break e}H&&H(e,v,f),e==="focusout"&&(H=v._wrapperState)&&H.controlled&&v.type==="number"&&b_(v,"number",v.value)}switch(H=f?Zo(f):window,e){case"focusin":(kE(H)||H.contentEditable==="true")&&(Yo=H,N_=f,dc=null);break;case"focusout":dc=N_=Yo=null;break;case"mousedown":M_=!0;break;case"contextmenu":case"mouseup":case"dragend":M_=!1,$E(p,n,d);break;case"selectionchange":if(q5)break;case"keydown":case"keyup":$E(p,n,d)}var K;if(FS)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Jo?X$(e,n)&&(P="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(Y$&&n.locale!=="ko"&&(Jo||P!=="onCompositionStart"?P==="onCompositionEnd"&&Jo&&(K=J$()):(Hs=d,MS="value"in Hs?Hs.value:Hs.textContent,Jo=!0)),H=tp(f,P),0<H.length&&(P=new SE(P,e,null,n,d),p.push({event:P,listeners:H}),K?P.data=K:(K=Z$(n),K!==null&&(P.data=K)))),(K=N5?M5(e,n):L5(e,n))&&(f=tp(f,"onBeforeInput"),0<f.length&&(d=new SE("onBeforeInput","beforeinput",null,n,d),p.push({event:d,listeners:f}),d.data=K))}fP(p,t)})}function $c(e,t,n){return{instance:e,listener:t,currentTarget:n}}function tp(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Tc(e,n),s!=null&&r.unshift($c(e,s,i)),s=Tc(e,t),s!=null&&r.push($c(e,s,i))),e=e.return}return r}function Fo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function OE(e,t,n,r,i){for(var s=t._reactName,a=[];n!==null&&n!==r;){var l=n,u=l.alternate,f=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&f!==null&&(l=f,i?(u=Tc(n,s),u!=null&&a.unshift($c(n,u,l))):i||(u=Tc(n,s),u!=null&&a.push($c(n,u,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var J5=/\r\n?/g,Y5=/\u0000|\uFFFD/g;function NE(e){return(typeof e=="string"?e:""+e).replace(J5,`
`).replace(Y5,"")}function Ld(e,t,n){if(t=NE(t),NE(e)!==t&&n)throw Error(le(425))}function np(){}var L_=null,D_=null;function F_(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var j_=typeof setTimeout=="function"?setTimeout:void 0,X5=typeof clearTimeout=="function"?clearTimeout:void 0,ME=typeof Promise=="function"?Promise:void 0,Z5=typeof queueMicrotask=="function"?queueMicrotask:typeof ME<"u"?function(e){return ME.resolve(null).then(e).catch(e8)}:j_;function e8(e){setTimeout(function(){throw e})}function Fm(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Ic(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ic(t)}function Ys(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function LE(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Bu=Math.random().toString(36).slice(2),Ni="__reactFiber$"+Bu,Pc="__reactProps$"+Bu,fs="__reactContainer$"+Bu,U_="__reactEvents$"+Bu,t8="__reactListeners$"+Bu,n8="__reactHandles$"+Bu;function ja(e){var t=e[Ni];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fs]||n[Ni]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=LE(e);e!==null;){if(n=e[Ni])return n;e=LE(e)}return t}e=n,n=e.parentNode}return null}function Kc(e){return e=e[Ni]||e[fs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(le(33))}function Bp(e){return e[Pc]||null}var B_=[],eu=-1;function ca(e){return{current:e}}function Pt(e){0>eu||(e.current=B_[eu],B_[eu]=null,eu--)}function Ct(e,t){eu++,B_[eu]=e.current,e.current=t}var aa={},On=ca(aa),ir=ca(!1),Ya=aa;function ku(e,t){var n=e.type.contextTypes;if(!n)return aa;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function sr(e){return e=e.childContextTypes,e!=null}function rp(){Pt(ir),Pt(On)}function DE(e,t,n){if(On.current!==aa)throw Error(le(168));Ct(On,t),Ct(ir,n)}function hP(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(le(108,U6(e)||"Unknown",i));return Wt({},n,r)}function ip(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||aa,Ya=On.current,Ct(On,e),Ct(ir,ir.current),!0}function FE(e,t,n){var r=e.stateNode;if(!r)throw Error(le(169));n?(e=hP(e,t,Ya),r.__reactInternalMemoizedMergedChildContext=e,Pt(ir),Pt(On),Ct(On,e)):Pt(ir),Ct(ir,n)}var rs=null,Wp=!1,jm=!1;function pP(e){rs===null?rs=[e]:rs.push(e)}function r8(e){Wp=!0,pP(e)}function fa(){if(!jm&&rs!==null){jm=!0;var e=0,t=mt;try{var n=rs;for(mt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}rs=null,Wp=!1}catch(i){throw rs!==null&&(rs=rs.slice(e+1)),j$(PS,fa),i}finally{mt=t,jm=!1}}return null}var tu=[],nu=0,sp=null,ap=0,Wr=[],zr=0,Xa=null,os=1,us="";function La(e,t){tu[nu++]=ap,tu[nu++]=sp,sp=e,ap=t}function vP(e,t,n){Wr[zr++]=os,Wr[zr++]=us,Wr[zr++]=Xa,Xa=e;var r=os;e=us;var i=32-vi(r)-1;r&=~(1<<i),n+=1;var s=32-vi(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,os=1<<32-vi(t)+i|n<<i|r,us=s+e}else os=1<<s|n<<i|r,us=e}function US(e){e.return!==null&&(La(e,1),vP(e,1,0))}function BS(e){for(;e===sp;)sp=tu[--nu],tu[nu]=null,ap=tu[--nu],tu[nu]=null;for(;e===Xa;)Xa=Wr[--zr],Wr[zr]=null,us=Wr[--zr],Wr[zr]=null,os=Wr[--zr],Wr[zr]=null}var br=null,wr=null,Lt=!1,ci=null;function gP(e,t){var n=Vr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function jE(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,br=e,wr=Ys(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,br=e,wr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Xa!==null?{id:os,overflow:us}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Vr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,br=e,wr=null,!0):!1;default:return!1}}function W_(e){return(e.mode&1)!==0&&(e.flags&128)===0}function z_(e){if(Lt){var t=wr;if(t){var n=t;if(!jE(e,t)){if(W_(e))throw Error(le(418));t=Ys(n.nextSibling);var r=br;t&&jE(e,t)?gP(r,n):(e.flags=e.flags&-4097|2,Lt=!1,br=e)}}else{if(W_(e))throw Error(le(418));e.flags=e.flags&-4097|2,Lt=!1,br=e}}}function UE(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;br=e}function Dd(e){if(e!==br)return!1;if(!Lt)return UE(e),Lt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!F_(e.type,e.memoizedProps)),t&&(t=wr)){if(W_(e))throw mP(),Error(le(418));for(;t;)gP(e,t),t=Ys(t.nextSibling)}if(UE(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(le(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){wr=Ys(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}wr=null}}else wr=br?Ys(e.stateNode.nextSibling):null;return!0}function mP(){for(var e=wr;e;)e=Ys(e.nextSibling)}function Iu(){wr=br=null,Lt=!1}function WS(e){ci===null?ci=[e]:ci.push(e)}var i8=ys.ReactCurrentBatchConfig;function Ml(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(le(309));var r=n.stateNode}if(!r)throw Error(le(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var l=i.refs;a===null?delete l[s]:l[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(le(284));if(!n._owner)throw Error(le(290,e))}return e}function Fd(e,t){throw e=Object.prototype.toString.call(t),Error(le(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function BE(e){var t=e._init;return t(e._payload)}function yP(e){function t(w,b){if(e){var $=w.deletions;$===null?(w.deletions=[b],w.flags|=16):$.push(b)}}function n(w,b){if(!e)return null;for(;b!==null;)t(w,b),b=b.sibling;return null}function r(w,b){for(w=new Map;b!==null;)b.key!==null?w.set(b.key,b):w.set(b.index,b),b=b.sibling;return w}function i(w,b){return w=ta(w,b),w.index=0,w.sibling=null,w}function s(w,b,$){return w.index=$,e?($=w.alternate,$!==null?($=$.index,$<b?(w.flags|=2,b):$):(w.flags|=2,b)):(w.flags|=1048576,b)}function a(w){return e&&w.alternate===null&&(w.flags|=2),w}function l(w,b,$,N){return b===null||b.tag!==6?(b=qm($,w.mode,N),b.return=w,b):(b=i(b,$),b.return=w,b)}function u(w,b,$,N){var z=$.type;return z===Qo?d(w,b,$.props.children,N,$.key):b!==null&&(b.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Us&&BE(z)===b.type)?(N=i(b,$.props),N.ref=Ml(w,b,$),N.return=w,N):(N=Mh($.type,$.key,$.props,null,w.mode,N),N.ref=Ml(w,b,$),N.return=w,N)}function f(w,b,$,N){return b===null||b.tag!==4||b.stateNode.containerInfo!==$.containerInfo||b.stateNode.implementation!==$.implementation?(b=Gm($,w.mode,N),b.return=w,b):(b=i(b,$.children||[]),b.return=w,b)}function d(w,b,$,N,z){return b===null||b.tag!==7?(b=qa($,w.mode,N,z),b.return=w,b):(b=i(b,$),b.return=w,b)}function p(w,b,$){if(typeof b=="string"&&b!==""||typeof b=="number")return b=qm(""+b,w.mode,$),b.return=w,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Cd:return $=Mh(b.type,b.key,b.props,null,w.mode,$),$.ref=Ml(w,null,b),$.return=w,$;case Ko:return b=Gm(b,w.mode,$),b.return=w,b;case Us:var N=b._init;return p(w,N(b._payload),$)}if(tc(b)||$l(b))return b=qa(b,w.mode,$,null),b.return=w,b;Fd(w,b)}return null}function v(w,b,$,N){var z=b!==null?b.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return z!==null?null:l(w,b,""+$,N);if(typeof $=="object"&&$!==null){switch($.$$typeof){case Cd:return $.key===z?u(w,b,$,N):null;case Ko:return $.key===z?f(w,b,$,N):null;case Us:return z=$._init,v(w,b,z($._payload),N)}if(tc($)||$l($))return z!==null?null:d(w,b,$,N,null);Fd(w,$)}return null}function m(w,b,$,N,z){if(typeof N=="string"&&N!==""||typeof N=="number")return w=w.get($)||null,l(b,w,""+N,z);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Cd:return w=w.get(N.key===null?$:N.key)||null,u(b,w,N,z);case Ko:return w=w.get(N.key===null?$:N.key)||null,f(b,w,N,z);case Us:var H=N._init;return m(w,b,$,H(N._payload),z)}if(tc(N)||$l(N))return w=w.get($)||null,d(b,w,N,z,null);Fd(b,N)}return null}function y(w,b,$,N){for(var z=null,H=null,K=b,P=b=0,ee=null;K!==null&&P<$.length;P++){K.index>P?(ee=K,K=null):ee=K.sibling;var Y=v(w,K,$[P],N);if(Y===null){K===null&&(K=ee);break}e&&K&&Y.alternate===null&&t(w,K),b=s(Y,b,P),H===null?z=Y:H.sibling=Y,H=Y,K=ee}if(P===$.length)return n(w,K),Lt&&La(w,P),z;if(K===null){for(;P<$.length;P++)K=p(w,$[P],N),K!==null&&(b=s(K,b,P),H===null?z=K:H.sibling=K,H=K);return Lt&&La(w,P),z}for(K=r(w,K);P<$.length;P++)ee=m(K,w,P,$[P],N),ee!==null&&(e&&ee.alternate!==null&&K.delete(ee.key===null?P:ee.key),b=s(ee,b,P),H===null?z=ee:H.sibling=ee,H=ee);return e&&K.forEach(function(oe){return t(w,oe)}),Lt&&La(w,P),z}function E(w,b,$,N){var z=$l($);if(typeof z!="function")throw Error(le(150));if($=z.call($),$==null)throw Error(le(151));for(var H=z=null,K=b,P=b=0,ee=null,Y=$.next();K!==null&&!Y.done;P++,Y=$.next()){K.index>P?(ee=K,K=null):ee=K.sibling;var oe=v(w,K,Y.value,N);if(oe===null){K===null&&(K=ee);break}e&&K&&oe.alternate===null&&t(w,K),b=s(oe,b,P),H===null?z=oe:H.sibling=oe,H=oe,K=ee}if(Y.done)return n(w,K),Lt&&La(w,P),z;if(K===null){for(;!Y.done;P++,Y=$.next())Y=p(w,Y.value,N),Y!==null&&(b=s(Y,b,P),H===null?z=Y:H.sibling=Y,H=Y);return Lt&&La(w,P),z}for(K=r(w,K);!Y.done;P++,Y=$.next())Y=m(K,w,P,Y.value,N),Y!==null&&(e&&Y.alternate!==null&&K.delete(Y.key===null?P:Y.key),b=s(Y,b,P),H===null?z=Y:H.sibling=Y,H=Y);return e&&K.forEach(function(de){return t(w,de)}),Lt&&La(w,P),z}function T(w,b,$,N){if(typeof $=="object"&&$!==null&&$.type===Qo&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case Cd:e:{for(var z=$.key,H=b;H!==null;){if(H.key===z){if(z=$.type,z===Qo){if(H.tag===7){n(w,H.sibling),b=i(H,$.props.children),b.return=w,w=b;break e}}else if(H.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Us&&BE(z)===H.type){n(w,H.sibling),b=i(H,$.props),b.ref=Ml(w,H,$),b.return=w,w=b;break e}n(w,H);break}else t(w,H);H=H.sibling}$.type===Qo?(b=qa($.props.children,w.mode,N,$.key),b.return=w,w=b):(N=Mh($.type,$.key,$.props,null,w.mode,N),N.ref=Ml(w,b,$),N.return=w,w=N)}return a(w);case Ko:e:{for(H=$.key;b!==null;){if(b.key===H)if(b.tag===4&&b.stateNode.containerInfo===$.containerInfo&&b.stateNode.implementation===$.implementation){n(w,b.sibling),b=i(b,$.children||[]),b.return=w,w=b;break e}else{n(w,b);break}else t(w,b);b=b.sibling}b=Gm($,w.mode,N),b.return=w,w=b}return a(w);case Us:return H=$._init,T(w,b,H($._payload),N)}if(tc($))return y(w,b,$,N);if($l($))return E(w,b,$,N);Fd(w,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,b!==null&&b.tag===6?(n(w,b.sibling),b=i(b,$),b.return=w,w=b):(n(w,b),b=qm($,w.mode,N),b.return=w,w=b),a(w)):n(w,b)}return T}var Cu=yP(!0),_P=yP(!1),op=ca(null),up=null,ru=null,zS=null;function HS(){zS=ru=up=null}function VS(e){var t=op.current;Pt(op),e._currentValue=t}function H_(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function hu(e,t){up=e,zS=ru=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(nr=!0),e.firstContext=null)}function Qr(e){var t=e._currentValue;if(zS!==e)if(e={context:e,memoizedValue:t,next:null},ru===null){if(up===null)throw Error(le(308));ru=e,up.dependencies={lanes:0,firstContext:e}}else ru=ru.next=e;return t}var Ua=null;function qS(e){Ua===null?Ua=[e]:Ua.push(e)}function wP(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,qS(t)):(n.next=i.next,i.next=n),t.interleaved=n,ds(e,r)}function ds(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Bs=!1;function GS(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function SP(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ls(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Xs(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ot&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,ds(e,n)}return i=r.interleaved,i===null?(t.next=t,qS(r)):(t.next=i.next,i.next=t),r.interleaved=t,ds(e,n)}function xh(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,AS(e,n)}}function WE(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function lp(e,t,n,r){var i=e.updateQueue;Bs=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,f=u.next;u.next=null,a===null?s=f:a.next=f,a=u;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=f:l.next=f,d.lastBaseUpdate=u))}if(s!==null){var p=i.baseState;a=0,d=f=u=null,l=s;do{var v=l.lane,m=l.eventTime;if((r&v)===v){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=e,E=l;switch(v=t,m=n,E.tag){case 1:if(y=E.payload,typeof y=="function"){p=y.call(m,p,v);break e}p=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=E.payload,v=typeof y=="function"?y.call(m,p,v):y,v==null)break e;p=Wt({},p,v);break e;case 2:Bs=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,v=i.effects,v===null?i.effects=[l]:v.push(l))}else m={eventTime:m,lane:v,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(f=d=m,u=p):d=d.next=m,a|=v;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;v=l,l=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(!0);if(d===null&&(u=p),i.baseState=u,i.firstBaseUpdate=f,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);eo|=a,e.lanes=a,e.memoizedState=p}}function zE(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(le(191,i));i.call(r)}}}var Qc={},Di=ca(Qc),Ac=ca(Qc),Oc=ca(Qc);function Ba(e){if(e===Qc)throw Error(le(174));return e}function KS(e,t){switch(Ct(Oc,t),Ct(Ac,e),Ct(Di,Qc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:E_(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=E_(t,e)}Pt(Di),Ct(Di,t)}function Ru(){Pt(Di),Pt(Ac),Pt(Oc)}function bP(e){Ba(Oc.current);var t=Ba(Di.current),n=E_(t,e.type);t!==n&&(Ct(Ac,e),Ct(Di,n))}function QS(e){Ac.current===e&&(Pt(Di),Pt(Ac))}var Ut=ca(0);function cp(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Um=[];function JS(){for(var e=0;e<Um.length;e++)Um[e]._workInProgressVersionPrimary=null;Um.length=0}var $h=ys.ReactCurrentDispatcher,Bm=ys.ReactCurrentBatchConfig,Za=0,Bt=null,an=null,hn=null,fp=!1,hc=!1,Nc=0,s8=0;function Cn(){throw Error(le(321))}function YS(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!yi(e[n],t[n]))return!1;return!0}function XS(e,t,n,r,i,s){if(Za=s,Bt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$h.current=e===null||e.memoizedState===null?l8:c8,e=n(r,i),hc){s=0;do{if(hc=!1,Nc=0,25<=s)throw Error(le(301));s+=1,hn=an=null,t.updateQueue=null,$h.current=f8,e=n(r,i)}while(hc)}if($h.current=dp,t=an!==null&&an.next!==null,Za=0,hn=an=Bt=null,fp=!1,t)throw Error(le(300));return e}function ZS(){var e=Nc!==0;return Nc=0,e}function Ai(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hn===null?Bt.memoizedState=hn=e:hn=hn.next=e,hn}function Jr(){if(an===null){var e=Bt.alternate;e=e!==null?e.memoizedState:null}else e=an.next;var t=hn===null?Bt.memoizedState:hn.next;if(t!==null)hn=t,an=e;else{if(e===null)throw Error(le(310));an=e,e={memoizedState:an.memoizedState,baseState:an.baseState,baseQueue:an.baseQueue,queue:an.queue,next:null},hn===null?Bt.memoizedState=hn=e:hn=hn.next=e}return hn}function Mc(e,t){return typeof t=="function"?t(e):t}function Wm(e){var t=Jr(),n=t.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=e;var r=an,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=a=null,u=null,f=s;do{var d=f.lane;if((Za&d)===d)u!==null&&(u=u.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:e(r,f.action);else{var p={lane:d,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};u===null?(l=u=p,a=r):u=u.next=p,Bt.lanes|=d,eo|=d}f=f.next}while(f!==null&&f!==s);u===null?a=r:u.next=l,yi(r,t.memoizedState)||(nr=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Bt.lanes|=s,eo|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function zm(e){var t=Jr(),n=t.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=e(s,a.action),a=a.next;while(a!==i);yi(s,t.memoizedState)||(nr=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function TP(){}function EP(e,t){var n=Bt,r=Jr(),i=t(),s=!yi(r.memoizedState,i);if(s&&(r.memoizedState=i,nr=!0),r=r.queue,e0(CP.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||hn!==null&&hn.memoizedState.tag&1){if(n.flags|=2048,Lc(9,IP.bind(null,n,r,i,t),void 0,null),vn===null)throw Error(le(349));Za&30||kP(n,t,i)}return i}function kP(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Bt.updateQueue,t===null?(t={lastEffect:null,stores:null},Bt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function IP(e,t,n,r){t.value=n,t.getSnapshot=r,RP(t)&&xP(e)}function CP(e,t,n){return n(function(){RP(t)&&xP(e)})}function RP(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!yi(e,n)}catch{return!0}}function xP(e){var t=ds(e,1);t!==null&&gi(t,e,1,-1)}function HE(e){var t=Ai();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mc,lastRenderedState:e},t.queue=e,e=e.dispatch=u8.bind(null,Bt,e),[t.memoizedState,e]}function Lc(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Bt.updateQueue,t===null?(t={lastEffect:null,stores:null},Bt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function $P(){return Jr().memoizedState}function Ph(e,t,n,r){var i=Ai();Bt.flags|=e,i.memoizedState=Lc(1|t,n,void 0,r===void 0?null:r)}function zp(e,t,n,r){var i=Jr();r=r===void 0?null:r;var s=void 0;if(an!==null){var a=an.memoizedState;if(s=a.destroy,r!==null&&YS(r,a.deps)){i.memoizedState=Lc(t,n,s,r);return}}Bt.flags|=e,i.memoizedState=Lc(1|t,n,s,r)}function VE(e,t){return Ph(8390656,8,e,t)}function e0(e,t){return zp(2048,8,e,t)}function PP(e,t){return zp(4,2,e,t)}function AP(e,t){return zp(4,4,e,t)}function OP(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function NP(e,t,n){return n=n!=null?n.concat([e]):null,zp(4,4,OP.bind(null,t,e),n)}function t0(){}function MP(e,t){var n=Jr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&YS(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function LP(e,t){var n=Jr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&YS(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function DP(e,t,n){return Za&21?(yi(n,t)||(n=W$(),Bt.lanes|=n,eo|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,nr=!0),e.memoizedState=n)}function a8(e,t){var n=mt;mt=n!==0&&4>n?n:4,e(!0);var r=Bm.transition;Bm.transition={};try{e(!1),t()}finally{mt=n,Bm.transition=r}}function FP(){return Jr().memoizedState}function o8(e,t,n){var r=ea(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},jP(e))UP(t,n);else if(n=wP(e,t,n,r),n!==null){var i=Wn();gi(n,e,r,i),BP(n,t,r)}}function u8(e,t,n){var r=ea(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(jP(e))UP(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,l=s(a,n);if(i.hasEagerState=!0,i.eagerState=l,yi(l,a)){var u=t.interleaved;u===null?(i.next=i,qS(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=wP(e,t,i,r),n!==null&&(i=Wn(),gi(n,e,r,i),BP(n,t,r))}}function jP(e){var t=e.alternate;return e===Bt||t!==null&&t===Bt}function UP(e,t){hc=fp=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function BP(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,AS(e,n)}}var dp={readContext:Qr,useCallback:Cn,useContext:Cn,useEffect:Cn,useImperativeHandle:Cn,useInsertionEffect:Cn,useLayoutEffect:Cn,useMemo:Cn,useReducer:Cn,useRef:Cn,useState:Cn,useDebugValue:Cn,useDeferredValue:Cn,useTransition:Cn,useMutableSource:Cn,useSyncExternalStore:Cn,useId:Cn,unstable_isNewReconciler:!1},l8={readContext:Qr,useCallback:function(e,t){return Ai().memoizedState=[e,t===void 0?null:t],e},useContext:Qr,useEffect:VE,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ph(4194308,4,OP.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ph(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ph(4,2,e,t)},useMemo:function(e,t){var n=Ai();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ai();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=o8.bind(null,Bt,e),[r.memoizedState,e]},useRef:function(e){var t=Ai();return e={current:e},t.memoizedState=e},useState:HE,useDebugValue:t0,useDeferredValue:function(e){return Ai().memoizedState=e},useTransition:function(){var e=HE(!1),t=e[0];return e=a8.bind(null,e[1]),Ai().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Bt,i=Ai();if(Lt){if(n===void 0)throw Error(le(407));n=n()}else{if(n=t(),vn===null)throw Error(le(349));Za&30||kP(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,VE(CP.bind(null,r,s,e),[e]),r.flags|=2048,Lc(9,IP.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Ai(),t=vn.identifierPrefix;if(Lt){var n=us,r=os;n=(r&~(1<<32-vi(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Nc++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=s8++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},c8={readContext:Qr,useCallback:MP,useContext:Qr,useEffect:e0,useImperativeHandle:NP,useInsertionEffect:PP,useLayoutEffect:AP,useMemo:LP,useReducer:Wm,useRef:$P,useState:function(){return Wm(Mc)},useDebugValue:t0,useDeferredValue:function(e){var t=Jr();return DP(t,an.memoizedState,e)},useTransition:function(){var e=Wm(Mc)[0],t=Jr().memoizedState;return[e,t]},useMutableSource:TP,useSyncExternalStore:EP,useId:FP,unstable_isNewReconciler:!1},f8={readContext:Qr,useCallback:MP,useContext:Qr,useEffect:e0,useImperativeHandle:NP,useInsertionEffect:PP,useLayoutEffect:AP,useMemo:LP,useReducer:zm,useRef:$P,useState:function(){return zm(Mc)},useDebugValue:t0,useDeferredValue:function(e){var t=Jr();return an===null?t.memoizedState=e:DP(t,an.memoizedState,e)},useTransition:function(){var e=zm(Mc)[0],t=Jr().memoizedState;return[e,t]},useMutableSource:TP,useSyncExternalStore:EP,useId:FP,unstable_isNewReconciler:!1};function oi(e,t){if(e&&e.defaultProps){t=Wt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function V_(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Wt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Hp={isMounted:function(e){return(e=e._reactInternals)?ao(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Wn(),i=ea(e),s=ls(r,i);s.payload=t,n!=null&&(s.callback=n),t=Xs(e,s,i),t!==null&&(gi(t,e,i,r),xh(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Wn(),i=ea(e),s=ls(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Xs(e,s,i),t!==null&&(gi(t,e,i,r),xh(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Wn(),r=ea(e),i=ls(n,r);i.tag=2,t!=null&&(i.callback=t),t=Xs(e,i,r),t!==null&&(gi(t,e,r,n),xh(t,e,r))}};function qE(e,t,n,r,i,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,a):t.prototype&&t.prototype.isPureReactComponent?!Rc(n,r)||!Rc(i,s):!0}function WP(e,t,n){var r=!1,i=aa,s=t.contextType;return typeof s=="object"&&s!==null?s=Qr(s):(i=sr(t)?Ya:On.current,r=t.contextTypes,s=(r=r!=null)?ku(e,i):aa),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Hp,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function GE(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Hp.enqueueReplaceState(t,t.state,null)}function q_(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},GS(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Qr(s):(s=sr(t)?Ya:On.current,i.context=ku(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(V_(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Hp.enqueueReplaceState(i,i.state,null),lp(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function xu(e,t){try{var n="",r=t;do n+=j6(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Hm(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function G_(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var d8=typeof WeakMap=="function"?WeakMap:Map;function zP(e,t,n){n=ls(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){pp||(pp=!0,rw=r),G_(e,t)},n}function HP(e,t,n){n=ls(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){G_(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){G_(e,t),typeof r!="function"&&(Zs===null?Zs=new Set([this]):Zs.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function KE(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new d8;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=I8.bind(null,e,t,n),t.then(e,e))}function QE(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function JE(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ls(-1,1),t.tag=2,Xs(n,t,1))),n.lanes|=1),e)}var h8=ys.ReactCurrentOwner,nr=!1;function Un(e,t,n,r){t.child=e===null?_P(t,null,n,r):Cu(t,e.child,n,r)}function YE(e,t,n,r,i){n=n.render;var s=t.ref;return hu(t,i),r=XS(e,t,n,r,s,i),n=ZS(),e!==null&&!nr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,hs(e,t,i)):(Lt&&n&&US(t),t.flags|=1,Un(e,t,r,i),t.child)}function XE(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!l0(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,VP(e,t,s,r,i)):(e=Mh(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Rc,n(a,r)&&e.ref===t.ref)return hs(e,t,i)}return t.flags|=1,e=ta(s,r),e.ref=t.ref,e.return=t,t.child=e}function VP(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(Rc(s,r)&&e.ref===t.ref)if(nr=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(nr=!0);else return t.lanes=e.lanes,hs(e,t,i)}return K_(e,t,n,r,i)}function qP(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ct(su,_r),_r|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ct(su,_r),_r|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ct(su,_r),_r|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ct(su,_r),_r|=r;return Un(e,t,i,n),t.child}function GP(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function K_(e,t,n,r,i){var s=sr(n)?Ya:On.current;return s=ku(t,s),hu(t,i),n=XS(e,t,n,r,s,i),r=ZS(),e!==null&&!nr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,hs(e,t,i)):(Lt&&r&&US(t),t.flags|=1,Un(e,t,n,i),t.child)}function ZE(e,t,n,r,i){if(sr(n)){var s=!0;ip(t)}else s=!1;if(hu(t,i),t.stateNode===null)Ah(e,t),WP(t,n,r),q_(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var u=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=Qr(f):(f=sr(n)?Ya:On.current,f=ku(t,f));var d=n.getDerivedStateFromProps,p=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||u!==f)&&GE(t,a,r,f),Bs=!1;var v=t.memoizedState;a.state=v,lp(t,r,a,i),u=t.memoizedState,l!==r||v!==u||ir.current||Bs?(typeof d=="function"&&(V_(t,n,d,r),u=t.memoizedState),(l=Bs||qE(t,n,l,r,v,u,f))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=f,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,SP(e,t),l=t.memoizedProps,f=t.type===t.elementType?l:oi(t.type,l),a.props=f,p=t.pendingProps,v=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Qr(u):(u=sr(n)?Ya:On.current,u=ku(t,u));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==p||v!==u)&&GE(t,a,r,u),Bs=!1,v=t.memoizedState,a.state=v,lp(t,r,a,i);var y=t.memoizedState;l!==p||v!==y||ir.current||Bs?(typeof m=="function"&&(V_(t,n,m,r),y=t.memoizedState),(f=Bs||qE(t,n,f,r,v,y,u)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,y,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,y,u)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=y),a.props=r,a.state=y,a.context=u,r=f):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),r=!1)}return Q_(e,t,n,r,s,i)}function Q_(e,t,n,r,i,s){GP(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&FE(t,n,!1),hs(e,t,s);r=t.stateNode,h8.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Cu(t,e.child,null,s),t.child=Cu(t,null,l,s)):Un(e,t,l,s),t.memoizedState=r.state,i&&FE(t,n,!0),t.child}function KP(e){var t=e.stateNode;t.pendingContext?DE(e,t.pendingContext,t.pendingContext!==t.context):t.context&&DE(e,t.context,!1),KS(e,t.containerInfo)}function ek(e,t,n,r,i){return Iu(),WS(i),t.flags|=256,Un(e,t,n,r),t.child}var J_={dehydrated:null,treeContext:null,retryLane:0};function Y_(e){return{baseLanes:e,cachePool:null,transitions:null}}function QP(e,t,n){var r=t.pendingProps,i=Ut.current,s=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Ct(Ut,i&1),e===null)return z_(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,s?(r=t.mode,s=t.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Gp(a,r,0,null),e=qa(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Y_(n),t.memoizedState=J_,e):n0(t,a));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return p8(e,t,a,r,l,i,n);if(s){s=r.fallback,a=t.mode,i=e.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=ta(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=ta(l,s):(s=qa(s,a,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,a=e.child.memoizedState,a=a===null?Y_(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~n,t.memoizedState=J_,r}return s=e.child,e=s.sibling,r=ta(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function n0(e,t){return t=Gp({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function jd(e,t,n,r){return r!==null&&WS(r),Cu(t,e.child,null,n),e=n0(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function p8(e,t,n,r,i,s,a){if(n)return t.flags&256?(t.flags&=-257,r=Hm(Error(le(422))),jd(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Gp({mode:"visible",children:r.children},i,0,null),s=qa(s,i,a,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Cu(t,e.child,null,a),t.child.memoizedState=Y_(a),t.memoizedState=J_,s);if(!(t.mode&1))return jd(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(le(419)),r=Hm(s,r,void 0),jd(e,t,a,r)}if(l=(a&e.childLanes)!==0,nr||l){if(r=vn,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ds(e,i),gi(r,e,i,-1))}return u0(),r=Hm(Error(le(421))),jd(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=C8.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,wr=Ys(i.nextSibling),br=t,Lt=!0,ci=null,e!==null&&(Wr[zr++]=os,Wr[zr++]=us,Wr[zr++]=Xa,os=e.id,us=e.overflow,Xa=t),t=n0(t,r.children),t.flags|=4096,t)}function tk(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),H_(e.return,t,n)}function Vm(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function JP(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Un(e,t,r.children,n),r=Ut.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&tk(e,n,t);else if(e.tag===19)tk(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ct(Ut,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&cp(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Vm(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&cp(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Vm(t,!0,n,null,s);break;case"together":Vm(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ah(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function hs(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),eo|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(le(153));if(t.child!==null){for(e=t.child,n=ta(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ta(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function v8(e,t,n){switch(t.tag){case 3:KP(t),Iu();break;case 5:bP(t);break;case 1:sr(t.type)&&ip(t);break;case 4:KS(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ct(op,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ct(Ut,Ut.current&1),t.flags|=128,null):n&t.child.childLanes?QP(e,t,n):(Ct(Ut,Ut.current&1),e=hs(e,t,n),e!==null?e.sibling:null);Ct(Ut,Ut.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return JP(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ct(Ut,Ut.current),r)break;return null;case 22:case 23:return t.lanes=0,qP(e,t,n)}return hs(e,t,n)}var YP,X_,XP,ZP;YP=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};X_=function(){};XP=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ba(Di.current);var s=null;switch(n){case"input":i=w_(e,i),r=w_(e,r),s=[];break;case"select":i=Wt({},i,{value:void 0}),r=Wt({},r,{value:void 0}),s=[];break;case"textarea":i=T_(e,i),r=T_(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=np)}k_(n,r);var a;n=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var l=i[f];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Sc.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var u=r[f];if(l=i!=null?i[f]:void 0,r.hasOwnProperty(f)&&u!==l&&(u!=null||l!=null))if(f==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(s||(s=[]),s.push(f,n)),n=u;else f==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(f,u)):f==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(f,""+u):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Sc.hasOwnProperty(f)?(u!=null&&f==="onScroll"&&$t("scroll",e),s||l===u||(s=[])):(s=s||[]).push(f,u))}n&&(s=s||[]).push("style",n);var f=s;(t.updateQueue=f)&&(t.flags|=4)}};ZP=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ll(e,t){if(!Lt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Rn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function g8(e,t,n){var r=t.pendingProps;switch(BS(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rn(t),null;case 1:return sr(t.type)&&rp(),Rn(t),null;case 3:return r=t.stateNode,Ru(),Pt(ir),Pt(On),JS(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Dd(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ci!==null&&(aw(ci),ci=null))),X_(e,t),Rn(t),null;case 5:QS(t);var i=Ba(Oc.current);if(n=t.type,e!==null&&t.stateNode!=null)XP(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(le(166));return Rn(t),null}if(e=Ba(Di.current),Dd(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Ni]=t,r[Pc]=s,e=(t.mode&1)!==0,n){case"dialog":$t("cancel",r),$t("close",r);break;case"iframe":case"object":case"embed":$t("load",r);break;case"video":case"audio":for(i=0;i<rc.length;i++)$t(rc[i],r);break;case"source":$t("error",r);break;case"img":case"image":case"link":$t("error",r),$t("load",r);break;case"details":$t("toggle",r);break;case"input":cE(r,s),$t("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},$t("invalid",r);break;case"textarea":dE(r,s),$t("invalid",r)}k_(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Ld(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Ld(r.textContent,l,e),i=["children",""+l]):Sc.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&$t("scroll",r)}switch(n){case"input":Rd(r),fE(r,s,!0);break;case"textarea":Rd(r),hE(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=np)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=C$(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Ni]=t,e[Pc]=r,YP(e,t,!1,!1),t.stateNode=e;e:{switch(a=I_(n,r),n){case"dialog":$t("cancel",e),$t("close",e),i=r;break;case"iframe":case"object":case"embed":$t("load",e),i=r;break;case"video":case"audio":for(i=0;i<rc.length;i++)$t(rc[i],e);i=r;break;case"source":$t("error",e),i=r;break;case"img":case"image":case"link":$t("error",e),$t("load",e),i=r;break;case"details":$t("toggle",e),i=r;break;case"input":cE(e,r),i=w_(e,r),$t("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Wt({},r,{value:void 0}),$t("invalid",e);break;case"textarea":dE(e,r),i=T_(e,r),$t("invalid",e);break;default:i=r}k_(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?$$(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&R$(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&bc(e,u):typeof u=="number"&&bc(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Sc.hasOwnProperty(s)?u!=null&&s==="onScroll"&&$t("scroll",e):u!=null&&IS(e,s,u,a))}switch(n){case"input":Rd(e),fE(e,r,!1);break;case"textarea":Rd(e),hE(e);break;case"option":r.value!=null&&e.setAttribute("value",""+sa(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?lu(e,!!r.multiple,s,!1):r.defaultValue!=null&&lu(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=np)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Rn(t),null;case 6:if(e&&t.stateNode!=null)ZP(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(le(166));if(n=Ba(Oc.current),Ba(Di.current),Dd(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ni]=t,(s=r.nodeValue!==n)&&(e=br,e!==null))switch(e.tag){case 3:Ld(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ld(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ni]=t,t.stateNode=r}return Rn(t),null;case 13:if(Pt(Ut),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Lt&&wr!==null&&t.mode&1&&!(t.flags&128))mP(),Iu(),t.flags|=98560,s=!1;else if(s=Dd(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(le(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(le(317));s[Ni]=t}else Iu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Rn(t),s=!1}else ci!==null&&(aw(ci),ci=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ut.current&1?ln===0&&(ln=3):u0())),t.updateQueue!==null&&(t.flags|=4),Rn(t),null);case 4:return Ru(),X_(e,t),e===null&&xc(t.stateNode.containerInfo),Rn(t),null;case 10:return VS(t.type._context),Rn(t),null;case 17:return sr(t.type)&&rp(),Rn(t),null;case 19:if(Pt(Ut),s=t.memoizedState,s===null)return Rn(t),null;if(r=(t.flags&128)!==0,a=s.rendering,a===null)if(r)Ll(s,!1);else{if(ln!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=cp(e),a!==null){for(t.flags|=128,Ll(s,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ct(Ut,Ut.current&1|2),t.child}e=e.sibling}s.tail!==null&&Jt()>$u&&(t.flags|=128,r=!0,Ll(s,!1),t.lanes=4194304)}else{if(!r)if(e=cp(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ll(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Lt)return Rn(t),null}else 2*Jt()-s.renderingStartTime>$u&&n!==1073741824&&(t.flags|=128,r=!0,Ll(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(n=s.last,n!==null?n.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Jt(),t.sibling=null,n=Ut.current,Ct(Ut,r?n&1|2:n&1),t):(Rn(t),null);case 22:case 23:return o0(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?_r&1073741824&&(Rn(t),t.subtreeFlags&6&&(t.flags|=8192)):Rn(t),null;case 24:return null;case 25:return null}throw Error(le(156,t.tag))}function m8(e,t){switch(BS(t),t.tag){case 1:return sr(t.type)&&rp(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ru(),Pt(ir),Pt(On),JS(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return QS(t),null;case 13:if(Pt(Ut),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(le(340));Iu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Pt(Ut),null;case 4:return Ru(),null;case 10:return VS(t.type._context),null;case 22:case 23:return o0(),null;case 24:return null;default:return null}}var Ud=!1,Pn=!1,y8=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function iu(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Vt(e,t,r)}else n.current=null}function Z_(e,t,n){try{n()}catch(r){Vt(e,t,r)}}var nk=!1;function _8(e,t){if(L_=Zh,e=iP(),jS(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,f=0,d=0,p=e,v=null;t:for(;;){for(var m;p!==n||i!==0&&p.nodeType!==3||(l=a+i),p!==s||r!==0&&p.nodeType!==3||(u=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(m=p.firstChild)!==null;)v=p,p=m;for(;;){if(p===e)break t;if(v===n&&++f===i&&(l=a),v===s&&++d===r&&(u=a),(m=p.nextSibling)!==null)break;p=v,v=p.parentNode}p=m}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(D_={focusedElem:e,selectionRange:n},Zh=!1,Ee=t;Ee!==null;)if(t=Ee,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ee=e;else for(;Ee!==null;){t=Ee;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var E=y.memoizedProps,T=y.memoizedState,w=t.stateNode,b=w.getSnapshotBeforeUpdate(t.elementType===t.type?E:oi(t.type,E),T);w.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var $=t.stateNode.containerInfo;$.nodeType===1?$.textContent="":$.nodeType===9&&$.documentElement&&$.removeChild($.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(le(163))}}catch(N){Vt(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,Ee=e;break}Ee=t.return}return y=nk,nk=!1,y}function pc(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&Z_(t,n,s)}i=i.next}while(i!==r)}}function Vp(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ew(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function eA(e){var t=e.alternate;t!==null&&(e.alternate=null,eA(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ni],delete t[Pc],delete t[U_],delete t[t8],delete t[n8])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function tA(e){return e.tag===5||e.tag===3||e.tag===4}function rk(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||tA(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function tw(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=np));else if(r!==4&&(e=e.child,e!==null))for(tw(e,t,n),e=e.sibling;e!==null;)tw(e,t,n),e=e.sibling}function nw(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(nw(e,t,n),e=e.sibling;e!==null;)nw(e,t,n),e=e.sibling}var _n=null,li=!1;function Ls(e,t,n){for(n=n.child;n!==null;)nA(e,t,n),n=n.sibling}function nA(e,t,n){if(Li&&typeof Li.onCommitFiberUnmount=="function")try{Li.onCommitFiberUnmount(Dp,n)}catch{}switch(n.tag){case 5:Pn||iu(n,t);case 6:var r=_n,i=li;_n=null,Ls(e,t,n),_n=r,li=i,_n!==null&&(li?(e=_n,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):_n.removeChild(n.stateNode));break;case 18:_n!==null&&(li?(e=_n,n=n.stateNode,e.nodeType===8?Fm(e.parentNode,n):e.nodeType===1&&Fm(e,n),Ic(e)):Fm(_n,n.stateNode));break;case 4:r=_n,i=li,_n=n.stateNode.containerInfo,li=!0,Ls(e,t,n),_n=r,li=i;break;case 0:case 11:case 14:case 15:if(!Pn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Z_(n,t,a),i=i.next}while(i!==r)}Ls(e,t,n);break;case 1:if(!Pn&&(iu(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Vt(n,t,l)}Ls(e,t,n);break;case 21:Ls(e,t,n);break;case 22:n.mode&1?(Pn=(r=Pn)||n.memoizedState!==null,Ls(e,t,n),Pn=r):Ls(e,t,n);break;default:Ls(e,t,n)}}function ik(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new y8),t.forEach(function(r){var i=R8.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function si(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:_n=l.stateNode,li=!1;break e;case 3:_n=l.stateNode.containerInfo,li=!0;break e;case 4:_n=l.stateNode.containerInfo,li=!0;break e}l=l.return}if(_n===null)throw Error(le(160));nA(s,a,i),_n=null,li=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(f){Vt(i,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)rA(t,e),t=t.sibling}function rA(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(si(t,e),xi(e),r&4){try{pc(3,e,e.return),Vp(3,e)}catch(E){Vt(e,e.return,E)}try{pc(5,e,e.return)}catch(E){Vt(e,e.return,E)}}break;case 1:si(t,e),xi(e),r&512&&n!==null&&iu(n,n.return);break;case 5:if(si(t,e),xi(e),r&512&&n!==null&&iu(n,n.return),e.flags&32){var i=e.stateNode;try{bc(i,"")}catch(E){Vt(e,e.return,E)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,a=n!==null?n.memoizedProps:s,l=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&k$(i,s),I_(l,a);var f=I_(l,s);for(a=0;a<u.length;a+=2){var d=u[a],p=u[a+1];d==="style"?$$(i,p):d==="dangerouslySetInnerHTML"?R$(i,p):d==="children"?bc(i,p):IS(i,d,p,f)}switch(l){case"input":S_(i,s);break;case"textarea":I$(i,s);break;case"select":var v=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?lu(i,!!s.multiple,m,!1):v!==!!s.multiple&&(s.defaultValue!=null?lu(i,!!s.multiple,s.defaultValue,!0):lu(i,!!s.multiple,s.multiple?[]:"",!1))}i[Pc]=s}catch(E){Vt(e,e.return,E)}}break;case 6:if(si(t,e),xi(e),r&4){if(e.stateNode===null)throw Error(le(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(E){Vt(e,e.return,E)}}break;case 3:if(si(t,e),xi(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ic(t.containerInfo)}catch(E){Vt(e,e.return,E)}break;case 4:si(t,e),xi(e);break;case 13:si(t,e),xi(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(s0=Jt())),r&4&&ik(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Pn=(f=Pn)||d,si(t,e),Pn=f):si(t,e),xi(e),r&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!d&&e.mode&1)for(Ee=e,d=e.child;d!==null;){for(p=Ee=d;Ee!==null;){switch(v=Ee,m=v.child,v.tag){case 0:case 11:case 14:case 15:pc(4,v,v.return);break;case 1:iu(v,v.return);var y=v.stateNode;if(typeof y.componentWillUnmount=="function"){r=v,n=v.return;try{t=r,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(E){Vt(r,n,E)}}break;case 5:iu(v,v.return);break;case 22:if(v.memoizedState!==null){ak(p);continue}}m!==null?(m.return=v,Ee=m):ak(p)}d=d.sibling}e:for(d=null,p=e;;){if(p.tag===5){if(d===null){d=p;try{i=p.stateNode,f?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=p.stateNode,u=p.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=x$("display",a))}catch(E){Vt(e,e.return,E)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=f?"":p.memoizedProps}catch(E){Vt(e,e.return,E)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:si(t,e),xi(e),r&4&&ik(e);break;case 21:break;default:si(t,e),xi(e)}}function xi(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(tA(n)){var r=n;break e}n=n.return}throw Error(le(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(bc(i,""),r.flags&=-33);var s=rk(e);nw(e,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,l=rk(e);tw(e,l,a);break;default:throw Error(le(161))}}catch(u){Vt(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function w8(e,t,n){Ee=e,iA(e)}function iA(e,t,n){for(var r=(e.mode&1)!==0;Ee!==null;){var i=Ee,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Ud;if(!a){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Pn;l=Ud;var f=Pn;if(Ud=a,(Pn=u)&&!f)for(Ee=i;Ee!==null;)a=Ee,u=a.child,a.tag===22&&a.memoizedState!==null?ok(i):u!==null?(u.return=a,Ee=u):ok(i);for(;s!==null;)Ee=s,iA(s),s=s.sibling;Ee=i,Ud=l,Pn=f}sk(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ee=s):sk(e)}}function sk(e){for(;Ee!==null;){var t=Ee;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Pn||Vp(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Pn)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:oi(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&zE(t,s,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}zE(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var d=f.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&Ic(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(le(163))}Pn||t.flags&512&&ew(t)}catch(v){Vt(t,t.return,v)}}if(t===e){Ee=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ee=n;break}Ee=t.return}}function ak(e){for(;Ee!==null;){var t=Ee;if(t===e){Ee=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ee=n;break}Ee=t.return}}function ok(e){for(;Ee!==null;){var t=Ee;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Vp(4,t)}catch(u){Vt(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){Vt(t,i,u)}}var s=t.return;try{ew(t)}catch(u){Vt(t,s,u)}break;case 5:var a=t.return;try{ew(t)}catch(u){Vt(t,a,u)}}}catch(u){Vt(t,t.return,u)}if(t===e){Ee=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Ee=l;break}Ee=t.return}}var S8=Math.ceil,hp=ys.ReactCurrentDispatcher,r0=ys.ReactCurrentOwner,Gr=ys.ReactCurrentBatchConfig,ot=0,vn=null,en=null,Sn=0,_r=0,su=ca(0),ln=0,Dc=null,eo=0,qp=0,i0=0,vc=null,er=null,s0=0,$u=1/0,Xi=null,pp=!1,rw=null,Zs=null,Bd=!1,Vs=null,vp=0,gc=0,iw=null,Oh=-1,Nh=0;function Wn(){return ot&6?Jt():Oh!==-1?Oh:Oh=Jt()}function ea(e){return e.mode&1?ot&2&&Sn!==0?Sn&-Sn:i8.transition!==null?(Nh===0&&(Nh=W$()),Nh):(e=mt,e!==0||(e=window.event,e=e===void 0?16:Q$(e.type)),e):1}function gi(e,t,n,r){if(50<gc)throw gc=0,iw=null,Error(le(185));qc(e,n,r),(!(ot&2)||e!==vn)&&(e===vn&&(!(ot&2)&&(qp|=n),ln===4&&zs(e,Sn)),ar(e,r),n===1&&ot===0&&!(t.mode&1)&&($u=Jt()+500,Wp&&fa()))}function ar(e,t){var n=e.callbackNode;i5(e,t);var r=Xh(e,e===vn?Sn:0);if(r===0)n!==null&&gE(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&gE(n),t===1)e.tag===0?r8(uk.bind(null,e)):pP(uk.bind(null,e)),Z5(function(){!(ot&6)&&fa()}),n=null;else{switch(z$(r)){case 1:n=PS;break;case 4:n=U$;break;case 16:n=Yh;break;case 536870912:n=B$;break;default:n=Yh}n=dA(n,sA.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sA(e,t){if(Oh=-1,Nh=0,ot&6)throw Error(le(327));var n=e.callbackNode;if(pu()&&e.callbackNode!==n)return null;var r=Xh(e,e===vn?Sn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=gp(e,r);else{t=r;var i=ot;ot|=2;var s=oA();(vn!==e||Sn!==t)&&(Xi=null,$u=Jt()+500,Va(e,t));do try{E8();break}catch(l){aA(e,l)}while(!0);HS(),hp.current=s,ot=i,en!==null?t=0:(vn=null,Sn=0,t=ln)}if(t!==0){if(t===2&&(i=P_(e),i!==0&&(r=i,t=sw(e,i))),t===1)throw n=Dc,Va(e,0),zs(e,r),ar(e,Jt()),n;if(t===6)zs(e,r);else{if(i=e.current.alternate,!(r&30)&&!b8(i)&&(t=gp(e,r),t===2&&(s=P_(e),s!==0&&(r=s,t=sw(e,s))),t===1))throw n=Dc,Va(e,0),zs(e,r),ar(e,Jt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(le(345));case 2:Da(e,er,Xi);break;case 3:if(zs(e,r),(r&130023424)===r&&(t=s0+500-Jt(),10<t)){if(Xh(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Wn(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=j_(Da.bind(null,e,er,Xi),t);break}Da(e,er,Xi);break;case 4:if(zs(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-vi(r);s=1<<a,a=t[a],a>i&&(i=a),r&=~s}if(r=i,r=Jt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*S8(r/1960))-r,10<r){e.timeoutHandle=j_(Da.bind(null,e,er,Xi),r);break}Da(e,er,Xi);break;case 5:Da(e,er,Xi);break;default:throw Error(le(329))}}}return ar(e,Jt()),e.callbackNode===n?sA.bind(null,e):null}function sw(e,t){var n=vc;return e.current.memoizedState.isDehydrated&&(Va(e,t).flags|=256),e=gp(e,t),e!==2&&(t=er,er=n,t!==null&&aw(t)),e}function aw(e){er===null?er=e:er.push.apply(er,e)}function b8(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!yi(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zs(e,t){for(t&=~i0,t&=~qp,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-vi(t),r=1<<n;e[n]=-1,t&=~r}}function uk(e){if(ot&6)throw Error(le(327));pu();var t=Xh(e,0);if(!(t&1))return ar(e,Jt()),null;var n=gp(e,t);if(e.tag!==0&&n===2){var r=P_(e);r!==0&&(t=r,n=sw(e,r))}if(n===1)throw n=Dc,Va(e,0),zs(e,t),ar(e,Jt()),n;if(n===6)throw Error(le(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Da(e,er,Xi),ar(e,Jt()),null}function a0(e,t){var n=ot;ot|=1;try{return e(t)}finally{ot=n,ot===0&&($u=Jt()+500,Wp&&fa())}}function to(e){Vs!==null&&Vs.tag===0&&!(ot&6)&&pu();var t=ot;ot|=1;var n=Gr.transition,r=mt;try{if(Gr.transition=null,mt=1,e)return e()}finally{mt=r,Gr.transition=n,ot=t,!(ot&6)&&fa()}}function o0(){_r=su.current,Pt(su)}function Va(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,X5(n)),en!==null)for(n=en.return;n!==null;){var r=n;switch(BS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&rp();break;case 3:Ru(),Pt(ir),Pt(On),JS();break;case 5:QS(r);break;case 4:Ru();break;case 13:Pt(Ut);break;case 19:Pt(Ut);break;case 10:VS(r.type._context);break;case 22:case 23:o0()}n=n.return}if(vn=e,en=e=ta(e.current,null),Sn=_r=t,ln=0,Dc=null,i0=qp=eo=0,er=vc=null,Ua!==null){for(t=0;t<Ua.length;t++)if(n=Ua[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Ua=null}return e}function aA(e,t){do{var n=en;try{if(HS(),$h.current=dp,fp){for(var r=Bt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}fp=!1}if(Za=0,hn=an=Bt=null,hc=!1,Nc=0,r0.current=null,n===null||n.return===null){ln=1,Dc=t,en=null;break}e:{var s=e,a=n.return,l=n,u=t;if(t=Sn,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var f=u,d=l,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var v=d.alternate;v?(d.updateQueue=v.updateQueue,d.memoizedState=v.memoizedState,d.lanes=v.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=QE(a);if(m!==null){m.flags&=-257,JE(m,a,l,s,t),m.mode&1&&KE(s,f,t),t=m,u=f;var y=t.updateQueue;if(y===null){var E=new Set;E.add(u),t.updateQueue=E}else y.add(u);break e}else{if(!(t&1)){KE(s,f,t),u0();break e}u=Error(le(426))}}else if(Lt&&l.mode&1){var T=QE(a);if(T!==null){!(T.flags&65536)&&(T.flags|=256),JE(T,a,l,s,t),WS(xu(u,l));break e}}s=u=xu(u,l),ln!==4&&(ln=2),vc===null?vc=[s]:vc.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var w=zP(s,u,t);WE(s,w);break e;case 1:l=u;var b=s.type,$=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(Zs===null||!Zs.has($)))){s.flags|=65536,t&=-t,s.lanes|=t;var N=HP(s,l,t);WE(s,N);break e}}s=s.return}while(s!==null)}lA(n)}catch(z){t=z,en===n&&n!==null&&(en=n=n.return);continue}break}while(!0)}function oA(){var e=hp.current;return hp.current=dp,e===null?dp:e}function u0(){(ln===0||ln===3||ln===2)&&(ln=4),vn===null||!(eo&268435455)&&!(qp&268435455)||zs(vn,Sn)}function gp(e,t){var n=ot;ot|=2;var r=oA();(vn!==e||Sn!==t)&&(Xi=null,Va(e,t));do try{T8();break}catch(i){aA(e,i)}while(!0);if(HS(),ot=n,hp.current=r,en!==null)throw Error(le(261));return vn=null,Sn=0,ln}function T8(){for(;en!==null;)uA(en)}function E8(){for(;en!==null&&!Q6();)uA(en)}function uA(e){var t=fA(e.alternate,e,_r);e.memoizedProps=e.pendingProps,t===null?lA(e):en=t,r0.current=null}function lA(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=m8(n,t),n!==null){n.flags&=32767,en=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ln=6,en=null;return}}else if(n=g8(n,t,_r),n!==null){en=n;return}if(t=t.sibling,t!==null){en=t;return}en=t=e}while(t!==null);ln===0&&(ln=5)}function Da(e,t,n){var r=mt,i=Gr.transition;try{Gr.transition=null,mt=1,k8(e,t,n,r)}finally{Gr.transition=i,mt=r}return null}function k8(e,t,n,r){do pu();while(Vs!==null);if(ot&6)throw Error(le(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(le(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(s5(e,s),e===vn&&(en=vn=null,Sn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Bd||(Bd=!0,dA(Yh,function(){return pu(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Gr.transition,Gr.transition=null;var a=mt;mt=1;var l=ot;ot|=4,r0.current=null,_8(e,n),rA(n,e),V5(D_),Zh=!!L_,D_=L_=null,e.current=n,w8(n),J6(),ot=l,mt=a,Gr.transition=s}else e.current=n;if(Bd&&(Bd=!1,Vs=e,vp=i),s=e.pendingLanes,s===0&&(Zs=null),Z6(n.stateNode),ar(e,Jt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(pp)throw pp=!1,e=rw,rw=null,e;return vp&1&&e.tag!==0&&pu(),s=e.pendingLanes,s&1?e===iw?gc++:(gc=0,iw=e):gc=0,fa(),null}function pu(){if(Vs!==null){var e=z$(vp),t=Gr.transition,n=mt;try{if(Gr.transition=null,mt=16>e?16:e,Vs===null)var r=!1;else{if(e=Vs,Vs=null,vp=0,ot&6)throw Error(le(331));var i=ot;for(ot|=4,Ee=e.current;Ee!==null;){var s=Ee,a=s.child;if(Ee.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var f=l[u];for(Ee=f;Ee!==null;){var d=Ee;switch(d.tag){case 0:case 11:case 15:pc(8,d,s)}var p=d.child;if(p!==null)p.return=d,Ee=p;else for(;Ee!==null;){d=Ee;var v=d.sibling,m=d.return;if(eA(d),d===f){Ee=null;break}if(v!==null){v.return=m,Ee=v;break}Ee=m}}}var y=s.alternate;if(y!==null){var E=y.child;if(E!==null){y.child=null;do{var T=E.sibling;E.sibling=null,E=T}while(E!==null)}}Ee=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Ee=a;else e:for(;Ee!==null;){if(s=Ee,s.flags&2048)switch(s.tag){case 0:case 11:case 15:pc(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,Ee=w;break e}Ee=s.return}}var b=e.current;for(Ee=b;Ee!==null;){a=Ee;var $=a.child;if(a.subtreeFlags&2064&&$!==null)$.return=a,Ee=$;else e:for(a=b;Ee!==null;){if(l=Ee,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Vp(9,l)}}catch(z){Vt(l,l.return,z)}if(l===a){Ee=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,Ee=N;break e}Ee=l.return}}if(ot=i,fa(),Li&&typeof Li.onPostCommitFiberRoot=="function")try{Li.onPostCommitFiberRoot(Dp,e)}catch{}r=!0}return r}finally{mt=n,Gr.transition=t}}return!1}function lk(e,t,n){t=xu(n,t),t=zP(e,t,1),e=Xs(e,t,1),t=Wn(),e!==null&&(qc(e,1,t),ar(e,t))}function Vt(e,t,n){if(e.tag===3)lk(e,e,n);else for(;t!==null;){if(t.tag===3){lk(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Zs===null||!Zs.has(r))){e=xu(n,e),e=HP(t,e,1),t=Xs(t,e,1),e=Wn(),t!==null&&(qc(t,1,e),ar(t,e));break}}t=t.return}}function I8(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Wn(),e.pingedLanes|=e.suspendedLanes&n,vn===e&&(Sn&n)===n&&(ln===4||ln===3&&(Sn&130023424)===Sn&&500>Jt()-s0?Va(e,0):i0|=n),ar(e,t)}function cA(e,t){t===0&&(e.mode&1?(t=Pd,Pd<<=1,!(Pd&130023424)&&(Pd=4194304)):t=1);var n=Wn();e=ds(e,t),e!==null&&(qc(e,t,n),ar(e,n))}function C8(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),cA(e,n)}function R8(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(le(314))}r!==null&&r.delete(t),cA(e,n)}var fA;fA=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ir.current)nr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return nr=!1,v8(e,t,n);nr=!!(e.flags&131072)}else nr=!1,Lt&&t.flags&1048576&&vP(t,ap,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ah(e,t),e=t.pendingProps;var i=ku(t,On.current);hu(t,n),i=XS(null,t,r,e,i,n);var s=ZS();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,sr(r)?(s=!0,ip(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,GS(t),i.updater=Hp,t.stateNode=i,i._reactInternals=t,q_(t,r,e,n),t=Q_(null,t,r,!0,s,n)):(t.tag=0,Lt&&s&&US(t),Un(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ah(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=$8(r),e=oi(r,e),i){case 0:t=K_(null,t,r,e,n);break e;case 1:t=ZE(null,t,r,e,n);break e;case 11:t=YE(null,t,r,e,n);break e;case 14:t=XE(null,t,r,oi(r.type,e),n);break e}throw Error(le(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:oi(r,i),K_(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:oi(r,i),ZE(e,t,r,i,n);case 3:e:{if(KP(t),e===null)throw Error(le(387));r=t.pendingProps,s=t.memoizedState,i=s.element,SP(e,t),lp(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=xu(Error(le(423)),t),t=ek(e,t,r,n,i);break e}else if(r!==i){i=xu(Error(le(424)),t),t=ek(e,t,r,n,i);break e}else for(wr=Ys(t.stateNode.containerInfo.firstChild),br=t,Lt=!0,ci=null,n=_P(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Iu(),r===i){t=hs(e,t,n);break e}Un(e,t,r,n)}t=t.child}return t;case 5:return bP(t),e===null&&z_(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,a=i.children,F_(r,i)?a=null:s!==null&&F_(r,s)&&(t.flags|=32),GP(e,t),Un(e,t,a,n),t.child;case 6:return e===null&&z_(t),null;case 13:return QP(e,t,n);case 4:return KS(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Cu(t,null,r,n):Un(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:oi(r,i),YE(e,t,r,i,n);case 7:return Un(e,t,t.pendingProps,n),t.child;case 8:return Un(e,t,t.pendingProps.children,n),t.child;case 12:return Un(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Ct(op,r._currentValue),r._currentValue=a,s!==null)if(yi(s.value,a)){if(s.children===i.children&&!ir.current){t=hs(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=ls(-1,n&-n),u.tag=2;var f=s.updateQueue;if(f!==null){f=f.shared;var d=f.pending;d===null?u.next=u:(u.next=d.next,d.next=u),f.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),H_(s.return,n,t),l.lanes|=n;break}u=u.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(le(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),H_(a,n,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Un(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,hu(t,n),i=Qr(i),r=r(i),t.flags|=1,Un(e,t,r,n),t.child;case 14:return r=t.type,i=oi(r,t.pendingProps),i=oi(r.type,i),XE(e,t,r,i,n);case 15:return VP(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:oi(r,i),Ah(e,t),t.tag=1,sr(r)?(e=!0,ip(t)):e=!1,hu(t,n),WP(t,r,i),q_(t,r,i,n),Q_(null,t,r,!0,e,n);case 19:return JP(e,t,n);case 22:return qP(e,t,n)}throw Error(le(156,t.tag))};function dA(e,t){return j$(e,t)}function x8(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vr(e,t,n,r){return new x8(e,t,n,r)}function l0(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $8(e){if(typeof e=="function")return l0(e)?1:0;if(e!=null){if(e=e.$$typeof,e===RS)return 11;if(e===xS)return 14}return 2}function ta(e,t){var n=e.alternate;return n===null?(n=Vr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mh(e,t,n,r,i,s){var a=2;if(r=e,typeof e=="function")l0(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Qo:return qa(n.children,i,s,t);case CS:a=8,i|=8;break;case g_:return e=Vr(12,n,t,i|2),e.elementType=g_,e.lanes=s,e;case m_:return e=Vr(13,n,t,i),e.elementType=m_,e.lanes=s,e;case y_:return e=Vr(19,n,t,i),e.elementType=y_,e.lanes=s,e;case b$:return Gp(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case w$:a=10;break e;case S$:a=9;break e;case RS:a=11;break e;case xS:a=14;break e;case Us:a=16,r=null;break e}throw Error(le(130,e==null?e:typeof e,""))}return t=Vr(a,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function qa(e,t,n,r){return e=Vr(7,e,r,t),e.lanes=n,e}function Gp(e,t,n,r){return e=Vr(22,e,r,t),e.elementType=b$,e.lanes=n,e.stateNode={isHidden:!1},e}function qm(e,t,n){return e=Vr(6,e,null,t),e.lanes=n,e}function Gm(e,t,n){return t=Vr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function P8(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cm(0),this.expirationTimes=Cm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cm(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function c0(e,t,n,r,i,s,a,l,u){return e=new P8(e,t,n,l,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Vr(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},GS(s),e}function A8(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ko,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function hA(e){if(!e)return aa;e=e._reactInternals;e:{if(ao(e)!==e||e.tag!==1)throw Error(le(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(sr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(le(171))}if(e.tag===1){var n=e.type;if(sr(n))return hP(e,n,t)}return t}function pA(e,t,n,r,i,s,a,l,u){return e=c0(n,r,!0,e,i,s,a,l,u),e.context=hA(null),n=e.current,r=Wn(),i=ea(n),s=ls(r,i),s.callback=t??null,Xs(n,s,i),e.current.lanes=i,qc(e,i,r),ar(e,r),e}function Kp(e,t,n,r){var i=t.current,s=Wn(),a=ea(i);return n=hA(n),t.context===null?t.context=n:t.pendingContext=n,t=ls(s,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Xs(i,t,a),e!==null&&(gi(e,i,a,s),xh(e,i,a)),a}function mp(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ck(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function f0(e,t){ck(e,t),(e=e.alternate)&&ck(e,t)}function O8(){return null}var vA=typeof reportError=="function"?reportError:function(e){console.error(e)};function d0(e){this._internalRoot=e}Qp.prototype.render=d0.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(le(409));Kp(e,t,null,null)};Qp.prototype.unmount=d0.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;to(function(){Kp(null,e,null,null)}),t[fs]=null}};function Qp(e){this._internalRoot=e}Qp.prototype.unstable_scheduleHydration=function(e){if(e){var t=q$();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ws.length&&t!==0&&t<Ws[n].priority;n++);Ws.splice(n,0,e),n===0&&K$(e)}};function h0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Jp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function fk(){}function N8(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var f=mp(a);s.call(f)}}var a=pA(t,r,e,0,null,!1,!1,"",fk);return e._reactRootContainer=a,e[fs]=a.current,xc(e.nodeType===8?e.parentNode:e),to(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var f=mp(u);l.call(f)}}var u=c0(e,0,!1,null,null,!1,!1,"",fk);return e._reactRootContainer=u,e[fs]=u.current,xc(e.nodeType===8?e.parentNode:e),to(function(){Kp(t,u,n,r)}),u}function Yp(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var l=i;i=function(){var u=mp(a);l.call(u)}}Kp(t,a,e,i)}else a=N8(n,t,e,i,r);return mp(a)}H$=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=nc(t.pendingLanes);n!==0&&(AS(t,n|1),ar(t,Jt()),!(ot&6)&&($u=Jt()+500,fa()))}break;case 13:to(function(){var r=ds(e,1);if(r!==null){var i=Wn();gi(r,e,1,i)}}),f0(e,1)}};OS=function(e){if(e.tag===13){var t=ds(e,134217728);if(t!==null){var n=Wn();gi(t,e,134217728,n)}f0(e,134217728)}};V$=function(e){if(e.tag===13){var t=ea(e),n=ds(e,t);if(n!==null){var r=Wn();gi(n,e,t,r)}f0(e,t)}};q$=function(){return mt};G$=function(e,t){var n=mt;try{return mt=e,t()}finally{mt=n}};R_=function(e,t,n){switch(t){case"input":if(S_(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Bp(r);if(!i)throw Error(le(90));E$(r),S_(r,i)}}}break;case"textarea":I$(e,n);break;case"select":t=n.value,t!=null&&lu(e,!!n.multiple,t,!1)}};O$=a0;N$=to;var M8={usingClientEntryPoint:!1,Events:[Kc,Zo,Bp,P$,A$,a0]},Dl={findFiberByHostInstance:ja,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},L8={bundleType:Dl.bundleType,version:Dl.version,rendererPackageName:Dl.rendererPackageName,rendererConfig:Dl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ys.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=D$(e),e===null?null:e.stateNode},findFiberByHostInstance:Dl.findFiberByHostInstance||O8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wd.isDisabled&&Wd.supportsFiber)try{Dp=Wd.inject(L8),Li=Wd}catch{}}Ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M8;Ir.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h0(t))throw Error(le(200));return A8(e,t,null,n)};Ir.createRoot=function(e,t){if(!h0(e))throw Error(le(299));var n=!1,r="",i=vA;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=c0(e,1,!1,null,null,n,!1,r,i),e[fs]=t.current,xc(e.nodeType===8?e.parentNode:e),new d0(t)};Ir.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(le(188)):(e=Object.keys(e).join(","),Error(le(268,e)));return e=D$(t),e=e===null?null:e.stateNode,e};Ir.flushSync=function(e){return to(e)};Ir.hydrate=function(e,t,n){if(!Jp(t))throw Error(le(200));return Yp(null,e,t,!0,n)};Ir.hydrateRoot=function(e,t,n){if(!h0(e))throw Error(le(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=vA;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=pA(t,null,e,1,n??null,i,!1,s,a),e[fs]=t.current,xc(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Qp(t)};Ir.render=function(e,t,n){if(!Jp(t))throw Error(le(200));return Yp(null,e,t,!1,n)};Ir.unmountComponentAtNode=function(e){if(!Jp(e))throw Error(le(40));return e._reactRootContainer?(to(function(){Yp(null,null,e,!1,function(){e._reactRootContainer=null,e[fs]=null})}),!0):!1};Ir.unstable_batchedUpdates=a0;Ir.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jp(n))throw Error(le(200));if(e==null||e._reactInternals===void 0)throw Error(le(38));return Yp(e,t,n,!1,r)};Ir.version="18.3.1-next-f1338f8080-20240426";function gA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gA)}catch(e){console.error(e)}}gA(),g$.exports=Ir;var D8=g$.exports,dk=D8;p_.createRoot=dk.createRoot,p_.hydrateRoot=dk.hydrateRoot;function mA(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=mA(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function F8(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=mA(e))&&(r&&(r+=" "),r+=t);return r}const j8=[["1",""],["2","ABC"],["3","DEF"],["4","GHI"],["5","JKL"],["6","MNO"],["7","PQRS"],["8","TUV"],["9","WXYZ"],["*",""],["0","+"],["#",""]],U8=({onInput:e,onBackspace:t,disabled:n})=>pe.jsxs("div",{className:"dialpad",children:[j8.map(([r,i])=>pe.jsxs("button",{className:F8("dialpad-key",n&&"disabled"),disabled:n,onClick:()=>e(r),children:[pe.jsx("span",{className:"digit",children:r}),i&&pe.jsx("span",{className:"letters",children:i})]},r)),pe.jsx("button",{className:"dialpad-key backspace",onClick:t,disabled:n,children:""})]}),B8=({callPhase:e,isRecording:t,onDial:n,onHangup:r,onToggleRecording:i,disabled:s})=>{const a=e==="dialing"||e==="in-call"||e==="recording";return pe.jsxs("div",{className:"call-controls",children:[pe.jsx("button",{className:"control-button primary",disabled:s||a,onClick:n,children:"Dial"}),pe.jsx("button",{className:"control-button danger",disabled:!a,onClick:r,children:"Hang Up"}),pe.jsx("button",{className:"control-button secondary",disabled:e!=="in-call"&&e!=="recording",onClick:i,children:t?"Stop Recording":"Start Recording"})]})},W8=({value:e,onChange:t,placeholder:n="Enter number or search contact",disabled:r})=>pe.jsx("div",{className:"number-input-wrapper",children:pe.jsx("input",{className:"number-input",type:"tel",value:e,disabled:r,placeholder:n,onChange:i=>t(i.target.value)})}),z8=({events:e,isStreaming:t,amdStatus:n})=>{const r=Qe.useRef(null);return Qe.useEffect(()=>{r.current&&(r.current.scrollTop=r.current.scrollHeight)},[e]),pe.jsxs("div",{className:"transcription-pane",children:[pe.jsxs("div",{className:"transcription-header",children:[pe.jsx("h2",{children:"Live Transcription"}),pe.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[n&&n!=="Detecting"&&pe.jsx("span",{className:`amd-badge ${n.toLowerCase()}`,children:n==="Voicemail"?" Voicemail":n==="Human"?" Human":n==="Fax"?" Fax":n==="Machine"?" Machine":n}),pe.jsx("span",{className:t?"status live":"status idle",children:t?"Live":"Waiting"})]})]}),pe.jsxs("div",{ref:r,className:"transcription-body",children:[e.length===0&&pe.jsx("p",{className:"placeholder",children:"No transcript chunks yet."}),e.map(i=>{const s=i.track==="inbound_track"?"Agent":i.track==="outbound_track"?"Customer":"Unknown";return pe.jsxs("div",{className:i.isFinal?"chunk final":"chunk partial",children:[pe.jsxs("div",{className:"chunk-content",children:[pe.jsxs("span",{className:"speaker-label",children:[s,":"]}),pe.jsx("span",{children:i.text})]}),pe.jsx("time",{children:new Date(i.timestamp).toLocaleTimeString()})]},i.chunkId)})]})]})},H8=({open:e,summary:t,onClose:n})=>!e||!t?null:pe.jsx("div",{className:"modal-backdrop",role:"dialog","aria-modal":"true",children:pe.jsxs("div",{className:"modal",children:[pe.jsxs("div",{className:"modal-header",children:[pe.jsx("h3",{children:"Call Summary"}),pe.jsx("button",{className:"icon-button",onClick:n,"aria-label":"Close summary",children:""})]}),pe.jsx("div",{className:"modal-body",children:pe.jsxs("dl",{children:[pe.jsxs("div",{className:"row",children:[pe.jsx("dt",{children:"Call SID"}),pe.jsx("dd",{children:pe.jsx("a",{href:t.recordingUrl??"#",target:"_blank",rel:"noreferrer",children:t.callSid})})]}),pe.jsxs("div",{className:"row",children:[pe.jsx("dt",{children:"Dialed Number"}),pe.jsx("dd",{children:t.dialedNumber})]}),pe.jsxs("div",{className:"row",children:[pe.jsx("dt",{children:"Started"}),pe.jsx("dd",{children:new Date(t.startedAt).toLocaleString()})]}),t.endedAt&&pe.jsxs("div",{className:"row",children:[pe.jsx("dt",{children:"Ended"}),pe.jsx("dd",{children:new Date(t.endedAt).toLocaleString()})]}),t.recordingUrl&&pe.jsxs("div",{className:"row",children:[pe.jsx("dt",{children:"Recording"}),pe.jsx("dd",{children:pe.jsx("a",{href:t.recordingUrl,target:"_blank",rel:"noreferrer",children:"Open recording"})})]}),t.transcriptUrl&&pe.jsxs("div",{className:"row",children:[pe.jsx("dt",{children:"Transcript"}),pe.jsx("dd",{children:pe.jsx("a",{href:t.transcriptUrl,target:"_blank",rel:"noreferrer",children:"View transcript"})})]})]})})]})});var p0={exports:{}},vu=typeof Reflect=="object"?Reflect:null,hk=vu&&typeof vu.apply=="function"?vu.apply:function(t,n,r){return Function.prototype.apply.call(t,n,r)},Lh;vu&&typeof vu.ownKeys=="function"?Lh=vu.ownKeys:Object.getOwnPropertySymbols?Lh=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Lh=function(t){return Object.getOwnPropertyNames(t)};function V8(e){console&&console.warn&&console.warn(e)}var yA=Number.isNaN||function(t){return t!==t};function yt(){yt.init.call(this)}p0.exports=yt;p0.exports.once=Q8;yt.EventEmitter=yt;yt.prototype._events=void 0;yt.prototype._eventsCount=0;yt.prototype._maxListeners=void 0;var pk=10;function Xp(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(yt,"defaultMaxListeners",{enumerable:!0,get:function(){return pk},set:function(e){if(typeof e!="number"||e<0||yA(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");pk=e}});yt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};yt.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||yA(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function _A(e){return e._maxListeners===void 0?yt.defaultMaxListeners:e._maxListeners}yt.prototype.getMaxListeners=function(){return _A(this)};yt.prototype.emit=function(t){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=t==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var a;if(n.length>0&&(a=n[0]),a instanceof Error)throw a;var l=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw l.context=a,l}var u=s[t];if(u===void 0)return!1;if(typeof u=="function")hk(u,this,n);else for(var f=u.length,d=EA(u,f),r=0;r<f;++r)hk(d[r],this,n);return!0};function wA(e,t,n,r){var i,s,a;if(Xp(n),s=e._events,s===void 0?(s=e._events=Object.create(null),e._eventsCount=0):(s.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),a=s[t]),a===void 0)a=s[t]=n,++e._eventsCount;else if(typeof a=="function"?a=s[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),i=_A(e),i>0&&a.length>i&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,V8(l)}return e}yt.prototype.addListener=function(t,n){return wA(this,t,n,!1)};yt.prototype.on=yt.prototype.addListener;yt.prototype.prependListener=function(t,n){return wA(this,t,n,!0)};function q8(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function SA(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=q8.bind(r);return i.listener=n,r.wrapFn=i,i}yt.prototype.once=function(t,n){return Xp(n),this.on(t,SA(this,t,n)),this};yt.prototype.prependOnceListener=function(t,n){return Xp(n),this.prependListener(t,SA(this,t,n)),this};yt.prototype.removeListener=function(t,n){var r,i,s,a,l;if(Xp(n),i=this._events,i===void 0)return this;if(r=i[t],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,r.listener||n));else if(typeof r!="function"){for(s=-1,a=r.length-1;a>=0;a--)if(r[a]===n||r[a].listener===n){l=r[a].listener,s=a;break}if(s<0)return this;s===0?r.shift():G8(r,s),r.length===1&&(i[t]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",t,l||n)}return this};yt.prototype.off=yt.prototype.removeListener;yt.prototype.removeAllListeners=function(t){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var s=Object.keys(r),a;for(i=0;i<s.length;++i)a=s[i],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(t,n[i]);return this};function bA(e,t,n){var r=e._events;if(r===void 0)return[];var i=r[t];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?K8(i):EA(i,i.length)}yt.prototype.listeners=function(t){return bA(this,t,!0)};yt.prototype.rawListeners=function(t){return bA(this,t,!1)};yt.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):TA.call(e,t)};yt.prototype.listenerCount=TA;function TA(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}yt.prototype.eventNames=function(){return this._eventsCount>0?Lh(this._events):[]};function EA(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function G8(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function K8(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function Q8(e,t){return new Promise(function(n,r){function i(a){e.removeListener(t,s),r(a)}function s(){typeof e.removeListener=="function"&&e.removeListener("error",i),n([].slice.call(arguments))}kA(e,t,s,{once:!0}),t!=="error"&&J8(e,i,{once:!0})})}function J8(e,t,n){typeof e.on=="function"&&kA(e,"error",t,n)}function kA(e,t,n,r){if(typeof e.on=="function")r.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function i(s){r.once&&e.removeEventListener(t,i),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var Yr=p0.exports;let ow=class extends Yr.EventEmitter{constructor(t){super(),Object.defineProperties(this,{_attempts:{value:0,writable:!0},_duration:{enumerable:!1,get(){let n=this._min*Math.pow(this._factor,this._attempts);if(this._jitter){const r=Math.random(),i=Math.floor(r*this._jitter*n);n=Math.floor(r*10)&1?n+i:n-i}return Math.min(n,this._max)|0}},_factor:{value:t.factor||2},_jitter:{value:t.jitter>0&&t.jitter<=1?t.jitter:0},_max:{value:t.max||1e4},_min:{value:t.min||100},_timeoutID:{value:null,writable:!0}})}backoff(){const t=this._duration;this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null),this.emit("backoff",this._attempts,t),this._timeoutID=setTimeout(()=>{this.emit("ready",this._attempts,t),this._attempts++},t)}reset(){this._attempts=0,this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)}};function Bn(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(d){try{f(r.next(d))}catch(p){a(p)}}function u(d){try{f(r.throw(d))}catch(p){a(p)}}function f(d){d.done?s(d.value):i(d.value).then(l,u)}f((r=r.apply(e,t||[])).next())})}var IA={exports:{}};(function(e){(function(t,n){e.exports?e.exports=n():t.log=n()})(di,function(){var t=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],s={},a=null;function l(E,T){var w=E[T];if(typeof w.bind=="function")return w.bind(E);try{return Function.prototype.bind.call(w,E)}catch{return function(){return Function.prototype.apply.apply(w,[E,arguments])}}}function u(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function f(E){return E==="debug"&&(E="log"),typeof console===n?!1:E==="trace"&&r?u:console[E]!==void 0?l(console,E):console.log!==void 0?l(console,"log"):t}function d(){for(var E=this.getLevel(),T=0;T<i.length;T++){var w=i[T];this[w]=T<E?t:this.methodFactory(w,E,this.name)}if(this.log=this.debug,typeof console===n&&E<this.levels.SILENT)return"No console available for logging"}function p(E){return function(){typeof console!==n&&(d.call(this),this[E].apply(this,arguments))}}function v(E,T,w){return f(E)||p.apply(this,arguments)}function m(E,T){var w=this,b,$,N,z="loglevel";typeof E=="string"?z+=":"+E:typeof E=="symbol"&&(z=void 0);function H(oe){var de=(i[oe]||"silent").toUpperCase();if(!(typeof window===n||!z)){try{window.localStorage[z]=de;return}catch{}try{window.document.cookie=encodeURIComponent(z)+"="+de+";"}catch{}}}function K(){var oe;if(!(typeof window===n||!z)){try{oe=window.localStorage[z]}catch{}if(typeof oe===n)try{var de=window.document.cookie,me=encodeURIComponent(z),we=de.indexOf(me+"=");we!==-1&&(oe=/^([^;]+)/.exec(de.slice(we+me.length+1))[1])}catch{}return w.levels[oe]===void 0&&(oe=void 0),oe}}function P(){if(!(typeof window===n||!z)){try{window.localStorage.removeItem(z)}catch{}try{window.document.cookie=encodeURIComponent(z)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function ee(oe){var de=oe;if(typeof de=="string"&&w.levels[de.toUpperCase()]!==void 0&&(de=w.levels[de.toUpperCase()]),typeof de=="number"&&de>=0&&de<=w.levels.SILENT)return de;throw new TypeError("log.setLevel() called with invalid level: "+oe)}w.name=E,w.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},w.methodFactory=T||v,w.getLevel=function(){return N??$??b},w.setLevel=function(oe,de){return N=ee(oe),de!==!1&&H(N),d.call(w)},w.setDefaultLevel=function(oe){$=ee(oe),K()||w.setLevel(oe,!1)},w.resetLevel=function(){N=null,P(),d.call(w)},w.enableAll=function(oe){w.setLevel(w.levels.TRACE,oe)},w.disableAll=function(oe){w.setLevel(w.levels.SILENT,oe)},w.rebuild=function(){if(a!==w&&(b=ee(a.getLevel())),d.call(w),a===w)for(var oe in s)s[oe].rebuild()},b=ee(a?a.getLevel():"WARN");var Y=K();Y!=null&&(N=ee(Y)),d.call(w)}a=new m,a.getLogger=function(T){if(typeof T!="symbol"&&typeof T!="string"||T==="")throw new TypeError("You must supply a name when creating a logger.");var w=s[T];return w||(w=s[T]=new m(T,a.methodFactory)),w};var y=typeof window!==n?window.log:void 0;return a.noConflict=function(){return typeof window!==n&&window.log===a&&(window.log=y),a},a.getLoggers=function(){return s},a.default=a,a})})(IA);var no=IA.exports;const Y8=i$(no),X8=c6({__proto__:null,default:Y8},[no]);class ze extends Error{constructor(t,n){super(),Object.setPrototypeOf(this,ze.prototype);const r=typeof t=="string"?t:this.explanation,i=typeof t=="object"?t:n;this.message=`${this.name} (${this.code}): ${r}`,this.originalError=i}}var sn;(function(e){class t extends ze{constructor(s,a){super(s,a),this.causes=[],this.code=20101,this.description="Invalid access token",this.explanation="Twilio was unable to validate your Access Token",this.name="AccessTokenInvalid",this.solutions=[],Object.setPrototypeOf(this,e.AccessTokenInvalid.prototype);const l=typeof s=="string"?s:this.explanation,u=typeof s=="object"?s:a;this.message=`${this.name} (${this.code}): ${l}`,this.originalError=u}}e.AccessTokenInvalid=t;class n extends ze{constructor(s,a){super(s,a),this.causes=[],this.code=20104,this.description="Access token expired or expiration date invalid",this.explanation="The Access Token provided to the Twilio API has expired, the expiration time specified in the token was invalid, or the expiration time specified was too far in the future",this.name="AccessTokenExpired",this.solutions=[],Object.setPrototypeOf(this,e.AccessTokenExpired.prototype);const l=typeof s=="string"?s:this.explanation,u=typeof s=="object"?s:a;this.message=`${this.name} (${this.code}): ${l}`,this.originalError=u}}e.AccessTokenExpired=n;class r extends ze{constructor(s,a){super(s,a),this.causes=[],this.code=20151,this.description="Authentication Failed",this.explanation="The Authentication with the provided JWT failed",this.name="AuthenticationFailed",this.solutions=[],Object.setPrototypeOf(this,e.AuthenticationFailed.prototype);const l=typeof s=="string"?s:this.explanation,u=typeof s=="object"?s:a;this.message=`${this.name} (${this.code}): ${l}`,this.originalError=u}}e.AuthenticationFailed=r})(sn||(sn={}));var uw;(function(e){class t extends ze{constructor(r,i){super(r,i),this.causes=["The access token has an invalid Account SID, API Key, or API Key Secret."],this.code=31202,this.description="Signature validation failed.",this.explanation="The provided access token failed signature validation.",this.name="AccessTokenSignatureValidationFailed",this.solutions=["Ensure the Account SID, API Key, and API Key Secret are valid when generating your access token."],Object.setPrototypeOf(this,e.AccessTokenSignatureValidationFailed.prototype);const s=typeof r=="string"?r:this.explanation,a=typeof r=="object"?r:i;this.message=`${this.name} (${this.code}): ${s}`,this.originalError=a}}e.AccessTokenSignatureValidationFailed=t})(uw||(uw={}));var Wa;(function(e){class t extends ze{constructor(a,l){super(a,l),this.causes=[],this.code=31400,this.description="Bad Request (HTTP/SIP)",this.explanation="The request could not be understood due to malformed syntax.",this.name="BadRequest",this.solutions=[],Object.setPrototypeOf(this,e.BadRequest.prototype);const u=typeof a=="string"?a:this.explanation,f=typeof a=="object"?a:l;this.message=`${this.name} (${this.code}): ${u}`,this.originalError=f}}e.BadRequest=t;class n extends ze{constructor(a,l){super(a,l),this.causes=["The outbound call was made to an invalid phone number.","The TwiML application sid is missing a Voice URL."],this.code=31404,this.description="Not Found (HTTP/SIP)",this.explanation="The server has not found anything matching the request.",this.name="NotFound",this.solutions=["Ensure the phone number dialed is valid.","Ensure the TwiML application is configured correctly with a Voice URL link."],Object.setPrototypeOf(this,e.NotFound.prototype);const u=typeof a=="string"?a:this.explanation,f=typeof a=="object"?a:l;this.message=`${this.name} (${this.code}): ${u}`,this.originalError=f}}e.NotFound=n;class r extends ze{constructor(a,l){super(a,l),this.causes=[],this.code=31480,this.description="Temporarily Unavailable (SIP)",this.explanation="The callee is currently unavailable.",this.name="TemporarilyUnavailable",this.solutions=[],Object.setPrototypeOf(this,e.TemporarilyUnavailable.prototype);const u=typeof a=="string"?a:this.explanation,f=typeof a=="object"?a:l;this.message=`${this.name} (${this.code}): ${u}`,this.originalError=f}}e.TemporarilyUnavailable=r;class i extends ze{constructor(a,l){super(a,l),this.causes=[],this.code=31486,this.description="Busy Here (SIP)",this.explanation="The callee is busy.",this.name="BusyHere",this.solutions=[],Object.setPrototypeOf(this,e.BusyHere.prototype);const u=typeof a=="string"?a:this.explanation,f=typeof a=="object"?a:l;this.message=`${this.name} (${this.code}): ${u}`,this.originalError=f}}e.BusyHere=i})(Wa||(Wa={}));var lw;(function(e){class t extends ze{constructor(r,i){super(r,i),this.causes=[],this.code=31603,this.description="Decline (SIP)",this.explanation="The callee does not wish to participate in the call.",this.name="Decline",this.solutions=[],Object.setPrototypeOf(this,e.Decline.prototype);const s=typeof r=="string"?r:this.explanation,a=typeof r=="object"?r:i;this.message=`${this.name} (${this.code}): ${s}`,this.originalError=a}}e.Decline=t})(lw||(lw={}));var xn;(function(e){class t extends ze{constructor(f,d){super(f,d),this.causes=[],this.code=31e3,this.description="Unknown Error",this.explanation="An unknown error has occurred. See error details for more information.",this.name="UnknownError",this.solutions=[],Object.setPrototypeOf(this,e.UnknownError.prototype);const p=typeof f=="string"?f:this.explanation,v=typeof f=="object"?f:d;this.message=`${this.name} (${this.code}): ${p}`,this.originalError=v}}e.UnknownError=t;class n extends ze{constructor(f,d){super(f,d),this.causes=[],this.code=31001,this.description="Application Not Found",this.explanation="",this.name="ApplicationNotFoundError",this.solutions=[],Object.setPrototypeOf(this,e.ApplicationNotFoundError.prototype);const p=typeof f=="string"?f:this.explanation,v=typeof f=="object"?f:d;this.message=`${this.name} (${this.code}): ${p}`,this.originalError=v}}e.ApplicationNotFoundError=n;class r extends ze{constructor(f,d){super(f,d),this.causes=[],this.code=31002,this.description="Connection Declined",this.explanation="",this.name="ConnectionDeclinedError",this.solutions=[],Object.setPrototypeOf(this,e.ConnectionDeclinedError.prototype);const p=typeof f=="string"?f:this.explanation,v=typeof f=="object"?f:d;this.message=`${this.name} (${this.code}): ${p}`,this.originalError=v}}e.ConnectionDeclinedError=r;class i extends ze{constructor(f,d){super(f,d),this.causes=[],this.code=31003,this.description="Connection Timeout",this.explanation="The server could not produce a response within a suitable amount of time.",this.name="ConnectionTimeoutError",this.solutions=[],Object.setPrototypeOf(this,e.ConnectionTimeoutError.prototype);const p=typeof f=="string"?f:this.explanation,v=typeof f=="object"?f:d;this.message=`${this.name} (${this.code}): ${p}`,this.originalError=v}}e.ConnectionTimeoutError=i;class s extends ze{constructor(f,d){super(f,d),this.causes=[],this.code=31005,this.description="Connection error",this.explanation="A connection error occurred during the call",this.name="ConnectionError",this.solutions=[],Object.setPrototypeOf(this,e.ConnectionError.prototype);const p=typeof f=="string"?f:this.explanation,v=typeof f=="object"?f:d;this.message=`${this.name} (${this.code}): ${p}`,this.originalError=v}}e.ConnectionError=s;class a extends ze{constructor(f,d){super(f,d),this.causes=["The incoming call was cancelled because it was not answered in time or it was accepted/rejected by another application instance registered with the same identity."],this.code=31008,this.description="Call cancelled",this.explanation="Unable to answer because the call has ended",this.name="CallCancelledError",this.solutions=[],Object.setPrototypeOf(this,e.CallCancelledError.prototype);const p=typeof f=="string"?f:this.explanation,v=typeof f=="object"?f:d;this.message=`${this.name} (${this.code}): ${p}`,this.originalError=v}}e.CallCancelledError=a;class l extends ze{constructor(f,d){super(f,d),this.causes=[],this.code=31009,this.description="Transport error",this.explanation="No transport available to send or receive messages",this.name="TransportError",this.solutions=[],Object.setPrototypeOf(this,e.TransportError.prototype);const p=typeof f=="string"?f:this.explanation,v=typeof f=="object"?f:d;this.message=`${this.name} (${this.code}): ${p}`,this.originalError=v}}e.TransportError=l})(xn||(xn={}));var Zi;(function(e){class t extends ze{constructor(f,d){super(f,d),this.causes=["Invalid content or MessageType passed to sendMessage method."],this.code=31100,this.description="The request had malformed syntax.",this.explanation="The request could not be understood due to malformed syntax.",this.name="MalformedRequestError",this.solutions=["Ensure content and MessageType passed to sendMessage method are valid."],Object.setPrototypeOf(this,e.MalformedRequestError.prototype);const p=typeof f=="string"?f:this.explanation,v=typeof f=="object"?f:d;this.message=`${this.name} (${this.code}): ${p}`,this.originalError=v}}e.MalformedRequestError=t;class n extends ze{constructor(f,d){super(f,d),this.causes=[],this.code=31101,this.description="Missing parameter array in request",this.explanation="",this.name="MissingParameterArrayError",this.solutions=[],Object.setPrototypeOf(this,e.MissingParameterArrayError.prototype);const p=typeof f=="string"?f:this.explanation,v=typeof f=="object"?f:d;this.message=`${this.name} (${this.code}): ${p}`,this.originalError=v}}e.MissingParameterArrayError=n;class r extends ze{constructor(f,d){super(f,d),this.causes=[],this.code=31102,this.description="Authorization token missing in request.",this.explanation="",this.name="AuthorizationTokenMissingError",this.solutions=[],Object.setPrototypeOf(this,e.AuthorizationTokenMissingError.prototype);const p=typeof f=="string"?f:this.explanation,v=typeof f=="object"?f:d;this.message=`${this.name} (${this.code}): ${p}`,this.originalError=v}}e.AuthorizationTokenMissingError=r;class i extends ze{constructor(f,d){super(f,d),this.causes=[],this.code=31103,this.description="Maximum parameter length has been exceeded.",this.explanation="Length of parameters cannot exceed MAX_PARAM_LENGTH.",this.name="MaxParameterLengthExceededError",this.solutions=[],Object.setPrototypeOf(this,e.MaxParameterLengthExceededError.prototype);const p=typeof f=="string"?f:this.explanation,v=typeof f=="object"?f:d;this.message=`${this.name} (${this.code}): ${p}`,this.originalError=v}}e.MaxParameterLengthExceededError=i;class s extends ze{constructor(f,d){super(f,d),this.causes=[],this.code=31104,this.description="Invalid bridge token",this.explanation="",this.name="InvalidBridgeTokenError",this.solutions=[],Object.setPrototypeOf(this,e.InvalidBridgeTokenError.prototype);const p=typeof f=="string"?f:this.explanation,v=typeof f=="object"?f:d;this.message=`${this.name} (${this.code}): ${p}`,this.originalError=v}}e.InvalidBridgeTokenError=s;class a extends ze{constructor(f,d){super(f,d),this.causes=["Client name contains invalid characters."],this.code=31105,this.description="Invalid client name",this.explanation="Client name should not contain control, space, delims, or unwise characters.",this.name="InvalidClientNameError",this.solutions=["Make sure that client name does not contain any of the invalid characters."],Object.setPrototypeOf(this,e.InvalidClientNameError.prototype);const p=typeof f=="string"?f:this.explanation,v=typeof f=="object"?f:d;this.message=`${this.name} (${this.code}): ${p}`,this.originalError=v}}e.InvalidClientNameError=a;class l extends ze{constructor(f,d){super(f,d),this.causes=[],this.code=31107,this.description="The reconnect parameter is invalid",this.explanation="",this.name="ReconnectParameterInvalidError",this.solutions=[],Object.setPrototypeOf(this,e.ReconnectParameterInvalidError.prototype);const p=typeof f=="string"?f:this.explanation,v=typeof f=="object"?f:d;this.message=`${this.name} (${this.code}): ${p}`,this.originalError=v}}e.ReconnectParameterInvalidError=l})(Zi||(Zi={}));(function(e){class t extends ze{constructor(p,v){super(p,v),this.causes=[],this.code=31201,this.description="Authorization error",this.explanation="The request requires user authentication. The server understood the request, but is refusing to fulfill it.",this.name="AuthorizationError",this.solutions=[],Object.setPrototypeOf(this,e.AuthorizationError.prototype);const m=typeof p=="string"?p:this.explanation,y=typeof p=="object"?p:v;this.message=`${this.name} (${this.code}): ${m}`,this.originalError=y}}e.AuthorizationError=t;class n extends ze{constructor(p,v){super(p,v),this.causes=[],this.code=31203,this.description="No valid account",this.explanation="",this.name="NoValidAccountError",this.solutions=[],Object.setPrototypeOf(this,e.NoValidAccountError.prototype);const m=typeof p=="string"?p:this.explanation,y=typeof p=="object"?p:v;this.message=`${this.name} (${this.code}): ${m}`,this.originalError=y}}e.NoValidAccountError=n;class r extends ze{constructor(p,v){super(p,v),this.causes=[],this.code=31204,this.description="Invalid JWT token",this.explanation="",this.name="InvalidJWTTokenError",this.solutions=[],Object.setPrototypeOf(this,e.InvalidJWTTokenError.prototype);const m=typeof p=="string"?p:this.explanation,y=typeof p=="object"?p:v;this.message=`${this.name} (${this.code}): ${m}`,this.originalError=y}}e.InvalidJWTTokenError=r;class i extends ze{constructor(p,v){super(p,v),this.causes=[],this.code=31205,this.description="JWT token expired",this.explanation="",this.name="JWTTokenExpiredError",this.solutions=[],Object.setPrototypeOf(this,e.JWTTokenExpiredError.prototype);const m=typeof p=="string"?p:this.explanation,y=typeof p=="object"?p:v;this.message=`${this.name} (${this.code}): ${m}`,this.originalError=y}}e.JWTTokenExpiredError=i;class s extends ze{constructor(p,v){super(p,v),this.causes=["Rate limit exceeded."],this.code=31206,this.description="Rate exceeded authorized limit.",this.explanation="The request performed exceeds the authorized limit.",this.name="RateExceededError",this.solutions=["Ensure message send rate does not exceed authorized limits."],Object.setPrototypeOf(this,e.RateExceededError.prototype);const m=typeof p=="string"?p:this.explanation,y=typeof p=="object"?p:v;this.message=`${this.name} (${this.code}): ${m}`,this.originalError=y}}e.RateExceededError=s;class a extends ze{constructor(p,v){super(p,v),this.causes=[],this.code=31207,this.description="JWT token expiration too long",this.explanation="",this.name="JWTTokenExpirationTooLongError",this.solutions=[],Object.setPrototypeOf(this,e.JWTTokenExpirationTooLongError.prototype);const m=typeof p=="string"?p:this.explanation,y=typeof p=="object"?p:v;this.message=`${this.name} (${this.code}): ${m}`,this.originalError=y}}e.JWTTokenExpirationTooLongError=a;class l extends ze{constructor(p,v){super(p,v),this.causes=[],this.code=31209,this.description="Reconnect attempt is not authorized.",this.explanation="",this.name="ReconnectAttemptError",this.solutions=[],Object.setPrototypeOf(this,e.ReconnectAttemptError.prototype);const m=typeof p=="string"?p:this.explanation,y=typeof p=="object"?p:v;this.message=`${this.name} (${this.code}): ${m}`,this.originalError=y}}e.ReconnectAttemptError=l;class u extends ze{constructor(p,v){super(p,v),this.causes=["The Call Message Event Type is invalid and is not understood by Twilio Voice."],this.code=31210,this.description="Call Message Event Type is invalid.",this.explanation="The Call Message Event Type is invalid and is not understood by Twilio Voice.",this.name="CallMessageEventTypeInvalidError",this.solutions=["Ensure the Call Message Event Type is Valid and understood by Twilio Voice and try again."],Object.setPrototypeOf(this,e.CallMessageEventTypeInvalidError.prototype);const m=typeof p=="string"?p:this.explanation,y=typeof p=="object"?p:v;this.message=`${this.name} (${this.code}): ${m}`,this.originalError=y}}e.CallMessageEventTypeInvalidError=u;class f extends ze{constructor(p,v){super(p,v),this.causes=["The payload size of Call Message Event exceeds the authorized limit."],this.code=31212,this.description="Call Message Event Payload size exceeded authorized limit.",this.explanation="The request performed to send a Call Message Event exceeds the payload size authorized limit",this.name="PayloadSizeExceededError",this.solutions=["Reduce payload size of Call Message Event to be within the authorized limit and try again."],Object.setPrototypeOf(this,e.PayloadSizeExceededError.prototype);const m=typeof p=="string"?p:this.explanation,y=typeof p=="object"?p:v;this.message=`${this.name} (${this.code}): ${m}`,this.originalError=y}}e.PayloadSizeExceededError=f})(sn||(sn={}));var Pu;(function(e){class t extends ze{constructor(i,s){super(i,s),this.causes=["The user denied the getUserMedia request.","The browser denied the getUserMedia request."],this.code=31401,this.description="UserMedia Permission Denied Error",this.explanation="The browser or end-user denied permissions to user media. Therefore we were unable to acquire input audio.",this.name="PermissionDeniedError",this.solutions=["The user should accept the request next time prompted. If the browser saved the deny, the user should change that permission in their browser.","The user should to verify that the browser has permission to access the microphone at this address."],Object.setPrototypeOf(this,e.PermissionDeniedError.prototype);const a=typeof i=="string"?i:this.explanation,l=typeof i=="object"?i:s;this.message=`${this.name} (${this.code}): ${a}`,this.originalError=l}}e.PermissionDeniedError=t;class n extends ze{constructor(i,s){super(i,s),this.causes=["NotFoundError - The deviceID specified was not found.","The getUserMedia constraints were overconstrained and no devices matched."],this.code=31402,this.description="UserMedia Acquisition Failed Error",this.explanation="The browser and end-user allowed permissions, however getting the media failed. Usually this is due to bad constraints, but can sometimes fail due to browser, OS or hardware issues.",this.name="AcquisitionFailedError",this.solutions=["Ensure the deviceID being specified exists.","Try acquiring media with fewer constraints."],Object.setPrototypeOf(this,e.AcquisitionFailedError.prototype);const a=typeof i=="string"?i:this.explanation,l=typeof i=="object"?i:s;this.message=`${this.name} (${this.code}): ${a}`,this.originalError=l}}e.AcquisitionFailedError=n})(Pu||(Pu={}));var Kr;(function(e){class t extends ze{constructor(i,s){super(i,s),this.causes=[],this.code=53e3,this.description="Signaling connection error",this.explanation="Raised whenever a signaling connection error occurs that is not covered by a more specific error code.",this.name="ConnectionError",this.solutions=[],Object.setPrototypeOf(this,e.ConnectionError.prototype);const a=typeof i=="string"?i:this.explanation,l=typeof i=="object"?i:s;this.message=`${this.name} (${this.code}): ${a}`,this.originalError=l}}e.ConnectionError=t;class n extends ze{constructor(i,s){super(i,s),this.causes=["The device running your application lost its Internet connection."],this.code=53001,this.description="Signaling connection disconnected",this.explanation="Raised whenever the signaling connection is unexpectedly disconnected.",this.name="ConnectionDisconnected",this.solutions=["Ensure the device running your application has access to a stable Internet connection."],Object.setPrototypeOf(this,e.ConnectionDisconnected.prototype);const a=typeof i=="string"?i:this.explanation,l=typeof i=="object"?i:s;this.message=`${this.name} (${this.code}): ${a}`,this.originalError=l}}e.ConnectionDisconnected=n})(Kr||(Kr={}));var Fi;(function(e){class t extends ze{constructor(s,a){super(s,a),this.causes=["The Client may not be using a supported WebRTC implementation.","The Client may not have the necessary resources to create or apply a new media description."],this.code=53400,this.description="Client is unable to create or apply a local media description",this.explanation="Raised whenever a Client is unable to create or apply a local media description.",this.name="ClientLocalDescFailed",this.solutions=["If you are experiencing this error using the JavaScript SDK, ensure you are running it with a supported WebRTC implementation."],Object.setPrototypeOf(this,e.ClientLocalDescFailed.prototype);const l=typeof s=="string"?s:this.explanation,u=typeof s=="object"?s:a;this.message=`${this.name} (${this.code}): ${l}`,this.originalError=u}}e.ClientLocalDescFailed=t;class n extends ze{constructor(s,a){super(s,a),this.causes=["The Client may not be using a supported WebRTC implementation.","The Client may be connecting peer-to-peer with another Participant that is not using a supported WebRTC implementation.","The Client may not have the necessary resources to apply a new media description."],this.code=53402,this.description="Client is unable to apply a remote media description",this.explanation="Raised whenever the Client receives a remote media description but is unable to apply it.",this.name="ClientRemoteDescFailed",this.solutions=["If you are experiencing this error using the JavaScript SDK, ensure you are running it with a supported WebRTC implementation."],Object.setPrototypeOf(this,e.ClientRemoteDescFailed.prototype);const l=typeof s=="string"?s:this.explanation,u=typeof s=="object"?s:a;this.message=`${this.name} (${this.code}): ${l}`,this.originalError=u}}e.ClientRemoteDescFailed=n;class r extends ze{constructor(s,a){super(s,a),this.causes=["The Client was unable to establish a media connection.","A media connection which was active failed liveliness checks."],this.code=53405,this.description="Media connection failed",this.explanation="Raised by the Client or Server whenever a media connection fails.",this.name="ConnectionError",this.solutions=["If the problem persists, try connecting to another region.","Check your Client's network connectivity.","If you've provided custom ICE Servers then ensure that the URLs and credentials are valid."],Object.setPrototypeOf(this,e.ConnectionError.prototype);const l=typeof s=="string"?s:this.explanation,u=typeof s=="object"?s:a;this.message=`${this.name} (${this.code}): ${l}`,this.originalError=u}}e.ConnectionError=r})(Fi||(Fi={}));const v0=new Map([[20101,sn.AccessTokenInvalid],[20104,sn.AccessTokenExpired],[20151,sn.AuthenticationFailed],[31202,uw.AccessTokenSignatureValidationFailed],[31400,Wa.BadRequest],[31404,Wa.NotFound],[31480,Wa.TemporarilyUnavailable],[31486,Wa.BusyHere],[31603,lw.Decline],[31e3,xn.UnknownError],[31001,xn.ApplicationNotFoundError],[31002,xn.ConnectionDeclinedError],[31003,xn.ConnectionTimeoutError],[31005,xn.ConnectionError],[31008,xn.CallCancelledError],[31009,xn.TransportError],[31100,Zi.MalformedRequestError],[31101,Zi.MissingParameterArrayError],[31102,Zi.AuthorizationTokenMissingError],[31103,Zi.MaxParameterLengthExceededError],[31104,Zi.InvalidBridgeTokenError],[31105,Zi.InvalidClientNameError],[31107,Zi.ReconnectParameterInvalidError],[31201,sn.AuthorizationError],[31203,sn.NoValidAccountError],[31204,sn.InvalidJWTTokenError],[31205,sn.JWTTokenExpiredError],[31206,sn.RateExceededError],[31207,sn.JWTTokenExpirationTooLongError],[31209,sn.ReconnectAttemptError],[31210,sn.CallMessageEventTypeInvalidError],[31212,sn.PayloadSizeExceededError],[31401,Pu.PermissionDeniedError],[31402,Pu.AcquisitionFailedError],[53e3,Kr.ConnectionError],[53001,Kr.ConnectionDisconnected],[53400,Fi.ClientLocalDescFailed],[53402,Fi.ClientRemoteDescFailed],[53405,Fi.ConnectionError]]);Object.freeze(v0);const Z8=new Set([31001,31002,31003,31101,31102,31103,31104,31105,31107,31201,31202,31203,31204,31205,31207,31404,31480,31486,31603]);function cw(e,t){if(!(typeof t!="number"||!tW(t)||!(e||!Z8.has(t))))return eW(t)}class gt extends Error{constructor(t){super(t),this.name="InvalidArgumentError"}}class ui extends Error{constructor(t){super(t),this.name="InvalidStateError"}}class wn extends Error{constructor(t){super(t),this.name="NotSupportedError"}}function eW(e){const t=v0.get(e);if(!t)throw new gt(`Error code ${e} not found`);return t}function tW(e){return v0.has(e)}const CA="@twilio/voice-sdk",gu="2.16.0",g0="https://sdk.twilio.com/js/client/sounds/releases/1.0.0",nW=`${g0}/cowbell.mp3?cache=${gu}`,rW=2e4;class un{static getLogLevelInstance(t){if(!un.loglevelInstance)try{un.loglevelInstance=(t&&t.LogLevelModule?t.LogLevelModule:X8).getLogger(CA)}catch{console.warn("Cannot create custom logger"),un.loglevelInstance=console}return un.loglevelInstance}constructor(t,n){this._log=un.getLogLevelInstance(n),this._prefix=`[TwilioVoice][${t}]`}debug(...t){this._log.debug(this._prefix,...t)}error(...t){this._log.error(this._prefix,...t)}info(...t){this._log.info(this._prefix,...t)}setDefaultLevel(t){this._log.setDefaultLevel?this._log.setDefaultLevel(t):console.warn("Logger cannot setDefaultLevel")}warn(...t){this._log.warn(this._prefix,...t)}}un.levels=no.levels;un.getLogLevelInstance();const iW=`${g0}/outgoing.mp3`;class vk{constructor(t,n,r,i){this._name=t,this._availableDevices=n,this._beforeChange=r,this._isSupported=i,this._activeDevices=new Set,this._log=new un("OutputDeviceCollection")}delete(t){this._log.debug(".delete",t);const n=!!this._activeDevices.delete(t),r=this._availableDevices.get("default")||Array.from(this._availableDevices.values())[0];!this._activeDevices.size&&r&&this._activeDevices.add(r);const i=Array.from(this._activeDevices.values()).map(s=>s.deviceId);return this._beforeChange(this._name,i),!!n}get(){return this._activeDevices}set(t){if(this._log.debug(".set",t),!this._isSupported)return Promise.reject(new wn("This browser does not support audio output selection"));const n=Array.isArray(t)?t:[t];if(!n.length)return Promise.reject(new gt("Must specify at least one device to set"));const r=[],i=n.map(s=>{const a=this._availableDevices.get(s);return a||r.push(s),a});return r.length?Promise.reject(new gt(`Devices not found: ${r.join(", ")}`)):new Promise(s=>{s(this._beforeChange(this._name,n))}).then(()=>{this._activeDevices.clear(),i.forEach(this._activeDevices.add,this._activeDevices)})}test(t=iW){return this._isSupported?this._activeDevices.size?Promise.all(Array.from(this._activeDevices).map(n=>{let r;return new Promise(i=>{r=new Audio(t),r.oncanplay=i}).then(()=>r.setSinkId(n.deviceId).then(()=>r.play()))})):Promise.reject(new ui("No active output devices to test")):Promise.reject(new wn("This browser does not support audio output selection"))}}class sW{constructor(t){Object.defineProperties(this,{deviceId:{get(){return t.deviceId}},groupId:{get(){return t.groupId}},kind:{get(){return t.kind}},label:{get(){return t.label}}})}}function yp(e){if(!(this instanceof yp))return new yp(e);this.message=e}yp.prototype.toString=function(){return`Twilio.Exception: ${this.message}`};function mc(e){return e&&e.length?e.reduce((t,n)=>t+n)/e.length:0}function m0(e,t,n){n=n||(i=>i);const r=new Set(t.map(n));return e.filter(i=>!r.has(n(i)))}function RA(e){return!!e.userAgent.match("Electron")}function y0(e,t){const n=!!t.userAgent.match("CriOS"),r=!!t.userAgent.match("HeadlessChrome"),i=typeof e.chrome<"u"&&t.vendor==="Google Inc."&&t.userAgent.indexOf("OPR")===-1&&t.userAgent.indexOf("Edge")===-1;return n||RA(t)||i||r}function aW(e){return e=e||(typeof window>"u"?global.navigator:window.navigator),!!e&&typeof e.userAgent=="string"&&/firefox|fxios/i.test(e.userAgent)}function Zp(e){return e=e||(typeof window>"u"?global.navigator:window.navigator),!!e&&typeof e.userAgent=="string"&&/edge\/\d+/i.test(e.userAgent)}function oW(e){return!!e.vendor&&e.vendor.indexOf("Apple")!==-1&&e.userAgent&&e.userAgent.indexOf("CriOS")===-1&&e.userAgent.indexOf("FxiOS")===-1}function xA(e){return e?e.split("&").reduce((t,n)=>{const r=n.split("="),i=r[0],s=decodeURIComponent((r[1]||"").replace(/\+/g,"%20"));return i&&(t[i]=s),t},{}):""}function fw(e,t){const n=e instanceof Map||e instanceof Set?Array.from(e.values()):e;return t=t||(r=>r),n.reduce((r,i)=>{const s=t(i);return r.concat(s)},[])}function dw(e,t,n){return new Promise((r,i)=>{function s(){e.removeListener(n,a),r()}function a(){e.removeListener(t,s),i()}e.once(t,s),e.once(n,a)})}function $A(e,t){const n=t.map(r=>"audio/"+r.toLowerCase());return e.sort((r,i)=>{const s=n.indexOf(r.mimeType.toLowerCase()),a=n.indexOf(i.mimeType.toLowerCase()),l=s>=0?s:Number.MAX_VALUE,u=a>=0?a:Number.MAX_VALUE;return l-u})}const uW=yp,PA=Object.freeze(Object.defineProperty({__proto__:null,Exception:uW,average:mc,difference:m0,flatMap:fw,isChrome:y0,isElectron:RA,isFirefox:aW,isLegacyEdge:Zp,isSafari:oW,promisifyEvents:dw,queryToJson:xA,sortByMimeTypes:$A},Symbol.toStringTag,{value:"Module"})),lW={audioinput:"Audio Input",audiooutput:"Audio Output"};class hw extends Yr.EventEmitter{get audioConstraints(){return this._audioConstraints}get inputDevice(){return this._inputDevice}get inputStream(){return this._processedStream||this._selectedInputDeviceStream}get processedStream(){return this._processedStream}constructor(t,n,r){super(),this.availableInputDevices=new Map,this.availableOutputDevices=new Map,this._audioConstraints=null,this._defaultInputDeviceStream=null,this._enabledSounds={[Se.SoundName.Disconnect]:!0,[Se.SoundName.Incoming]:!0,[Se.SoundName.Outgoing]:!0},this._inputDevice=null,this._inputDevicePromise=null,this._isPollingInputVolume=!1,this._log=new un("AudioHelper"),this._processedStream=null,this._selectedInputDeviceStream=null,this._unknownDeviceIndexes={audioinput:{},audiooutput:{}},this._updateAvailableDevices=()=>!this._mediaDevices||!this._enumerateDevices?Promise.reject("Enumeration not supported"):this._enumerateDevices().then(l=>{this._updateDevices(l.filter(f=>f.kind==="audiooutput"),this.availableOutputDevices,this._removeLostOutput),this._updateDevices(l.filter(f=>f.kind==="audioinput"),this.availableInputDevices,this._removeLostInput);const u=this.availableOutputDevices.get("default")||Array.from(this.availableOutputDevices.values())[0];[this.speakerDevices,this.ringtoneDevices].forEach(f=>{!f.get().size&&this.availableOutputDevices.size&&this.isOutputSelectionSupported&&f.set(u.deviceId).catch(d=>{this._log.warn(`Unable to set audio output devices. ${d}`)})})}),this._removeLostInput=l=>{if(!this.inputDevice||this.inputDevice.deviceId!==l.deviceId)return!1;this._destroyProcessedStream(),this._replaceStream(null),this._inputDevice=null,this._maybeStopPollingVolume();const u=this.availableInputDevices.get("default")||Array.from(this.availableInputDevices.values())[0];return u&&this.setInputDevice(u.deviceId),!0},this._removeLostOutput=l=>{const u=this.speakerDevices.delete(l),f=this.ringtoneDevices.delete(l);return u||f},r=Object.assign({AudioContext:typeof AudioContext<"u"&&AudioContext,setSinkId:typeof HTMLAudioElement<"u"&&HTMLAudioElement.prototype.setSinkId},r),this._beforeSetInputDevice=r.beforeSetInputDevice||(()=>Promise.resolve()),this._updateUserOptions(r),this._audioProcessorEventObserver=r.audioProcessorEventObserver,this._mediaDevices=r.mediaDevices||navigator.mediaDevices,this._onActiveInputChanged=n,this._enumerateDevices=typeof r.enumerateDevices=="function"?r.enumerateDevices:this._mediaDevices&&this._mediaDevices.enumerateDevices.bind(this._mediaDevices);const i=!!(r.AudioContext||r.audioContext),s=!!this._enumerateDevices;r.enabledSounds&&(this._enabledSounds=r.enabledSounds);const a=typeof r.setSinkId=="function";this.isOutputSelectionSupported=s&&a,this.isVolumeSupported=i,this.isVolumeSupported&&(this._audioContext=r.audioContext||r.AudioContext&&new r.AudioContext,this._audioContext&&(this._inputVolumeAnalyser=this._audioContext.createAnalyser(),this._inputVolumeAnalyser.fftSize=32,this._inputVolumeAnalyser.smoothingTimeConstant=.3)),this.ringtoneDevices=new vk("ringtone",this.availableOutputDevices,t,this.isOutputSelectionSupported),this.speakerDevices=new vk("speaker",this.availableOutputDevices,t,this.isOutputSelectionSupported),this.addListener("newListener",l=>{l==="inputVolume"&&this._maybeStartPollingVolume()}),this.addListener("removeListener",l=>{l==="inputVolume"&&this._maybeStopPollingVolume()}),this.once("newListener",()=>{this.isOutputSelectionSupported||this._log.warn("Warning: This browser does not support audio output selection."),this.isVolumeSupported||this._log.warn("Warning: This browser does not support Twilio's volume indicator feature.")}),s&&this._initializeEnumeration(),navigator&&navigator.permissions&&typeof navigator.permissions.query=="function"?navigator.permissions.query({name:"microphone"}).then(l=>{if(l.state!=="granted"){const u=()=>{this._updateAvailableDevices(),this._stopMicrophonePermissionListener()};l.addEventListener("change",u),this._microphonePermissionStatus=l,this._onMicrophonePermissionStatusChanged=u}}).catch(l=>this._log.warn(`Warning: unable to listen for microphone permission changes. ${l}`)):this._log.warn("Warning: current browser does not support permissions API.")}_destroy(){this._stopDefaultInputDeviceStream(),this._stopSelectedInputDeviceStream(),this._destroyProcessedStream(),this._maybeStopPollingVolume(),this.removeAllListeners(),this._stopMicrophonePermissionListener(),this._unbind()}_getInputDevicePromise(){return this._inputDevicePromise}_maybeStartPollingVolume(){if(!this.isVolumeSupported||!this.inputStream||(this._updateVolumeSource(),this._isPollingInputVolume||!this._inputVolumeAnalyser))return;const t=this._inputVolumeAnalyser.frequencyBinCount,n=new Uint8Array(t);this._isPollingInputVolume=!0;const r=()=>{if(this._isPollingInputVolume){if(this._inputVolumeAnalyser){this._inputVolumeAnalyser.getByteFrequencyData(n);const i=mc(n);this.emit("inputVolume",i/255)}requestAnimationFrame(r)}};requestAnimationFrame(r)}_maybeStopPollingVolume(){this.isVolumeSupported&&(!this._isPollingInputVolume||this.inputStream&&this.listenerCount("inputVolume")||(this._inputVolumeSource&&(this._inputVolumeSource.disconnect(),delete this._inputVolumeSource),this._isPollingInputVolume=!1))}_openDefaultDeviceWithConstraints(t){return this._log.info("Opening default device with constraints",t),this._getUserMedia(t).then(n=>(this._log.info("Opened default device. Updating available devices."),this._updateAvailableDevices().catch(r=>{this._log.warn("Unable to updateAvailableDevices after gUM call",r)}),this._defaultInputDeviceStream=n,this._maybeCreateProcessedStream(n)))}_stopDefaultInputDeviceStream(){this._defaultInputDeviceStream&&(this._log.info("stopping default device stream"),this._defaultInputDeviceStream.getTracks().forEach(t=>t.stop()),this._defaultInputDeviceStream=null,this._destroyProcessedStream())}_unbind(){var t;!((t=this._mediaDevices)===null||t===void 0)&&t.removeEventListener&&this._mediaDevices.removeEventListener("devicechange",this._updateAvailableDevices)}_updateUserOptions(t){typeof t.enumerateDevices=="function"&&(this._enumerateDevices=t.enumerateDevices),typeof t.getUserMedia=="function"&&(this._getUserMedia=t.getUserMedia)}addProcessor(t){if(this._log.debug(".addProcessor"),this._processor)throw new wn("Adding multiple AudioProcessors is not supported at this time.");if(typeof t!="object"||t===null)throw new gt("Missing AudioProcessor argument.");if(typeof t.createProcessedStream!="function")throw new gt("Missing createProcessedStream() method.");if(typeof t.destroyProcessedStream!="function")throw new gt("Missing destroyProcessedStream() method.");return this._processor=t,this._audioProcessorEventObserver.emit("add"),this._restartStreams()}disconnect(t){return this._log.debug(".disconnect",t),this._maybeEnableSound(Se.SoundName.Disconnect,t)}incoming(t){return this._log.debug(".incoming",t),this._maybeEnableSound(Se.SoundName.Incoming,t)}outgoing(t){return this._log.debug(".outgoing",t),this._maybeEnableSound(Se.SoundName.Outgoing,t)}removeProcessor(t){if(this._log.debug(".removeProcessor"),typeof t!="object"||t===null)throw new gt("Missing AudioProcessor argument.");if(this._processor!==t)throw new gt("Cannot remove an AudioProcessor that has not been previously added.");return this._destroyProcessedStream(),this._processor=null,this._audioProcessorEventObserver.emit("remove"),this._restartStreams()}setAudioConstraints(t){return this._log.debug(".setAudioConstraints",t),this._audioConstraints=Object.assign({},t),delete this._audioConstraints.deviceId,this.inputDevice?this._setInputDevice(this.inputDevice.deviceId,!0):Promise.resolve()}setInputDevice(t){return this._log.debug(".setInputDevice",t),this._setInputDevice(t,!1)}unsetAudioConstraints(){return this._log.debug(".unsetAudioConstraints"),this._audioConstraints=null,this.inputDevice?this._setInputDevice(this.inputDevice.deviceId,!0):Promise.resolve()}unsetInputDevice(){return this._log.debug(".unsetInputDevice",this.inputDevice),this.inputDevice?(this._destroyProcessedStream(),this._onActiveInputChanged(null).then(()=>{this._replaceStream(null),this._inputDevice=null,this._maybeStopPollingVolume()})):Promise.resolve()}_destroyProcessedStream(){if(this._processor&&this._processedStream){this._log.info("destroying processed stream");const t=this._processedStream;this._processedStream.getTracks().forEach(n=>n.stop()),this._processedStream=null,this._processor.destroyProcessedStream(t),this._audioProcessorEventObserver.emit("destroy")}}_getUnknownDeviceIndex(t){const n=t.deviceId,r=t.kind;let i=this._unknownDeviceIndexes[r][n];return i||(i=Object.keys(this._unknownDeviceIndexes[r]).length+1,this._unknownDeviceIndexes[r][n]=i),i}_initializeEnumeration(){if(!this._mediaDevices||!this._enumerateDevices)throw new wn("Enumeration is not supported");this._mediaDevices.addEventListener&&this._mediaDevices.addEventListener("devicechange",this._updateAvailableDevices),this._updateAvailableDevices().then(()=>{this.isOutputSelectionSupported&&Promise.all([this.speakerDevices.set("default"),this.ringtoneDevices.set("default")]).catch(t=>{this._log.warn(`Warning: Unable to set audio output devices. ${t}`)})})}_maybeCreateProcessedStream(t){return this._processor?(this._log.info("Creating processed stream"),this._processor.createProcessedStream(t).then(n=>(this._processedStream=n,this._audioProcessorEventObserver.emit("create"),this._processedStream))):Promise.resolve(t)}_maybeEnableSound(t,n){return typeof n<"u"&&(this._enabledSounds[t]=n),this._enabledSounds[t]}_replaceStream(t){this._log.info("Replacing with new stream."),this._selectedInputDeviceStream&&(this._log.info("Old stream detected. Stopping tracks."),this._stopSelectedInputDeviceStream()),this._selectedInputDeviceStream=t}_restartStreams(){if(this.inputDevice&&this._selectedInputDeviceStream)return this._log.info("Restarting selected input device"),this._setInputDevice(this.inputDevice.deviceId,!0);if(this._defaultInputDeviceStream){const t=this.availableInputDevices.get("default")||Array.from(this.availableInputDevices.values())[0];return this._log.info("Restarting default input device, now becoming selected."),this._setInputDevice(t.deviceId,!0)}return Promise.resolve()}_setInputDevice(t,n){return Bn(this,void 0,void 0,function*(){const r=()=>Bn(this,void 0,void 0,function*(){if(yield this._beforeSetInputDevice(),typeof t!="string")return Promise.reject(new gt("Must specify the device to set"));const i=this.availableInputDevices.get(t);if(!i)return Promise.reject(new gt(`Device not found: ${t}`));if(this._log.info("Setting input device. ID: "+t),this._inputDevice&&this._inputDevice.deviceId===t&&this._selectedInputDeviceStream){if(!n)return Promise.resolve();this._log.info("Same track detected on setInputDevice, stopping old tracks."),this._stopSelectedInputDeviceStream()}this._stopDefaultInputDeviceStream();const s={audio:Object.assign({deviceId:{exact:t}},this.audioConstraints)};return this._log.info("setInputDevice: getting new tracks."),this._getUserMedia(s).then(a=>(this._destroyProcessedStream(),this._maybeCreateProcessedStream(a).then(l=>(this._log.info("setInputDevice: invoking _onActiveInputChanged."),this._onActiveInputChanged(l).then(()=>{this._replaceStream(a),this._inputDevice=i,this._maybeStartPollingVolume()})))))});return this._inputDevicePromise=r().finally(()=>{this._inputDevicePromise=null})})}_stopMicrophonePermissionListener(){var t;!((t=this._microphonePermissionStatus)===null||t===void 0)&&t.removeEventListener&&this._microphonePermissionStatus.removeEventListener("change",this._onMicrophonePermissionStatusChanged)}_stopSelectedInputDeviceStream(){this._selectedInputDeviceStream&&(this._log.info("Stopping selected device stream"),this._selectedInputDeviceStream.getTracks().forEach(t=>t.stop()))}_updateDevices(t,n,r){const i=t.map(f=>f.deviceId),s=Array.from(n.values()).map(f=>f.deviceId),a=[],l=m0(s,i);l.forEach(f=>{const d=n.get(f);d&&(n.delete(f),r(d)&&a.push(d))});let u=!1;if(t.forEach(f=>{const d=n.get(f.deviceId),p=this._wrapMediaDeviceInfo(f);(!d||d.label!==p.label)&&(n.set(f.deviceId,p),u=!0)}),u||l.length){const f="default",d=this.inputDevice&&this.inputDevice.deviceId===f,p=this._defaultInputDeviceStream&&this.availableInputDevices.get(f);(d||p)&&(this._log.warn("Calling getUserMedia after device change to ensure that the           tracks of the active device (default) have not gone stale."),setTimeout(()=>{this._setInputDevice(f,!0)},0)),this._log.debug("#deviceChange",a),this.emit("deviceChange",a)}}_updateVolumeSource(){if(!(!this.inputStream||!this._audioContext||!this._inputVolumeAnalyser)){this._inputVolumeSource&&this._inputVolumeSource.disconnect();try{this._inputVolumeSource=this._audioContext.createMediaStreamSource(this.inputStream),this._inputVolumeSource.connect(this._inputVolumeAnalyser)}catch(t){this._log.warn("Unable to update volume source",t),delete this._inputVolumeSource}}}_wrapMediaDeviceInfo(t){const n={deviceId:t.deviceId,groupId:t.groupId,kind:t.kind,label:t.label};if(!n.label)if(n.deviceId==="default")n.label="Default";else{const r=this._getUnknownDeviceIndex(t);n.label=`Unknown ${lW[n.kind]} Device ${r}`}return new sW(n)}}hw||(hw={});var cW=hw;class fW extends Yr.EventEmitter{constructor(){super(),this._log=new un("AudioProcessorEventObserver"),this._log.info("Creating AudioProcessorEventObserver instance"),this.on("enabled",()=>this._reEmitEvent("enabled")),this.on("add",()=>this._reEmitEvent("add")),this.on("remove",()=>this._reEmitEvent("remove")),this.on("create",()=>this._reEmitEvent("create-processed-stream")),this.on("destroy",()=>this._reEmitEvent("destroy-processed-stream"))}destroy(){this.removeAllListeners()}_reEmitEvent(t){this._log.info(`AudioProcessor:${t}`),this.emit("event",{name:t,group:"audio-processor"})}}const dW={dtmf0:[1360,960],dtmf1:[1230,720],dtmf2:[1360,720],dtmf3:[1480,720],dtmf4:[1230,790],dtmf5:[1360,790],dtmf6:[1480,790],dtmf7:[1230,870],dtmf8:[1360,870],dtmf9:[1480,870],dtmfh:[1480,960],dtmfs:[1230,960]};class hW{constructor(t){this._context=t,this._gainNodes=[],this._gainNodes=[this._context.createGain(),this._context.createGain()],this._gainNodes.forEach(n=>{n.connect(this._context.destination),n.gain.value=.1,this._gainNodes.push(n)})}cleanup(){this._gainNodes.forEach(t=>{t.disconnect()})}play(t){const n=dW[t];if(!n)throw new gt("Invalid DTMF sound name");[this._context.createOscillator(),this._context.createOscillator()].forEach((i,s)=>{i.type="sine",i.frequency.value=n[s],i.connect(this._gainNodes[s]),i.start(),i.stop(this._context.currentTime+.1),i.addEventListener("ended",()=>i.disconnect())})}}function pW(e,t,n){const r=JSON.stringify(t.body||{}),i=new Headers;t.headers=t.headers||[],Object.entries(t.headers).forEach(([s,a])=>i.append(s,a)),fetch(t.url,{body:r,headers:i,method:e}).then(s=>s.text(),n).then(s=>n(null,s),n)}const _0=pW;_0.get=function(t,n){return new this("GET",t,n)};_0.post=function(t,n){return new this("POST",t,n)};class zn extends Yr.EventEmitter{constructor(t,n,r){if(super(),!(this instanceof zn))return new zn(t,n,r);r=Object.assign({defaultPayload(){return{}}},r);let i=r.defaultPayload;typeof i!="function"&&(i=()=>Object.assign({},r.defaultPayload));let s=!0;const a=Object.assign({app_name:void 0,app_version:void 0},r.metadata);Object.defineProperties(this,{_defaultPayload:{value:i},_host:{value:r.host,writable:!0},_isEnabled:{get(){return s},set(l){s=l}},_log:{value:new un("EventPublisher")},_request:{value:r.request||_0,writable:!0},_token:{value:n,writable:!0},isEnabled:{enumerable:!0,get(){return s}},metadata:{enumerable:!0,get(){return a}},productName:{enumerable:!0,value:t},token:{enumerable:!0,get(){return this._token}}})}}zn.prototype._post=function(t,n,r,i,s,a,l){if(!this.isEnabled&&!l||!this._host)return this._log.debug("Publishing cancelled",JSON.stringify({isEnabled:this.isEnabled,force:l,host:this._host})),Promise.resolve();if(!a||(!a.parameters||!a.parameters.CallSid)&&!a.outboundConnectionId)return a?this._log.debug("Publishing cancelled. Missing connection info",JSON.stringify({outboundConnectionId:a.outboundConnectionId,parameters:a.parameters})):this._log.debug("Publishing cancelled. Missing connection object"),Promise.resolve();const u={group:r,level:n.toUpperCase(),name:i,payload:s&&s.forEach?s.slice(0):Object.assign(this._defaultPayload(a),s),payload_type:"application/json",private:!1,publisher:this.productName,timestamp:new Date().toISOString()};this.metadata&&(u.publisher_metadata=this.metadata),t==="EndpointEvents"&&this._log.debug("Publishing insights",JSON.stringify({endpointName:t,event:u,force:l,host:this._host}));const f={body:u,headers:{"Content-Type":"application/json","X-Twilio-Token":this.token},url:`https://${this._host}/v4/${t}`};return new Promise((d,p)=>{this._request.post(f,v=>{v?(this.emit("error",v),p(v)):d()})}).catch(d=>{this._log.error(`Unable to post ${r} ${i} event to Insights. Received error: ${d}`)})};zn.prototype.post=function(t,n,r,i,s,a){return this._post("EndpointEvents",t,n,r,i,s,a)};zn.prototype.debug=function(t,n,r,i){return this.post("debug",t,n,r,i)};zn.prototype.info=function(t,n,r,i){return this.post("info",t,n,r,i)};zn.prototype.warn=function(t,n,r,i){return this.post("warning",t,n,r,i)};zn.prototype.error=function(t,n,r,i){return this.post("error",t,n,r,i)};zn.prototype.postMetrics=function(t,n,r,i,s){return new Promise(a=>{const l=r.map(vW).map(u=>Object.assign(u,i));a(this._post("EndpointMetrics","info",t,n,l,s))})};zn.prototype.setHost=function(t){this._host=t};zn.prototype.setToken=function(t){this._token=t};zn.prototype.enable=function(){this._isEnabled=!0};zn.prototype.disable=function(){this._isEnabled=!1};function vW(e){return{audio_codec:e.codecName,audio_level_in:e.audioInputLevel,audio_level_out:e.audioOutputLevel,bytes_received:e.bytesReceived,bytes_sent:e.bytesSent,call_volume_input:e.inputVolume,call_volume_output:e.outputVolume,jitter:e.jitter,mos:e.mos&&Math.round(e.mos*100)/100,packets_lost:e.packetsLost,packets_lost_fraction:e.packetsLostFraction&&Math.round(e.packetsLostFraction*100)/100,packets_received:e.packetsReceived,rtt:e.rtt,timestamp:new Date(e.timestamp).toISOString(),total_bytes_received:e.totals.bytesReceived,total_bytes_sent:e.totals.bytesSent,total_packets_lost:e.totals.packetsLost,total_packets_received:e.totals.packetsReceived,total_packets_sent:e.totals.packetsSent}}const gk=32767,mk=typeof window<"u"?window.RTCStatsReport:void 0;function mi(e){if(!(this instanceof mi))return new mi(e);const t=this;Object.defineProperties(this,{_map:{value:e},size:{enumerable:!0,get(){return t._map.size}}}),this[Symbol.iterator]=e[Symbol.iterator]}mk&&(mi.prototype=Object.create(mk.prototype),mi.prototype.constructor=mi);["entries","forEach","get","has","keys","values"].forEach(e=>{mi.prototype[e]=function(...t){return this._map[e](...t)}});mi.fromArray=function(t){return new mi(t.reduce((n,r)=>(n.set(r.id,r),n),new Map))};mi.fromRTCStatsResponse=function(t){let n;const r=new Map,i=t.result().reduce((s,a)=>{const l=a.id;switch(a.type){case"googCertificate":s.set(l,SW(a));break;case"datachannel":s.set(l,bW(a));break;case"googCandidatePair":OA(a,"googActiveConnection")&&(n=l),s.set(l,wW(a));break;case"localcandidate":s.set(l,_k(a,!1));break;case"remotecandidate":s.set(l,_k(a,!0));break;case"ssrc":Ga(a,"packetsReceived")?s.set(`rtp-${l}`,yW(a)):s.set(`rtp-${l}`,_W(a)),s.set(`track-${l}`,mW(a)),s.set(`codec-${l}`,gW(a));break;case"googComponent":const u=yk(a);r.set(u.selectedCandidatePairId,l),s.set(l,yk(a));break}return s},new Map);if(n){const s=r.get(n);s&&(i.get(s).dtlsState="connected")}return new mi(i)};function yk(e){return{bytesReceived:void 0,bytesSent:void 0,dtlsState:void 0,id:e.id,localCertificateId:e.stat("localCertificateId"),remoteCertificateId:e.stat("remoteCertificateId"),rtcpTransportStatsId:void 0,selectedCandidatePairId:e.stat("selectedCandidatePairId"),timestamp:Date.parse(e.timestamp),type:"transport"}}function gW(e){return{channels:void 0,clockRate:void 0,id:e.id,implementation:void 0,mimeType:`${e.stat("mediaType")}/${e.stat("googCodecName")}`,payloadType:void 0,sdpFmtpLine:void 0,timestamp:Date.parse(e.timestamp),type:"codec"}}function mW(e){return{audioLevel:Ga(e,"audioOutputLevel")?vt(e,"audioOutputLevel")/gk:(vt(e,"audioInputLevel")||0)/gk,detached:void 0,echoReturnLoss:vw(e,"googEchoCancellationReturnLoss"),echoReturnLossEnhancement:vw(e,"googEchoCancellationReturnLossEnhancement"),ended:void 0,frameHeight:Ga(e,"googFrameHeightReceived")?vt(e,"googFrameHeightReceived"):vt(e,"googFrameHeightSent"),frameWidth:Ga(e,"googFrameWidthReceived")?vt(e,"googFrameWidthReceived"):vt(e,"googFrameWidthSent"),framesCorrupted:void 0,framesDecoded:vt(e,"framesDecoded"),framesDropped:void 0,framesPerSecond:void 0,framesReceived:void 0,framesSent:vt(e,"framesEncoded"),fullFramesLost:void 0,id:e.id,kind:e.stat("mediaType"),partialFramesLost:void 0,remoteSource:void 0,ssrcIds:void 0,timestamp:Date.parse(e.timestamp),trackIdentifier:e.stat("googTrackId"),type:"track"}}function AA(e,t){return{associateStatsId:void 0,codecId:`codec-${e.id}`,firCount:t?vt(e,"googFirsSent"):void 0,id:e.id,isRemote:void 0,mediaType:e.stat("mediaType"),nackCount:t?vt(e,"googNacksSent"):vt(e,"googNacksReceived"),pliCount:t?vt(e,"googPlisSent"):vt(e,"googPlisReceived"),qpSum:vt(e,"qpSum"),sliCount:void 0,ssrc:e.stat("ssrc"),timestamp:Date.parse(e.timestamp),trackId:`track-${e.id}`,transportId:e.stat("transportId")}}function yW(e){const t=AA(e,!0);return Object.assign(t,{burstDiscardCount:void 0,burstDiscardRate:void 0,burstLossCount:void 0,burstLossRate:void 0,burstPacketsDiscarded:void 0,burstPacketsLost:void 0,bytesReceived:vt(e,"bytesReceived"),fractionLost:void 0,framesDecoded:vt(e,"framesDecoded"),gapDiscardRate:void 0,gapLossRate:void 0,jitter:pw(e.stat("googJitterReceived")),packetsDiscarded:void 0,packetsLost:vt(e,"packetsLost"),packetsReceived:vt(e,"packetsReceived"),packetsRepaired:void 0,roundTripTime:pw(e.stat("googRtt")),type:"inbound-rtp"}),t}function _W(e){const t=AA(e,!1);return Object.assign(t,{bytesSent:vt(e,"bytesSent"),framesEncoded:vt(e,"framesEncoded"),packetsSent:vt(e,"packetsSent"),remoteTimestamp:void 0,targetBitrate:void 0,type:"outbound-rtp"}),t}function _k(e,t){return{candidateType:TW(e.stat("candidateType")),deleted:void 0,id:e.id,ip:e.stat("ipAddress"),isRemote:t,port:vt(e,"portNumber"),priority:vw(e,"priority"),protocol:e.stat("transport"),relayProtocol:void 0,timestamp:Date.parse(e.timestamp),transportId:void 0,type:t?"remote-candidate":"local-candidate",url:void 0}}function wW(e){return{availableIncomingBitrate:void 0,availableOutgoingBitrate:void 0,bytesReceived:vt(e,"bytesReceived"),bytesSent:vt(e,"bytesSent"),consentRequestsSent:vt(e,"consentRequestsSent"),currentRoundTripTime:pw(e.stat("googRtt")),id:e.id,lastPacketReceivedTimestamp:void 0,lastPacketSentTimestamp:void 0,localCandidateId:e.stat("localCandidateId"),nominated:void 0,priority:void 0,readable:void 0,remoteCandidateId:e.stat("remoteCandidateId"),requestsReceived:vt(e,"requestsReceived"),requestsSent:vt(e,"requestsSent"),responsesReceived:vt(e,"responsesReceived"),responsesSent:vt(e,"responsesSent"),retransmissionsReceived:void 0,retransmissionsSent:void 0,state:void 0,timestamp:Date.parse(e.timestamp),totalRoundTripTime:void 0,transportId:e.stat("googChannelId"),type:"candidate-pair",writable:OA(e,"googWritable")}}function SW(e){return{base64Certificate:e.stat("googDerBase64"),fingerprint:e.stat("googFingerprint"),fingerprintAlgorithm:e.stat("googFingerprintAlgorithm"),id:e.id,issuerCertificateId:e.stat("googIssuerId"),timestamp:Date.parse(e.timestamp),type:"certificate"}}function bW(e){return{bytesReceived:void 0,bytesSent:void 0,datachannelid:e.stat("datachannelid"),id:e.id,label:e.stat("label"),messagesReceived:void 0,messagesSent:void 0,protocol:e.stat("protocol"),state:e.stat("state"),timestamp:Date.parse(e.timestamp),transportId:e.stat("transportId"),type:"data-channel"}}function pw(e){return isNaN(e)||e===""?void 0:parseInt(e,10)/1e3}function TW(e){switch(e){case"peerreflexive":return"prflx";case"serverreflexive":return"srflx";case"host":case"relay":default:return e}}function vt(e,t){const n=e.stat(t);return Ga(e,t)?parseInt(n,10):void 0}function vw(e,t){const n=e.stat(t);return Ga(e,t)?parseFloat(n):void 0}function OA(e,t){const n=e.stat(t);return Ga(e,t)?n==="true"||n===!0:void 0}function Ga(e,t){const n=e.stat(t);return typeof n<"u"&&n!==""}const EW="PeerConnection is null",kW="WebRTC statistics are unsupported";function jo(e,t){return typeof e.get=="function"?e.get(t):e.find(n=>n.id===t)}function NA(e){if(!e)return Promise.reject(new gt(EW));if(typeof e.getStats!="function")return Promise.reject(new wn(kW));let t;try{t=e.getStats()}catch{t=new Promise(r=>e.getStats(r)).then(mi.fromRTCStatsResponse)}return t}function IW(e,t){return t=Object.assign({createRTCSample:xW},t),NA(e).then(t.createRTCSample)}function CW(e){return NA(e).then(t=>{const{candidatePairs:n,localCandidates:r,remoteCandidates:i,transport:s}=Array.from(t.values()).reduce((u,f)=>{switch(["candidatePairs","localCandidates","remoteCandidates"].forEach(d=>{u[d]||(u[d]=[])}),f.type){case"candidate-pair":u.candidatePairs.push(f);break;case"local-candidate":u.localCandidates.push(f);break;case"remote-candidate":u.remoteCandidates.push(f);break;case"transport":f.selectedCandidatePairId&&(u.transport=f);break}return u},{}),a=n.find(u=>u.selected||s&&u.id===s.selectedCandidatePairId);let l;return a&&(l={localCandidate:r.find(u=>u.id===a.localCandidateId),remoteCandidate:i.find(u=>u.id===a.remoteCandidateId)}),{iceCandidateStats:[...r,...i],selectedIceCandidatePairStats:l}})}function RW(){}function xW(e){let t=null;const n=new RW;let r;Array.from(e.values()).forEach(u=>{if(u.isRemote)return;const f=u.type.replace("-","");if(r=r||u.timestamp,u.remoteId){const d=jo(e,u.remoteId);d&&d.roundTripTime&&(n.rtt=d.roundTripTime*1e3)}switch(f){case"inboundrtp":n.timestamp=n.timestamp||u.timestamp,n.jitter=u.jitter*1e3,n.packetsLost=u.packetsLost,n.packetsReceived=u.packetsReceived,n.bytesReceived=u.bytesReceived;break;case"outboundrtp":if(n.timestamp=u.timestamp,n.packetsSent=u.packetsSent,n.bytesSent=u.bytesSent,u.codecId){const d=jo(e,u.codecId);n.codecName=d?d.mimeType&&d.mimeType.match(/(.*\/)?(.*)/)[2]:u.codecId}break;case"transport":t=u.id;break}}),n.timestamp||(n.timestamp=r);const i=jo(e,t);if(!i)return n;const s=jo(e,i.selectedCandidatePairId);if(!s)return n;const a=jo(e,s.localCandidateId),l=jo(e,s.remoteCandidateId);return n.rtt||(n.rtt=s&&s.currentRoundTripTime*1e3),Object.assign(n,{localAddress:a&&(a.address||a.ip),remoteAddress:l&&(l.address||l.ip)}),n}class Mt extends Yr.EventEmitter{constructor(t,n){super(),this._hasInsightsErrored=!1,this._log=new un("PreflightTest"),this._networkTiming={},this._options={codecPreferences:[ye.Codec.PCMU,ye.Codec.Opus],edge:"roaming",fakeMicInput:!1,logLevel:"error",signalingTimeoutMs:1e4},this._status=Mt.Status.Connecting,Object.assign(this._options,n),this._samples=[],this._warnings=[],this._startTime=Date.now(),this._initDevice(t,Object.assign(Object.assign({},this._options),{fileInputStream:this._options.fakeMicInput?this._getStreamFromFile():void 0}));const r=["codecPreferences","edge","fakeMicInput","logLevel","signalingTimeoutMs"],i=["audioContext","deviceFactory","fileInputStream","getRTCIceCandidateStatsReport","iceServers","rtcConfiguration"];if(typeof n=="object"){const s=Object.assign({},n);Object.keys(s).forEach(a=>{!r.includes(a)&&!i.includes(a)&&delete s[a],i.includes(a)&&(s[a]=!0)}),this._log.debug(".constructor",JSON.stringify(s))}}stop(){this._log.debug(".stop");const t=new xn.CallCancelledError;this._device?(this._device.once(Se.EventName.Unregistered,()=>this._onFailed(t)),this._device.destroy()):this._onFailed(t)}_emitWarning(t,n,r){const i={name:t,description:n};r&&(i.rtcWarning=r),this._warnings.push(i),this._log.debug(`#${Mt.Events.Warning}`,JSON.stringify(i)),this.emit(Mt.Events.Warning,i)}_getCallQuality(t){return t>4.2?Mt.CallQuality.Excellent:t>=4.1&&t<=4.2?Mt.CallQuality.Great:t>=3.7&&t<=4?Mt.CallQuality.Good:t>=3.1&&t<=3.6?Mt.CallQuality.Fair:Mt.CallQuality.Degraded}_getReport(){var t,n,r;const i=this._getRTCStats(),s={start:this._startTime};this._endTime&&(s.end=this._endTime,s.duration=this._endTime-this._startTime);const a={callSid:this._callSid,edge:this._edge,iceCandidateStats:(n=(t=this._rtcIceCandidateStatsReport)===null||t===void 0?void 0:t.iceCandidateStats)!==null&&n!==void 0?n:[],networkTiming:this._networkTiming,samples:this._samples,selectedEdge:this._options.edge,stats:i,testTiming:s,totals:this._getRTCSampleTotals(),warnings:this._warnings},l=(r=this._rtcIceCandidateStatsReport)===null||r===void 0?void 0:r.selectedIceCandidatePairStats;return l&&(a.selectedIceCandidatePairStats=l,a.isTurnRequired=l.localCandidate.candidateType==="relay"||l.remoteCandidate.candidateType==="relay"),i&&(a.callQuality=this._getCallQuality(i.mos.average)),a}_getRTCSampleTotals(){if(this._latestSample)return Object.assign({},this._latestSample.totals)}_getRTCStats(){const t=this._samples.findIndex(r=>typeof r.mos=="number"&&r.mos>0),n=t>=0?this._samples.slice(t):[];if(!(!n||!n.length))return["jitter","mos","rtt"].reduce((r,i)=>{const s=n.map(a=>a[i]);return Object.assign(Object.assign({},r),{[i]:{average:Number((s.reduce((a,l)=>a+l)/s.length).toPrecision(5)),max:Math.max(...s),min:Math.min(...s)}})},{})}_getStreamFromFile(){const t=this._options.audioContext;if(!t)throw new wn("Cannot fake input audio stream: AudioContext is not supported by this browser.");const n=new Audio(nW);n.addEventListener("canplaythrough",()=>n.play()),typeof n.setAttribute=="function"&&n.setAttribute("crossorigin","anonymous");const r=t.createMediaElementSource(n),i=t.createMediaStreamDestination();return r.connect(i),i.stream}_initDevice(t,n){try{this._device=new(n.deviceFactory||Se)(t,{chunderw:n.chunderw,codecPreferences:n.codecPreferences,edge:n.edge,eventgw:n.eventgw,fileInputStream:n.fileInputStream,logLevel:n.logLevel,preflight:!0}),this._device.once(Se.EventName.Registered,()=>{this._onDeviceRegistered()}),this._device.once(Se.EventName.Error,r=>{this._onDeviceError(r)}),this._device.register()}catch(r){setTimeout(()=>{this._onFailed(r)});return}this._signalingTimeoutTimer=setTimeout(()=>{this._onDeviceError(new Kr.ConnectionError("WebSocket Connection Timeout"))},n.signalingTimeoutMs)}_onDeviceError(t){this._device.destroy(),this._onFailed(t)}_onDeviceRegistered(){return Bn(this,void 0,void 0,function*(){if(clearTimeout(this._echoTimer),clearTimeout(this._signalingTimeoutTimer),this._call=yield this._device.connect({rtcConfiguration:this._options.rtcConfiguration}),this._networkTiming.signaling={start:Date.now()},this._setupCallHandlers(this._call),this._edge=this._device.edge||void 0,this._options.fakeMicInput){this._echoTimer=setTimeout(()=>this._device.disconnectAll(),rW);const n=this._device.audio;n&&(n.disconnect(!1),n.outgoing(!1))}this._call.once("disconnect",()=>{this._device.once(Se.EventName.Unregistered,()=>this._onUnregistered()),this._device.destroy()}),this._call._publisher.on("error",()=>{this._hasInsightsErrored||this._emitWarning("insights-connection-error","Received an error when attempting to connect to Insights gateway"),this._hasInsightsErrored=!0})})}_onFailed(t){clearTimeout(this._echoTimer),clearTimeout(this._signalingTimeoutTimer),this._releaseHandlers(),this._endTime=Date.now(),this._status=Mt.Status.Failed,this._log.debug(`#${Mt.Events.Failed}`,t),this.emit(Mt.Events.Failed,t)}_onUnregistered(){setTimeout(()=>{this._status!==Mt.Status.Failed&&(clearTimeout(this._echoTimer),clearTimeout(this._signalingTimeoutTimer),this._releaseHandlers(),this._endTime=Date.now(),this._status=Mt.Status.Completed,this._report=this._getReport(),this._log.debug(`#${Mt.Events.Completed}`,JSON.stringify(this._report)),this.emit(Mt.Events.Completed,this._report))},10)}_releaseHandlers(){[this._device,this._call].forEach(t=>{t&&t.eventNames().forEach(n=>t.removeAllListeners(n))})}_setupCallHandlers(t){this._options.fakeMicInput&&t.once("volume",()=>{t._mediaHandler.outputs.forEach(n=>n.audio.muted=!0)}),t.on("warning",(n,r)=>{this._emitWarning(n,"Received an RTCWarning. See .rtcWarning for the RTCWarning",r)}),t.once("accept",()=>{this._callSid=t._mediaHandler.callSid,this._status=Mt.Status.Connected,this._log.debug(`#${Mt.Events.Connected}`),this.emit(Mt.Events.Connected)}),t.on("sample",n=>Bn(this,void 0,void 0,function*(){this._latestSample||(this._rtcIceCandidateStatsReport=yield(this._options.getRTCIceCandidateStatsReport||CW)(t._mediaHandler.version.pc)),this._latestSample=n,this._samples.push(n),this._log.debug(`#${Mt.Events.Sample}`,JSON.stringify(n)),this.emit(Mt.Events.Sample,n)})),[{reportLabel:"peerConnection",type:"pcconnection"},{reportLabel:"ice",type:"iceconnection"},{reportLabel:"dtls",type:"dtlstransport"},{reportLabel:"signaling",type:"signaling"}].forEach(({type:n,reportLabel:r})=>{const i=`on${n}statechange`,s=t._mediaHandler[i];t._mediaHandler[i]=a=>{const l=this._networkTiming[r]=this._networkTiming[r]||{start:0};a==="connecting"||a==="checking"?l.start=Date.now():(a==="connected"||a==="stable")&&!l.duration&&(l.end=Date.now(),l.duration=l.end-l.start),s(a)}})}get callSid(){return this._callSid}get endTime(){return this._endTime}get latestSample(){return this._latestSample}get report(){return this._report}get startTime(){return this._startTime}get status(){return this._status}}(function(e){(function(t){t.Excellent="excellent",t.Great="great",t.Good="good",t.Fair="fair",t.Degraded="degraded"})(e.CallQuality||(e.CallQuality={})),function(t){t.Completed="completed",t.Connected="connected",t.Failed="failed",t.Sample="sample",t.Warning="warning"}(e.Events||(e.Events={})),function(t){t.Connecting="connecting",t.Connected="connected",t.Completed="completed",t.Failed="failed"}(e.Status||(e.Status={}))})(Mt||(Mt={}));const Vo=globalThis.WebSocket,$W=1e4,PW=5e3,wk=15e3,AW=15e3,OW=1/0,NW=1e3,MW=2e4;var mr;(function(e){e.Connecting="connecting",e.Closed="closed",e.Open="open"})(mr||(mr={}));class ev extends Yr.EventEmitter{constructor(t,n={}){super(),this.state=mr.Closed,this._backoffStartTime={preferred:null,primary:null},this._connectedUri=null,this._log=new un("WSTransport"),this._shouldFallback=!1,this._uriIndex=0,this._moveUriIndex=()=>{this._uriIndex++,this._uriIndex>=this._uris.length&&(this._uriIndex=0)},this._onSocketClose=r=>{if(this._log.error(`Received websocket close event code: ${r.code}. Reason: ${r.reason}`),r.code===1006||r.code===1015){this.emit("error",{code:31005,message:r.reason||"Websocket connection to Twilio's signaling servers were unexpectedly ended. If this is happening consistently, there may be an issue resolving the hostname provided. If a region or an edge is being specified in Device setup, ensure it is valid.",twilioError:new Kr.ConnectionError});const i=this.state===mr.Open||this._previousState===mr.Open;(this._shouldFallback||!i)&&this._moveUriIndex(),this._shouldFallback=!0}this._closeSocket()},this._onSocketError=r=>{this._log.error(`WebSocket received error: ${r.message}`),this.emit("error",{code:31e3,message:r.message||"WSTransport socket error",twilioError:new Kr.ConnectionDisconnected})},this._onSocketMessage=r=>{if(this._setHeartbeatTimeout(),this._socket&&r.data===`
`){this._socket.send(`
`),this._log.debug("heartbeat");return}r&&typeof r.data=="string"&&this._log.debug(`Received: ${r.data}`),this.emit("message",r)},this._onSocketOpen=()=>{this._log.info("WebSocket opened successfully."),this._timeOpened=Date.now(),this._shouldFallback=!1,this._setState(mr.Open),clearTimeout(this._connectTimeout),this._resetBackoffs(),this._setHeartbeatTimeout(),this.emit("open")},this._options=Object.assign(Object.assign({},ev.defaultConstructorOptions),n),this._uris=t,this._backoff=this._setupBackoffs()}close(){this._log.info("WSTransport.close() called..."),this._close()}open(){if(this._log.info("WSTransport.open() called..."),this._socket&&(this._socket.readyState===Vo.CONNECTING||this._socket.readyState===Vo.OPEN)){this._log.info("WebSocket already open.");return}this._preferredUri?this._connect(this._preferredUri):this._connect(this._uris[this._uriIndex])}send(t){if(this._log.debug(`Sending: ${t}`),!this._socket||this._socket.readyState!==Vo.OPEN)return this._log.debug("Cannot send message. WebSocket is not open."),!1;try{this._socket.send(t)}catch(n){return this._log.error("Error while sending message:",n.message),this._closeSocket(),!1}return!0}updatePreferredURI(t){this._preferredUri=t}updateURIs(t){typeof t=="string"&&(t=[t]),this._uris=t,this._uriIndex=0}_close(){this._setState(mr.Closed),this._closeSocket()}_closeSocket(){if(clearTimeout(this._connectTimeout),clearTimeout(this._heartbeatTimeout),this._log.info("Closing and cleaning up WebSocket..."),!this._socket){this._log.info("No WebSocket to clean up.");return}this._socket.removeEventListener("close",this._onSocketClose),this._socket.removeEventListener("error",this._onSocketError),this._socket.removeEventListener("message",this._onSocketMessage),this._socket.removeEventListener("open",this._onSocketOpen),(this._socket.readyState===Vo.CONNECTING||this._socket.readyState===Vo.OPEN)&&this._socket.close(),this._timeOpened&&Date.now()-this._timeOpened>$W&&this._resetBackoffs(),this.state!==mr.Closed&&this._performBackoff(),delete this._socket,this.emit("close")}_connect(t,n){this._log.info(typeof n=="number"?`Attempting to reconnect (retry #${n})...`:"Attempting to connect..."),this._closeSocket(),this._setState(mr.Connecting),this._connectedUri=t;try{this._socket=new this._options.WebSocket(this._connectedUri)}catch(r){this._log.error("Could not connect to endpoint:",r.message),this._close(),this.emit("error",{code:31e3,message:r.message||`Could not connect to ${this._connectedUri}`,twilioError:new Kr.ConnectionDisconnected});return}this._socket.addEventListener("close",this._onSocketClose),this._socket.addEventListener("error",this._onSocketError),this._socket.addEventListener("message",this._onSocketMessage),this._socket.addEventListener("open",this._onSocketOpen),delete this._timeOpened,this._connectTimeout=setTimeout(()=>{this._log.info("WebSocket connection attempt timed out."),this._moveUriIndex(),this._closeSocket()},this._options.connectTimeoutMs)}_performBackoff(){this._preferredUri?(this._log.info("Preferred URI set; backing off."),this._backoff.preferred.backoff()):(this._log.info("Preferred URI not set; backing off."),this._backoff.primary.backoff())}_resetBackoffs(){this._backoff.preferred.reset(),this._backoff.primary.reset(),this._backoffStartTime.preferred=null,this._backoffStartTime.primary=null}_setHeartbeatTimeout(){clearTimeout(this._heartbeatTimeout),this._heartbeatTimeout=setTimeout(()=>{this._log.info(`No messages received in ${wk/1e3} seconds. Reconnecting...`),this._shouldFallback=!0,this._closeSocket()},wk)}_setState(t){this._previousState=this.state,this.state=t}_setupBackoffs(){const t={factor:2,jitter:.4,max:this._options.maxPreferredDelayMs,min:100};this._log.info("Initializing preferred transport backoff using config: ",t);const n=new ow(t);n.on("backoff",(s,a)=>{if(this.state===mr.Closed){this._log.info("Preferred backoff initiated but transport state is closed; not attempting a connection.");return}this._log.info(`Will attempt to reconnect Websocket to preferred URI in ${a}ms`),s===0&&(this._backoffStartTime.preferred=Date.now(),this._log.info(`Preferred backoff start; ${this._backoffStartTime.preferred}`))}),n.on("ready",(s,a)=>{if(this.state===mr.Closed){this._log.info("Preferred backoff ready but transport state is closed; not attempting a connection.");return}if(this._backoffStartTime.preferred===null){this._log.info("Preferred backoff start time invalid; not attempting a connection.");return}if(Date.now()-this._backoffStartTime.preferred>this._options.maxPreferredDurationMs){this._log.info("Max preferred backoff attempt time exceeded; falling back to primary backoff."),this._preferredUri=null,this._backoff.primary.backoff();return}if(typeof this._preferredUri!="string"){this._log.info("Preferred URI cleared; falling back to primary backoff."),this._preferredUri=null,this._backoff.primary.backoff();return}this._connect(this._preferredUri,s+1)});const r={factor:2,jitter:.4,max:this._options.maxPrimaryDelayMs,min:this._uris&&this._uris.length>1?Math.floor(Math.random()*4001)+1e3:100};this._log.info("Initializing primary transport backoff using config: ",r);const i=new ow(r);return i.on("backoff",(s,a)=>{if(this.state===mr.Closed){this._log.info("Primary backoff initiated but transport state is closed; not attempting a connection.");return}this._log.info(`Will attempt to reconnect WebSocket in ${a}ms`),s===0&&(this._backoffStartTime.primary=Date.now(),this._log.info(`Primary backoff start; ${this._backoffStartTime.primary}`))}),i.on("ready",(s,a)=>{if(this.state===mr.Closed){this._log.info("Primary backoff ready but transport state is closed; not attempting a connection.");return}if(this._backoffStartTime.primary===null){this._log.info("Primary backoff start time invalid; not attempting a connection.");return}if(Date.now()-this._backoffStartTime.primary>this._options.maxPrimaryDurationMs){this._log.info("Max primary backoff attempt time exceeded; not attempting a connection.");return}this._connect(this._uris[this._uriIndex],s+1)}),{preferred:n,primary:i}}get uri(){return this._connectedUri}}ev.defaultConstructorOptions={WebSocket:Vo,connectTimeoutMs:PW,maxPreferredDelayMs:NW,maxPreferredDurationMs:AW,maxPrimaryDelayMs:MW,maxPrimaryDurationMs:OW};const LW="1.6",DW=30;class Rt extends Yr.EventEmitter{constructor(t,n,r){if(super(),!(this instanceof Rt))return new Rt(t,n,r);const i={TransportFactory:ev};r=r||{};for(const a in i)a in r||(r[a]=i[a]);this.options=r,this.token=t||"",this.status="disconnected",this.gateway=null,this.region=null,this._messageQueue=[],this._preferredUri=null,this._uris=n,this._handleTransportClose=this._handleTransportClose.bind(this),this._handleTransportError=this._handleTransportError.bind(this),this._handleTransportMessage=this._handleTransportMessage.bind(this),this._handleTransportOpen=this._handleTransportOpen.bind(this),this._log=new un("PStream"),this.on("error",()=>{this._log.warn("Unexpected error handled in pstream")});const s=this;return this.addListener("ready",()=>{s.status="ready"}),this.addListener("offline",()=>{s.status="offline"}),this.addListener("close",()=>{s._log.info('Received "close" from server. Destroying PStream...'),s._destroy()}),this.transport=new this.options.TransportFactory(this._uris,{backoffMaxMs:this.options.backoffMaxMs,maxPreferredDurationMs:this.options.maxPreferredDurationMs}),Object.defineProperties(this,{uri:{enumerable:!0,get(){return this.transport.uri}}}),this.transport.on("close",this._handleTransportClose),this.transport.on("error",this._handleTransportError),this.transport.on("message",this._handleTransportMessage),this.transport.on("open",this._handleTransportOpen),this.transport.open(),this}}Rt.prototype._handleTransportClose=function(){this.emit("transportClose"),this.status!=="disconnected"&&(this.status!=="offline"&&this.emit("offline",this),this.status="disconnected")};Rt.prototype._handleTransportError=function(e){if(!e){this.emit("error",{error:{code:31e3,message:"Websocket closed without a provided reason",twilioError:new Kr.ConnectionDisconnected}});return}this.emit("error",typeof e.code<"u"?{error:e}:e)};Rt.prototype._handleTransportMessage=function(e){if(!e||!e.data||typeof e.data!="string")return;const{type:t,payload:n={}}=JSON.parse(e.data);this.gateway=n.gateway||this.gateway,this.region=n.region||this.region,t==="error"&&n.error&&(n.error.twilioError=new Kr.ConnectionError),this.emit(t,n)};Rt.prototype._handleTransportOpen=function(){this.status="connected",this.setToken(this.token),this.emit("transportOpen"),this._messageQueue.splice(0,this._messageQueue.length).forEach(t=>this._publish(...t))};Rt.toString=()=>"[Twilio.PStream class]";Rt.prototype.toString=()=>"[Twilio.PStream instance]";Rt.prototype.setToken=function(e){this._log.info("Setting token and publishing listen"),this.token=e;let t=0;const n=this.options.maxPreferredDurationMs;this._log.info(`maxPreferredDurationMs:${n}`),typeof n=="number"&&n>=0&&(t=Math.min(Math.ceil(n/1e3),DW)),this._log.info(`reconnectTimeout:${t}`);const r={browserinfo:FW(),reconnectTimeout:t,token:e};this._publish("listen",r)};Rt.prototype.sendMessage=function(e,t,n="application/json",r,i){const s={callsid:e,content:t,contenttype:n,messagetype:r,voiceeventsid:i};this._publish("message",s,!0)};Rt.prototype.register=function(e){const t={media:e};this._publish("register",t,!0)};Rt.prototype.invite=function(e,t,n){const r={callsid:t,sdp:e,twilio:n?{params:n}:{}};this._publish("invite",r,!0)};Rt.prototype.reconnect=function(e,t,n){const r={callsid:t,reconnect:n,sdp:e,twilio:{}};this._publish("invite",r,!0)};Rt.prototype.answer=function(e,t){this._publish("answer",{sdp:e,callsid:t},!0)};Rt.prototype.dtmf=function(e,t){this._publish("dtmf",{callsid:e,dtmf:t},!0)};Rt.prototype.hangup=function(e,t){const n=t?{callsid:e,message:t}:{callsid:e};this._publish("hangup",n,!0)};Rt.prototype.reject=function(e){this._publish("reject",{callsid:e},!0)};Rt.prototype.reinvite=function(e,t){this._publish("reinvite",{sdp:e,callsid:t},!1)};Rt.prototype._destroy=function(){this.transport.removeListener("close",this._handleTransportClose),this.transport.removeListener("error",this._handleTransportError),this.transport.removeListener("message",this._handleTransportMessage),this.transport.removeListener("open",this._handleTransportOpen),this.transport.close(),this.emit("offline",this)};Rt.prototype.destroy=function(){return this._log.info("PStream.destroy() called..."),this._destroy(),this};Rt.prototype.updatePreferredURI=function(e){this._preferredUri=e,this.transport.updatePreferredURI(e)};Rt.prototype.updateURIs=function(e){this._uris=e,this.transport.updateURIs(this._uris)};Rt.prototype.publish=function(e,t){return this._publish(e,t,!0)};Rt.prototype._publish=function(e,t,n){const r=JSON.stringify({payload:t,type:e,version:LW});!!this.transport.send(r)||(this.emit("error",{error:{code:31009,message:"No transport available to send or receive messages",twilioError:new xn.TransportError}}),n&&this._messageQueue.push([e,t,!0]))};function FW(){const e=typeof navigator<"u"?navigator:{};return{browser:{platform:e.platform||"unknown",userAgent:e.userAgent||"unknown"},p:"browser",plugin:"rtc",v:gu}}var jt;(function(e){e.Sydney="sydney",e.SaoPaulo="sao-paulo",e.Dublin="dublin",e.Frankfurt="frankfurt",e.Tokyo="tokyo",e.Singapore="singapore",e.Ashburn="ashburn",e.Umatilla="umatilla",e.Roaming="roaming",e.AshburnIx="ashburn-ix",e.SanJoseIx="san-jose-ix",e.LondonIx="london-ix",e.FrankfurtIx="frankfurt-ix",e.SingaporeIx="singapore-ix",e.SydneyIx="sydney-ix",e.TokyoIx="tokyo-ix"})(jt||(jt={}));var ft;(function(e){e.Au1="au1",e.Au1Ix="au1-ix",e.Br1="br1",e.De1="de1",e.De1Ix="de1-ix",e.Gll="gll",e.Ie1="ie1",e.Ie1Ix="ie1-ix",e.Ie1Tnx="ie1-tnx",e.Jp1="jp1",e.Jp1Ix="jp1-ix",e.Sg1="sg1",e.Sg1Ix="sg1-ix",e.Sg1Tnx="sg1-tnx",e.Us1="us1",e.Us1Ix="us1-ix",e.Us1Tnx="us1-tnx",e.Us2="us2",e.Us2Ix="us2-ix",e.Us2Tnx="us2-tnx"})(ft||(ft={}));const jW={ASIAPAC_SINGAPORE:ft.Sg1,ASIAPAC_SYDNEY:ft.Au1,ASIAPAC_TOKYO:ft.Jp1,EU_FRANKFURT:ft.De1,EU_IRELAND:ft.Ie1,SOUTH_AMERICA_SAO_PAULO:ft.Br1,US_EAST_VIRGINIA:ft.Us1,US_WEST_OREGON:ft.Us2},UW={[ft.Au1]:jt.Sydney,[ft.Br1]:jt.SaoPaulo,[ft.Ie1]:jt.Dublin,[ft.De1]:jt.Frankfurt,[ft.Jp1]:jt.Tokyo,[ft.Sg1]:jt.Singapore,[ft.Us1]:jt.Ashburn,[ft.Us2]:jt.Umatilla,[ft.Gll]:jt.Roaming,[ft.Us1Ix]:jt.AshburnIx,[ft.Us2Ix]:jt.SanJoseIx,[ft.Ie1Ix]:jt.LondonIx,[ft.De1Ix]:jt.FrankfurtIx,[ft.Sg1Ix]:jt.SingaporeIx,[ft.Au1Ix]:jt.SydneyIx,[ft.Jp1Ix]:jt.TokyoIx,[ft.Us1Tnx]:jt.AshburnIx,[ft.Us2Tnx]:jt.AshburnIx,[ft.Ie1Tnx]:jt.LondonIx,[ft.Sg1Tnx]:jt.SingaporeIx},BW=jt.Roaming,WW="eventgw.twilio.com";function Sk(e){return`voice-js.${e}.twilio.com`}function bk(e){return e?`eventgw.${e}.twilio.com`:WW}function Tk(e){return`wss://${e}/signal`}function Ek(e){if(e&&typeof e!="string"&&!Array.isArray(e))throw new gt("If `edge` is provided, it must be of type `string` or an array of strings.");let t;return e?t=(Array.isArray(e)?e:[e]).map(r=>Sk(r)):t=[Sk(BW)],t}function zW(e){return jW[e]||null}const kk={0:"PCMU",8:"PCMA"},HW=111,VW=51e4,qW=6e3;function GW(e){const[,t,n]=/a=rtpmap:(\d+) (\S+)/m.exec(e)||[null,"",""],r=new RegExp(`a=fmtp:${t} (\\S+)`,"m"),[,i]=r.exec(e)||[null,""];return{codecName:n,codecParams:i}}function KW(e){return y0(window,window.navigator)?e.split(`
`).filter(t=>t.indexOf("a=ice-lite")===-1).join(`
`):e}function MA(e,t){if(typeof t!="number"||t<qW||t>VW)return e;const n=/a=rtpmap:(\d+) opus/m.exec(e),r=n&&n.length?n[1]:HW,i=new RegExp(`a=fmtp:${r}`);return e.split(`
`).map(a=>i.test(a)?a+`;maxaveragebitrate=${t}`:a).join(`
`)}function LA(e,t){const n=QW(e);return[e.split(`\r
m=`)[0]].concat(n.map(i=>{if(!/^m=(audio|video)/.test(i))return i;const s=i.match(/^m=(audio|video)/)[1],a=JW(i),l=YW(a,t),u=XW(l,i),f=a.get("pcma")||[],d=a.get("pcmu")||[];return(s==="audio"?new Set(f.concat(d)):new Set).has(l[0])?u.replace(/\r\nb=(AS|TIAS):([0-9]+)/g,""):u})).join(`\r
`)}function QW(e,t,n){return e.replace(/\r\n\r\n$/,`\r
`).split(`\r
m=`).slice(1).map(r=>`m=${r}`).filter(r=>{const i=new RegExp("m=.*","gm"),s=new RegExp("a=.*","gm");return i.test(r)&&s.test(r)})}function JW(e){return Array.from(ZW(e)).reduce((t,n)=>{const r=n[0],i=n[1],s=t.get(i)||[];return t.set(i,s.concat(r))},new Map)}function YW(e,t){t=t.map(s=>s.toLowerCase());const n=fw(t,s=>e.get(s)||[]),r=m0(Array.from(e.keys()),t),i=fw(r,s=>e.get(s));return n.concat(i)}function XW(e,t){const n=t.split(`\r
`);let r=n[0];const i=n.slice(1);return r=r.replace(/([0-9]+\s?)+$/,e.join(" ")),[r].concat(i).join(`\r
`)}function ZW(e){return ez(e).reduce((t,n)=>{const r=new RegExp(`a=rtpmap:${n} ([^/]+)`),i=e.match(r),s=i?i[1].toLowerCase():kk[n]?kk[n].toLowerCase():"";return t.set(n,s)},new Map)}function ez(e){const n=e.split(`\r
`)[0].match(/([0-9]+)/g);return n?n.slice(1).map(r=>parseInt(r,10)):[]}function Er(e){if(this.log=new un("RTCPC"),typeof window>"u"){this.log.info("No RTCPeerConnection implementation available. The window object was not found.");return}e&&e.RTCPeerConnection?this.RTCPeerConnection=e.RTCPeerConnection:typeof window.RTCPeerConnection=="function"?this.RTCPeerConnection=window.RTCPeerConnection:typeof window.webkitRTCPeerConnection=="function"?this.RTCPeerConnection=webkitRTCPeerConnection:typeof window.mozRTCPeerConnection=="function"?(this.RTCPeerConnection=mozRTCPeerConnection,window.RTCSessionDescription=mozRTCSessionDescription,window.RTCIceCandidate=mozRTCIceCandidate):this.log.info("No RTCPeerConnection implementation available")}Er.prototype.create=function(e){this.pc=new this.RTCPeerConnection(e)};Er.prototype.createModernConstraints=e=>{if(typeof e>"u")return null;const t=Object.assign({},e);return typeof webkitRTCPeerConnection<"u"&&!Zp()?(t.mandatory={},typeof e.audio<"u"&&(t.mandatory.OfferToReceiveAudio=e.audio),typeof e.video<"u"&&(t.mandatory.OfferToReceiveVideo=e.video)):(typeof e.audio<"u"&&(t.offerToReceiveAudio=e.audio),typeof e.video<"u"&&(t.offerToReceiveVideo=e.video)),delete t.audio,delete t.video,t};Er.prototype.createOffer=function(e,t,n,r){return t=this.createModernConstraints(t),FA(this.pc.createOffer,this.pc)(t).then(i=>{if(!this.pc)return Promise.resolve();const s=MA(i.sdp,e);return tv(this.pc.setLocalDescription,this.pc)(new RTCSessionDescription({sdp:s,type:"offer"}))}).then(n,r)};Er.prototype.createAnswer=function(e,t,n,r){return t=this.createModernConstraints(t),FA(this.pc.createAnswer,this.pc)(t).then(i=>{if(!this.pc)return Promise.resolve();const s=MA(i.sdp,e);return tv(this.pc.setLocalDescription,this.pc)(new RTCSessionDescription({sdp:s,type:"answer"}))}).then(n,r)};Er.prototype.processSDP=function(e,t,n,r,i,s){n=LA(n,t);const a=new RTCSessionDescription({sdp:n,type:"offer"});return tv(this.pc.setRemoteDescription,this.pc)(a).then(()=>{this.createAnswer(e,r,i,s)})};Er.prototype.getSDP=function(){return this.pc.localDescription.sdp};Er.prototype.processAnswer=function(e,t,n,r){return this.pc?(t=LA(t,e),tv(this.pc.setRemoteDescription,this.pc)(new RTCSessionDescription({sdp:t,type:"answer"})).then(n,r)):Promise.resolve()};Er.test=()=>{if(typeof navigator=="object"){const e=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.getUserMedia;if(Zp(navigator))return!1;if(e&&typeof window.RTCPeerConnection=="function")return!0;if(e&&typeof window.webkitRTCPeerConnection=="function")return!0;if(e&&typeof window.mozRTCPeerConnection=="function"){try{if(typeof new window.mozRTCPeerConnection().getLocalStreams!="function")return!1}catch{return!1}return!0}else if(typeof RTCIceGatherer<"u")return!0}return!1};function DA(e,t,n,r){return function(){const i=Array.prototype.slice.call(arguments);return new Promise(s=>{const a=e.apply(t,i);if(!r){s(a);return}if(typeof a=="object"&&typeof a.then=="function")s(a);else throw new Error}).catch(()=>new Promise((s,a)=>{e.apply(t,n?[s,a].concat(i):i.concat([s,a]))}))}}function FA(e,t){return DA(e,t,!0,!0)}function tv(e,t){return DA(e,t,!1,!1)}const tz=15e3,nz="none",rz="timeout",iz="new",Ik=50;function Ae(e,t,n){if(!e||!t)throw new gt("Audiohelper, and pstream are required arguments");if(!(this instanceof Ae))return new Ae(e,t,n);this._log=new un("PeerConnection");function r(){this._log.warn("Unexpected noop call in peerconnection")}this.onaudio=r,this.onopen=r,this.onerror=r,this.onclose=r,this.ondisconnected=r,this.onfailed=r,this.onconnected=r,this.onreconnected=r,this.onsignalingstatechange=r,this.ondtlstransportstatechange=r,this.onicegatheringfailure=r,this.onicegatheringstatechange=r,this.oniceconnectionstatechange=r,this.onpcconnectionstatechange=r,this.onicecandidate=r,this.onselectedcandidatepairchange=r,this.onvolume=r,this.version=null,this.pstream=t,this.stream=null,this.sinkIds=new Set(["default"]),this.outputs=new Map,this.status="connecting",this.callSid=null,this.isMuted=!1;const i=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);return this._isSinkSupported=!!i&&typeof HTMLAudioElement<"u"&&HTMLAudioElement.prototype.setSinkId,this._audioContext=i&&e._audioContext,this._audioHelper=e,this._hasIceCandidates=!1,this._hasIceGatheringFailures=!1,this._iceGatheringTimeoutId=null,this._masterAudio=null,this._masterAudioDeviceId=null,this._mediaStreamSource=null,this._dtmfSender=null,this._dtmfSenderUnsupported=!1,this._callEvents=[],this._nextTimeToPublish=Date.now(),this._onAnswerOrRinging=r,this._onHangup=r,this._remoteStream=null,this._shouldManageStream=!0,this._iceState=iz,this.options=n=n||{},this.navigator=n.navigator||(typeof navigator<"u"?navigator:null),this.util=n.util||PA,this.codecPreferences=n.codecPreferences,this}Ae.prototype.uri=function(){return this._uri};Ae.prototype.openDefaultDeviceWithConstraints=function(e){return this._audioHelper._openDefaultDeviceWithConstraints(e).then(this._setInputTracksFromStream.bind(this,!1))};Ae.prototype.setInputTracksFromStream=function(e){const t=this;return this._setInputTracksFromStream(!0,e).then(()=>{t._shouldManageStream=!1})};Ae.prototype._createAnalyser=(e,t)=>{t=Object.assign({fftSize:32,smoothingTimeConstant:.3},t);const n=e.createAnalyser();for(const r in t)n[r]=t[r];return n};Ae.prototype._setVolumeHandler=function(e){this.onvolume=e};Ae.prototype._startPollingVolume=function(){if(!this._audioContext||!this.stream||!this._remoteStream)return;const e=this._audioContext,n=(this._inputAnalyser=this._createAnalyser(e)).frequencyBinCount,r=new Uint8Array(n);this._inputAnalyser2=this._createAnalyser(e,{maxDecibels:0,minDecibels:-127,smoothingTimeConstant:0});const s=(this._outputAnalyser=this._createAnalyser(e)).frequencyBinCount,a=new Uint8Array(s);this._outputAnalyser2=this._createAnalyser(e,{maxDecibels:0,minDecibels:-127,smoothingTimeConstant:0}),this._updateInputStreamSource(this.stream),this._updateOutputStreamSource(this._remoteStream);const l=this;setTimeout(function u(){if(l._audioContext){if(l.status==="closed"){l._inputAnalyser.disconnect(),l._outputAnalyser.disconnect(),l._inputAnalyser2.disconnect(),l._outputAnalyser2.disconnect();return}}else return;l._inputAnalyser.getByteFrequencyData(r);const f=l.util.average(r);l._inputAnalyser2.getByteFrequencyData(r);const d=l.util.average(r);l._outputAnalyser.getByteFrequencyData(a);const p=l.util.average(a);l._outputAnalyser2.getByteFrequencyData(a);const v=l.util.average(a);l.onvolume(f/255,p/255,d,v),setTimeout(u,Ik)},Ik)};Ae.prototype._stopStream=function(){this._shouldManageStream&&this._audioHelper._stopDefaultInputDeviceStream()};Ae.prototype._updateInputStreamSource=function(e){this._inputStreamSource&&this._inputStreamSource.disconnect();try{this._inputStreamSource=this._audioContext.createMediaStreamSource(e),this._inputStreamSource.connect(this._inputAnalyser),this._inputStreamSource.connect(this._inputAnalyser2)}catch(t){this._log.warn("Unable to update input MediaStreamSource",t),this._inputStreamSource=null}};Ae.prototype._updateOutputStreamSource=function(e){this._outputStreamSource&&this._outputStreamSource.disconnect();try{this._outputStreamSource=this._audioContext.createMediaStreamSource(e),this._outputStreamSource.connect(this._outputAnalyser),this._outputStreamSource.connect(this._outputAnalyser2)}catch(t){this._log.warn("Unable to update output MediaStreamSource",t),this._outputStreamSource=null}};Ae.prototype._setInputTracksFromStream=function(e,t){if(!t)return Promise.reject(new gt("Can not set input stream to null while in a call"));if(!t.getAudioTracks().length)return Promise.reject(new gt("Supplied input stream has no audio tracks"));const n=this.stream,r=()=>(this.mute(this.isMuted),Promise.resolve(this.stream));if(!n)this.stream=e?Ck(t,this.options.MediaStream):t;else return this._shouldManageStream&&this._stopStream(),this._sender||(this._sender=this.version.pc.getSenders()[0]),this._sender.replaceTrack(t.getAudioTracks()[0]).then(()=>(this._updateInputStreamSource(t),this.stream=e?Ck(t,this.options.MediaStream):t,r()));return r()};Ae.prototype._onInputDevicesChanged=function(){if(!this.stream)return;this.stream.getAudioTracks().every(t=>t.readyState==="ended")&&this._shouldManageStream&&this.openDefaultDeviceWithConstraints({audio:!0})};Ae.prototype._onIceGatheringFailure=function(e){this._hasIceGatheringFailures=!0,this.onicegatheringfailure(e)};Ae.prototype._onMediaConnectionStateChange=function(e){const t=this._iceState;if(t===e||e!=="connected"&&e!=="disconnected"&&e!=="failed")return;this._iceState=e;let n;switch(e){case"connected":t==="disconnected"||t==="failed"?(n="ICE liveliness check succeeded. Connection with Twilio restored",this._log.info(n),this.onreconnected(n)):(n="Media connection established.",this._log.info(n),this.onconnected(n)),this._stopIceGatheringTimeout(),this._hasIceGatheringFailures=!1;break;case"disconnected":n="ICE liveliness check failed. May be having trouble connecting to Twilio",this._log.warn(n),this.ondisconnected(n);break;case"failed":n="Connection with Twilio was interrupted.",this._log.warn(n),this.onfailed(n);break}};Ae.prototype._setSinkIds=function(e){return this._isSinkSupported?(this.sinkIds=new Set(e.forEach?e:[e]),this.version?this._updateAudioOutputs():Promise.resolve()):Promise.reject(new wn("Audio output selection is not supported by this browser"))};Ae.prototype._startIceGatheringTimeout=function(){this._stopIceGatheringTimeout(),this._iceGatheringTimeoutId=setTimeout(()=>{this._onIceGatheringFailure(rz)},tz)};Ae.prototype._stopIceGatheringTimeout=function(){clearInterval(this._iceGatheringTimeoutId)};Ae.prototype._updateAudioOutputs=function(){const t=Array.from(this.sinkIds).filter(function(s){return!this.outputs.has(s)},this),n=Array.from(this.outputs.keys()).filter(function(s){return!this.sinkIds.has(s)},this),r=this,i=t.map(this._createAudioOutput,this);return Promise.all(i).then(()=>Promise.all(n.map(r._removeAudioOutput,r)))};Ae.prototype._createAudio=function(t){const n=new Audio(t);return this.onaudio(n),n};Ae.prototype._createAudioOutput=function(t){let n=null;this._mediaStreamSource&&(n=this._audioContext.createMediaStreamDestination(),this._mediaStreamSource.connect(n));const r=this._createAudio();w0(r,n&&n.stream?n.stream:this.pcStream);const i=this;return r.setSinkId(t).then(()=>r.play()).then(()=>{i.outputs.set(t,{audio:r,dest:n})})};Ae.prototype._removeAudioOutputs=function(){return this._masterAudio&&typeof this._masterAudioDeviceId<"u"&&(this._disableOutput(this,this._masterAudioDeviceId),this.outputs.delete(this._masterAudioDeviceId),this._masterAudioDeviceId=null,this._masterAudio.paused||this._masterAudio.pause(),typeof this._masterAudio.srcObject<"u"?this._masterAudio.srcObject=null:this._masterAudio.src="",this._masterAudio=null),Array.from(this.outputs.keys()).map(this._removeAudioOutput,this)};Ae.prototype._disableOutput=function(t,n){const r=t.outputs.get(n);r&&(r.audio&&(r.audio.pause(),r.audio.src=""),r.dest&&r.dest.disconnect())};Ae.prototype._reassignMasterOutput=function(t,n){const r=t.outputs.get(n);t.outputs.delete(n);const i=this,s=Array.from(t.outputs.keys())[0],a=typeof s=="string"?s:"default";return r.audio.setSinkId(a).then(()=>{i._disableOutput(t,a),t.outputs.set(a,r),t._masterAudioDeviceId=a}).catch(function(){t.outputs.set(n,r),i._log.info("Could not reassign master output. Attempted to roll back.")})};Ae.prototype._removeAudioOutput=function(t){return this._masterAudioDeviceId===t?this._reassignMasterOutput(this,t):(this._disableOutput(this,t),this.outputs.delete(t),Promise.resolve())};Ae.prototype._onAddTrack=function(t,n){const r=t._masterAudio=this._createAudio();w0(r,n),r.play();const i=Array.from(t.outputs.keys())[0],s=typeof i=="string"?i:"default";t._masterAudioDeviceId=s,t.outputs.set(s,{audio:r});try{t._mediaStreamSource=t._audioContext.createMediaStreamSource(n)}catch(a){this._log.warn("Unable to create a MediaStreamSource from onAddTrack",a),this._mediaStreamSource=null}t.pcStream=n,t._updateAudioOutputs()};Ae.prototype._fallbackOnAddTrack=function(t,n){const r=document&&document.createElement("audio");r.autoplay=!0,w0(r,n)||t._log.info("Error attaching stream to element."),t.outputs.set("default",{audio:r})};Ae.prototype._setEncodingParameters=function(e){if(!e||!this._sender||typeof this._sender.getParameters!="function"||typeof this._sender.setParameters!="function")return;const t=this._sender.getParameters();!t.priority&&!(t.encodings&&t.encodings.length)||(t.priority="high",t.encodings&&t.encodings.length&&t.encodings.forEach(n=>{n.priority="high",n.networkPriority="high"}),this._sender.setParameters(t))};Ae.prototype._setupPeerConnection=function(e){const t=this,n=new(this.options.rtcpcFactory||Er)({RTCPeerConnection:this.options.RTCPeerConnection});n.create(e),sz(n.pc,this.stream);const r=RTCRtpReceiver.getCapabilities("audio").codecs;this._log.debug("sorting codecs",r,this.codecPreferences);const i=$A(r,this.codecPreferences),[s]=n.pc.getTransceivers();this._log.debug("setting sorted codecs",i),s.setCodecPreferences(i);const a="ontrack"in n.pc?"ontrack":"onaddstream";return n.pc[a]=l=>{const u=t._remoteStream=l.stream||l.streams[0];typeof n.pc.getSenders=="function"&&(this._sender=n.pc.getSenders()[0]),t._isSinkSupported?t._onAddTrack(t,u):t._fallbackOnAddTrack(t,u),t._startPollingVolume()},n};Ae.prototype._maybeSetIceAggressiveNomination=function(e){return this.options.forceAggressiveIceNomination?KW(e):e};Ae.prototype._setupChannel=function(){const e=this.version.pc;this.version.pc.onopen=()=>{this.status="open",this.onopen()},this.version.pc.onstatechange=()=>{this.version.pc&&this.version.pc.readyState==="stable"&&(this.status="open",this.onopen())},this.version.pc.onsignalingstatechange=()=>{const t=e.signalingState;this._log.info(`signalingState is "${t}"`),this.version.pc&&this.version.pc.signalingState==="stable"&&(this.status="open",this.onopen()),this.onsignalingstatechange(e.signalingState)},e.onconnectionstatechange=t=>{let n=e.connectionState;if(!n&&t&&t.target){const r=t.target;n=r.connectionState||r.connectionState_,this._log.info(`pc.connectionState not detected. Using target PC. State=${n}`)}n?this._log.info(`pc.connectionState is "${n}"`):this._log.warn(`onconnectionstatechange detected but state is "${n}"`),this.onpcconnectionstatechange(n),this._onMediaConnectionStateChange(n)},e.onicecandidate=t=>{const{candidate:n}=t;n&&(this._hasIceCandidates=!0,this.onicecandidate(n),this._setupRTCIceTransportListener()),this._log.info(`ICE Candidate: ${JSON.stringify(n)}`)},e.onicegatheringstatechange=()=>{const t=e.iceGatheringState;t==="gathering"?this._startIceGatheringTimeout():t==="complete"&&(this._stopIceGatheringTimeout(),this._hasIceCandidates||this._onIceGatheringFailure(nz),this._hasIceCandidates&&this._hasIceGatheringFailures&&this._startIceGatheringTimeout()),this._log.info(`pc.iceGatheringState is "${e.iceGatheringState}"`),this.onicegatheringstatechange(t)},e.oniceconnectionstatechange=()=>{this._log.info(`pc.iceConnectionState is "${e.iceConnectionState}"`),this.oniceconnectionstatechange(e.iceConnectionState),this._onMediaConnectionStateChange(e.iceConnectionState)}};Ae.prototype._initializeMediaStream=function(e){return this.status==="open"?!1:this.pstream.status==="disconnected"?(this.onerror({info:{code:31e3,message:"Cannot establish connection. Client is disconnected",twilioError:new Kr.ConnectionDisconnected}}),this.close(),!1):(this.version=this._setupPeerConnection(e),this._setupChannel(),!0)};Ae.prototype._removeReconnectionListeners=function(){this.pstream&&(this.pstream.removeListener("answer",this._onAnswerOrRinging),this.pstream.removeListener("hangup",this._onHangup))};Ae.prototype._setupRTCDtlsTransportListener=function(){const e=this.getRTCDtlsTransport();if(!e||e.onstatechange)return;const t=()=>{this._log.info(`dtlsTransportState is "${e.state}"`),this.ondtlstransportstatechange(e.state)};t(),e.onstatechange=t};Ae.prototype._setupRTCIceTransportListener=function(){const e=this._getRTCIceTransport();!e||e.onselectedcandidatepairchange||(e.onselectedcandidatepairchange=()=>this.onselectedcandidatepairchange(e.getSelectedCandidatePair()))};Ae.prototype.iceRestart=function(){this._log.info("Attempting to restart ICE..."),this._hasIceCandidates=!1,this.version.createOffer(this.options.maxAverageBitrate,{iceRestart:!0}).then(()=>{this._removeReconnectionListeners(),this._onAnswerOrRinging=e=>{if(this._removeReconnectionListeners(),!e.sdp||this.version.pc.signalingState!=="have-local-offer"){const n=`Invalid state or param during ICE Restart:hasSdp:${!!e.sdp}, signalingState:${this.version.pc.signalingState}`;this._log.warn(n);return}const t=this._maybeSetIceAggressiveNomination(e.sdp);this._answerSdp=t,this.status!=="closed"&&this.version.processAnswer(this.codecPreferences,t,null,n=>{const r=n&&n.message?n.message:n;this._log.error(`Failed to process answer during ICE Restart. Error: ${r}`)})},this._onHangup=()=>{this._log.info("Received hangup during ICE Restart"),this._removeReconnectionListeners()},this.pstream.on("answer",this._onAnswerOrRinging),this.pstream.on("hangup",this._onHangup),this.pstream.reinvite(this.version.getSDP(),this.callSid)}).catch(e=>{const t=e&&e.message?e.message:e;this._log.error(`Failed to createOffer during ICE Restart. Error: ${t}`),this.onfailed(t)})};Ae.prototype.makeOutgoingCall=function(e,t,n,r,i){if(!this._initializeMediaStream(r))return;const s=this;this.callSid=n;function a(){s.options&&s._setEncodingParameters(s.options.dscp),i(s.version.pc)}function l(d){const p=d.message||d;s.onerror({info:{code:31e3,message:`Error processing answer: ${p}`,twilioError:new Fi.ClientRemoteDescFailed}})}this._onAnswerOrRinging=d=>{if(!d.sdp)return;const p=this._maybeSetIceAggressiveNomination(d.sdp);s._answerSdp=p,s.status!=="closed"&&s.version.processAnswer(this.codecPreferences,p,a,l),s.pstream.removeListener("answer",s._onAnswerOrRinging),s.pstream.removeListener("ringing",s._onAnswerOrRinging)},this.pstream.on("answer",this._onAnswerOrRinging),this.pstream.on("ringing",this._onAnswerOrRinging);function u(){s.status!=="closed"&&(t?s.pstream.reconnect(s.version.getSDP(),s.callSid,t):s.pstream.invite(s.version.getSDP(),s.callSid,e),s._setupRTCDtlsTransportListener())}function f(d){const p=d.message||d;s.onerror({info:{code:31e3,message:`Error creating the offer: ${p}`,twilioError:new Fi.ClientLocalDescFailed}})}this.version.createOffer(this.options.maxAverageBitrate,{audio:!0},u,f)};Ae.prototype.answerIncomingCall=function(e,t,n,r){if(!this._initializeMediaStream(n))return;t=this._maybeSetIceAggressiveNomination(t),this._answerSdp=t.replace(/^a=setup:actpass$/gm,"a=setup:passive"),this.callSid=e;const i=this;function s(){i.status!=="closed"&&(i.pstream.answer(i.version.getSDP(),e),i.options&&i._setEncodingParameters(i.options.dscp),r(i.version.pc),i._setupRTCDtlsTransportListener())}function a(l){const u=l.message||l;i.onerror({info:{code:31e3,message:`Error creating the answer: ${u}`,twilioError:new Fi.ClientRemoteDescFailed}})}this.version.processSDP(this.options.maxAverageBitrate,this.codecPreferences,t,{audio:!0},s,a)};Ae.prototype.close=function(){this.version&&this.version.pc&&(this.version.pc.signalingState!=="closed"&&this.version.pc.close(),this.version.pc=null),this.stream&&(this.mute(!1),this._stopStream()),this.stream=null,this._removeReconnectionListeners(),this._stopIceGatheringTimeout(),Promise.all(this._removeAudioOutputs()).catch(()=>{}),this._mediaStreamSource&&this._mediaStreamSource.disconnect(),this._inputAnalyser&&this._inputAnalyser.disconnect(),this._outputAnalyser&&this._outputAnalyser.disconnect(),this._inputAnalyser2&&this._inputAnalyser2.disconnect(),this._outputAnalyser2&&this._outputAnalyser2.disconnect(),this.status="closed",this.onclose()};Ae.prototype.reject=function(e){this.callSid=e};Ae.prototype.ignore=function(e){this.callSid=e};Ae.prototype.mute=function(e){this.isMuted=e,this.stream&&(this._sender&&this._sender.track?this._sender.track.enabled=!e:(typeof this.stream.getAudioTracks=="function"?this.stream.getAudioTracks():this.stream.audioTracks).forEach(n=>{n.enabled=!e}))};Ae.prototype.getOrCreateDTMFSender=function(){if(this._dtmfSender||this._dtmfSenderUnsupported)return this._dtmfSender||null;const t=this,n=this.version.pc;if(!n)return this._log.warn("No RTCPeerConnection available to call createDTMFSender on"),null;if(typeof n.getSenders=="function"&&(typeof RTCDTMFSender=="function"||typeof RTCDtmfSender=="function")){const r=n.getSenders().find(i=>i.dtmf);if(r)return this._log.info("Using RTCRtpSender#dtmf"),this._dtmfSender=r.dtmf,this._dtmfSender}if(typeof n.createDTMFSender=="function"&&typeof n.getLocalStreams=="function"){const r=n.getLocalStreams().map(i=>{const s=t._getAudioTracks(i);return s&&s[0]})[0];return r?(this._log.info("Creating RTCDTMFSender"),this._dtmfSender=n.createDTMFSender(r),this._dtmfSender):(this._log.warn("No local audio MediaStreamTrack available on the RTCPeerConnection to pass to createDTMFSender"),null)}return this._log.info("RTCPeerConnection does not support RTCDTMFSender"),this._dtmfSenderUnsupported=!0,null};Ae.prototype.getRTCDtlsTransport=function(){const t=this.version&&this.version.pc&&typeof this.version.pc.getSenders=="function"&&this.version.pc.getSenders()[0];return t&&t.transport||null};Ae.prototype._canStopMediaStreamTrack=()=>typeof MediaStreamTrack.prototype.stop=="function";Ae.prototype._getAudioTracks=e=>typeof e.getAudioTracks=="function"?e.getAudioTracks():e.audioTracks;Ae.prototype._getRTCIceTransport=function(){const t=this.getRTCDtlsTransport();return t&&t.iceTransport||null};Ae.protocol=Er.test()?new Er:null;function sz(e,t){typeof e.addTrack=="function"?t.getAudioTracks().forEach(n=>{e.addTrack(n,t)}):e.addStream(t)}function Ck(e,t){let n;return t?n=new t:typeof MediaStream<"u"?n=new MediaStream:n=new webkitMediaStream,e.getAudioTracks().forEach(n.addTrack,n),n}function w0(e,t){if(typeof e.srcObject<"u")e.srcObject=t;else if(typeof e.mozSrcObject<"u")e.mozSrcObject=t;else if(typeof e.src<"u"){const n=e.options.window||window;e.src=(n.URL||n.webkitURL).createObjectURL(t)}else return!1;return!0}Ae.enabled=Er.test();function az(){return Er.test()}function oz(){return typeof RTCIceGatherer<"u"?"ORTC":"WebRTC"}function uz(e,t){return t=t||{},t.util=t.util||PA,t.navigator=t.navigator||(typeof navigator<"u"?navigator:null),new Promise((n,r)=>{if(!t.navigator)throw new wn("getUserMedia is not supported");switch("function"){case typeof(t.navigator.mediaDevices&&t.navigator.mediaDevices.getUserMedia):return n(t.navigator.mediaDevices.getUserMedia(e));case typeof t.navigator.webkitGetUserMedia:return t.navigator.webkitGetUserMedia(e,n,r);case typeof t.navigator.mozGetUserMedia:return t.navigator.mozGetUserMedia(e,n,r);case typeof t.navigator.getUserMedia:return t.navigator.getUserMedia(e,n,r);default:throw new wn("getUserMedia is not supported")}}).catch(n=>{throw t.util.isFirefox()&&n.name==="NotReadableError"?new wn(`Firefox does not currently support opening multiple audio input trackssimultaneously, even across different tabs.
Related Bugzilla thread: https://bugzilla.mozilla.org/show_bug.cgi?id=1299324`):n})}function lz(){if(typeof window!="object")throw new wn("This platform is not supported.");const{crypto:e}=window;if(typeof e!="object")throw new wn("The `crypto` module is not available on this platform.");if(typeof e.getRandomValues!="function")throw new wn("The function `crypto.getRandomValues` is not available on this platform.");if(typeof window.Uint8Array!="function")throw new wn("The `Uint8Array` module is not available on this platform.");return e.getRandomValues(new window.Uint8Array(16)).reduce((t,n)=>`${t}${n.toString(16).padStart(2,"0")}`,"")}function gw(){return`KX${lz()}`}let cz=class{constructor(){this._promise=new Promise((t,n)=>{this._resolve=t,this._reject=n})}get promise(){return this._promise}reject(t){this._reject(t)}resolve(t){this._resolve(t)}};class fz{constructor(){this._operations=[]}enqueue(t){const n=!!this._operations.length,r=new cz;return this._operations.push({deferred:r,callback:t}),n||this._processQueue(),r.promise}_processQueue(){return Bn(this,void 0,void 0,function*(){for(;this._operations.length;){const{deferred:t,callback:n}=this._operations[0];let r,i,s;try{r=yield n(),s=!0}catch(a){i=a}this._operations.shift(),s?t.resolve(r):t.reject(i)}})}}class dz{get reject(){return this._reject}get resolve(){return this._resolve}constructor(){this.promise=new Promise((t,n)=>{this._resolve=t,this._reject=n})}}class hz{constructor(){this._eventEmitter=new Yr.EventEmitter}addEventListener(t,n){return this._eventEmitter.addListener(t,n)}dispatchEvent(t,...n){return this._eventEmitter.emit(t,...n)}removeEventListener(t,n){return this._eventEmitter.removeListener(t,n)}}class Rk extends hz{get destination(){return this._destination}get loop(){return this._loop}set loop(t){const n=this;function r(){n._audioNode.removeEventListener("ended",r),n.pause()}!t&&this.loop&&!this.paused&&this._audioNode.addEventListener("ended",r),this._loop=t}get muted(){return this._gainNode.gain.value===0}set muted(t){this._gainNode.gain.value=t?0:1}get paused(){return this._audioNode===null}get src(){return this._src}set src(t){this._load(t)}get srcObject(){return this._audioElement.srcObject}set srcObject(t){this._audioElement.srcObject=t}get sinkId(){return this._sinkId}constructor(t,n={},r={}){super(),this._audioNode=null,this._loop=!1,this._pendingPlayDeferreds=[],this._sinkId="default",this._src="",typeof n!="string"&&(r=n),this._audioContext=t,this._audioElement=new(r.AudioFactory||Audio),this._bufferPromise=this._createPlayDeferred().promise,this._destination=this._audioContext.destination,this._gainNode=this._audioContext.createGain(),this._gainNode.connect(this._destination),this._XMLHttpRequest=r.XMLHttpRequestFactory||XMLHttpRequest,this.addEventListener("canplaythrough",()=>{this._resolvePlayDeferreds()}),typeof n=="string"&&(this.src=n)}load(){this._load(this._src)}pause(){this.paused||(this._audioElement.pause(),this._audioNode.stop(),this._audioNode.disconnect(this._gainNode),this._audioNode=null,this._rejectPlayDeferreds(new Error("The play() request was interrupted by a call to pause().")))}play(){return Bn(this,void 0,void 0,function*(){if(!this.paused){if(yield this._bufferPromise,!this.paused)return;throw new Error("The play() request was interrupted by a call to pause().")}this._audioNode=this._audioContext.createBufferSource(),this._audioNode.loop=this.loop,this._audioNode.addEventListener("ended",()=>{this._audioNode&&this._audioNode.loop||this.dispatchEvent("ended")});const t=yield this._bufferPromise;if(this.paused)throw new Error("The play() request was interrupted by a call to pause().");if(this._audioNode.buffer=t,this._audioNode.connect(this._gainNode),this._audioNode.start(),this._audioElement.srcObject)return this._audioElement.play()})}setSinkId(t){return Bn(this,void 0,void 0,function*(){if(typeof this._audioElement.setSinkId!="function")throw new Error("This browser does not support setSinkId.");if(t!==this.sinkId){if(t==="default"){this.paused||this._gainNode.disconnect(this._destination),this._audioElement.srcObject=null,this._destination=this._audioContext.destination,this._gainNode.connect(this._destination),this._sinkId=t;return}yield this._audioElement.setSinkId(t),!this._audioElement.srcObject&&(this._gainNode.disconnect(this._audioContext.destination),this._destination=this._audioContext.createMediaStreamDestination(),this._audioElement.srcObject=this._destination.stream,this._sinkId=t,this._gainNode.connect(this._destination))}})}_createPlayDeferred(){const t=new dz;return this._pendingPlayDeferreds.push(t),t}_load(t){this._src&&this._src!==t&&this.pause(),this._src=t,this._bufferPromise=new Promise((n,r)=>Bn(this,void 0,void 0,function*(){if(!t)return this._createPlayDeferred().promise;const i=yield pz(this._audioContext,this._XMLHttpRequest,t);this.dispatchEvent("canplaythrough"),n(i)}))}_rejectPlayDeferreds(t){const n=this._pendingPlayDeferreds;n.splice(0,n.length).forEach(({reject:r})=>r(t))}_resolvePlayDeferreds(t){const n=this._pendingPlayDeferreds;n.splice(0,n.length).forEach(({resolve:r})=>r(t))}}function pz(e,t,n){return Bn(this,void 0,void 0,function*(){const r=new t;r.open("GET",n,!0),r.responseType="arraybuffer";const i=yield new Promise(s=>{r.addEventListener("load",s),r.send()});try{return e.decodeAudioData(i.target.response)}catch{return new Promise(a=>{e.decodeAudioData(i.target.response,a)})}})}function ps(e,t,n){if(!(this instanceof ps))return new ps(e,t,n);if(!e||!t)throw new gt("name and url are required arguments");n=Object.assign({AudioFactory:typeof Audio<"u"?Audio:null,maxDuration:0,shouldLoop:!1},n),n.AudioPlayer=n.audioContext?Rk.bind(Rk,n.audioContext):n.AudioFactory,Object.defineProperties(this,{_Audio:{value:n.AudioPlayer},_activeEls:{value:new Map},_isSinkSupported:{value:n.AudioFactory!==null&&typeof n.AudioFactory.prototype.setSinkId=="function"},_maxDuration:{value:n.maxDuration},_maxDurationTimeout:{value:null,writable:!0},_operations:{value:new fz},_playPromise:{value:null,writable:!0},_shouldLoop:{value:n.shouldLoop},_sinkIds:{value:["default"]},isPlaying:{enumerable:!0,get(){return!!this._playPromise}},name:{enumerable:!0,value:e},url:{enumerable:!0,value:t}}),this._Audio&&this._play(!0,!1)}function jA(e){e&&(e.pause(),e.src="",e.srcObject=null,e.load())}ps.prototype._playAudioElement=function(t,n,r){const i=this._activeEls.get(t);if(!i)throw new gt(`sinkId: "${t}" doesn't have an audio element`);return i.muted=!!n,i.loop=!!r,i.play().then(()=>i).catch(s=>{throw jA(i),this._activeEls.delete(t),s})};ps.prototype._play=function(t,n){this.isPlaying&&this._stop(),this._maxDuration>0&&(this._maxDurationTimeout=setTimeout(this._stop.bind(this),this._maxDuration)),n=typeof n=="boolean"?n:this._shouldLoop;const r=this;return this._playPromise=Promise.all(this._sinkIds.map(function(a){if(!r._Audio)return Promise.resolve();let l=r._activeEls.get(a);return l?r._playAudioElement(a,t,n):(l=new r._Audio(r.url),typeof l.setAttribute=="function"&&l.setAttribute("crossorigin","anonymous"),new Promise(u=>{l.addEventListener("canplaythrough",u)}).then(()=>(r._isSinkSupported?l.setSinkId(a):Promise.resolve()).then(function(){return r._activeEls.set(a,l),r._playPromise?r._playAudioElement(a,t,n):Promise.resolve()})))}))};ps.prototype._stop=function(){this._activeEls.forEach((t,n)=>{this._sinkIds.includes(n)?(t.pause(),t.currentTime=0):(jA(t),this._activeEls.delete(n))}),clearTimeout(this._maxDurationTimeout),this._playPromise=null,this._maxDurationTimeout=null};ps.prototype.setSinkIds=function(t){this._isSinkSupported&&(t=t.forEach?t:[t],[].splice.apply(this._sinkIds,[0,this._sinkIds.length].concat(t)))};ps.prototype.stop=function(){this._operations.enqueue(()=>(this._stop(),Promise.resolve()))};ps.prototype.play=function(){return this._operations.enqueue(()=>this._play())};const vz=3e4,gz=2e3,mz="twilio-js-sdk",yz='Parameter "token" must be of type "string".';class Se extends Yr.EventEmitter{static get audioContext(){return Se._audioContext}static get extension(){const t=typeof document<"u"?document.createElement("audio"):{canPlayType:!1};let n;try{n=t.canPlayType&&!!t.canPlayType("audio/mpeg").replace(/no/,"")}catch{n=!1}let r;try{r=t.canPlayType&&!!t.canPlayType("audio/ogg;codecs='vorbis'").replace(/no/,"")}catch{r=!1}return r&&!n?"ogg":"mp3"}static get isSupported(){return az()}static get packageName(){return CA}static runPreflight(t,n){return new Mt(t,Object.assign({audioContext:Se._getOrCreateAudioContext()},n))}static toString(){return"[Twilio.Device class]"}static get version(){return gu}static _getOrCreateAudioContext(){return Se._audioContext||(typeof AudioContext<"u"?Se._audioContext=new AudioContext:typeof webkitAudioContext<"u"&&(Se._audioContext=new webkitAudioContext)),Se._audioContext}constructor(t,n={}){if(super(),this._activeCall=null,this._audio=null,this._audioProcessorEventObserver=null,this._callInputStream=null,this._calls=[],this._callSinkIds=["default"],this._chunderURIs=[],this._defaultOptions={allowIncomingWhileBusy:!1,closeProtection:!1,codecPreferences:[ye.Codec.PCMU,ye.Codec.Opus],dscp:!0,enableImprovedSignalingErrorPrecision:!1,forceAggressiveIceNomination:!1,logLevel:no.levels.ERROR,maxCallSignalingTimeoutMs:0,preflight:!1,sounds:{},tokenRefreshMs:1e4,voiceEventSidGenerator:gw},this._edge=null,this._home=null,this._identity=null,this._log=new un("Device"),this._makeCallPromise=null,this._options={},this._preferredURI=null,this._publisher=null,this._region=null,this._regTimer=null,this._shouldReRegister=!1,this._soundcache=new Map,this._state=Se.State.Unregistered,this._stateEventMapping={[Se.State.Destroyed]:Se.EventName.Destroyed,[Se.State.Unregistered]:Se.EventName.Unregistered,[Se.State.Registering]:Se.EventName.Registering,[Se.State.Registered]:Se.EventName.Registered},this._stream=null,this._streamConnectedPromise=null,this._tokenWillExpireTimeout=null,this._createDefaultPayload=s=>{const a={aggressive_nomination:this._options.forceAggressiveIceNomination,browser_extension:this._isBrowserExtension,dscp:!!this._options.dscp,ice_restart_enabled:!0,platform:oz(),sdk_version:gu};function l(u,f){f&&(a[u]=f)}if(s){const u=s.parameters.CallSid;l("call_sid",/^TJ/.test(u)?void 0:u),l("temp_call_sid",s.outboundConnectionId),l("audio_codec",s.codec),a.direction=s.direction}return l("gateway",this._stream&&this._stream.gateway),l("region",this._stream&&this._stream.region),a},this._onSignalingClose=()=>{this._stream=null,this._streamConnectedPromise=null},this._onSignalingConnected=s=>{var a;const l=zW(s.region);if(this._edge=s.edge||UW[l]||s.region,this._region=l||s.region,this._home=s.home,(a=this._publisher)===null||a===void 0||a.setHost(bk(s.home)),s.token&&(this._identity=s.token.identity,typeof s.token.ttl=="number"&&typeof this._options.tokenRefreshMs=="number")){const f=s.token.ttl*1e3,d=Math.max(0,f-this._options.tokenRefreshMs);this._tokenWillExpireTimeout=setTimeout(()=>{this._log.debug("#tokenWillExpire"),this.emit("tokenWillExpire",this),this._tokenWillExpireTimeout&&(clearTimeout(this._tokenWillExpireTimeout),this._tokenWillExpireTimeout=null)},d)}const u=this._getChunderws()||Ek(this._edge);if(u.length>0){const[f]=u;this._preferredURI=Tk(f)}else this._log.warn("Could not parse a preferred URI from the stream#connected event.");this._shouldReRegister&&this.register()},this._onSignalingError=s=>{if(typeof s!="object"){this._log.warn("Invalid signaling error payload",s);return}const{error:a,callsid:l,voiceeventsid:u}=s;if(typeof a!="object"||u){this._log.warn("Ignoring signaling error payload",{originalError:a,voiceeventsid:u});return}const f=typeof l=="string"&&this._findCall(l)||void 0,{code:d,message:p}=a;let{twilioError:v}=a;if(typeof d=="number")if(d===31201)v=new sn.AuthenticationFailed(a);else if(d===31204)v=new sn.AccessTokenInvalid(a);else if(d===31205)this._stopRegistrationTimer(),v=new sn.AccessTokenExpired(a);else{const m=cw(!!this._options.enableImprovedSignalingErrorPrecision,d);typeof m<"u"&&(v=new m(a))}v||(this._log.error("Unknown signaling error: ",a),v=new xn.UnknownError(p,a)),this._log.error("Received error: ",v),this._log.debug("#error",a),this.emit(Se.EventName.Error,v,f)},this._onSignalingInvite=s=>Bn(this,void 0,void 0,function*(){var a;const l=!!this._activeCall;if(l&&!this._options.allowIncomingWhileBusy){this._log.info("Device busy; ignoring incoming invite");return}if(!s.callsid||!s.sdp){this._log.debug("#error",s),this.emit(Se.EventName.Error,new Wa.BadRequest("Malformed invite from gateway"));return}const u=s.parameters||{};u.CallSid=u.CallSid||s.callsid;const f=Object.assign({},xA(u.Params));this._makeCallPromise=this._makeCall(f,{callParameters:u,enableImprovedSignalingErrorPrecision:!!this._options.enableImprovedSignalingErrorPrecision,offerSdp:s.sdp,reconnectToken:s.reconnect,voiceEventSidGenerator:this._options.voiceEventSidGenerator});let d;try{d=yield this._makeCallPromise}finally{this._makeCallPromise=null}this._calls.push(d),d.once("accept",()=>{this._soundcache.get(Se.SoundName.Incoming).stop(),this._publishNetworkChange()});const p=!((a=this._audio)===null||a===void 0)&&a.incoming()&&!l?()=>this._soundcache.get(Se.SoundName.Incoming).play():()=>Promise.resolve();this._showIncomingCall(d,p)}),this._onSignalingOffline=()=>{this._log.info("Stream is offline"),this._edge=null,this._region=null,this._shouldReRegister=this.state!==Se.State.Unregistered,this._setState(Se.State.Unregistered)},this._onSignalingReady=()=>{this._log.info("Stream is ready"),this._setState(Se.State.Registered)},this._publishNetworkChange=()=>{this._activeCall&&this._networkInformation&&this._publisher.info("network-information","network-change",{connection_type:this._networkInformation.type,downlink:this._networkInformation.downlink,downlinkMax:this._networkInformation.downlinkMax,effective_type:this._networkInformation.effectiveType,rtt:this._networkInformation.rtt},this._activeCall)},this._updateInputStream=s=>{const a=this._activeCall;return a&&!s?Promise.reject(new ui("Cannot unset input device while a call is in progress.")):(this._callInputStream=s,a?a._setInputTracksFromStream(s):Promise.resolve())},this._updateSinkIds=(s,a)=>(s==="ringtone"?this._updateRingtoneSinkIds(a):this._updateSpeakerSinkIds(a)).then(()=>{this._publisher.info("audio",`${s}-devices-set`,{audio_device_ids:a},this._activeCall)},u=>{throw this._publisher.error("audio",`${s}-devices-set-failed`,{audio_device_ids:a,message:u.message},this._activeCall),u}),this._setupLoglevel(n.logLevel),this._logOptions("constructor",n),this.updateToken(t),Zp())throw new wn("Microsoft Edge Legacy (https://support.microsoft.com/en-us/help/4533505/what-is-microsoft-edge-legacy) is deprecated and will not be able to connect to Twilio to make or receive calls after September 1st, 2020. Please see this documentation for a list of supported browsers https://www.twilio.com/docs/voice/client/javascript#supported-browsers");if(!Se.isSupported&&n.ignoreBrowserSupport)throw window&&window.location&&window.location.protocol==="http:"?new wn("twilio.js wasn't able to find WebRTC browser support.           This is most likely because this page is served over http rather than https,           which does not support WebRTC in many browsers. Please load this page over https and           try again."):new wn("twilio.js 1.3+ SDKs require WebRTC browser support.         For more information, see <https://www.twilio.com/docs/api/client/twilio-js>.         If you have any questions about this announcement, please contact         Twilio Support at <help@twilio.com>.");const r=globalThis,i=r.msBrowser||r.browser||r.chrome;if(this._isBrowserExtension=!!i&&!!i.runtime&&!!i.runtime.id||!!r.safari&&!!r.safari.extension,this._isBrowserExtension&&this._log.info("Running as browser extension."),navigator){const s=navigator;this._networkInformation=s.connection||s.mozConnection||s.webkitConnection}this._networkInformation&&typeof this._networkInformation.addEventListener=="function"&&this._networkInformation.addEventListener("change",this._publishNetworkChange),Se._getOrCreateAudioContext(),Se._audioContext&&(Se._dialtonePlayer||(Se._dialtonePlayer=new hW(Se._audioContext))),this._boundDestroy=this.destroy.bind(this),this._boundConfirmClose=this._confirmClose.bind(this),typeof window<"u"&&window.addEventListener&&(window.addEventListener("unload",this._boundDestroy),window.addEventListener("pagehide",this._boundDestroy)),this.updateOptions(n)}get audio(){return this._audio}connect(){return Bn(this,arguments,void 0,function*(t={}){if(this._log.debug(".connect",JSON.stringify(t)),this._throwIfDestroyed(),this._activeCall)throw new ui("A Call is already active");let n,r,i;if(t.connectToken){try{const f=JSON.parse(decodeURIComponent(atob(t.connectToken)));n=f.customParameters,r=f.parameters,i=f.signalingReconnectToken}catch{throw new gt("Cannot parse connectToken")}if(!r||!r.CallSid||!i)throw new gt("Invalid connectToken")}let s=!1,a={};const l={enableImprovedSignalingErrorPrecision:!!this._options.enableImprovedSignalingErrorPrecision,rtcConfiguration:t.rtcConfiguration,voiceEventSidGenerator:this._options.voiceEventSidGenerator};i&&r?(s=!0,l.callParameters=r,l.reconnectCallSid=r.CallSid,l.reconnectToken=i,a=n||a):a=t.params||a;let u;this._makeCallPromise=this._makeCall(a,l,s);try{u=this._activeCall=yield this._makeCallPromise}finally{this._makeCallPromise=null}return this._calls.splice(0).forEach(f=>f.ignore()),this._soundcache.get(Se.SoundName.Incoming).stop(),u.accept({rtcConstraints:t.rtcConstraints}),this._publishNetworkChange(),u})}get calls(){return this._calls}destroy(){var t;this._log.debug(".destroy"),this._log.debug("Rejecting any incoming calls"),this._calls.slice(0).forEach(r=>r.reject()),this.disconnectAll(),this._stopRegistrationTimer(),this._destroyStream(),this._destroyAudioHelper(),(t=this._audioProcessorEventObserver)===null||t===void 0||t.destroy(),this._destroyPublisher(),this._networkInformation&&typeof this._networkInformation.removeEventListener=="function"&&this._networkInformation.removeEventListener("change",this._publishNetworkChange),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("beforeunload",this._boundConfirmClose),window.removeEventListener("unload",this._boundDestroy),window.removeEventListener("pagehide",this._boundDestroy)),this._setState(Se.State.Destroyed),Yr.EventEmitter.prototype.removeAllListeners.call(this)}disconnectAll(){this._log.debug(".disconnectAll"),this._calls.splice(0).forEach(n=>n.disconnect()),this._activeCall&&this._activeCall.disconnect()}get edge(){return this._edge}get home(){return this._home}get identity(){return this._identity}get isBusy(){return!!this._activeCall}register(){return Bn(this,void 0,void 0,function*(){if(this._log.debug(".register"),this.state!==Se.State.Unregistered)throw new ui(`Attempt to register when device is in state "${this.state}". Must be "${Se.State.Unregistered}".`);this._shouldReRegister=!1,this._setState(Se.State.Registering),yield this._streamConnectedPromise||this._setupStream(),yield this._sendPresence(!0),yield dw(this,Se.State.Registered,Se.State.Unregistered)})}get state(){return this._state}get token(){return this._token}toString(){return"[Twilio.Device instance]"}unregister(){return Bn(this,void 0,void 0,function*(){if(this._log.debug(".unregister"),this.state!==Se.State.Registered)throw new ui(`Attempt to unregister when device is in state "${this.state}". Must be "${Se.State.Registered}".`);this._shouldReRegister=!1;const t=yield this._streamConnectedPromise,n=new Promise(r=>{t.on("offline",r)});yield this._sendPresence(!1),yield n})}updateOptions(t={}){if(this._logOptions("updateOptions",t),this.state===Se.State.Destroyed)throw new ui(`Attempt to "updateOptions" when device is in state "${this.state}".`);this._options=Object.assign(Object.assign(Object.assign({},this._defaultOptions),this._options),t);const n=new Set(this._chunderURIs),r=this._chunderURIs=(this._getChunderws()||Ek(this._options.edge)).map(Tk);let i=n.size!==r.length;if(!i){for(const s of r)if(!n.has(s)){i=!0;break}}if(this.isBusy&&i)throw new ui("Cannot change Edge while on an active Call");this._setupLoglevel(this._options.logLevel);for(const s of Object.keys(Se._defaultSounds)){const a=Se._defaultSounds[s],l=`${g0}/${a.filename}.${Se.extension}?cache=${gu}`,u=this._options.sounds&&this._options.sounds[s]||l,f=new(this._options.Sound||ps)(s,u,{audioContext:this._options.disableAudioContextSounds?null:Se.audioContext,maxDuration:a.maxDuration,shouldLoop:a.shouldLoop});this._soundcache.set(s,f)}this._setupAudioHelper(),this._setupPublisher(),i&&this._streamConnectedPromise&&this._setupStream(),typeof window<"u"&&typeof window.addEventListener=="function"&&this._options.closeProtection&&(window.removeEventListener("beforeunload",this._boundConfirmClose),window.addEventListener("beforeunload",this._boundConfirmClose))}updateToken(t){if(this._log.debug(".updateToken"),this.state===Se.State.Destroyed)throw new ui(`Attempt to "updateToken" when device is in state "${this.state}".`);if(typeof t!="string")throw new gt(yz);this._token=t,this._stream&&this._stream.setToken(this._token),this._publisher&&this._publisher.setToken(this._token)}_confirmClose(t){if(!this._activeCall)return"";const n=this._options.closeProtection||!1,r=typeof n!="string"?"A call is currently in-progress. Leaving or reloading this page will end the call.":n;return(t||window.event).returnValue=r,r}_destroyAudioHelper(){this._audio&&(this._audio._destroy(),this._audio=null)}_destroyPublisher(){this._publisher&&(this._publisher=null)}_destroyStream(){this._stream&&(this._stream.removeListener("close",this._onSignalingClose),this._stream.removeListener("connected",this._onSignalingConnected),this._stream.removeListener("error",this._onSignalingError),this._stream.removeListener("invite",this._onSignalingInvite),this._stream.removeListener("offline",this._onSignalingOffline),this._stream.removeListener("ready",this._onSignalingReady),this._stream.destroy(),this._stream=null),this._onSignalingOffline(),this._streamConnectedPromise=null}_findCall(t){return this._calls.find(n=>n.parameters.CallSid===t||n.outboundConnectionId===t)||null}_getChunderws(){return typeof this._options.chunderw=="string"?[this._options.chunderw]:Array.isArray(this._options.chunderw)?this._options.chunderw:null}_logOptions(t,n={}){const r=["allowIncomingWhileBusy","appName","appVersion","closeProtection","codecPreferences","disableAudioContextSounds","dscp","edge","enableImprovedSignalingErrorPrecision","forceAggressiveIceNomination","logLevel","maxAverageBitrate","maxCallSignalingTimeoutMs","sounds","tokenRefreshMs"],i=["RTCPeerConnection","enumerateDevices","getUserMedia","MediaStream"];if(typeof n=="object"){const s=Object.assign({},n);Object.keys(s).forEach(a=>{!r.includes(a)&&!i.includes(a)&&delete s[a],i.includes(a)&&(s[a]=!0)}),this._log.debug(`.${t}`,JSON.stringify(s))}}_makeCall(t,n){return Bn(this,arguments,void 0,function*(r,i,s=!1){var a;const l=(a=this._audio)===null||a===void 0?void 0:a._getInputDevicePromise();l&&(this._log.debug("inputDevicePromise detected, waiting..."),yield l,this._log.debug("inputDevicePromise resolved"));const u={audioHelper:this._audio,onIgnore:()=>{this._soundcache.get(Se.SoundName.Incoming).stop()},pstream:yield this._streamConnectedPromise||this._setupStream(),publisher:this._publisher,soundcache:this._soundcache};i=Object.assign({MediaStream:this._options.MediaStream,RTCPeerConnection:this._options.RTCPeerConnection,beforeAccept:p=>{!this._activeCall||this._activeCall===p||(this._activeCall.disconnect(),this._removeCall(this._activeCall))},codecPreferences:this._options.codecPreferences,customSounds:this._options.sounds,dialtonePlayer:Se._dialtonePlayer,dscp:this._options.dscp,forceAggressiveIceNomination:this._options.forceAggressiveIceNomination,getInputStream:()=>this._options.fileInputStream||this._callInputStream,getSinkIds:()=>this._callSinkIds,maxAverageBitrate:this._options.maxAverageBitrate,preflight:this._options.preflight,rtcConstraints:this._options.rtcConstraints,shouldPlayDisconnect:()=>{var p;return(p=this._audio)===null||p===void 0?void 0:p.disconnect()},twimlParams:r,voiceEventSidGenerator:this._options.voiceEventSidGenerator},i);const f=()=>{if(!this._stream){this._log.warn("UnsetPreferredUri called without a stream");return}this._activeCall===null&&this._calls.length===0&&this._stream.updatePreferredURI(null)},d=new(this._options.Call||ye)(u,i);return this._publisher.info("settings","init",{MediaStream:!!this._options.MediaStream,RTCPeerConnection:!!this._options.RTCPeerConnection,enumerateDevices:!!this._options.enumerateDevices,getUserMedia:!!this._options.getUserMedia},d),d.once("accept",()=>{var p,v,m;this._stream.updatePreferredURI(this._preferredURI),this._removeCall(d),this._activeCall=d,this._audio&&this._audio._maybeStartPollingVolume(),d.direction===ye.CallDirection.Outgoing&&(!((p=this._audio)===null||p===void 0)&&p.outgoing())&&!s&&this._soundcache.get(Se.SoundName.Outgoing).play();const y={edge:this._edge||this._region};this._options.edge&&(y.selected_edge=Array.isArray(this._options.edge)?this._options.edge:[this._options.edge]),this._publisher.info("settings","edge",y,d),!((v=this._audio)===null||v===void 0)&&v.processedStream&&((m=this._audioProcessorEventObserver)===null||m===void 0||m.emit("enabled"))}),d.addListener("error",p=>{d.status()==="closed"&&(this._removeCall(d),f()),this._audio&&this._audio._maybeStopPollingVolume(),this._maybeStopIncomingSound()}),d.once("cancel",()=>{this._log.info(`Canceled: ${d.parameters.CallSid}`),this._removeCall(d),f(),this._audio&&this._audio._maybeStopPollingVolume(),this._maybeStopIncomingSound()}),d.once("disconnect",()=>{this._audio&&this._audio._maybeStopPollingVolume(),this._removeCall(d),f(),this._maybeStopIncomingSound()}),d.once("reject",()=>{this._log.info(`Rejected: ${d.parameters.CallSid}`),this._audio&&this._audio._maybeStopPollingVolume(),this._removeCall(d),f(),this._maybeStopIncomingSound()}),d.on("transportClose",()=>{d.status()===ye.State.Pending&&(this._audio&&this._audio._maybeStopPollingVolume(),this._removeCall(d),this._maybeStopIncomingSound())}),d})}_maybeStopIncomingSound(){this._calls.length||this._soundcache.get(Se.SoundName.Incoming).stop()}_removeCall(t){this._activeCall===t&&(this._activeCall=null,this._makeCallPromise=null);for(let n=this._calls.length-1;n>=0;n--)t===this._calls[n]&&this._calls.splice(n,1)}_sendPresence(t){return Bn(this,void 0,void 0,function*(){const n=yield this._streamConnectedPromise;n&&(n.register({audio:t}),t?this._startRegistrationTimer():this._stopRegistrationTimer())})}_setState(t){if(t===this.state)return;this._state=t;const n=this._stateEventMapping[t];this._log.debug(`#${n}`),this.emit(n)}_setupAudioHelper(){this._audioProcessorEventObserver||(this._audioProcessorEventObserver=new fW,this._audioProcessorEventObserver.on("event",({name:n,group:r})=>{this._publisher.info(r,n,{},this._activeCall)}));const t={audioContext:Se.audioContext,audioProcessorEventObserver:this._audioProcessorEventObserver,beforeSetInputDevice:()=>this._makeCallPromise?(this._log.debug("beforeSetInputDevice pause detected"),this._makeCallPromise):(this._log.debug("beforeSetInputDevice pause not detected, setting default"),Promise.resolve()),enumerateDevices:this._options.enumerateDevices,getUserMedia:this._options.getUserMedia||uz};if(this._audio){this._log.info("Found existing audio helper; updating options..."),this._audio._updateUserOptions(t);return}this._audio=new(this._options.AudioHelper||cW)(this._updateSinkIds,this._updateInputStream,t),this._audio.on("deviceChange",n=>{const r=this._activeCall,i=n.map(s=>s.deviceId);this._publisher.info("audio","device-change",{lost_active_device_ids:i},r),r&&r._mediaHandler._onInputDevicesChanged()})}_setupLoglevel(t){const n=typeof t=="number"||typeof t=="string"?t:no.levels.ERROR;this._log.setDefaultLevel(n),this._log.info("Set logger default level to",n)}_setupPublisher(){this._publisher&&(this._log.info("Found existing publisher; destroying..."),this._destroyPublisher());const t={defaultPayload:this._createDefaultPayload,metadata:{app_name:this._options.appName,app_version:this._options.appVersion}};return this._options.eventgw&&(t.host=this._options.eventgw),this._home&&(t.host=bk(this._home)),this._publisher=new(this._options.Publisher||zn)(mz,this.token,t),this._options.publishEvents===!1?this._publisher.disable():this._publisher.on("error",n=>{this._log.warn("Cannot connect to insights.",n)}),this._publisher}_setupStream(){return this._stream&&(this._log.info("Found existing stream; destroying..."),this._destroyStream()),this._log.info("Setting up VSP"),this._stream=new(this._options.PStream||Rt)(this.token,this._chunderURIs,{backoffMaxMs:this._options.backoffMaxMs,maxPreferredDurationMs:this._options.maxCallSignalingTimeoutMs}),this._stream.addListener("close",this._onSignalingClose),this._stream.addListener("connected",this._onSignalingConnected),this._stream.addListener("error",this._onSignalingError),this._stream.addListener("invite",this._onSignalingInvite),this._stream.addListener("offline",this._onSignalingOffline),this._stream.addListener("ready",this._onSignalingReady),this._streamConnectedPromise=dw(this._stream,"connected","close").then(()=>this._stream)}_showIncomingCall(t,n){let r;return Promise.race([n(),new Promise((i,s)=>{r=setTimeout(()=>{const a="Playing incoming ringtone took too long; it might not play. Continuing execution...";s(new Error(a))},gz)})]).catch(i=>{this._log.warn(i.message)}).then(()=>{clearTimeout(r),this._log.debug("#incoming",JSON.stringify({customParameters:t.customParameters,parameters:t.parameters})),this.emit(Se.EventName.Incoming,t)})}_startRegistrationTimer(){this._stopRegistrationTimer(),this._regTimer=setTimeout(()=>{this._sendPresence(!0)},vz)}_stopRegistrationTimer(){this._regTimer&&clearTimeout(this._regTimer)}_throwIfDestroyed(){if(this.state===Se.State.Destroyed)throw new ui("Device has been destroyed.")}_updateRingtoneSinkIds(t){return Promise.resolve(this._soundcache.get(Se.SoundName.Incoming).setSinkIds(t))}_updateSpeakerSinkIds(t){Array.from(this._soundcache.entries()).filter(r=>r[0]!==Se.SoundName.Incoming).forEach(r=>r[1].setSinkIds(t)),this._callSinkIds=t;const n=this._activeCall;return n?n._setSinkIds(t):Promise.resolve()}}Se._defaultSounds={disconnect:{filename:"disconnect",maxDuration:3e3},dtmf0:{filename:"dtmf-0",maxDuration:1e3},dtmf1:{filename:"dtmf-1",maxDuration:1e3},dtmf2:{filename:"dtmf-2",maxDuration:1e3},dtmf3:{filename:"dtmf-3",maxDuration:1e3},dtmf4:{filename:"dtmf-4",maxDuration:1e3},dtmf5:{filename:"dtmf-5",maxDuration:1e3},dtmf6:{filename:"dtmf-6",maxDuration:1e3},dtmf7:{filename:"dtmf-7",maxDuration:1e3},dtmf8:{filename:"dtmf-8",maxDuration:1e3},dtmf9:{filename:"dtmf-9",maxDuration:1e3},dtmfh:{filename:"dtmf-hash",maxDuration:1e3},dtmfs:{filename:"dtmf-star",maxDuration:1e3},incoming:{filename:"incoming",shouldLoop:!0},outgoing:{filename:"outgoing",maxDuration:3e3}};(function(e){(function(t){t.Error="error",t.Incoming="incoming",t.Destroyed="destroyed",t.Unregistered="unregistered",t.Registering="registering",t.Registered="registered",t.TokenWillExpire="tokenWillExpire"})(e.EventName||(e.EventName={})),function(t){t.Destroyed="destroyed",t.Unregistered="unregistered",t.Registering="registering",t.Registered="registered"}(e.State||(e.State={})),function(t){t.Incoming="incoming",t.Outgoing="outgoing",t.Disconnect="disconnect",t.Dtmf0="dtmf0",t.Dtmf1="dtmf1",t.Dtmf2="dtmf2",t.Dtmf3="dtmf3",t.Dtmf4="dtmf4",t.Dtmf5="dtmf5",t.Dtmf6="dtmf6",t.Dtmf7="dtmf7",t.Dtmf8="dtmf8",t.Dtmf9="dtmf9",t.DtmfS="dtmfs",t.DtmfH="dtmfh"}(e.SoundName||(e.SoundName={}))})(Se||(Se={}));class Km{constructor(t,n=!1){this.deleted=!1;let r;const i=t.candidate.split("network-cost ");i[1]&&(r=parseInt(i[1],10)),this.candidateType=t.type,this.ip=t.ip||t.address,this.isRemote=n,this.networkCost=r,this.port=t.port,this.priority=t.priority,this.protocol=t.protocol,this.relatedAddress=t.relatedAddress,this.relatedPort=t.relatedPort,this.tcpType=t.tcpType,this.transportId=t.sdpMid}toPayload(){return{candidate_type:this.candidateType,deleted:this.deleted,ip:this.ip,is_remote:this.isRemote,"network-cost":this.networkCost,port:this.port,priority:this.priority,protocol:this.protocol,related_address:this.relatedAddress,related_port:this.relatedPort,tcp_type:this.tcpType,transport_id:this.transportId}}}const xk=94.768;function _z(e,t,n){if(typeof e!="number"||typeof t!="number"||typeof n!="number"||!Dh(e)||!Dh(t)||!Dh(n))return null;const r=e+t*2+10;let i=0;switch(!0){case r<160:i=xk-r/40;break;case r<1e3:i=xk-(r-120)/10;break}switch(!0){case n<=i/2.5:i=Math.max(i-n*2.5,6.52);break;default:i=0;break}return 1+.035*i+7e-6*i*(i-60)*(100-i)}function Dh(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)&&e>=0}var wz={calculate:_z,isNonNegativeNumber:Dh};const Sz=5,bz=0,Tz=3,Ez=1e3,kz=5*1e3,Iz={audioInputLevel:{minStandardDeviation:327.67,sampleCount:10},audioOutputLevel:{minStandardDeviation:327.67,sampleCount:10},bytesReceived:{clearCount:2,min:1,raiseCount:3,sampleCount:3},bytesSent:{clearCount:2,min:1,raiseCount:3,sampleCount:3},jitter:{max:30},mos:{min:3},packetsLostFraction:[{max:1},{clearValue:1,maxAverage:3,sampleCount:7}],rtt:{max:400}};function Cz(e,t){return t.reduce((n,r)=>n+=r>e?1:0,0)}function Rz(e,t){return t.reduce((n,r)=>n+=r<e?1:0,0)}function xz(e){if(e.length<=0)return null;const t=e.reduce((i,s)=>i+s,0)/e.length,n=e.map(i=>Math.pow(i-t,2));return Math.sqrt(n.reduce((i,s)=>i+s,0)/n.length)}function $z(e){return e.reduce((t,n)=>[...t,...n],[])}class Pz extends Yr.EventEmitter{constructor(t){super(),this._activeWarnings=new Map,this._currentStreaks=new Map,this._inputVolumes=[],this._outputVolumes=[],this._sampleBuffer=[],this._supplementalSampleBuffers={audioInputLevel:[],audioOutputLevel:[]},this._warningsEnabled=!0,t=t||{},this._getRTCStats=t.getRTCStats||IW,this._mos=t.Mos||wz,this._peerConnection=t.peerConnection,this._thresholds=Object.assign(Object.assign({},Iz),t.thresholds);const n=Object.values(this._thresholds).map(r=>r.sampleCount).filter(r=>!!r);this._maxSampleCount=Math.max(Sz,...n),this._peerConnection&&this.enable(this._peerConnection)}addVolumes(t,n){this._inputVolumes.push(t),this._outputVolumes.push(n)}disable(){return this._sampleInterval&&(clearInterval(this._sampleInterval),delete this._sampleInterval),this}disableWarnings(){return this._warningsEnabled&&this._activeWarnings.clear(),this._warningsEnabled=!1,this}enable(t){if(t){if(this._peerConnection&&t!==this._peerConnection)throw new gt("Attempted to replace an existing PeerConnection in StatsMonitor.enable");this._peerConnection=t}if(!this._peerConnection)throw new gt("Can not enable StatsMonitor without a PeerConnection");return this._sampleInterval=this._sampleInterval||setInterval(this._fetchSample.bind(this),Ez),this}enableWarnings(){return this._warningsEnabled=!0,this}hasActiveWarning(t,n){const r=`${t}:${n}`;return!!this._activeWarnings.get(r)}_addSample(t){const n=this._sampleBuffer;n.push(t),n.length>this._maxSampleCount&&n.splice(0,n.length-this._maxSampleCount)}_clearWarning(t,n,r){const i=`${t}:${n}`,s=this._activeWarnings.get(i);!s||Date.now()-s.timeRaised<kz||(this._activeWarnings.delete(i),this.emit("warning-cleared",Object.assign(Object.assign({},r),{name:t,threshold:{name:n,value:this._thresholds[t][n]}})))}_createSample(t,n){const r=n&&n.totals.bytesSent||0,i=n&&n.totals.bytesReceived||0,s=n&&n.totals.packetsSent||0,a=n&&n.totals.packetsReceived||0,l=n&&n.totals.packetsLost||0,u=t.bytesSent-r,f=t.bytesReceived-i,d=t.packetsSent-s,p=t.packetsReceived-a,v=t.packetsLost-l,m=p+v,y=m>0?v/m*100:0,E=t.packetsReceived+t.packetsLost,T=E>0?t.packetsLost/E*100:100,w=typeof t.rtt=="number"||!n?t.rtt:n.rtt,b=this._inputVolumes.splice(0);this._supplementalSampleBuffers.audioInputLevel.push(b);const $=this._outputVolumes.splice(0);return this._supplementalSampleBuffers.audioOutputLevel.push($),{audioInputLevel:Math.round(mc(b)),audioOutputLevel:Math.round(mc($)),bytesReceived:f,bytesSent:u,codecName:t.codecName,jitter:t.jitter,mos:this._mos.calculate(w,t.jitter,n&&y),packetsLost:v,packetsLostFraction:y,packetsReceived:p,packetsSent:d,rtt:w,timestamp:t.timestamp,totals:{bytesReceived:t.bytesReceived,bytesSent:t.bytesSent,packetsLost:t.packetsLost,packetsLostFraction:T,packetsReceived:t.packetsReceived,packetsSent:t.packetsSent}}}_fetchSample(){this._getSample().then(t=>{this._addSample(t),this._raiseWarnings(),this.emit("sample",t)}).catch(t=>{this.disable(),this.emit("error",t)})}_getSample(){return this._getRTCStats(this._peerConnection).then(t=>{let n=null;return this._sampleBuffer.length&&(n=this._sampleBuffer[this._sampleBuffer.length-1]),this._createSample(t,n)})}_raiseWarning(t,n,r){const i=`${t}:${n}`;if(this._activeWarnings.has(i))return;this._activeWarnings.set(i,{timeRaised:Date.now()});const s=this._thresholds[t];let a;if(Array.isArray(s)){const l=s.find(u=>n in u);l&&(a=l[n])}else a=this._thresholds[t][n];this.emit("warning",Object.assign(Object.assign({},r),{name:t,threshold:{name:n,value:a}}))}_raiseWarnings(){this._warningsEnabled&&Object.keys(this._thresholds).forEach(t=>this._raiseWarningsForStat(t))}_raiseWarningsForStat(t){(Array.isArray(this._thresholds[t])?this._thresholds[t]:[this._thresholds[t]]).forEach(r=>{const i=this._sampleBuffer,s=r.clearCount||bz,a=r.raiseCount||Tz,l=r.sampleCount||this._maxSampleCount;let u=i.slice(-l);const f=u.map(v=>v[t]);if(f.some(v=>typeof v>"u"||v===null))return;let p;if(typeof r.max=="number"&&(p=Cz(r.max,f),p>=a?this._raiseWarning(t,"max",{values:f,samples:u}):p<=s&&this._clearWarning(t,"max",{values:f,samples:u})),typeof r.min=="number"&&(p=Rz(r.min,f),p>=a?this._raiseWarning(t,"min",{values:f,samples:u}):p<=s&&this._clearWarning(t,"min",{values:f,samples:u})),typeof r.maxDuration=="number"&&i.length>1){u=i.slice(-2);const v=u[0][t],m=u[1][t],y=this._currentStreaks.get(t)||0,E=v===m?y+1:0;this._currentStreaks.set(t,E),E>=r.maxDuration?this._raiseWarning(t,"maxDuration",{value:E}):E===0&&this._clearWarning(t,"maxDuration",{value:y})}if(typeof r.minStandardDeviation=="number"){const v=this._supplementalSampleBuffers[t];if(!v||v.length<r.sampleCount)return;v.length>r.sampleCount&&v.splice(0,v.length-r.sampleCount);const m=$z(v.slice(-l)),y=xz(m);if(typeof y!="number")return;y<r.minStandardDeviation?this._raiseWarning(t,"minStandardDeviation",{value:y}):this._clearWarning(t,"minStandardDeviation",{value:y})}[["maxAverage",(v,m)=>v>m],["minAverage",(v,m)=>v<m]].forEach(([v,m])=>{if(typeof r[v]=="number"&&f.length>=l){const y=mc(f);m(y,r[v])?this._raiseWarning(t,v,{values:f,samples:u}):m(y,r.clearValue||r[v])||this._clearWarning(t,v,{values:f,samples:u})}})})}}const $k={factor:1.1,jitter:.5,max:3e4,min:1},Az=70,Oz=500,Nz=160,Mz=10,Lz=5e3,Pk={disconnect:!0,info:{code:31003,message:"Connection with Twilio was interrupted.",twilioError:new Fi.ConnectionError}},Ak={packetsLostFraction:{max:"packet-loss",maxAverage:"packets-lost-fraction"}},Ok={audioInputLevel:"audio-input-level",audioOutputLevel:"audio-output-level",bytesReceived:"bytes-received",bytesSent:"bytes-sent",jitter:"jitter",mos:"mos",rtt:"rtt"},Dz={max:"high-",maxAverage:"high-",maxDuration:"constant-",min:"low-",minStandardDeviation:"constant-"};class ye extends Yr.EventEmitter{get direction(){return this._direction}get codec(){return this._codec}get connectToken(){const t=this._signalingReconnectToken,n=this.parameters&&this.parameters.CallSid?this.parameters.CallSid:void 0;if(!t||!n)return;const r=this.customParameters&&typeof this.customParameters.keys=="function"?Array.from(this.customParameters.keys()).reduce((s,a)=>(s[a]=this.customParameters.get(a),s),{}):{},i=this.parameters||{};return btoa(encodeURIComponent(JSON.stringify({customParameters:r,parameters:i,signalingReconnectToken:t})))}constructor(t,n){super(),this.parameters={},this._inputVolumeStreak=0,this._isAnswered=!1,this._isCancelled=!1,this._isRejected=!1,this._latestInputVolume=0,this._latestOutputVolume=0,this._log=new un("Call"),this._mediaStatus=ye.State.Pending,this._messages=new Map,this._metricsSamples=[],this._options={MediaHandler:Ae,MediaStream:null,enableImprovedSignalingErrorPrecision:!1,offerSdp:null,shouldPlayDisconnect:()=>!0,voiceEventSidGenerator:gw},this._outputVolumeStreak=0,this._shouldSendHangup=!0,this._signalingStatus=ye.State.Pending,this._soundcache=new Map,this._status=ye.State.Pending,this._wasConnected=!1,this.toString=()=>"[Twilio.Call instance]",this._emitWarning=(a,l,u,f,d,p)=>{const m=`${a}warning${d?"-cleared":"-raised"}`;if(l==="constant-audio-input-level"&&this.isMuted())return;let y=d?"info":"warning";l==="constant-audio-output-level"&&(y="info");const E={threshold:u};if(f&&(f instanceof Array?E.values=f.map(T=>typeof T=="number"?Math.round(T*100)/100:f):E.value=f),this._publisher.post(y,m,l,{data:E},this),l!=="constant-audio-output-level"){const T=d?"warning-cleared":"warning";this._log.debug(`#${T}`,l),this.emit(T,l,p&&!d?p:null)}},this._onAck=a=>{const{acktype:l,callsid:u,voiceeventsid:f}=a;if(this.parameters.CallSid!==u){this._log.warn(`Received ack from a different callsid: ${u}`);return}l==="message"&&this._onMessageSent(f)},this._onAnswer=a=>{typeof a.reconnect=="string"&&(this._signalingReconnectToken=a.reconnect),!(this._isAnswered&&this._status!==ye.State.Reconnecting)&&(this._setCallSid(a),this._isAnswered=!0,this._maybeTransitionToOpen())},this._onCancel=a=>{const l=a.callsid;this.parameters.CallSid===l&&(this._isCancelled=!0,this._publisher.info("connection","cancel",null,this),this._cleanupEventListeners(),this._mediaHandler.close(),this._status=ye.State.Closed,this._log.debug("#cancel"),this.emit("cancel"),this._pstream.removeListener("cancel",this._onCancel))},this._onConnected=()=>{this._log.info("Received connected from pstream"),this._signalingReconnectToken&&this._mediaHandler.version&&this._pstream.reconnect(this._mediaHandler.version.getSDP(),this.parameters.CallSid,this._signalingReconnectToken)},this._onHangup=a=>{if(this.status()!==ye.State.Closed){if(a.callsid&&(this.parameters.CallSid||this.outboundConnectionId)){if(a.callsid!==this.parameters.CallSid&&a.callsid!==this.outboundConnectionId)return}else if(a.callsid)return;if(this._log.info("Received HANGUP from gateway"),a.error){const l=a.error.code,u=cw(this._options.enableImprovedSignalingErrorPrecision,l),f=typeof u<"u"?new u(a.error.message):new xn.ConnectionError("Error sent from gateway in HANGUP",a.error);this._log.error("Received an error from the gateway:",f),this._log.debug("#error",f),this.emit("error",f)}this._shouldSendHangup=!1,this._publisher.info("connection","disconnected-by-remote",null,this),this._disconnect(null,!0),this._cleanupEventListeners()}},this._onMediaFailure=a=>{const{ConnectionDisconnected:l,ConnectionFailed:u,IceGatheringFailed:f,LowBytes:d}=ye.MediaFailure,p=a===u||a===f;if(!y0(window,window.navigator)&&a===u)return this._mediaHandler.onerror(Pk);if(this._mediaStatus===ye.State.Reconnecting){if(p){if(Date.now()-this._mediaReconnectStartTime>$k.max)return this._log.warn("Exceeded max ICE retries"),this._mediaHandler.onerror(Pk);try{this._mediaReconnectBackoff.backoff()}catch(E){if(!(E.message&&E.message==="Backoff in progress."))throw E}}return}const v=this._mediaHandler.version.pc,m=v&&v.iceConnectionState==="disconnected",y=this._monitor.hasActiveWarning("bytesSent","min")||this._monitor.hasActiveWarning("bytesReceived","min");if(a===d&&m||a===l&&y||p){const E=new Fi.ConnectionError("Media connection failed.");this._log.warn("ICE Connection disconnected."),this._publisher.warn("connection","error",E,this),this._publisher.info("connection","reconnecting",null,this),this._mediaReconnectStartTime=Date.now(),this._status=ye.State.Reconnecting,this._mediaStatus=ye.State.Reconnecting,this._mediaReconnectBackoff.reset(),this._mediaReconnectBackoff.backoff(),this._log.debug("#reconnecting"),this.emit("reconnecting",E)}},this._onMediaReconnected=()=>{this._mediaStatus===ye.State.Reconnecting&&(this._log.info("ICE Connection reestablished."),this._mediaStatus=ye.State.Open,this._signalingStatus===ye.State.Open&&(this._publisher.info("connection","reconnected",null,this),this._log.debug("#reconnected"),this.emit("reconnected"),this._status=ye.State.Open))},this._onMessageReceived=a=>{const{callsid:l,content:u,contenttype:f,messagetype:d,voiceeventsid:p}=a;if(this.parameters.CallSid!==l){this._log.warn(`Received a message from a different callsid: ${l}`);return}const v={content:u,contentType:f,messageType:d,voiceEventSid:p};this._publisher.info("call-message",d,{content_type:f,event_type:"received",voice_event_sid:p},this),this._log.debug("#messageReceived",JSON.stringify(v)),this.emit("messageReceived",v)},this._onMessageSent=a=>{if(!this._messages.has(a)){this._log.warn(`Received a messageSent with a voiceEventSid that doesn't exists: ${a}`);return}const l=this._messages.get(a);this._messages.delete(a),this._publisher.info("call-message",l==null?void 0:l.messageType,{content_type:l==null?void 0:l.contentType,event_type:"sent",voice_event_sid:a},this),this._log.debug("#messageSent",JSON.stringify(l)),this.emit("messageSent",l)},this._onRinging=a=>{if(this._setCallSid(a),this._status!==ye.State.Connecting&&this._status!==ye.State.Ringing)return;const l=!!a.sdp;this._status=ye.State.Ringing,this._publisher.info("connection","outgoing-ringing",{hasEarlyMedia:l},this),this._log.debug("#ringing"),this.emit("ringing",l)},this._onRTCSample=a=>{const l=Object.assign(Object.assign({},a),{inputVolume:this._latestInputVolume,outputVolume:this._latestOutputVolume});this._codec=l.codecName,this._metricsSamples.push(l),this._metricsSamples.length>=Mz&&this._publishMetrics(),this.emit("sample",a)},this._onSignalingError=a=>{const{callsid:l,voiceeventsid:u,error:f}=a;if(this.parameters.CallSid!==l){this._log.warn(`Received an error from a different callsid: ${l}`);return}if(u&&this._messages.has(u)){this._messages.delete(u),this._log.warn("Received an error while sending a message.",a),this._publisher.error("call-message","error",{code:f.code,message:f.message,voice_event_sid:u},this);let d;const p=cw(!!this._options.enableImprovedSignalingErrorPrecision,f.code);typeof p<"u"&&(d=new p(f)),d||(this._log.error("Unknown Call Message Error: ",f),d=new xn.UnknownError(f.message,f)),this._log.debug("#error",f,d),this.emit("error",d)}},this._onSignalingReconnected=()=>{this._signalingStatus===ye.State.Reconnecting&&(this._log.info("Signaling Connection reestablished."),this._signalingStatus=ye.State.Open,this._mediaStatus===ye.State.Open&&(this._publisher.info("connection","reconnected",null,this),this._log.debug("#reconnected"),this.emit("reconnected"),this._status=ye.State.Open))},this._onTransportClose=()=>{this._log.error("Received transportClose from pstream"),this._log.debug("#transportClose"),this.emit("transportClose"),this._signalingReconnectToken?(this._status=ye.State.Reconnecting,this._signalingStatus=ye.State.Reconnecting,this._publisher.info("connection","reconnecting",null,this),this._log.debug("#reconnecting"),this.emit("reconnecting",new Kr.ConnectionDisconnected)):(this._status=ye.State.Closed,this._signalingStatus=ye.State.Closed)},this._reemitWarning=(a,l)=>{const u=/^audio/.test(a.name)?"audio-level-":"network-quality-",f=Dz[a.threshold.name];let d;a.name in Ak?d=Ak[a.name][a.threshold.name]:a.name in Ok&&(d=Ok[a.name]);const p=f+d;this._emitWarning(u,p,a.threshold.value,a.values||a.value,l,a)},this._reemitWarningCleared=a=>{this._reemitWarning(a,!0)},this._soundcache=t.soundcache,typeof t.onIgnore=="function"&&(this._onIgnore=t.onIgnore);const r=n&&n.twimlParams||{};this.customParameters=new Map(Object.entries(r).map(([a,l])=>[a,String(l)])),Object.assign(this._options,n),this._options.callParameters&&(this.parameters=this._options.callParameters),this._options.reconnectToken&&(this._signalingReconnectToken=this._options.reconnectToken),this._voiceEventSidGenerator=this._options.voiceEventSidGenerator||gw,this._direction=this.parameters.CallSid&&!this._options.reconnectCallSid?ye.CallDirection.Incoming:ye.CallDirection.Outgoing,this.parameters?this.callerInfo=this.parameters.StirStatus?{isVerified:this.parameters.StirStatus==="TN-Validation-Passed-A"}:null:this.callerInfo=null,this._mediaReconnectBackoff=new ow($k),this._mediaReconnectBackoff.on("ready",()=>this._mediaHandler.iceRestart()),this.outboundConnectionId=Fz();const i=this._publisher=t.publisher;this._direction===ye.CallDirection.Incoming?i.info("connection","incoming",null,this):i.info("connection","outgoing",{preflight:this._options.preflight,reconnect:!!this._options.reconnectCallSid},this);const s=this._monitor=new(this._options.StatsMonitor||Pz);s.on("sample",this._onRTCSample),s.disableWarnings(),setTimeout(()=>s.enableWarnings(),Lz),s.on("warning",(a,l)=>{(a.name==="bytesSent"||a.name==="bytesReceived")&&this._onMediaFailure(ye.MediaFailure.LowBytes),this._reemitWarning(a,l)}),s.on("warning-cleared",a=>{this._reemitWarningCleared(a)}),this._mediaHandler=new this._options.MediaHandler(t.audioHelper,t.pstream,{MediaStream:this._options.MediaStream,RTCPeerConnection:this._options.RTCPeerConnection,codecPreferences:this._options.codecPreferences,dscp:this._options.dscp,forceAggressiveIceNomination:this._options.forceAggressiveIceNomination,maxAverageBitrate:this._options.maxAverageBitrate}),this.on("volume",(a,l)=>{this._inputVolumeStreak=this._checkVolume(a,this._inputVolumeStreak,this._latestInputVolume,"input"),this._outputVolumeStreak=this._checkVolume(l,this._outputVolumeStreak,this._latestOutputVolume,"output"),this._latestInputVolume=a,this._latestOutputVolume=l}),this._mediaHandler.onaudio=a=>{this._log.debug("#audio"),this.emit("audio",a)},this._mediaHandler.onvolume=(a,l,u,f)=>{s.addVolumes(u/255*32767,f/255*32767),this.emit("volume",a,l)},this._mediaHandler.ondtlstransportstatechange=a=>{const l=a==="failed"?"error":"debug";this._publisher.post(l,"dtls-transport-state",a,null,this)},this._mediaHandler.onpcconnectionstatechange=a=>{let l="debug";const u=this._mediaHandler.getRTCDtlsTransport();a==="failed"&&(l=u&&u.state==="failed"?"error":"warning"),this._publisher.post(l,"pc-connection-state",a,null,this)},this._mediaHandler.onicecandidate=a=>{const l=new Km(a).toPayload();this._publisher.debug("ice-candidate","ice-candidate",l,this)},this._mediaHandler.onselectedcandidatepairchange=a=>{const l=new Km(a.local).toPayload(),u=new Km(a.remote,!0).toPayload();this._publisher.debug("ice-candidate","selected-ice-candidate-pair",{local_candidate:l,remote_candidate:u},this)},this._mediaHandler.oniceconnectionstatechange=a=>{const l=a==="failed"?"error":"debug";this._publisher.post(l,"ice-connection-state",a,null,this)},this._mediaHandler.onicegatheringfailure=a=>{this._publisher.warn("ice-gathering-state",a,null,this),this._onMediaFailure(ye.MediaFailure.IceGatheringFailed)},this._mediaHandler.onicegatheringstatechange=a=>{this._publisher.debug("ice-gathering-state",a,null,this)},this._mediaHandler.onsignalingstatechange=a=>{this._publisher.debug("signaling-state",a,null,this)},this._mediaHandler.ondisconnected=a=>{this._log.warn(a),this._publisher.warn("network-quality-warning-raised","ice-connectivity-lost",{message:a},this),this._log.debug("#warning","ice-connectivity-lost"),this.emit("warning","ice-connectivity-lost"),this._onMediaFailure(ye.MediaFailure.ConnectionDisconnected)},this._mediaHandler.onfailed=a=>{this._onMediaFailure(ye.MediaFailure.ConnectionFailed)},this._mediaHandler.onconnected=()=>{this._status===ye.State.Reconnecting&&this._onMediaReconnected()},this._mediaHandler.onreconnected=a=>{this._log.info(a),this._publisher.info("network-quality-warning-cleared","ice-connectivity-lost",{message:a},this),this._log.debug("#warning-cleared","ice-connectivity-lost"),this.emit("warning-cleared","ice-connectivity-lost"),this._onMediaReconnected()},this._mediaHandler.onerror=a=>{a.disconnect===!0&&this._disconnect(a.info&&a.info.message);const l=a.info.twilioError||new xn.UnknownError(a.info.message);this._log.error("Received an error from MediaStream:",a),this._log.debug("#error",l),this.emit("error",l)},this._mediaHandler.onopen=()=>{this._status===ye.State.Open||this._status===ye.State.Reconnecting||(this._status===ye.State.Ringing||this._status===ye.State.Connecting?(this.mute(this._mediaHandler.isMuted),this._mediaStatus=ye.State.Open,this._maybeTransitionToOpen()):this._mediaHandler.close())},this._mediaHandler.onclose=()=>{this._status=ye.State.Closed,this._options.shouldPlayDisconnect&&this._options.shouldPlayDisconnect()&&!this._isCancelled&&!this._isRejected&&this._soundcache.get(Se.SoundName.Disconnect).play(),s.disable(),this._publishMetrics(),!this._isCancelled&&!this._isRejected&&(this._log.debug("#disconnect"),this.emit("disconnect",this))},this._pstream=t.pstream,this._pstream.on("ack",this._onAck),this._pstream.on("cancel",this._onCancel),this._pstream.on("error",this._onSignalingError),this._pstream.on("ringing",this._onRinging),this._pstream.on("transportClose",this._onTransportClose),this._pstream.on("connected",this._onConnected),this._pstream.on("message",this._onMessageReceived),this.on("error",a=>{this._publisher.error("connection","error",{code:a.code,message:a.message},this),this._pstream&&this._pstream.status==="disconnected"&&this._cleanupEventListeners()}),this.on("disconnect",()=>{this._cleanupEventListeners()})}_setInputTracksFromStream(t){return this._mediaHandler.setInputTracksFromStream(t)}_setSinkIds(t){return this._mediaHandler._setSinkIds(t)}accept(t){if(this._log.debug(".accept",t),this._status!==ye.State.Pending){this._log.debug(`.accept noop. status is '${this._status}'`);return}t=t||{};const n=t.rtcConfiguration||this._options.rtcConfiguration,r=t.rtcConstraints||this._options.rtcConstraints||{},i={audio:typeof r.audio<"u"?r.audio:!0};this._status=ye.State.Connecting;const s=()=>{if(this._status!==ye.State.Connecting){this._cleanupEventListeners(),this._mediaHandler.close();return}const u=d=>{const p=this._direction===ye.CallDirection.Incoming?"accepted-by-local":"accepted-by-remote";this._publisher.info("connection",p,null,this);const{codecName:v,codecParams:m}=GW(this._mediaHandler.version.getSDP());this._publisher.info("settings","codec",{codec_params:m,selected_codec:v},this),this._monitor.enable(d)},f=typeof this._options.getSinkIds=="function"&&this._options.getSinkIds();if(Array.isArray(f)&&this._mediaHandler._setSinkIds(f).catch(()=>{}),this._pstream.addListener("hangup",this._onHangup),this._direction===ye.CallDirection.Incoming)this._isAnswered=!0,this._pstream.on("answer",this._onAnswer),this._mediaHandler.answerIncomingCall(this.parameters.CallSid,this._options.offerSdp,n,u);else{const d=Array.from(this.customParameters.entries()).map(p=>`${encodeURIComponent(p[0])}=${encodeURIComponent(p[1])}`).join("&");this._pstream.on("answer",this._onAnswer),this._mediaHandler.makeOutgoingCall(d,this._signalingReconnectToken,this._options.reconnectCallSid||this.outboundConnectionId,n,u)}};this._options.beforeAccept&&this._options.beforeAccept(this);const a=typeof this._options.getInputStream=="function"&&this._options.getInputStream();(a?this._mediaHandler.setInputTracksFromStream(a):this._mediaHandler.openDefaultDeviceWithConstraints(i)).then(()=>{this._publisher.info("get-user-media","succeeded",{data:{audioConstraints:i}},this),s()},u=>{let f;u.code===31208||["PermissionDeniedError","NotAllowedError"].indexOf(u.name)!==-1?(f=new Pu.PermissionDeniedError,this._publisher.error("get-user-media","denied",{data:{audioConstraints:i,error:u}},this)):(f=new Pu.AcquisitionFailedError,this._publisher.error("get-user-media","failed",{data:{audioConstraints:i,error:u}},this)),this._disconnect(),this._log.debug("#error",u),this.emit("error",f)})}disconnect(){this._log.debug(".disconnect"),this._disconnect()}getLocalStream(){return this._mediaHandler&&this._mediaHandler.stream}getRemoteStream(){return this._mediaHandler&&this._mediaHandler._remoteStream}ignore(){if(this._log.debug(".ignore"),this._status!==ye.State.Pending){this._log.debug(`.ignore noop. status is '${this._status}'`);return}this._status=ye.State.Closed,this._mediaHandler.ignore(this.parameters.CallSid),this._publisher.info("connection","ignored-by-local",null,this),this._onIgnore&&this._onIgnore()}isMuted(){return this._mediaHandler.isMuted}mute(t=!0){this._log.debug(".mute",t);const n=this._mediaHandler.isMuted;this._mediaHandler.mute(t);const r=this._mediaHandler.isMuted;n!==r&&(this._publisher.info("connection",r?"muted":"unmuted",null,this),this._log.debug("#mute",r),this.emit("mute",r,this))}postFeedback(t,n){if(typeof t>"u"||t===null)return this._postFeedbackDeclined();if(!Object.values(ye.FeedbackScore).includes(t))throw new gt(`Feedback score must be one of: ${Object.values(ye.FeedbackScore)}`);if(typeof n<"u"&&n!==null&&!Object.values(ye.FeedbackIssue).includes(n))throw new gt(`Feedback issue must be one of: ${Object.values(ye.FeedbackIssue)}`);return this._publisher.info("feedback","received",{issue_name:n,quality_score:t},this,!0)}reject(){if(this._log.debug(".reject"),this._status!==ye.State.Pending){this._log.debug(`.reject noop. status is '${this._status}'`);return}this._isRejected=!0,this._pstream.reject(this.parameters.CallSid),this._mediaHandler.reject(this.parameters.CallSid),this._publisher.info("connection","rejected-by-local",null,this),this._cleanupEventListeners(),this._mediaHandler.close(),this._status=ye.State.Closed,this._log.debug("#reject"),this.emit("reject")}sendDigits(t){if(this._log.debug(".sendDigits",t),t.match(/[^0-9*#w]/))throw new gt("Illegal character passed into sendDigits");const n=this._options.customSounds||{},r=[];t.split("").forEach(l=>{let u=l!=="w"?`dtmf${l}`:"";u==="dtmf*"&&(u="dtmfs"),u==="dtmf#"&&(u="dtmfh"),r.push(u)});const i=()=>{const l=r.shift();l&&(this._options.dialtonePlayer&&!n[l]?this._options.dialtonePlayer.play(l):this._soundcache.get(l).play()),r.length&&setTimeout(()=>i(),200)};i();const s=this._mediaHandler.getOrCreateDTMFSender();function a(l){if(!l.length)return;const u=l.shift();u&&u.length&&s.insertDTMF(u,Nz,Az),setTimeout(a.bind(null,l),Oz)}if(s){if(!("canInsertDTMF"in s)||s.canInsertDTMF){this._log.info("Sending digits using RTCDTMFSender"),a(t.split("w"));return}this._log.info("RTCDTMFSender cannot insert DTMF")}if(this._log.info("Sending digits over PStream"),this._pstream!==null&&this._pstream.status!=="disconnected")this._pstream.dtmf(this.parameters.CallSid,t);else{const l=new xn.ConnectionError("Could not send DTMF: Signaling channel is disconnected");this._log.debug("#error",l),this.emit("error",l)}}sendMessage(t){this._log.debug(".sendMessage",JSON.stringify(t));const{content:n,contentType:r,messageType:i}=t;if(typeof n>"u"||n===null)throw new gt("`content` is empty");if(typeof i!="string")throw new gt("`messageType` must be a string.");if(i.length===0)throw new gt("`messageType` must be a non-empty string.");if(this._pstream===null)throw new ui("Could not send CallMessage; Signaling channel is disconnected");const s=this.parameters.CallSid;if(typeof this.parameters.CallSid>"u")throw new ui("Could not send CallMessage; Call has no CallSid");const a=this._voiceEventSidGenerator();return this._messages.set(a,{content:n,contentType:r,messageType:i,voiceEventSid:a}),this._pstream.sendMessage(s,n,r,i,a),a}status(){return this._status}_checkVolume(t,n,r,i){const s=n>=10;let a=0;return r===t&&(a=n),a>=10?this._emitWarning("audio-level-",`constant-audio-${i}-level`,10,a,!1):s&&this._emitWarning("audio-level-",`constant-audio-${i}-level`,10,a,!0),a}_cleanupEventListeners(){const t=()=>{this._pstream&&(this._pstream.removeListener("ack",this._onAck),this._pstream.removeListener("answer",this._onAnswer),this._pstream.removeListener("cancel",this._onCancel),this._pstream.removeListener("error",this._onSignalingError),this._pstream.removeListener("hangup",this._onHangup),this._pstream.removeListener("ringing",this._onRinging),this._pstream.removeListener("transportClose",this._onTransportClose),this._pstream.removeListener("connected",this._onConnected),this._pstream.removeListener("message",this._onMessageReceived))};t(),setTimeout(t,0)}_createMetricPayload(){const t={call_sid:this.parameters.CallSid,dscp:!!this._options.dscp,sdk_version:gu};return this._options.gateway&&(t.gateway=this._options.gateway),t.direction=this._direction,t}_disconnect(t,n){if(t=typeof t=="string"?t:null,!(this._status!==ye.State.Open&&this._status!==ye.State.Connecting&&this._status!==ye.State.Reconnecting&&this._status!==ye.State.Ringing)){if(this._log.info("Disconnecting..."),this._pstream!==null&&this._pstream.status!=="disconnected"&&this._shouldSendHangup){const r=this.parameters.CallSid||this.outboundConnectionId;r&&this._pstream.hangup(r,t)}this._cleanupEventListeners(),this._mediaHandler.close(),n||this._publisher.info("connection","disconnected-by-local",null,this)}}_maybeTransitionToOpen(){this._wasConnected,this._isAnswered&&(this._onSignalingReconnected(),this._signalingStatus=ye.State.Open,this._mediaHandler&&this._mediaHandler.status==="open"&&(this._status=ye.State.Open,this._wasConnected||(this._wasConnected=!0,this._log.debug("#accept"),this.emit("accept",this))))}_postFeedbackDeclined(){return this._publisher.info("feedback","received-none",null,this,!0)}_publishMetrics(){this._metricsSamples.length!==0&&this._publisher.postMetrics("quality-metrics-samples","metrics-sample",this._metricsSamples.splice(0),this._createMetricPayload(),this).catch(t=>{this._log.warn("Unable to post metrics to Insights. Received error:",t)})}_setCallSid(t){const n=t.callsid;n&&(this.parameters.CallSid=n,this._mediaHandler.callSid=n)}}ye.toString=()=>"[Twilio.Call class]";(function(e){(function(t){t.Closed="closed",t.Connecting="connecting",t.Open="open",t.Pending="pending",t.Reconnecting="reconnecting",t.Ringing="ringing"})(e.State||(e.State={})),function(t){t.AudioLatency="audio-latency",t.ChoppyAudio="choppy-audio",t.DroppedCall="dropped-call",t.Echo="echo",t.NoisyCall="noisy-call",t.OneWayAudio="one-way-audio"}(e.FeedbackIssue||(e.FeedbackIssue={})),function(t){t[t.One=1]="One",t[t.Two=2]="Two",t[t.Three=3]="Three",t[t.Four=4]="Four",t[t.Five=5]="Five"}(e.FeedbackScore||(e.FeedbackScore={})),function(t){t.Incoming="INCOMING",t.Outgoing="OUTGOING"}(e.CallDirection||(e.CallDirection={})),function(t){t.Opus="opus",t.PCMU="pcmu"}(e.Codec||(e.Codec={})),function(t){t.None="none",t.Timeout="timeout"}(e.IceGatheringFailureReason||(e.IceGatheringFailureReason={})),function(t){t.ConnectionDisconnected="ConnectionDisconnected",t.ConnectionFailed="ConnectionFailed",t.IceGatheringFailed="IceGatheringFailed",t.LowBytes="LowBytes"}(e.MediaFailure||(e.MediaFailure={}))})(ye||(ye={}));function Fz(){return"TJSxxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}function UA(e,t){return function(){return e.apply(t,arguments)}}const{toString:jz}=Object.prototype,{getPrototypeOf:S0}=Object,{iterator:nv,toStringTag:BA}=Symbol,rv=(e=>t=>{const n=jz.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),_i=e=>(e=e.toLowerCase(),t=>rv(t)===e),iv=e=>t=>typeof t===e,{isArray:Wu}=Array,Au=iv("undefined");function Jc(e){return e!==null&&!Au(e)&&e.constructor!==null&&!Au(e.constructor)&&or(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const WA=_i("ArrayBuffer");function Uz(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&WA(e.buffer),t}const Bz=iv("string"),or=iv("function"),zA=iv("number"),Yc=e=>e!==null&&typeof e=="object",Wz=e=>e===!0||e===!1,Fh=e=>{if(rv(e)!=="object")return!1;const t=S0(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(BA in e)&&!(nv in e)},zz=e=>{if(!Yc(e)||Jc(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Hz=_i("Date"),Vz=_i("File"),qz=_i("Blob"),Gz=_i("FileList"),Kz=e=>Yc(e)&&or(e.pipe),Qz=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||or(e.append)&&((t=rv(e))==="formdata"||t==="object"&&or(e.toString)&&e.toString()==="[object FormData]"))},Jz=_i("URLSearchParams"),[Yz,Xz,Zz,eH]=["ReadableStream","Request","Response","Headers"].map(_i),tH=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Xc(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),Wu(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{if(Jc(e))return;const s=n?Object.getOwnPropertyNames(e):Object.keys(e),a=s.length;let l;for(r=0;r<a;r++)l=s[r],t.call(null,e[l],l,e)}}function HA(e,t){if(Jc(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const za=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,VA=e=>!Au(e)&&e!==za;function mw(){const{caseless:e,skipUndefined:t}=VA(this)&&this||{},n={},r=(i,s)=>{const a=e&&HA(n,s)||s;Fh(n[a])&&Fh(i)?n[a]=mw(n[a],i):Fh(i)?n[a]=mw({},i):Wu(i)?n[a]=i.slice():(!t||!Au(i))&&(n[a]=i)};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&Xc(arguments[i],r);return n}const nH=(e,t,n,{allOwnKeys:r}={})=>(Xc(t,(i,s)=>{n&&or(i)?e[s]=UA(i,n):e[s]=i},{allOwnKeys:r}),e),rH=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),iH=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},sH=(e,t,n,r)=>{let i,s,a;const l={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)a=i[s],(!r||r(a,e,t))&&!l[a]&&(t[a]=e[a],l[a]=!0);e=n!==!1&&S0(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},aH=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},oH=e=>{if(!e)return null;if(Wu(e))return e;let t=e.length;if(!zA(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},uH=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&S0(Uint8Array)),lH=(e,t)=>{const r=(e&&e[nv]).call(e);let i;for(;(i=r.next())&&!i.done;){const s=i.value;t.call(e,s[0],s[1])}},cH=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},fH=_i("HTMLFormElement"),dH=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),Nk=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),hH=_i("RegExp"),qA=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Xc(n,(i,s)=>{let a;(a=t(i,s,e))!==!1&&(r[s]=a||i)}),Object.defineProperties(e,r)},pH=e=>{qA(e,(t,n)=>{if(or(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(or(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},vH=(e,t)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return Wu(e)?r(e):r(String(e).split(t)),n},gH=()=>{},mH=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function yH(e){return!!(e&&or(e.append)&&e[BA]==="FormData"&&e[nv])}const _H=e=>{const t=new Array(10),n=(r,i)=>{if(Yc(r)){if(t.indexOf(r)>=0)return;if(Jc(r))return r;if(!("toJSON"in r)){t[i]=r;const s=Wu(r)?[]:{};return Xc(r,(a,l)=>{const u=n(a,i+1);!Au(u)&&(s[l]=u)}),t[i]=void 0,s}}return r};return n(e,0)},wH=_i("AsyncFunction"),SH=e=>e&&(Yc(e)||or(e))&&or(e.then)&&or(e.catch),GA=((e,t)=>e?setImmediate:t?((n,r)=>(za.addEventListener("message",({source:i,data:s})=>{i===za&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),za.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",or(za.postMessage)),bH=typeof queueMicrotask<"u"?queueMicrotask.bind(za):typeof process<"u"&&process.nextTick||GA,TH=e=>e!=null&&or(e[nv]),q={isArray:Wu,isArrayBuffer:WA,isBuffer:Jc,isFormData:Qz,isArrayBufferView:Uz,isString:Bz,isNumber:zA,isBoolean:Wz,isObject:Yc,isPlainObject:Fh,isEmptyObject:zz,isReadableStream:Yz,isRequest:Xz,isResponse:Zz,isHeaders:eH,isUndefined:Au,isDate:Hz,isFile:Vz,isBlob:qz,isRegExp:hH,isFunction:or,isStream:Kz,isURLSearchParams:Jz,isTypedArray:uH,isFileList:Gz,forEach:Xc,merge:mw,extend:nH,trim:tH,stripBOM:rH,inherits:iH,toFlatObject:sH,kindOf:rv,kindOfTest:_i,endsWith:aH,toArray:oH,forEachEntry:lH,matchAll:cH,isHTMLForm:fH,hasOwnProperty:Nk,hasOwnProp:Nk,reduceDescriptors:qA,freezeMethods:pH,toObjectSet:vH,toCamelCase:dH,noop:gH,toFiniteNumber:mH,findKey:HA,global:za,isContextDefined:VA,isSpecCompliantForm:yH,toJSONObject:_H,isAsyncFn:wH,isThenable:SH,setImmediate:GA,asap:bH,isIterable:TH};function Be(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}q.inherits(Be,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:q.toJSONObject(this.config),code:this.code,status:this.status}}});const KA=Be.prototype,QA={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{QA[e]={value:e}});Object.defineProperties(Be,QA);Object.defineProperty(KA,"isAxiosError",{value:!0});Be.from=(e,t,n,r,i,s)=>{const a=Object.create(KA);q.toFlatObject(e,a,function(d){return d!==Error.prototype},f=>f!=="isAxiosError");const l=e&&e.message?e.message:"Error",u=t==null&&e?e.code:t;return Be.call(a,l,u,n,r,i),e&&a.cause==null&&Object.defineProperty(a,"cause",{value:e,configurable:!0}),a.name=e&&e.name||"Error",s&&Object.assign(a,s),a};const EH=null;function yw(e){return q.isPlainObject(e)||q.isArray(e)}function JA(e){return q.endsWith(e,"[]")?e.slice(0,-2):e}function Mk(e,t,n){return e?e.concat(t).map(function(i,s){return i=JA(i),!n&&s?"["+i+"]":i}).join(n?".":""):t}function kH(e){return q.isArray(e)&&!e.some(yw)}const IH=q.toFlatObject(q,{},null,function(t){return/^is[A-Z]/.test(t)});function sv(e,t,n){if(!q.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=q.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,T){return!q.isUndefined(T[E])});const r=n.metaTokens,i=n.visitor||d,s=n.dots,a=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&q.isSpecCompliantForm(t);if(!q.isFunction(i))throw new TypeError("visitor must be a function");function f(y){if(y===null)return"";if(q.isDate(y))return y.toISOString();if(q.isBoolean(y))return y.toString();if(!u&&q.isBlob(y))throw new Be("Blob is not supported. Use a Buffer instead.");return q.isArrayBuffer(y)||q.isTypedArray(y)?u&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function d(y,E,T){let w=y;if(y&&!T&&typeof y=="object"){if(q.endsWith(E,"{}"))E=r?E:E.slice(0,-2),y=JSON.stringify(y);else if(q.isArray(y)&&kH(y)||(q.isFileList(y)||q.endsWith(E,"[]"))&&(w=q.toArray(y)))return E=JA(E),w.forEach(function($,N){!(q.isUndefined($)||$===null)&&t.append(a===!0?Mk([E],N,s):a===null?E:E+"[]",f($))}),!1}return yw(y)?!0:(t.append(Mk(T,E,s),f(y)),!1)}const p=[],v=Object.assign(IH,{defaultVisitor:d,convertValue:f,isVisitable:yw});function m(y,E){if(!q.isUndefined(y)){if(p.indexOf(y)!==-1)throw Error("Circular reference detected in "+E.join("."));p.push(y),q.forEach(y,function(w,b){(!(q.isUndefined(w)||w===null)&&i.call(t,w,q.isString(b)?b.trim():b,E,v))===!0&&m(w,E?E.concat(b):[b])}),p.pop()}}if(!q.isObject(e))throw new TypeError("data must be an object");return m(e),t}function Lk(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function b0(e,t){this._pairs=[],e&&sv(e,this,t)}const YA=b0.prototype;YA.append=function(t,n){this._pairs.push([t,n])};YA.toString=function(t){const n=t?function(r){return t.call(this,r,Lk)}:Lk;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function CH(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function XA(e,t,n){if(!t)return e;const r=n&&n.encode||CH;q.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(t,n):s=q.isURLSearchParams(t)?t.toString():new b0(t,n).toString(r),s){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class Dk{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){q.forEach(this.handlers,function(r){r!==null&&t(r)})}}const ZA={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},RH=typeof URLSearchParams<"u"?URLSearchParams:b0,xH=typeof FormData<"u"?FormData:null,$H=typeof Blob<"u"?Blob:null,PH={isBrowser:!0,classes:{URLSearchParams:RH,FormData:xH,Blob:$H},protocols:["http","https","file","blob","url","data"]},T0=typeof window<"u"&&typeof document<"u",_w=typeof navigator=="object"&&navigator||void 0,AH=T0&&(!_w||["ReactNative","NativeScript","NS"].indexOf(_w.product)<0),OH=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",NH=T0&&window.location.href||"http://localhost",MH=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:T0,hasStandardBrowserEnv:AH,hasStandardBrowserWebWorkerEnv:OH,navigator:_w,origin:NH},Symbol.toStringTag,{value:"Module"})),An={...MH,...PH};function LH(e,t){return sv(e,new An.classes.URLSearchParams,{visitor:function(n,r,i,s){return An.isNode&&q.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...t})}function DH(e){return q.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function FH(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}function eO(e){function t(n,r,i,s){let a=n[s++];if(a==="__proto__")return!0;const l=Number.isFinite(+a),u=s>=n.length;return a=!a&&q.isArray(i)?i.length:a,u?(q.hasOwnProp(i,a)?i[a]=[i[a],r]:i[a]=r,!l):((!i[a]||!q.isObject(i[a]))&&(i[a]=[]),t(n,r,i[a],s)&&q.isArray(i[a])&&(i[a]=FH(i[a])),!l)}if(q.isFormData(e)&&q.isFunction(e.entries)){const n={};return q.forEachEntry(e,(r,i)=>{t(DH(r),i,n,0)}),n}return null}function jH(e,t,n){if(q.isString(e))try{return(t||JSON.parse)(e),q.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Zc={transitional:ZA,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=q.isObject(t);if(s&&q.isHTMLForm(t)&&(t=new FormData(t)),q.isFormData(t))return i?JSON.stringify(eO(t)):t;if(q.isArrayBuffer(t)||q.isBuffer(t)||q.isStream(t)||q.isFile(t)||q.isBlob(t)||q.isReadableStream(t))return t;if(q.isArrayBufferView(t))return t.buffer;if(q.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return LH(t,this.formSerializer).toString();if((l=q.isFileList(t))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return sv(l?{"files[]":t}:t,u&&new u,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),jH(t)):t}],transformResponse:[function(t){const n=this.transitional||Zc.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(q.isResponse(t)||q.isReadableStream(t))return t;if(t&&q.isString(t)&&(r&&!this.responseType||i)){const a=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t,this.parseReviver)}catch(l){if(a)throw l.name==="SyntaxError"?Be.from(l,Be.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:An.classes.FormData,Blob:An.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};q.forEach(["delete","get","head","post","put","patch"],e=>{Zc.headers[e]={}});const UH=q.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),BH=e=>{const t={};let n,r,i;return e&&e.split(`
`).forEach(function(a){i=a.indexOf(":"),n=a.substring(0,i).trim().toLowerCase(),r=a.substring(i+1).trim(),!(!n||t[n]&&UH[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},Fk=Symbol("internals");function Fl(e){return e&&String(e).trim().toLowerCase()}function jh(e){return e===!1||e==null?e:q.isArray(e)?e.map(jh):String(e)}function WH(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const zH=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Qm(e,t,n,r,i){if(q.isFunction(r))return r.call(this,t,n);if(i&&(t=n),!!q.isString(t)){if(q.isString(r))return t.indexOf(r)!==-1;if(q.isRegExp(r))return r.test(t)}}function HH(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function VH(e,t){const n=q.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,s,a){return this[r].call(this,t,i,s,a)},configurable:!0})})}let ur=class{constructor(t){t&&this.set(t)}set(t,n,r){const i=this;function s(l,u,f){const d=Fl(u);if(!d)throw new Error("header name must be a non-empty string");const p=q.findKey(i,d);(!p||i[p]===void 0||f===!0||f===void 0&&i[p]!==!1)&&(i[p||u]=jh(l))}const a=(l,u)=>q.forEach(l,(f,d)=>s(f,d,u));if(q.isPlainObject(t)||t instanceof this.constructor)a(t,n);else if(q.isString(t)&&(t=t.trim())&&!zH(t))a(BH(t),n);else if(q.isObject(t)&&q.isIterable(t)){let l={},u,f;for(const d of t){if(!q.isArray(d))throw TypeError("Object iterator must return a key-value pair");l[f=d[0]]=(u=l[f])?q.isArray(u)?[...u,d[1]]:[u,d[1]]:d[1]}a(l,n)}else t!=null&&s(n,t,r);return this}get(t,n){if(t=Fl(t),t){const r=q.findKey(this,t);if(r){const i=this[r];if(!n)return i;if(n===!0)return WH(i);if(q.isFunction(n))return n.call(this,i,r);if(q.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Fl(t),t){const r=q.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Qm(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let i=!1;function s(a){if(a=Fl(a),a){const l=q.findKey(r,a);l&&(!n||Qm(r,r[l],l,n))&&(delete r[l],i=!0)}}return q.isArray(t)?t.forEach(s):s(t),i}clear(t){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!t||Qm(this,this[s],s,t,!0))&&(delete this[s],i=!0)}return i}normalize(t){const n=this,r={};return q.forEach(this,(i,s)=>{const a=q.findKey(r,s);if(a){n[a]=jh(i),delete n[s];return}const l=t?HH(s):String(s).trim();l!==s&&delete n[s],n[l]=jh(i),r[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return q.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&q.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(i=>r.set(i)),r}static accessor(t){const r=(this[Fk]=this[Fk]={accessors:{}}).accessors,i=this.prototype;function s(a){const l=Fl(a);r[l]||(VH(i,a),r[l]=!0)}return q.isArray(t)?t.forEach(s):s(t),this}};ur.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);q.reduceDescriptors(ur.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});q.freezeMethods(ur);function Jm(e,t){const n=this||Zc,r=t||n,i=ur.from(r.headers);let s=r.data;return q.forEach(e,function(l){s=l.call(n,s,i.normalize(),t?t.status:void 0)}),i.normalize(),s}function tO(e){return!!(e&&e.__CANCEL__)}function zu(e,t,n){Be.call(this,e??"canceled",Be.ERR_CANCELED,t,n),this.name="CanceledError"}q.inherits(zu,Be,{__CANCEL__:!0});function nO(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new Be("Request failed with status code "+n.status,[Be.ERR_BAD_REQUEST,Be.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function qH(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function GH(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,s=0,a;return t=t!==void 0?t:1e3,function(u){const f=Date.now(),d=r[s];a||(a=f),n[i]=u,r[i]=f;let p=s,v=0;for(;p!==i;)v+=n[p++],p=p%e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),f-a<t)return;const m=d&&f-d;return m?Math.round(v*1e3/m):void 0}}function KH(e,t){let n=0,r=1e3/t,i,s;const a=(f,d=Date.now())=>{n=d,i=null,s&&(clearTimeout(s),s=null),e(...f)};return[(...f)=>{const d=Date.now(),p=d-n;p>=r?a(f,d):(i=f,s||(s=setTimeout(()=>{s=null,a(i)},r-p)))},()=>i&&a(i)]}const _p=(e,t,n=3)=>{let r=0;const i=GH(50,250);return KH(s=>{const a=s.loaded,l=s.lengthComputable?s.total:void 0,u=a-r,f=i(u),d=a<=l;r=a;const p={loaded:a,total:l,progress:l?a/l:void 0,bytes:u,rate:f||void 0,estimated:f&&l&&d?(l-a)/f:void 0,event:s,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(p)},n)},jk=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Uk=e=>(...t)=>q.asap(()=>e(...t)),QH=An.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,An.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(An.origin),An.navigator&&/(msie|trident)/i.test(An.navigator.userAgent)):()=>!0,JH=An.hasStandardBrowserEnv?{write(e,t,n,r,i,s){const a=[e+"="+encodeURIComponent(t)];q.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),q.isString(r)&&a.push("path="+r),q.isString(i)&&a.push("domain="+i),s===!0&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function YH(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function XH(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function rO(e,t,n){let r=!YH(t);return e&&(r||n==!1)?XH(e,t):t}const Bk=e=>e instanceof ur?{...e}:e;function ro(e,t){t=t||{};const n={};function r(f,d,p,v){return q.isPlainObject(f)&&q.isPlainObject(d)?q.merge.call({caseless:v},f,d):q.isPlainObject(d)?q.merge({},d):q.isArray(d)?d.slice():d}function i(f,d,p,v){if(q.isUndefined(d)){if(!q.isUndefined(f))return r(void 0,f,p,v)}else return r(f,d,p,v)}function s(f,d){if(!q.isUndefined(d))return r(void 0,d)}function a(f,d){if(q.isUndefined(d)){if(!q.isUndefined(f))return r(void 0,f)}else return r(void 0,d)}function l(f,d,p){if(p in t)return r(f,d);if(p in e)return r(void 0,f)}const u={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(f,d,p)=>i(Bk(f),Bk(d),p,!0)};return q.forEach(Object.keys({...e,...t}),function(d){const p=u[d]||i,v=p(e[d],t[d],d);q.isUndefined(v)&&p!==l||(n[d]=v)}),n}const iO=e=>{const t=ro({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:a,auth:l}=t;if(t.headers=a=ur.from(a),t.url=XA(rO(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),q.isFormData(n)){if(An.hasStandardBrowserEnv||An.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(q.isFunction(n.getHeaders)){const u=n.getHeaders(),f=["content-type","content-length"];Object.entries(u).forEach(([d,p])=>{f.includes(d.toLowerCase())&&a.set(d,p)})}}if(An.hasStandardBrowserEnv&&(r&&q.isFunction(r)&&(r=r(t)),r||r!==!1&&QH(t.url))){const u=i&&s&&JH.read(s);u&&a.set(i,u)}return t},ZH=typeof XMLHttpRequest<"u",eV=ZH&&function(e){return new Promise(function(n,r){const i=iO(e);let s=i.data;const a=ur.from(i.headers).normalize();let{responseType:l,onUploadProgress:u,onDownloadProgress:f}=i,d,p,v,m,y;function E(){m&&m(),y&&y(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let T=new XMLHttpRequest;T.open(i.method.toUpperCase(),i.url,!0),T.timeout=i.timeout;function w(){if(!T)return;const $=ur.from("getAllResponseHeaders"in T&&T.getAllResponseHeaders()),z={data:!l||l==="text"||l==="json"?T.responseText:T.response,status:T.status,statusText:T.statusText,headers:$,config:e,request:T};nO(function(K){n(K),E()},function(K){r(K),E()},z),T=null}"onloadend"in T?T.onloadend=w:T.onreadystatechange=function(){!T||T.readyState!==4||T.status===0&&!(T.responseURL&&T.responseURL.indexOf("file:")===0)||setTimeout(w)},T.onabort=function(){T&&(r(new Be("Request aborted",Be.ECONNABORTED,e,T)),T=null)},T.onerror=function(N){const z=N&&N.message?N.message:"Network Error",H=new Be(z,Be.ERR_NETWORK,e,T);H.event=N||null,r(H),T=null},T.ontimeout=function(){let N=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const z=i.transitional||ZA;i.timeoutErrorMessage&&(N=i.timeoutErrorMessage),r(new Be(N,z.clarifyTimeoutError?Be.ETIMEDOUT:Be.ECONNABORTED,e,T)),T=null},s===void 0&&a.setContentType(null),"setRequestHeader"in T&&q.forEach(a.toJSON(),function(N,z){T.setRequestHeader(z,N)}),q.isUndefined(i.withCredentials)||(T.withCredentials=!!i.withCredentials),l&&l!=="json"&&(T.responseType=i.responseType),f&&([v,y]=_p(f,!0),T.addEventListener("progress",v)),u&&T.upload&&([p,m]=_p(u),T.upload.addEventListener("progress",p),T.upload.addEventListener("loadend",m)),(i.cancelToken||i.signal)&&(d=$=>{T&&(r(!$||$.type?new zu(null,e,T):$),T.abort(),T=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const b=qH(i.url);if(b&&An.protocols.indexOf(b)===-1){r(new Be("Unsupported protocol "+b+":",Be.ERR_BAD_REQUEST,e));return}T.send(s||null)})},tV=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,i;const s=function(f){if(!i){i=!0,l();const d=f instanceof Error?f:this.reason;r.abort(d instanceof Be?d:new zu(d instanceof Error?d.message:d))}};let a=t&&setTimeout(()=>{a=null,s(new Be(`timeout ${t} of ms exceeded`,Be.ETIMEDOUT))},t);const l=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(f=>{f.unsubscribe?f.unsubscribe(s):f.removeEventListener("abort",s)}),e=null)};e.forEach(f=>f.addEventListener("abort",s));const{signal:u}=r;return u.unsubscribe=()=>q.asap(l),u}},nV=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,i;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},rV=async function*(e,t){for await(const n of iV(e))yield*nV(n,t)},iV=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},Wk=(e,t,n,r)=>{const i=rV(e,t);let s=0,a,l=u=>{a||(a=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:f,value:d}=await i.next();if(f){l(),u.close();return}let p=d.byteLength;if(n){let v=s+=p;n(v)}u.enqueue(new Uint8Array(d))}catch(f){throw l(f),f}},cancel(u){return l(u),i.return()}},{highWaterMark:2})},zk=64*1024,{isFunction:zd}=q,sV=(({Request:e,Response:t})=>({Request:e,Response:t}))(q.global),{ReadableStream:Hk,TextEncoder:Vk}=q.global,qk=(e,...t)=>{try{return!!e(...t)}catch{return!1}},aV=e=>{e=q.merge.call({skipUndefined:!0},sV,e);const{fetch:t,Request:n,Response:r}=e,i=t?zd(t):typeof fetch=="function",s=zd(n),a=zd(r);if(!i)return!1;const l=i&&zd(Hk),u=i&&(typeof Vk=="function"?(y=>E=>y.encode(E))(new Vk):async y=>new Uint8Array(await new n(y).arrayBuffer())),f=s&&l&&qk(()=>{let y=!1;const E=new n(An.origin,{body:new Hk,method:"POST",get duplex(){return y=!0,"half"}}).headers.has("Content-Type");return y&&!E}),d=a&&l&&qk(()=>q.isReadableStream(new r("").body)),p={stream:d&&(y=>y.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(y=>{!p[y]&&(p[y]=(E,T)=>{let w=E&&E[y];if(w)return w.call(E);throw new Be(`Response type '${y}' is not supported`,Be.ERR_NOT_SUPPORT,T)})});const v=async y=>{if(y==null)return 0;if(q.isBlob(y))return y.size;if(q.isSpecCompliantForm(y))return(await new n(An.origin,{method:"POST",body:y}).arrayBuffer()).byteLength;if(q.isArrayBufferView(y)||q.isArrayBuffer(y))return y.byteLength;if(q.isURLSearchParams(y)&&(y=y+""),q.isString(y))return(await u(y)).byteLength},m=async(y,E)=>{const T=q.toFiniteNumber(y.getContentLength());return T??v(E)};return async y=>{let{url:E,method:T,data:w,signal:b,cancelToken:$,timeout:N,onDownloadProgress:z,onUploadProgress:H,responseType:K,headers:P,withCredentials:ee="same-origin",fetchOptions:Y}=iO(y),oe=t||fetch;K=K?(K+"").toLowerCase():"text";let de=tV([b,$&&$.toAbortSignal()],N),me=null;const we=de&&de.unsubscribe&&(()=>{de.unsubscribe()});let ke;try{if(H&&f&&T!=="get"&&T!=="head"&&(ke=await m(P,w))!==0){let W=new n(E,{method:"POST",body:w,duplex:"half"}),Re;if(q.isFormData(w)&&(Re=W.headers.get("content-type"))&&P.setContentType(Re),W.body){const[kt,De]=jk(ke,_p(Uk(H)));w=Wk(W.body,zk,kt,De)}}q.isString(ee)||(ee=ee?"include":"omit");const _e=s&&"credentials"in n.prototype,Me={...Y,signal:de,method:T.toUpperCase(),headers:P.normalize().toJSON(),body:w,duplex:"half",credentials:_e?ee:void 0};me=s&&new n(E,Me);let te=await(s?oe(me,Y):oe(E,Me));const ve=d&&(K==="stream"||K==="response");if(d&&(z||ve&&we)){const W={};["status","statusText","headers"].forEach(ht=>{W[ht]=te[ht]});const Re=q.toFiniteNumber(te.headers.get("content-length")),[kt,De]=z&&jk(Re,_p(Uk(z),!0))||[];te=new r(Wk(te.body,zk,kt,()=>{De&&De(),we&&we()}),W)}K=K||"text";let be=await p[q.findKey(p,K)||"text"](te,y);return!ve&&we&&we(),await new Promise((W,Re)=>{nO(W,Re,{data:be,headers:ur.from(te.headers),status:te.status,statusText:te.statusText,config:y,request:me})})}catch(_e){throw we&&we(),_e&&_e.name==="TypeError"&&/Load failed|fetch/i.test(_e.message)?Object.assign(new Be("Network Error",Be.ERR_NETWORK,y,me),{cause:_e.cause||_e}):Be.from(_e,_e&&_e.code,y,me)}}},oV=new Map,sO=e=>{let t=e?e.env:{};const{fetch:n,Request:r,Response:i}=t,s=[r,i,n];let a=s.length,l=a,u,f,d=oV;for(;l--;)u=s[l],f=d.get(u),f===void 0&&d.set(u,f=l?new Map:aV(t)),d=f;return f};sO();const ww={http:EH,xhr:eV,fetch:{get:sO}};q.forEach(ww,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Gk=e=>`- ${e}`,uV=e=>q.isFunction(e)||e===null||e===!1,aO={getAdapter:(e,t)=>{e=q.isArray(e)?e:[e];const{length:n}=e;let r,i;const s={};for(let a=0;a<n;a++){r=e[a];let l;if(i=r,!uV(r)&&(i=ww[(l=String(r)).toLowerCase()],i===void 0))throw new Be(`Unknown adapter '${l}'`);if(i&&(q.isFunction(i)||(i=i.get(t))))break;s[l||"#"+a]=i}if(!i){const a=Object.entries(s).map(([u,f])=>`adapter ${u} `+(f===!1?"is not supported by the environment":"is not available in the build"));let l=n?a.length>1?`since :
`+a.map(Gk).join(`
`):" "+Gk(a[0]):"as no adapter specified";throw new Be("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return i},adapters:ww};function Ym(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new zu(null,e)}function Kk(e){return Ym(e),e.headers=ur.from(e.headers),e.data=Jm.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),aO.getAdapter(e.adapter||Zc.adapter,e)(e).then(function(r){return Ym(e),r.data=Jm.call(e,e.transformResponse,r),r.headers=ur.from(r.headers),r},function(r){return tO(r)||(Ym(e),r&&r.response&&(r.response.data=Jm.call(e,e.transformResponse,r.response),r.response.headers=ur.from(r.response.headers))),Promise.reject(r)})}const oO="1.12.2",av={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{av[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Qk={};av.transitional=function(t,n,r){function i(s,a){return"[Axios v"+oO+"] Transitional option '"+s+"'"+a+(r?". "+r:"")}return(s,a,l)=>{if(t===!1)throw new Be(i(a," has been removed"+(n?" in "+n:"")),Be.ERR_DEPRECATED);return n&&!Qk[a]&&(Qk[a]=!0,console.warn(i(a," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,a,l):!0}};av.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function lV(e,t,n){if(typeof e!="object")throw new Be("options must be an object",Be.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],a=t[s];if(a){const l=e[s],u=l===void 0||a(l,s,e);if(u!==!0)throw new Be("option "+s+" must be "+u,Be.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Be("Unknown option "+s,Be.ERR_BAD_OPTION)}}const Uh={assertOptions:lV,validators:av},$i=Uh.validators;let Ka=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Dk,response:new Dk}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=ro(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&Uh.assertOptions(r,{silentJSONParsing:$i.transitional($i.boolean),forcedJSONParsing:$i.transitional($i.boolean),clarifyTimeoutError:$i.transitional($i.boolean)},!1),i!=null&&(q.isFunction(i)?n.paramsSerializer={serialize:i}:Uh.assertOptions(i,{encode:$i.function,serialize:$i.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Uh.assertOptions(n,{baseUrl:$i.spelling("baseURL"),withXsrfToken:$i.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=s&&q.merge(s.common,s[n.method]);s&&q.forEach(["delete","get","head","post","put","patch","common"],y=>{delete s[y]}),n.headers=ur.concat(a,s);const l=[];let u=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(n)===!1||(u=u&&E.synchronous,l.unshift(E.fulfilled,E.rejected))});const f=[];this.interceptors.response.forEach(function(E){f.push(E.fulfilled,E.rejected)});let d,p=0,v;if(!u){const y=[Kk.bind(this),void 0];for(y.unshift(...l),y.push(...f),v=y.length,d=Promise.resolve(n);p<v;)d=d.then(y[p++],y[p++]);return d}v=l.length;let m=n;for(;p<v;){const y=l[p++],E=l[p++];try{m=y(m)}catch(T){E.call(this,T);break}}try{d=Kk.call(this,m)}catch(y){return Promise.reject(y)}for(p=0,v=f.length;p<v;)d=d.then(f[p++],f[p++]);return d}getUri(t){t=ro(this.defaults,t);const n=rO(t.baseURL,t.url,t.allowAbsoluteUrls);return XA(n,t.params,t.paramsSerializer)}};q.forEach(["delete","get","head","options"],function(t){Ka.prototype[t]=function(n,r){return this.request(ro(r||{},{method:t,url:n,data:(r||{}).data}))}});q.forEach(["post","put","patch"],function(t){function n(r){return function(s,a,l){return this.request(ro(l||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}Ka.prototype[t]=n(),Ka.prototype[t+"Form"]=n(!0)});let cV=class uO{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const a=new Promise(l=>{r.subscribe(l),s=l}).then(i);return a.cancel=function(){r.unsubscribe(s)},a},t(function(s,a,l){r.reason||(r.reason=new zu(s,a,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new uO(function(i){t=i}),cancel:t}}};function fV(e){return function(n){return e.apply(null,n)}}function dV(e){return q.isObject(e)&&e.isAxiosError===!0}const Sw={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Sw).forEach(([e,t])=>{Sw[t]=e});function lO(e){const t=new Ka(e),n=UA(Ka.prototype.request,t);return q.extend(n,Ka.prototype,t,{allOwnKeys:!0}),q.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return lO(ro(e,i))},n}const qt=lO(Zc);qt.Axios=Ka;qt.CanceledError=zu;qt.CancelToken=cV;qt.isCancel=tO;qt.VERSION=oO;qt.toFormData=sv;qt.AxiosError=Be;qt.Cancel=qt.CanceledError;qt.all=function(t){return Promise.all(t)};qt.spread=fV;qt.isAxiosError=dV;qt.mergeConfig=ro;qt.AxiosHeaders=ur;qt.formToJSON=e=>eO(q.isHTMLForm(e)?new FormData(e):e);qt.getAdapter=aO.getAdapter;qt.HttpStatusCode=Sw;qt.default=qt;const{Axios:Lhe,AxiosError:Dhe,CanceledError:Fhe,isCancel:jhe,CancelToken:Uhe,VERSION:Bhe,all:Whe,Cancel:zhe,isAxiosError:Hhe,spread:Vhe,toFormData:qhe,AxiosHeaders:Ghe,HttpStatusCode:Khe,formToJSON:Qhe,getAdapter:Jhe,mergeConfig:Yhe}=qt,hV="https://callburner-functions-2333-dev.twil.io",E0=qt.create({baseURL:hV}),pV="https://callburner-functions-2333-dev.twil.io/token",vV=async e=>{const{data:t}=await qt.post(pV,{identity:e});return t.token},gV=async e=>{await E0.post("/calls-register",e)},mV=async e=>{await E0.post("/calls-hangup",{callSid:e})},yV=async(e,t)=>{await E0.post("/calls-recording-toggle",{callSid:e,action:t})},_V=async e=>({callSid:e,dialedNumber:"",startedAt:new Date().toISOString()}),Jk=async()=>[],wV=({identity:e,onIncomingCall:t,onCallEnded:n})=>{const r=Qe.useRef(null),[i,s]=Qe.useState("idle"),[a,l]=Qe.useState(null),[u,f]=Qe.useState(null),d=Qe.useCallback(async()=>{try{s("idle"),f(null);const m=await vV(e);r.current&&(r.current.destroy(),r.current=null);const y=new Se(m,{codecPreferences:[ye.Codec.Opus,ye.Codec.PCMU],closeProtection:!0});y.on("registered",()=>s("ready")),y.on("error",E=>{s("error"),f(E.message)}),y.on("incoming",E=>{t==null||t(E)}),y.on("unregistered",()=>s("idle")),await y.register(),r.current=y}catch(m){console.error("Unable to initialize Twilio Device",m),s("error"),f(m instanceof Error?m.message:"Unknown error")}},[e,t]);Qe.useEffect(()=>(d(),()=>{var m;(m=r.current)==null||m.destroy(),r.current=null}),[d]);const p=Qe.useCallback(async({to:m,record:y,amd:E})=>{r.current||await d();const T=r.current;if(!T)throw new Error("Device is not ready");s("dialing");const w=await T.connect({params:{To:m,record:y?"true":"false",...E!==void 0?{amd:E?"true":"false"}:{}}});return w.on("accept",()=>{s(y?"recording":"in-call"),l(w)}),w.on("disconnect",()=>{s("ended"),l(null),n==null||n(w)}),w.on("cancel",()=>{s("idle"),l(null)}),w.on("error",b=>{s("error"),f(b.message)}),w},[d,n]),v=Qe.useCallback(()=>{a==null||a.disconnect()},[a]);return{connect:p,disconnect:v,phase:i,activeConnection:a,error:u,isRecording:i==="recording"}};var Rr={},jl=function(e){return e&&e.Math===Math&&e},Ke=jl(typeof globalThis=="object"&&globalThis)||jl(typeof window=="object"&&window)||jl(typeof self=="object"&&self)||jl(typeof di=="object"&&di)||jl(typeof di=="object"&&di)||function(){return this}()||Function("return this")(),da={},Ne=function(e){try{return!!e()}catch{return!0}},SV=Ne,At=!SV(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),bV=Ne,ef=!bV(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),TV=ef,Hd=Function.prototype.call,wt=TV?Hd.bind(Hd):function(){return Hd.apply(Hd,arguments)},tf={},cO={}.propertyIsEnumerable,fO=Object.getOwnPropertyDescriptor,EV=fO&&!cO.call({1:2},1);tf.f=EV?function(t){var n=fO(this,t);return!!n&&n.enumerable}:cO;var Hu=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}},dO=ef,hO=Function.prototype,bw=hO.call,kV=dO&&hO.bind.bind(bw,bw),He=dO?kV:function(e){return function(){return bw.apply(e,arguments)}},pO=He,IV=pO({}.toString),CV=pO("".slice),_s=function(e){return CV(IV(e),8,-1)},RV=He,xV=Ne,$V=_s,Xm=Object,PV=RV("".split),nf=xV(function(){return!Xm("z").propertyIsEnumerable(0)})?function(e){return $V(e)==="String"?PV(e,""):Xm(e)}:Xm,Vu=function(e){return e==null},AV=Vu,OV=TypeError,ws=function(e){if(AV(e))throw new OV("Can't call method on "+e);return e},NV=nf,MV=ws,xr=function(e){return NV(MV(e))},Zm=typeof document=="object"&&document.all,Tt=typeof Zm>"u"&&Zm!==void 0?function(e){return typeof e=="function"||e===Zm}:function(e){return typeof e=="function"},LV=Tt,Et=function(e){return typeof e=="object"?e!==null:LV(e)},ey=Ke,DV=Tt,FV=function(e){return DV(e)?e:void 0},wi=function(e,t){return arguments.length<2?FV(ey[e]):ey[e]&&ey[e][t]},jV=He,Ss=jV({}.isPrototypeOf),UV=Ke,Yk=UV.navigator,Xk=Yk&&Yk.userAgent,ha=Xk?String(Xk):"",vO=Ke,ty=ha,Zk=vO.process,eI=vO.Deno,tI=Zk&&Zk.versions||eI&&eI.version,nI=tI&&tI.v8,fi,wp;nI&&(fi=nI.split("."),wp=fi[0]>0&&fi[0]<4?1:+(fi[0]+fi[1]));!wp&&ty&&(fi=ty.match(/Edge\/(\d+)/),(!fi||fi[1]>=74)&&(fi=ty.match(/Chrome\/(\d+)/),fi&&(wp=+fi[1])));var qu=wp,rI=qu,BV=Ne,WV=Ke,zV=WV.String,Gu=!!Object.getOwnPropertySymbols&&!BV(function(){var e=Symbol("symbol detection");return!zV(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&rI&&rI<41}),HV=Gu,gO=HV&&!Symbol.sham&&typeof Symbol.iterator=="symbol",VV=wi,qV=Tt,GV=Ss,KV=gO,QV=Object,Ku=KV?function(e){return typeof e=="symbol"}:function(e){var t=VV("Symbol");return qV(t)&&GV(t.prototype,QV(e))},JV=String,oo=function(e){try{return JV(e)}catch{return"Object"}},YV=Tt,XV=oo,ZV=TypeError,Xr=function(e){if(YV(e))return e;throw new ZV(XV(e)+" is not a function")},eq=Xr,tq=Vu,uo=function(e,t){var n=e[t];return tq(n)?void 0:eq(n)},ny=wt,ry=Tt,iy=Et,nq=TypeError,rq=function(e,t){var n,r;if(t==="string"&&ry(n=e.toString)&&!iy(r=ny(n,e))||ry(n=e.valueOf)&&!iy(r=ny(n,e))||t!=="string"&&ry(n=e.toString)&&!iy(r=ny(n,e)))return r;throw new nq("Can't convert object to primitive value")},mO={exports:{}},iq=!1,iI=Ke,sq=Object.defineProperty,k0=function(e,t){try{sq(iI,e,{value:t,configurable:!0,writable:!0})}catch{iI[e]=t}return t},aq=Ke,oq=k0,sI="__core-js_shared__",aI=mO.exports=aq[sI]||oq(sI,{});(aI.versions||(aI.versions=[])).push({version:"3.47.0",mode:"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru), 2025 CoreJS Company (core-js.io)",license:"https://github.com/zloirock/core-js/blob/v3.47.0/LICENSE",source:"https://github.com/zloirock/core-js"});var I0=mO.exports,oI=I0,Qu=function(e,t){return oI[e]||(oI[e]=t||{})},uq=ws,lq=Object,Nn=function(e){return lq(uq(e))},cq=He,fq=Nn,dq=cq({}.hasOwnProperty),Gt=Object.hasOwn||function(t,n){return dq(fq(t),n)},hq=He,pq=0,vq=Math.random(),gq=hq(1.1.toString),Ju=function(e){return"Symbol("+(e===void 0?"":e)+")_"+gq(++pq+vq,36)},mq=Ke,yq=Qu,uI=Gt,_q=Ju,wq=Gu,Sq=gO,au=mq.Symbol,sy=yq("wks"),bq=Sq?au.for||au:au&&au.withoutSetter||_q,Ot=function(e){return uI(sy,e)||(sy[e]=wq&&uI(au,e)?au[e]:bq("Symbol."+e)),sy[e]},Tq=wt,lI=Et,cI=Ku,Eq=uo,kq=rq,Iq=Ot,Cq=TypeError,Rq=Iq("toPrimitive"),C0=function(e,t){if(!lI(e)||cI(e))return e;var n=Eq(e,Rq),r;if(n){if(t===void 0&&(t="default"),r=Tq(n,e,t),!lI(r)||cI(r))return r;throw new Cq("Can't convert object to primitive value")}return t===void 0&&(t="number"),kq(e,t)},xq=C0,$q=Ku,ov=function(e){var t=xq(e,"string");return $q(t)?t:t+""},Pq=Ke,fI=Et,Tw=Pq.document,Aq=fI(Tw)&&fI(Tw.createElement),uv=function(e){return Aq?Tw.createElement(e):{}},Oq=At,Nq=Ne,Mq=uv,yO=!Oq&&!Nq(function(){return Object.defineProperty(Mq("div"),"a",{get:function(){return 7}}).a!==7}),Lq=At,Dq=wt,Fq=tf,jq=Hu,Uq=xr,Bq=ov,Wq=Gt,zq=yO,dI=Object.getOwnPropertyDescriptor;da.f=Lq?dI:function(t,n){if(t=Uq(t),n=Bq(n),zq)try{return dI(t,n)}catch{}if(Wq(t,n))return jq(!Dq(Fq.f,t,n),t[n])};var qn={},Hq=At,Vq=Ne,_O=Hq&&Vq(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),qq=Et,Gq=String,Kq=TypeError,tn=function(e){if(qq(e))return e;throw new Kq(Gq(e)+" is not an object")},Qq=At,Jq=yO,Yq=_O,Vd=tn,hI=ov,Xq=TypeError,ay=Object.defineProperty,Zq=Object.getOwnPropertyDescriptor,oy="enumerable",uy="configurable",ly="writable";qn.f=Qq?Yq?function(t,n,r){if(Vd(t),n=hI(n),Vd(r),typeof t=="function"&&n==="prototype"&&"value"in r&&ly in r&&!r[ly]){var i=Zq(t,n);i&&i[ly]&&(t[n]=r.value,r={configurable:uy in r?r[uy]:i[uy],enumerable:oy in r?r[oy]:i[oy],writable:!1})}return ay(t,n,r)}:ay:function(t,n,r){if(Vd(t),n=hI(n),Vd(r),Jq)try{return ay(t,n,r)}catch{}if("get"in r||"set"in r)throw new Xq("Accessors not supported");return"value"in r&&(t[n]=r.value),t};var e7=At,t7=qn,n7=Hu,bs=e7?function(e,t,n){return t7.f(e,t,n7(1,n))}:function(e,t,n){return e[t]=n,e},wO={exports:{}},Ew=At,r7=Gt,SO=Function.prototype,i7=Ew&&Object.getOwnPropertyDescriptor,R0=r7(SO,"name"),s7=R0&&(function(){}).name==="something",a7=R0&&(!Ew||Ew&&i7(SO,"name").configurable),rf={EXISTS:R0,PROPER:s7,CONFIGURABLE:a7},o7=He,u7=Tt,kw=I0,l7=o7(Function.toString);u7(kw.inspectSource)||(kw.inspectSource=function(e){return l7(e)});var x0=kw.inspectSource,c7=Ke,f7=Tt,pI=c7.WeakMap,d7=f7(pI)&&/native code/.test(String(pI)),h7=Qu,p7=Ju,vI=h7("keys"),lv=function(e){return vI[e]||(vI[e]=p7(e))},sf={},v7=d7,bO=Ke,g7=Et,m7=bs,cy=Gt,fy=I0,y7=lv,_7=sf,gI="Object already initialized",Iw=bO.TypeError,w7=bO.WeakMap,Sp,Fc,bp,S7=function(e){return bp(e)?Fc(e):Sp(e,{})},b7=function(e){return function(t){var n;if(!g7(t)||(n=Fc(t)).type!==e)throw new Iw("Incompatible receiver, "+e+" required");return n}};if(v7||fy.state){var Pi=fy.state||(fy.state=new w7);Pi.get=Pi.get,Pi.has=Pi.has,Pi.set=Pi.set,Sp=function(e,t){if(Pi.has(e))throw new Iw(gI);return t.facade=e,Pi.set(e,t),t},Fc=function(e){return Pi.get(e)||{}},bp=function(e){return Pi.has(e)}}else{var Uo=y7("state");_7[Uo]=!0,Sp=function(e,t){if(cy(e,Uo))throw new Iw(gI);return t.facade=e,m7(e,Uo,t),t},Fc=function(e){return cy(e,Uo)?e[Uo]:{}},bp=function(e){return cy(e,Uo)}}var Si={set:Sp,get:Fc,has:bp,enforce:S7,getterFor:b7},$0=He,T7=Ne,E7=Tt,qd=Gt,Cw=At,k7=rf.CONFIGURABLE,I7=x0,TO=Si,C7=TO.enforce,R7=TO.get,mI=String,Bh=Object.defineProperty,x7=$0("".slice),$7=$0("".replace),P7=$0([].join),A7=Cw&&!T7(function(){return Bh(function(){},"length",{value:8}).length!==8}),O7=String(String).split("String"),N7=wO.exports=function(e,t,n){x7(mI(t),0,7)==="Symbol("&&(t="["+$7(mI(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!qd(e,"name")||k7&&e.name!==t)&&(Cw?Bh(e,"name",{value:t,configurable:!0}):e.name=t),A7&&n&&qd(n,"arity")&&e.length!==n.arity&&Bh(e,"length",{value:n.arity});try{n&&qd(n,"constructor")&&n.constructor?Cw&&Bh(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch{}var r=C7(e);return qd(r,"source")||(r.source=P7(O7,typeof t=="string"?t:"")),e};Function.prototype.toString=N7(function(){return E7(this)&&R7(this).source||I7(this)},"toString");var EO=wO.exports,M7=Tt,L7=qn,D7=EO,F7=k0,$r=function(e,t,n,r){r||(r={});var i=r.enumerable,s=r.name!==void 0?r.name:t;if(M7(n)&&D7(n,s,r),r.global)i?e[t]=n:F7(t,n);else{try{r.unsafe?e[t]&&(i=!0):delete e[t]}catch{}i?e[t]=n:L7.f(e,t,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return e},lo={},j7=Math.ceil,U7=Math.floor,B7=Math.trunc||function(t){var n=+t;return(n>0?U7:j7)(n)},W7=B7,Ui=function(e){var t=+e;return t!==t||t===0?0:W7(t)},z7=Ui,H7=Math.max,V7=Math.min,Yu=function(e,t){var n=z7(e);return n<0?H7(n+t,0):V7(n,t)},q7=Ui,G7=Math.min,pa=function(e){var t=q7(e);return t>0?G7(t,9007199254740991):0},K7=pa,Mn=function(e){return K7(e.length)},Q7=xr,J7=Yu,Y7=Mn,yI=function(e){return function(t,n,r){var i=Q7(t),s=Y7(i);if(s===0)return!e&&-1;var a=J7(r,s),l;if(e&&n!==n){for(;s>a;)if(l=i[a++],l!==l)return!0}else for(;s>a;a++)if((e||a in i)&&i[a]===n)return e||a||0;return!e&&-1}},cv={includes:yI(!0),indexOf:yI(!1)},X7=He,dy=Gt,Z7=xr,eG=cv.indexOf,tG=sf,_I=X7([].push),kO=function(e,t){var n=Z7(e),r=0,i=[],s;for(s in n)!dy(tG,s)&&dy(n,s)&&_I(i,s);for(;t.length>r;)dy(n,s=t[r++])&&(~eG(i,s)||_I(i,s));return i},P0=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],nG=kO,rG=P0,iG=rG.concat("length","prototype");lo.f=Object.getOwnPropertyNames||function(t){return nG(t,iG)};var af={};af.f=Object.getOwnPropertySymbols;var sG=wi,aG=He,oG=lo,uG=af,lG=tn,cG=aG([].concat),IO=sG("Reflect","ownKeys")||function(t){var n=oG.f(lG(t)),r=uG.f;return r?cG(n,r(t)):n},wI=Gt,fG=IO,dG=da,hG=qn,A0=function(e,t,n){for(var r=fG(t),i=hG.f,s=dG.f,a=0;a<r.length;a++){var l=r[a];!wI(e,l)&&!(n&&wI(n,l))&&i(e,l,s(t,l))}},pG=Ne,vG=Tt,gG=/#|\.prototype\./,of=function(e,t){var n=yG[mG(e)];return n===wG?!0:n===_G?!1:vG(t)?pG(t):!!t},mG=of.normalize=function(e){return String(e).replace(gG,".").toLowerCase()},yG=of.data={},_G=of.NATIVE="N",wG=of.POLYFILL="P",fv=of,Gd=Ke,SG=da.f,bG=bs,TG=$r,EG=k0,kG=A0,IG=fv,et=function(e,t){var n=e.target,r=e.global,i=e.stat,s,a,l,u,f,d;if(r?a=Gd:i?a=Gd[n]||EG(n,{}):a=Gd[n]&&Gd[n].prototype,a)for(l in t){if(f=t[l],e.dontCallGetSet?(d=SG(a,l),u=d&&d.value):u=a[l],s=IG(r?l:n+(i?".":"#")+l,e.forced),!s&&u!==void 0){if(typeof f==typeof u)continue;kG(f,u)}(e.sham||u&&u.sham)&&bG(f,"sham",!0),TG(a,l,f,e)}},CG=kO,RG=P0,uf=Object.keys||function(t){return CG(t,RG)},xG=et,$G=Nn,CO=uf,PG=Ne,AG=PG(function(){CO(1)});xG({target:"Object",stat:!0,forced:AG},{keys:function(t){return CO($G(t))}});var OG=Ot,NG=OG("toStringTag"),RO={};RO[NG]="z";var O0=String(RO)==="[object z]",MG=O0,LG=Tt,Wh=_s,DG=Ot,FG=DG("toStringTag"),jG=Object,UG=Wh(function(){return arguments}())==="Arguments",BG=function(e,t){try{return e[t]}catch{}},va=MG?Wh:function(e){var t,n,r;return e===void 0?"Undefined":e===null?"Null":typeof(n=BG(t=jG(e),FG))=="string"?n:UG?Wh(t):(r=Wh(t))==="Object"&&LG(t.callee)?"Arguments":r},WG=va,zG=String,Gn=function(e){if(WG(e)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return zG(e)},N0={},HG=At,VG=_O,qG=qn,GG=tn,KG=xr,QG=uf;N0.f=HG&&!VG?Object.defineProperties:function(t,n){GG(t);for(var r=KG(n),i=QG(n),s=i.length,a=0,l;s>a;)qG.f(t,l=i[a++],r[l]);return t};var JG=wi,xO=JG("document","documentElement"),YG=tn,XG=N0,SI=P0,ZG=sf,e9=xO,t9=uv,n9=lv,bI=">",TI="<",Rw="prototype",xw="script",$O=n9("IE_PROTO"),hy=function(){},PO=function(e){return TI+xw+bI+e+TI+"/"+xw+bI},EI=function(e){e.write(PO("")),e.close();var t=e.parentWindow.Object;return e=null,t},r9=function(){var e=t9("iframe"),t="java"+xw+":",n;return e.style.display="none",e9.appendChild(e),e.src=String(t),n=e.contentWindow.document,n.open(),n.write(PO("document.F=Object")),n.close(),n.F},Kd,zh=function(){try{Kd=new ActiveXObject("htmlfile")}catch{}zh=typeof document<"u"?document.domain&&Kd?EI(Kd):r9():EI(Kd);for(var e=SI.length;e--;)delete zh[Rw][SI[e]];return zh()};ZG[$O]=!0;var co=Object.create||function(t,n){var r;return t!==null?(hy[Rw]=YG(t),r=new hy,hy[Rw]=null,r[$O]=t):r=zh(),n===void 0?r:XG.f(r,n)},M0={},i9=He,Ts=i9([].slice),s9=_s,a9=xr,AO=lo.f,o9=Ts,OO=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],u9=function(e){try{return AO(e)}catch{return o9(OO)}};M0.f=function(t){return OO&&s9(t)==="Window"?u9(t):AO(a9(t))};var kI=EO,l9=qn,ga=function(e,t,n){return n.get&&kI(n.get,t,{getter:!0}),n.set&&kI(n.set,t,{setter:!0}),l9.f(e,t,n)},L0={},c9=Ot;L0.f=c9;var f9=Ke,D0=f9,II=D0,d9=Gt,h9=L0,p9=qn.f,NO=function(e){var t=II.Symbol||(II.Symbol={});d9(t,e)||p9(t,e,{value:h9.f(e)})},v9=wt,g9=wi,m9=Ot,y9=$r,_9=function(){var e=g9("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,r=m9("toPrimitive");t&&!t[r]&&y9(t,r,function(i){return v9(n,this)},{arity:1})},w9=qn.f,S9=Gt,b9=Ot,CI=b9("toStringTag"),ma=function(e,t,n){e&&!n&&(e=e.prototype),e&&!S9(e,CI)&&w9(e,CI,{configurable:!0,value:t})},T9=_s,E9=He,MO=function(e){if(T9(e)==="Function")return E9(e)},RI=MO,k9=Xr,I9=ef,C9=RI(RI.bind),fo=function(e,t){return k9(e),t===void 0?e:I9?C9(e,t):function(){return e.apply(t,arguments)}},R9=_s,lf=Array.isArray||function(t){return R9(t)==="Array"},x9=He,$9=Ne,LO=Tt,P9=va,A9=wi,O9=x0,DO=function(){},FO=A9("Reflect","construct"),F0=/^\s*(?:class|function)\b/,N9=x9(F0.exec),M9=!F0.test(DO),Ul=function(t){if(!LO(t))return!1;try{return FO(DO,[],t),!0}catch{return!1}},jO=function(t){if(!LO(t))return!1;switch(P9(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return M9||!!N9(F0,O9(t))}catch{return!0}};jO.sham=!0;var dv=!FO||$9(function(){var e;return Ul(Ul.call)||!Ul(Object)||!Ul(function(){e=!0})||e})?jO:Ul,xI=lf,L9=dv,D9=Et,F9=Ot,j9=F9("species"),$I=Array,U9=function(e){var t;return xI(e)&&(t=e.constructor,L9(t)&&(t===$I||xI(t.prototype))?t=void 0:D9(t)&&(t=t[j9],t===null&&(t=void 0))),t===void 0?$I:t},B9=U9,j0=function(e,t){return new(B9(e))(t===0?0:t)},W9=fo,z9=He,H9=nf,V9=Nn,q9=Mn,G9=j0,PI=z9([].push),xa=function(e){var t=e===1,n=e===2,r=e===3,i=e===4,s=e===6,a=e===7,l=e===5||s;return function(u,f,d,p){for(var v=V9(u),m=H9(v),y=q9(m),E=W9(f,d),T=0,w=p||G9,b=t?w(u,y):n||a?w(u,0):void 0,$,N;y>T;T++)if((l||T in m)&&($=m[T],N=E($,T,v),e))if(t)b[T]=N;else if(N)switch(e){case 3:return!0;case 5:return $;case 6:return T;case 2:PI(b,$)}else switch(e){case 4:return!1;case 7:PI(b,$)}return s?-1:r||i?i:b}},Zr={forEach:xa(0),map:xa(1),filter:xa(2),some:xa(3),every:xa(4),find:xa(5),findIndex:xa(6)},hv=et,cf=Ke,U0=wt,K9=He,Ou=At,Nu=Gu,Q9=Ne,pn=Gt,J9=Ss,$w=tn,pv=xr,B0=ov,Y9=Gn,Pw=Hu,Mu=co,UO=uf,X9=lo,BO=M0,Z9=af,WO=da,zO=qn,eK=N0,HO=tf,py=$r,tK=ga,W0=Qu,nK=lv,VO=sf,AI=Ju,rK=Ot,iK=L0,sK=NO,aK=_9,oK=ma,qO=Si,vv=Zr.forEach,tr=nK("hidden"),gv="Symbol",jc="prototype",uK=qO.set,OI=qO.getterFor(gv),qr=Object[jc],Qa=cf.Symbol,ic=Qa&&Qa[jc],lK=cf.RangeError,cK=cf.TypeError,vy=cf.QObject,GO=WO.f,Ja=zO.f,KO=BO.f,fK=HO.f,QO=K9([].push),vs=W0("symbols"),ff=W0("op-symbols"),dK=W0("wks"),Aw=!vy||!vy[jc]||!vy[jc].findChild,JO=function(e,t,n){var r=GO(qr,t);r&&delete qr[t],Ja(e,t,n),r&&e!==qr&&Ja(qr,t,r)},Ow=Ou&&Q9(function(){return Mu(Ja({},"a",{get:function(){return Ja(this,"a",{value:7}).a}})).a!==7})?JO:Ja,gy=function(e,t){var n=vs[e]=Mu(ic);return uK(n,{type:gv,tag:e,description:t}),Ou||(n.description=t),n},mv=function(t,n,r){t===qr&&mv(ff,n,r),$w(t);var i=B0(n);return $w(r),pn(vs,i)?(r.enumerable?(pn(t,tr)&&t[tr][i]&&(t[tr][i]=!1),r=Mu(r,{enumerable:Pw(0,!1)})):(pn(t,tr)||Ja(t,tr,Pw(1,Mu(null))),t[tr][i]=!0),Ow(t,i,r)):Ja(t,i,r)},z0=function(t,n){$w(t);var r=pv(n),i=UO(r).concat(ZO(r));return vv(i,function(s){(!Ou||U0(Nw,r,s))&&mv(t,s,r[s])}),t},hK=function(t,n){return n===void 0?Mu(t):z0(Mu(t),n)},Nw=function(t){var n=B0(t),r=U0(fK,this,n);return this===qr&&pn(vs,n)&&!pn(ff,n)?!1:r||!pn(this,n)||!pn(vs,n)||pn(this,tr)&&this[tr][n]?r:!0},YO=function(t,n){var r=pv(t),i=B0(n);if(!(r===qr&&pn(vs,i)&&!pn(ff,i))){var s=GO(r,i);return s&&pn(vs,i)&&!(pn(r,tr)&&r[tr][i])&&(s.enumerable=!0),s}},XO=function(t){var n=KO(pv(t)),r=[];return vv(n,function(i){!pn(vs,i)&&!pn(VO,i)&&QO(r,i)}),r},ZO=function(e){var t=e===qr,n=KO(t?ff:pv(e)),r=[];return vv(n,function(i){pn(vs,i)&&(!t||pn(qr,i))&&QO(r,vs[i])}),r};Nu||(Qa=function(){if(J9(ic,this))throw new cK("Symbol is not a constructor");var t=!arguments.length||arguments[0]===void 0?void 0:Y9(arguments[0]),n=AI(t),r=function(i){var s=this===void 0?cf:this;s===qr&&U0(r,ff,i),pn(s,tr)&&pn(s[tr],n)&&(s[tr][n]=!1);var a=Pw(1,i);try{Ow(s,n,a)}catch(l){if(!(l instanceof lK))throw l;JO(s,n,a)}};return Ou&&Aw&&Ow(qr,n,{configurable:!0,set:r}),gy(n,t)},ic=Qa[jc],py(ic,"toString",function(){return OI(this).tag}),py(Qa,"withoutSetter",function(e){return gy(AI(e),e)}),HO.f=Nw,zO.f=mv,eK.f=z0,WO.f=YO,X9.f=BO.f=XO,Z9.f=ZO,iK.f=function(e){return gy(rK(e),e)},Ou&&(tK(ic,"description",{configurable:!0,get:function(){return OI(this).description}}),py(qr,"propertyIsEnumerable",Nw,{unsafe:!0})));hv({global:!0,constructor:!0,wrap:!0,forced:!Nu,sham:!Nu},{Symbol:Qa});vv(UO(dK),function(e){sK(e)});hv({target:gv,stat:!0,forced:!Nu},{useSetter:function(){Aw=!0},useSimple:function(){Aw=!1}});hv({target:"Object",stat:!0,forced:!Nu,sham:!Ou},{create:hK,defineProperty:mv,defineProperties:z0,getOwnPropertyDescriptor:YO});hv({target:"Object",stat:!0,forced:!Nu},{getOwnPropertyNames:XO});aK();oK(Qa,gv);VO[tr]=!0;var pK=Gu,e2=pK&&!!Symbol.for&&!!Symbol.keyFor,vK=et,gK=wi,mK=Gt,yK=Gn,t2=Qu,_K=e2,my=t2("string-to-symbol-registry"),wK=t2("symbol-to-string-registry");vK({target:"Symbol",stat:!0,forced:!_K},{for:function(e){var t=yK(e);if(mK(my,t))return my[t];var n=gK("Symbol")(t);return my[t]=n,wK[n]=t,n}});var SK=et,bK=Gt,TK=Ku,EK=oo,kK=Qu,IK=e2,NI=kK("symbol-to-string-registry");SK({target:"Symbol",stat:!0,forced:!IK},{keyFor:function(t){if(!TK(t))throw new TypeError(EK(t)+" is not a symbol");if(bK(NI,t))return NI[t]}});var CK=ef,n2=Function.prototype,MI=n2.apply,LI=n2.call,ho=typeof Reflect=="object"&&Reflect.apply||(CK?LI.bind(MI):function(){return LI.apply(MI,arguments)}),RK=Et,xK=Si.get,$K=function(t){if(!RK(t))return!1;var n=xK(t);return!!n&&n.type==="RawJSON"},H0=He,PK=Gt,Qd=SyntaxError,AK=parseInt,OK=String.fromCharCode,NK=H0("".charAt),DI=H0("".slice),FI=H0(/./.exec),jI={'\\"':'"',"\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"	"},MK=/^[\da-f]{4}$/i,LK=/^[\u0000-\u001F]$/,DK=function(e,t){for(var n=!0,r="";t<e.length;){var i=NK(e,t);if(i==="\\"){var s=DI(e,t,t+2);if(PK(jI,s))r+=jI[s],t+=2;else if(s==="\\u"){t+=2;var a=DI(e,t,t+4);if(!FI(MK,a))throw new Qd("Bad Unicode escape at: "+t);r+=OK(AK(a,16)),t+=4}else throw new Qd('Unknown escape sequence: "'+s+'"')}else if(i==='"'){n=!1,t++;break}else{if(FI(LK,i))throw new Qd("Bad control character in string literal at: "+t);r+=i,t++}}if(n)throw new Qd("Unterminated string at: "+t);return{value:r,end:t}},FK=Ne,jK=!FK(function(){var e="9007199254740993",t=JSON.rawJSON(e);return!JSON.isRawJSON(t)||JSON.stringify(t)!==e}),UK=et,r2=wi,BK=ho,i2=wt,po=He,s2=Ne,UI=lf,Tp=Tt,WK=$K,BI=Ku,WI=_s,zK=Gn,HK=Ts,VK=DK,qK=Ju,GK=Gu,yy=jK,a2=String,na=r2("JSON","stringify"),Jd=po(/./.exec),Mw=po("".charAt),KK=po("".charCodeAt),QK=po("".replace),_y=po("".slice),Lw=po([].push),JK=po(1.1.toString),YK=/[\uD800-\uDFFF]/g,zI=/^[\uD800-\uDBFF]$/,HI=/^[\uDC00-\uDFFF]$/,Dw=qK(),VI=Dw.length,o2=!GK||s2(function(){var e=r2("Symbol")("stringify detection");return na([e])!=="[null]"||na({a:e})!=="{}"||na(Object(e))!=="{}"}),qI=s2(function(){return na("\uDF06\uD834")!=='"\\udf06\\ud834"'||na("\uDEAD")!=='"\\udead"'}),XK=o2?function(e,t){var n=HK(arguments),r=u2(t);if(!(!Tp(r)&&(e===void 0||BI(e))))return n[1]=function(i,s){if(Tp(r)&&(s=i2(r,this,a2(i),s)),!BI(s))return s},BK(na,null,n)}:na,ZK=function(e,t,n){var r=Mw(n,t-1),i=Mw(n,t+1);return Jd(zI,e)&&!Jd(HI,i)||Jd(HI,e)&&!Jd(zI,r)?"\\u"+JK(KK(e,0),16):e},u2=function(e){if(Tp(e))return e;if(UI(e)){for(var t=e.length,n=[],r=0;r<t;r++){var i=e[r];typeof i=="string"?Lw(n,i):(typeof i=="number"||WI(i)==="Number"||WI(i)==="String")&&Lw(n,zK(i))}var s=n.length,a=!0;return function(l,u){if(a)return a=!1,u;if(UI(this))return u;for(var f=0;f<s;f++)if(n[f]===l)return u}}};na&&UK({target:"JSON",stat:!0,arity:3,forced:o2||qI||!yy},{stringify:function(t,n,r){var i=u2(n),s=[],a=XK(t,function(m,y){var E=Tp(i)?i2(i,this,a2(m),y):y;return!yy&&WK(E)?Dw+(Lw(s,E.rawJSON)-1):E},r);if(typeof a!="string"||(qI&&(a=QK(a,YK,ZK)),yy))return a;for(var l="",u=a.length,f=0;f<u;f++){var d=Mw(a,f);if(d==='"'){var p=VK(a,++f).end-1,v=_y(a,f,p);l+=_y(v,0,VI)===Dw?s[_y(v,VI)]:'"'+v+'"',f=p}else l+=d}return l}});var eQ=et,tQ=Gu,nQ=Ne,l2=af,rQ=Nn,iQ=!tQ||nQ(function(){l2.f(1)});eQ({target:"Object",stat:!0,forced:iQ},{getOwnPropertySymbols:function(t){var n=l2.f;return n?n(rQ(t)):[]}});var sQ=Ne,aQ=Ot,oQ=qu,uQ=aQ("species"),df=function(e){return oQ>=51||!sQ(function(){var t=[],n=t.constructor={};return n[uQ]=function(){return{foo:1}},t[e](Boolean).foo!==1})},lQ=et,cQ=Zr.filter,fQ=df,dQ=fQ("filter");lQ({target:"Array",proto:!0,forced:!dQ},{filter:function(t){return cQ(this,t,arguments.length>1?arguments[1]:void 0)}});var hQ=et,pQ=Ne,vQ=xr,c2=da.f,f2=At,gQ=!f2||pQ(function(){c2(1)});hQ({target:"Object",stat:!0,forced:gQ,sham:!f2},{getOwnPropertyDescriptor:function(t,n){return c2(vQ(t),n)}});var d2={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},mQ=uv,wy=mQ("span").classList,GI=wy&&wy.constructor&&wy.constructor.prototype,h2=GI===Object.prototype?void 0:GI,yQ=Ne,yv=function(e,t){var n=[][e];return!!n&&yQ(function(){n.call(null,t||function(){return 1},1)})},_Q=Zr.forEach,wQ=yv,SQ=wQ("forEach"),bQ=SQ?[].forEach:function(t){return _Q(this,t,arguments.length>1?arguments[1]:void 0)},KI=Ke,QI=d2,TQ=h2,Sy=bQ,EQ=bs,p2=function(e){if(e&&e.forEach!==Sy)try{EQ(e,"forEach",Sy)}catch{e.forEach=Sy}};for(var by in QI)QI[by]&&p2(KI[by]&&KI[by].prototype);p2(TQ);var kQ=At,IQ=qn,CQ=Hu,hf=function(e,t,n){kQ?IQ.f(e,t,CQ(0,n)):e[t]=n},RQ=et,xQ=At,$Q=IO,PQ=xr,AQ=da,OQ=hf;RQ({target:"Object",stat:!0,sham:!xQ},{getOwnPropertyDescriptors:function(t){for(var n=PQ(t),r=AQ.f,i=$Q(n),s={},a=0,l,u;i.length>a;)u=r(n,l=i[a++]),u!==void 0&&OQ(s,l,u);return s}});var NQ=et,MQ=Ke,LQ=ma;NQ({global:!0},{Reflect:{}});LQ(MQ.Reflect,"Reflect",!0);var v2=He,DQ=Xr,FQ=Et,jQ=Gt,JI=Ts,UQ=ef,g2=Function,BQ=v2([].concat),WQ=v2([].join),Ty={},zQ=function(e,t,n){if(!jQ(Ty,t)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";Ty[t]=g2("C,a","return new C("+WQ(r,",")+")")}return Ty[t](e,n)},HQ=UQ?g2.bind:function(t){var n=DQ(this),r=n.prototype,i=JI(arguments,1),s=function(){var l=BQ(i,JI(arguments));return this instanceof s?zQ(n,l.length,l):n.apply(t,l)};return FQ(r)&&(s.prototype=r),s},VQ=dv,qQ=oo,GQ=TypeError,V0=function(e){if(VQ(e))return e;throw new GQ(qQ(e)+" is not a constructor")},KQ=et,QQ=wi,Ey=ho,JQ=HQ,YI=V0,YQ=tn,XI=Et,XQ=co,m2=Ne,q0=QQ("Reflect","construct"),ZQ=Object.prototype,eJ=[].push,y2=m2(function(){function e(){}return!(q0(function(){},[],e)instanceof e)}),_2=!m2(function(){q0(function(){})}),ZI=y2||_2;KQ({target:"Reflect",stat:!0,forced:ZI,sham:ZI},{construct:function(t,n){YI(t),YQ(n);var r=arguments.length<3?t:YI(arguments[2]);if(_2&&!y2)return q0(t,n,r);if(t===r){switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3])}var i=[null];return Ey(eJ,i,n),new(Ey(JQ,t,i))}var s=r.prototype,a=XQ(XI(s)?s:ZQ),l=Ey(t,a,n);return XI(l)?l:a}});var w2={exports:{}};(function(e){function t(r,i,s,a,l,u,f){try{var d=r[u](f),p=d.value}catch(v){return void s(v)}d.done?i(p):Promise.resolve(p).then(a,l)}function n(r){return function(){var i=this,s=arguments;return new Promise(function(a,l){var u=r.apply(i,s);function f(p){t(u,a,l,f,d,"next",p)}function d(p){t(u,a,l,f,d,"throw",p)}f(void 0)})}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(w2);var S2=w2.exports,b2={exports:{}};(function(e){function t(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(b2);var pf=b2.exports,T2={exports:{}},E2={exports:{}},k2={exports:{}};(function(e){function t(n){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(k2);var vo=k2.exports,I2={exports:{}};(function(e){var t=vo.default;function n(r,i){if(t(r)!="object"||!r)return r;var s=r[Symbol.toPrimitive];if(s!==void 0){var a=s.call(r,i||"default");if(t(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(r)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(I2);var tJ=I2.exports;(function(e){var t=vo.default,n=tJ;function r(i){var s=n(i,"string");return t(s)=="symbol"?s:s+""}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(E2);var C2=E2.exports;(function(e){var t=C2;function n(i,s){for(var a=0;a<s.length;a++){var l=s[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,t(l.key),l)}}function r(i,s,a){return s&&n(i.prototype,s),a&&n(i,a),Object.defineProperty(i,"prototype",{writable:!1}),i}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(T2);var vf=T2.exports,R2={exports:{}};(function(e){function t(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(R2);var gf=R2.exports,x2={exports:{}},$2={exports:{}};(function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})($2);var G0=$2.exports;(function(e){var t=G0;function n(r,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),i&&t(r,i)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(x2);var mf=x2.exports,P2={exports:{}};(function(e){var t=vo.default,n=gf;function r(i,s){if(s&&(t(s)=="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n(i)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(P2);var yf=P2.exports,A2={exports:{}};(function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(A2);var go=A2.exports,O2={exports:{}};(function(e){var t=C2;function n(r,i,s){return(i=t(i))in r?Object.defineProperty(r,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[i]=s,r}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(O2);var _v=O2.exports,nJ=et,rJ=Zr.map,iJ=df,sJ=iJ("map");nJ({target:"Array",proto:!0,forced:!sJ},{map:function(t){return rJ(this,t,arguments.length>1?arguments[1]:void 0)}});var aJ=O0,oJ=va,uJ=aJ?{}.toString:function(){return"[object "+oJ(this)+"]"},lJ=O0,cJ=$r,fJ=uJ;lJ||cJ(Object.prototype,"toString",fJ,{unsafe:!0});var Bl=Ke,dJ=ha,hJ=_s,Yd=function(e){return dJ.slice(0,e.length)===e},N2=function(){return Yd("Bun/")?"BUN":Yd("Cloudflare-Workers")?"CLOUDFLARE":Yd("Deno/")?"DENO":Yd("Node.js/")?"NODE":Bl.Bun&&typeof Bun.version=="string"?"BUN":Bl.Deno&&typeof Deno.version=="object"?"DENO":hJ(Bl.process)==="process"?"NODE":Bl.window&&Bl.document?"BROWSER":"REST"}(),pJ=N2,K0=pJ==="NODE",vJ=He,gJ=Xr,mJ=function(e,t,n){try{return vJ(gJ(Object.getOwnPropertyDescriptor(e,t)[n]))}catch{}},yJ=Et,_J=function(e){return yJ(e)||e===null},wJ=_J,SJ=String,bJ=TypeError,TJ=function(e){if(wJ(e))return e;throw new bJ("Can't set "+SJ(e)+" as a prototype")},EJ=mJ,kJ=Et,IJ=ws,CJ=TJ,Xu=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,t={},n;try{n=EJ(Object.prototype,"__proto__","set"),n(t,[]),e=t instanceof Array}catch{}return function(i,s){return IJ(i),CJ(s),kJ(i)&&(e?n(i,s):i.__proto__=s),i}}():void 0),RJ=wi,xJ=ga,$J=Ot,PJ=At,eC=$J("species"),Q0=function(e){var t=RJ(e);PJ&&t&&!t[eC]&&xJ(t,eC,{configurable:!0,get:function(){return this}})},AJ=Ss,OJ=TypeError,_f=function(e,t){if(AJ(t,e))return e;throw new OJ("Incorrect invocation")},tC=tn,NJ=V0,MJ=Vu,LJ=Ot,DJ=LJ("species"),M2=function(e,t){var n=tC(e).constructor,r;return n===void 0||MJ(r=tC(n)[DJ])?t:NJ(r)},FJ=TypeError,jJ=function(e,t){if(e<t)throw new FJ("Not enough arguments");return e},UJ=ha,L2=/(?:ipad|iphone|ipod).*applewebkit/i.test(UJ),Sr=Ke,BJ=ho,WJ=fo,nC=Tt,zJ=Gt,D2=Ne,rC=xO,HJ=Ts,iC=uv,VJ=jJ,qJ=L2,GJ=K0,Fw=Sr.setImmediate,sC=Sr.clearImmediate,KJ=Sr.process,ky=Sr.Dispatch,QJ=Sr.Function,aC=Sr.MessageChannel,JJ=Sr.String,Iy=0,yc={},oC="onreadystatechange",Uc,$a,Cy,Ry;D2(function(){Uc=Sr.location});var J0=function(e){if(zJ(yc,e)){var t=yc[e];delete yc[e],t()}},xy=function(e){return function(){J0(e)}},uC=function(e){J0(e.data)},lC=function(e){Sr.postMessage(JJ(e),Uc.protocol+"//"+Uc.host)};(!Fw||!sC)&&(Fw=function(t){VJ(arguments.length,1);var n=nC(t)?t:QJ(t),r=HJ(arguments,1);return yc[++Iy]=function(){BJ(n,void 0,r)},$a(Iy),Iy},sC=function(t){delete yc[t]},GJ?$a=function(e){KJ.nextTick(xy(e))}:ky&&ky.now?$a=function(e){ky.now(xy(e))}:aC&&!qJ?(Cy=new aC,Ry=Cy.port2,Cy.port1.onmessage=uC,$a=WJ(Ry.postMessage,Ry)):Sr.addEventListener&&nC(Sr.postMessage)&&!Sr.importScripts&&Uc&&Uc.protocol!=="file:"&&!D2(lC)?($a=lC,Sr.addEventListener("message",uC,!1)):oC in iC("script")?$a=function(e){rC.appendChild(iC("script"))[oC]=function(){rC.removeChild(this),J0(e)}}:$a=function(e){setTimeout(xy(e),0)});var F2={set:Fw},cC=Ke,YJ=At,XJ=Object.getOwnPropertyDescriptor,ZJ=function(e){if(!YJ)return cC[e];var t=XJ(cC,e);return t&&t.value},j2=function(){this.head=null,this.tail=null};j2.prototype={add:function(e){var t={item:e,next:null},n=this.tail;n?n.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e){var t=this.head=e.next;return t===null&&(this.tail=null),e.item}}};var U2=j2,eY=ha,tY=/ipad|iphone|ipod/i.test(eY)&&typeof Pebble<"u",nY=ha,rY=/web0s(?!.*chrome)/i.test(nY),Lu=Ke,iY=ZJ,fC=fo,$y=F2.set,sY=U2,aY=L2,oY=tY,uY=rY,Py=K0,dC=Lu.MutationObserver||Lu.WebKitMutationObserver,hC=Lu.document,pC=Lu.process,Xd=Lu.Promise,jw=iY("queueMicrotask"),Bo,Ay,Oy,Zd,vC;if(!jw){var eh=new sY,th=function(){var e,t;for(Py&&(e=pC.domain)&&e.exit();t=eh.get();)try{t()}catch(n){throw eh.head&&Bo(),n}e&&e.enter()};!aY&&!Py&&!uY&&dC&&hC?(Ay=!0,Oy=hC.createTextNode(""),new dC(th).observe(Oy,{characterData:!0}),Bo=function(){Oy.data=Ay=!Ay}):!oY&&Xd&&Xd.resolve?(Zd=Xd.resolve(void 0),Zd.constructor=Xd,vC=fC(Zd.then,Zd),Bo=function(){vC(th)}):Py?Bo=function(){pC.nextTick(th)}:($y=fC($y,Lu),Bo=function(){$y(th)}),jw=function(e){eh.head||Bo(),eh.add(e)}}var lY=jw,cY=function(e,t){try{arguments.length===1?console.error(e):console.error(e,t)}catch{}},Y0=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}},fY=Ke,wv=fY.Promise,dY=Ke,_c=wv,hY=Tt,pY=fv,vY=x0,gY=Ot,gC=N2,Ny=qu;_c&&_c.prototype;var mY=gY("species"),Uw=!1,B2=hY(dY.PromiseRejectionEvent),yY=pY("Promise",function(){var e=vY(_c),t=e!==String(_c);if(!t&&Ny===66)return!0;if(!Ny||Ny<51||!/native code/.test(e)){var n=new _c(function(s){s(1)}),r=function(s){s(function(){},function(){})},i=n.constructor={};if(i[mY]=r,Uw=n.then(function(){})instanceof r,!Uw)return!0}return!t&&(gC==="BROWSER"||gC==="DENO")&&!B2}),wf={CONSTRUCTOR:yY,REJECTION_EVENT:B2,SUBCLASSING:Uw},Zu={},mC=Xr,_Y=TypeError,wY=function(e){var t,n;this.promise=new e(function(r,i){if(t!==void 0||n!==void 0)throw new _Y("Bad Promise constructor");t=r,n=i}),this.resolve=mC(t),this.reject=mC(n)};Zu.f=function(e){return new wY(e)};var SY=et,Ep=K0,oa=Ke,bY=D0,Du=wt,yC=$r,_C=Xu,TY=ma,EY=Q0,kY=Xr,Hh=Tt,IY=Et,CY=_f,RY=M2,W2=F2.set,X0=lY,xY=cY,$Y=Y0,PY=U2,z2=Si,kp=wv,Z0=wf,H2=Zu,Sv="Promise",V2=Z0.CONSTRUCTOR,AY=Z0.REJECTION_EVENT,OY=Z0.SUBCLASSING,My=z2.getterFor(Sv),NY=z2.set,qo=kp&&kp.prototype,Fa=kp,nh=qo,q2=oa.TypeError,Bw=oa.document,eb=oa.process,Ww=H2.f,MY=Ww,LY=!!(Bw&&Bw.createEvent&&oa.dispatchEvent),G2="unhandledrejection",DY="rejectionhandled",wC=0,K2=1,FY=2,tb=1,Q2=2,rh,SC,J2,bC,Y2=function(e){var t;return IY(e)&&Hh(t=e.then)?t:!1},X2=function(e,t){var n=t.value,r=t.state===K2,i=r?e.ok:e.fail,s=e.resolve,a=e.reject,l=e.domain,u,f,d;try{i?(r||(t.rejection===Q2&&UY(t),t.rejection=tb),i===!0?u=n:(l&&l.enter(),u=i(n),l&&(l.exit(),d=!0)),u===e.promise?a(new q2("Promise-chain cycle")):(f=Y2(u))?Du(f,u,s,a):s(u)):a(n)}catch(p){l&&!d&&l.exit(),a(p)}},Z2=function(e,t){e.notified||(e.notified=!0,X0(function(){for(var n=e.reactions,r;r=n.get();)X2(r,e);e.notified=!1,t&&!e.rejection&&jY(e)}))},eN=function(e,t,n){var r,i;LY?(r=Bw.createEvent("Event"),r.promise=t,r.reason=n,r.initEvent(e,!1,!0),oa.dispatchEvent(r)):r={promise:t,reason:n},!AY&&(i=oa["on"+e])?i(r):e===G2&&xY("Unhandled promise rejection",n)},jY=function(e){Du(W2,oa,function(){var t=e.facade,n=e.value,r=TC(e),i;if(r&&(i=$Y(function(){Ep?eb.emit("unhandledRejection",n,t):eN(G2,t,n)}),e.rejection=Ep||TC(e)?Q2:tb,i.error))throw i.value})},TC=function(e){return e.rejection!==tb&&!e.parent},UY=function(e){Du(W2,oa,function(){var t=e.facade;Ep?eb.emit("rejectionHandled",t):eN(DY,t,e.value)})},ou=function(e,t,n){return function(r){e(t,r,n)}},mu=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=FY,Z2(e,!0))},zw=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw new q2("Promise can't be resolved itself");var r=Y2(t);r?X0(function(){var i={done:!1};try{Du(r,t,ou(zw,i,e),ou(mu,i,e))}catch(s){mu(i,s,e)}}):(e.value=t,e.state=K2,Z2(e,!1))}catch(i){mu({done:!1},i,e)}}};if(V2&&(Fa=function(t){CY(this,nh),kY(t),Du(rh,this);var n=My(this);try{t(ou(zw,n),ou(mu,n))}catch(r){mu(n,r)}},nh=Fa.prototype,rh=function(t){NY(this,{type:Sv,done:!1,notified:!1,parent:!1,reactions:new PY,rejection:!1,state:wC,value:null})},rh.prototype=yC(nh,"then",function(t,n){var r=My(this),i=Ww(RY(this,Fa));return r.parent=!0,i.ok=Hh(t)?t:!0,i.fail=Hh(n)&&n,i.domain=Ep?eb.domain:void 0,r.state===wC?r.reactions.add(i):X0(function(){X2(i,r)}),i.promise}),SC=function(){var e=new rh,t=My(e);this.promise=e,this.resolve=ou(zw,t),this.reject=ou(mu,t)},H2.f=Ww=function(e){return e===Fa||e===J2?new SC(e):MY(e)},Hh(kp)&&qo!==Object.prototype)){bC=qo.then,OY||yC(qo,"then",function(t,n){var r=this;return new Fa(function(i,s){Du(bC,r,i,s)}).then(t,n)},{unsafe:!0});try{delete qo.constructor}catch{}_C&&_C(qo,nh)}SY({global:!0,constructor:!0,wrap:!0,forced:V2},{Promise:Fa});J2=bY.Promise;TY(Fa,Sv,!1);EY(Sv);var Sf={},BY=Ot,WY=Sf,zY=BY("iterator"),HY=Array.prototype,nb=function(e){return e!==void 0&&(WY.Array===e||HY[zY]===e)},VY=va,EC=uo,qY=Vu,GY=Sf,KY=Ot,QY=KY("iterator"),bv=function(e){if(!qY(e))return EC(e,QY)||EC(e,"@@iterator")||GY[VY(e)]},JY=wt,YY=Xr,XY=tn,ZY=oo,eX=bv,tX=TypeError,rb=function(e,t){var n=arguments.length<2?eX(e):t;if(YY(n))return XY(JY(n,e));throw new tX(ZY(e)+" is not iterable")},nX=wt,kC=tn,rX=uo,tN=function(e,t,n){var r,i;kC(e);try{if(r=rX(e,"return"),!r){if(t==="throw")throw n;return n}r=nX(r,e)}catch(s){i=!0,r=s}if(t==="throw")throw n;if(i)throw r;return kC(r),n},iX=fo,sX=wt,aX=tn,oX=oo,uX=nb,lX=Mn,IC=Ss,cX=rb,fX=bv,CC=tN,dX=TypeError,Vh=function(e,t){this.stopped=e,this.result=t},RC=Vh.prototype,Tv=function(e,t,n){var r=n&&n.that,i=!!(n&&n.AS_ENTRIES),s=!!(n&&n.IS_RECORD),a=!!(n&&n.IS_ITERATOR),l=!!(n&&n.INTERRUPTED),u=iX(t,r),f,d,p,v,m,y,E,T=function(b){return f&&CC(f,"normal"),new Vh(!0,b)},w=function(b){return i?(aX(b),l?u(b[0],b[1],T):u(b[0],b[1])):l?u(b,T):u(b)};if(s)f=e.iterator;else if(a)f=e;else{if(d=fX(e),!d)throw new dX(oX(e)+" is not iterable");if(uX(d)){for(p=0,v=lX(e);v>p;p++)if(m=w(e[p]),m&&IC(RC,m))return m;return new Vh(!1)}f=cX(e,d)}for(y=s?e.next:f.next;!(E=sX(y,f)).done;){try{m=w(E.value)}catch(b){CC(f,"throw",b)}if(typeof m=="object"&&m&&IC(RC,m))return m}return new Vh(!1)},hX=Ot,nN=hX("iterator"),rN=!1;try{var pX=0,xC={next:function(){return{done:!!pX++}},return:function(){rN=!0}};xC[nN]=function(){return this},Array.from(xC,function(){throw 2})}catch{}var Ev=function(e,t){try{if(!t&&!rN)return!1}catch{return!1}var n=!1;try{var r={};r[nN]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch{}return n},vX=wv,gX=Ev,mX=wf.CONSTRUCTOR,iN=mX||!gX(function(e){vX.all(e).then(void 0,function(){})}),yX=et,_X=wt,wX=Xr,SX=Zu,bX=Y0,TX=Tv,EX=iN;yX({target:"Promise",stat:!0,forced:EX},{all:function(t){var n=this,r=SX.f(n),i=r.resolve,s=r.reject,a=bX(function(){var l=wX(n.resolve),u=[],f=0,d=1;TX(t,function(p){var v=f++,m=!1;d++,_X(l,n,p).then(function(y){m||(m=!0,u[v]=y,--d||i(u))},s)}),--d||i(u)});return a.error&&s(a.value),r.promise}});var kX=et,IX=wf.CONSTRUCTOR,Hw=wv,CX=wi,RX=Tt,xX=$r,$C=Hw&&Hw.prototype;kX({target:"Promise",proto:!0,forced:IX,real:!0},{catch:function(e){return this.then(void 0,e)}});if(RX(Hw)){var PC=CX("Promise").prototype.catch;$C.catch!==PC&&xX($C,"catch",PC,{unsafe:!0})}var $X=et,PX=wt,AX=Xr,OX=Zu,NX=Y0,MX=Tv,LX=iN;$X({target:"Promise",stat:!0,forced:LX},{race:function(t){var n=this,r=OX.f(n),i=r.reject,s=NX(function(){var a=AX(n.resolve);MX(t,function(l){PX(a,n,l).then(r.resolve,i)})});return s.error&&i(s.value),r.promise}});var DX=et,FX=Zu,jX=wf.CONSTRUCTOR;DX({target:"Promise",stat:!0,forced:jX},{reject:function(t){var n=FX.f(this),r=n.reject;return r(t),n.promise}});var UX=tn,BX=Et,WX=Zu,zX=function(e,t){if(UX(e),BX(t)&&t.constructor===e)return t;var n=WX.f(e),r=n.resolve;return r(t),n.promise},HX=et,VX=wi,qX=wf.CONSTRUCTOR,GX=zX;VX("Promise");HX({target:"Promise",stat:!0,forced:qX},{resolve:function(t){return GX(this,t)}});var sN={exports:{}},aN={exports:{}};(function(e){function t(n,r){this.v=n,this.k=r}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(aN);var oN=aN.exports,uN={exports:{}},lN={exports:{}};(function(e){function t(n,r,i,s){var a=Object.defineProperty;try{a({},"",{})}catch{a=0}e.exports=t=function(u,f,d,p){function v(m,y){t(u,m,function(E){return this._invoke(m,y,E)})}f?a?a(u,f,{value:d,enumerable:!p,configurable:!p,writable:!p}):u[f]=d:(v("next",0),v("throw",1),v("return",2))},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r,i,s)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(lN);var cN=lN.exports;(function(e){var t=cN;function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var r,i,s=typeof Symbol=="function"?Symbol:{},a=s.iterator||"@@iterator",l=s.toStringTag||"@@toStringTag";function u(T,w,b,$){var N=w&&w.prototype instanceof d?w:d,z=Object.create(N.prototype);return t(z,"_invoke",function(H,K,P){var ee,Y,oe,de=0,me=P||[],we=!1,ke={p:0,n:0,v:r,a:_e,f:_e.bind(r,4),d:function(te,ve){return ee=te,Y=0,oe=r,ke.n=ve,f}};function _e(Me,te){for(Y=Me,oe=te,i=0;!we&&de&&!ve&&i<me.length;i++){var ve,be=me[i],W=ke.p,Re=be[2];Me>3?(ve=Re===te)&&(oe=be[(Y=be[4])?5:(Y=3,3)],be[4]=be[5]=r):be[0]<=W&&((ve=Me<2&&W<be[1])?(Y=0,ke.v=te,ke.n=be[1]):W<Re&&(ve=Me<3||be[0]>te||te>Re)&&(be[4]=Me,be[5]=te,ke.n=Re,Y=0))}if(ve||Me>1)return f;throw we=!0,te}return function(Me,te,ve){if(de>1)throw TypeError("Generator is already running");for(we&&te===1&&_e(te,ve),Y=te,oe=ve;(i=Y<2?r:oe)||!we;){ee||(Y?Y<3?(Y>1&&(ke.n=-1),_e(Y,oe)):ke.n=oe:ke.v=oe);try{if(de=2,ee){if(Y||(Me="next"),i=ee[Me]){if(!(i=i.call(ee,oe)))throw TypeError("iterator result is not an object");if(!i.done)return i;oe=i.value,Y<2&&(Y=0)}else Y===1&&(i=ee.return)&&i.call(ee),Y<2&&(oe=TypeError("The iterator does not provide a '"+Me+"' method"),Y=1);ee=r}else if((i=(we=ke.n<0)?oe:H.call(K,ke))!==f)break}catch(be){ee=r,Y=1,oe=be}finally{de=1}}return{value:i,done:we}}}(T,b,$),!0),z}var f={};function d(){}function p(){}function v(){}i=Object.getPrototypeOf;var m=[][a]?i(i([][a]())):(t(i={},a,function(){return this}),i),y=v.prototype=d.prototype=Object.create(m);function E(T){return Object.setPrototypeOf?Object.setPrototypeOf(T,v):(T.__proto__=v,t(T,l,"GeneratorFunction")),T.prototype=Object.create(y),T}return p.prototype=v,t(y,"constructor",v),t(v,"constructor",p),p.displayName="GeneratorFunction",t(v,l,"GeneratorFunction"),t(y),t(y,l,"Generator"),t(y,a,function(){return this}),t(y,"toString",function(){return"[object Generator]"}),(e.exports=n=function(){return{w:u,m:E}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(uN);var fN=uN.exports,dN={exports:{}},hN={exports:{}},pN={exports:{}};(function(e){var t=oN,n=cN;function r(i,s){function a(u,f,d,p){try{var v=i[u](f),m=v.value;return m instanceof t?s.resolve(m.v).then(function(y){a("next",y,d,p)},function(y){a("throw",y,d,p)}):s.resolve(m).then(function(y){v.value=y,d(v)},function(y){return a("throw",y,d,p)})}catch(y){p(y)}}var l;this.next||(n(r.prototype),n(r.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),n(this,"_invoke",function(u,f,d){function p(){return new s(function(v,m){a(u,d,v,m)})}return l=l?l.then(p,p):p()},!0)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(pN);var vN=pN.exports;(function(e){var t=fN,n=vN;function r(i,s,a,l,u){return new n(t().w(i,s,a,l),u||Promise)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(hN);var gN=hN.exports;(function(e){var t=gN;function n(r,i,s,a,l){var u=t(r,i,s,a,l);return u.next().then(function(f){return f.done?f.value:u.next()})}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(dN);var KX=dN.exports,mN={exports:{}};(function(e){function t(n){var r=Object(n),i=[];for(var s in r)i.unshift(s);return function a(){for(;i.length;)if((s=i.pop())in r)return a.value=s,a.done=!1,a;return a.done=!0,a}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(mN);var QX=mN.exports,yN={exports:{}};(function(e){var t=vo.default;function n(r){if(r!=null){var i=r[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],s=0;if(i)return i.call(r);if(typeof r.next=="function")return r;if(!isNaN(r.length))return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}}}throw new TypeError(t(r)+" is not iterable")}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(yN);var JX=yN.exports;(function(e){var t=oN,n=fN,r=KX,i=gN,s=vN,a=QX,l=JX;function u(){var f=n(),d=f.m(u),p=(Object.getPrototypeOf?Object.getPrototypeOf(d):d.__proto__).constructor;function v(E){var T=typeof E=="function"&&E.constructor;return!!T&&(T===p||(T.displayName||T.name)==="GeneratorFunction")}var m={throw:1,return:2,break:3,continue:3};function y(E){var T,w;return function(b){T||(T={stop:function(){return w(b.a,2)},catch:function(){return b.v},abrupt:function(N,z){return w(b.a,m[N],z)},delegateYield:function(N,z,H){return T.resultName=z,w(b.d,l(N),H)},finish:function(N){return w(b.f,N)}},w=function(N,z,H){b.p=T.prev,b.n=T.next;try{return N(z,H)}finally{T.next=b.n}}),T.resultName&&(T[T.resultName]=b.v,T.resultName=void 0),T.sent=b.v,T.next=b.n;try{return E.call(this,T)}finally{b.p=T.prev,b.n=T.next}}}return(e.exports=u=function(){return{wrap:function(w,b,$,N){return f.w(y(w),b,$,N&&N.reverse())},isGeneratorFunction:v,mark:f.m,awrap:function(w,b){return new t(w,b)},AsyncIterator:s,async:function(w,b,$,N,z){return(v(b)?i:r)(y(w),b,$,N,z)},keys:a,values:l}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=u,e.exports.__esModule=!0,e.exports.default=e.exports})(sN);var YX=sN.exports,qh=YX(),_N=qh;try{regeneratorRuntime=qh}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=qh:Function("r","regeneratorRuntime = r")(qh)}var Tn={},XX=At,ZX=rf.EXISTS,wN=He,eZ=ga,SN=Function.prototype,tZ=wN(SN.toString),bN=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,nZ=wN(bN.exec),rZ="name";XX&&!ZX&&eZ(SN,rZ,{configurable:!0,get:function(){try{return nZ(bN,tZ(this))[1]}catch{return""}}});var TN={exports:{}},EN={exports:{}};(function(e){function t(n){if(Array.isArray(n))return n}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(EN);var iZ=EN.exports,kN={exports:{}};(function(e){function t(n,r){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var s,a,l,u,f=[],d=!0,p=!1;try{if(l=(i=i.call(n)).next,r===0){if(Object(i)!==i)return;d=!1}else for(;!(d=(s=l.call(i)).done)&&(f.push(s.value),f.length!==r);d=!0);}catch(v){p=!0,a=v}finally{try{if(!d&&i.return!=null&&(u=i.return(),Object(u)!==u))return}finally{if(p)throw a}}return f}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(kN);var sZ=kN.exports,IN={exports:{}},CN={exports:{}};(function(e){function t(n,r){(r==null||r>n.length)&&(r=n.length);for(var i=0,s=Array(r);i<r;i++)s[i]=n[i];return s}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(CN);var RN=CN.exports;(function(e){var t=RN;function n(r,i){if(r){if(typeof r=="string")return t(r,i);var s={}.toString.call(r).slice(8,-1);return s==="Object"&&r.constructor&&(s=r.constructor.name),s==="Map"||s==="Set"?Array.from(r):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?t(r,i):void 0}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(IN);var xN=IN.exports,$N={exports:{}};(function(e){function t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})($N);var aZ=$N.exports;(function(e){var t=iZ,n=sZ,r=xN,i=aZ;function s(a,l){return t(a)||n(a,l)||r(a,l)||i()}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports})(TN);var PN=TN.exports,oZ=Ot,uZ=co,lZ=qn.f,Vw=oZ("unscopables"),qw=Array.prototype;qw[Vw]===void 0&&lZ(qw,Vw,{configurable:!0,value:uZ(null)});var AN=function(e){qw[Vw][e]=!0},cZ=Ne,fZ=!cZ(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),dZ=Gt,hZ=Tt,pZ=Nn,vZ=lv,gZ=fZ,AC=vZ("IE_PROTO"),Gw=Object,mZ=Gw.prototype,bf=gZ?Gw.getPrototypeOf:function(e){var t=pZ(e);if(dZ(t,AC))return t[AC];var n=t.constructor;return hZ(n)&&t instanceof n?n.prototype:t instanceof Gw?mZ:null},yZ=Ne,_Z=Tt,wZ=Et,OC=bf,SZ=$r,bZ=Ot,Kw=bZ("iterator"),ON=!1,io,Ly,Dy;[].keys&&(Dy=[].keys(),"next"in Dy?(Ly=OC(OC(Dy)),Ly!==Object.prototype&&(io=Ly)):ON=!0);var TZ=!wZ(io)||yZ(function(){var e={};return io[Kw].call(e)!==e});TZ&&(io={});_Z(io[Kw])||SZ(io,Kw,function(){return this});var NN={IteratorPrototype:io,BUGGY_SAFARI_ITERATORS:ON},EZ=NN.IteratorPrototype,kZ=co,IZ=Hu,CZ=ma,RZ=Sf,xZ=function(){return this},$Z=function(e,t,n,r){var i=t+" Iterator";return e.prototype=kZ(EZ,{next:IZ(+!r,n)}),CZ(e,i,!1),RZ[i]=xZ,e},PZ=et,AZ=wt,MN=rf,OZ=Tt,NZ=$Z,NC=bf,MC=Xu,MZ=ma,LZ=bs,Fy=$r,DZ=Ot,FZ=Sf,LN=NN,jZ=MN.PROPER,UZ=MN.CONFIGURABLE,LC=LN.IteratorPrototype,ih=LN.BUGGY_SAFARI_ITERATORS,Wl=DZ("iterator"),DC="keys",zl="values",FC="entries",BZ=function(){return this},ib=function(e,t,n,r,i,s,a){NZ(n,t,r);var l=function(w){if(w===i&&v)return v;if(!ih&&w&&w in d)return d[w];switch(w){case DC:return function(){return new n(this,w)};case zl:return function(){return new n(this,w)};case FC:return function(){return new n(this,w)}}return function(){return new n(this)}},u=t+" Iterator",f=!1,d=e.prototype,p=d[Wl]||d["@@iterator"]||i&&d[i],v=!ih&&p||l(i),m=t==="Array"&&d.entries||p,y,E,T;if(m&&(y=NC(m.call(new e)),y!==Object.prototype&&y.next&&(NC(y)!==LC&&(MC?MC(y,LC):OZ(y[Wl])||Fy(y,Wl,BZ)),MZ(y,u,!0))),jZ&&i===zl&&p&&p.name!==zl&&(UZ?LZ(d,"name",zl):(f=!0,v=function(){return AZ(p,this)})),i)if(E={values:l(zl),keys:s?v:l(DC),entries:l(FC)},a)for(T in E)(ih||f||!(T in d))&&Fy(d,T,E[T]);else PZ({target:t,proto:!0,forced:ih||f},E);return d[Wl]!==v&&Fy(d,Wl,v,{name:i}),FZ[t]=v,E},sb=function(e,t){return{value:e,done:t}},WZ=xr,ab=AN,jC=Sf,DN=Si,zZ=qn.f,HZ=ib,sh=sb,VZ=At,FN="Array Iterator",qZ=DN.set,GZ=DN.getterFor(FN),jN=HZ(Array,"Array",function(e,t){qZ(this,{type:FN,target:WZ(e),index:0,kind:t})},function(){var e=GZ(this),t=e.target,n=e.index++;if(!t||n>=t.length)return e.target=null,sh(void 0,!0);switch(e.kind){case"keys":return sh(n,!1);case"values":return sh(t[n],!1)}return sh([n,t[n]],!1)},"values"),UC=jC.Arguments=jC.Array;ab("keys");ab("values");ab("entries");if(VZ&&UC.name!=="values")try{zZ(UC,"name",{value:"values"})}catch{}var BC=Ke,UN=d2,KZ=h2,sc=jN,WC=bs,QZ=ma,JZ=Ot,jy=JZ("iterator"),Uy=sc.values,BN=function(e,t){if(e){if(e[jy]!==Uy)try{WC(e,jy,Uy)}catch{e[jy]=Uy}if(QZ(e,t,!0),UN[t]){for(var n in sc)if(e[n]!==sc[n])try{WC(e,n,sc[n])}catch{e[n]=sc[n]}}}};for(var By in UN)BN(BC[By]&&BC[By].prototype,By);BN(KZ,"DOMTokenList");var YZ=TypeError,XZ=9007199254740991,WN=function(e){if(e>XZ)throw YZ("Maximum allowed index exceeded");return e},ZZ=et,eee=Ne,tee=lf,nee=Et,ree=Nn,iee=Mn,zC=WN,HC=hf,see=j0,aee=df,oee=Ot,uee=qu,zN=oee("isConcatSpreadable"),lee=uee>=51||!eee(function(){var e=[];return e[zN]=!1,e.concat()[0]!==e}),cee=function(e){if(!nee(e))return!1;var t=e[zN];return t!==void 0?!!t:tee(e)},fee=!lee||!aee("concat");ZZ({target:"Array",proto:!0,arity:1,forced:fee},{concat:function(t){var n=ree(this),r=see(n,0),i=0,s,a,l,u,f;for(s=-1,l=arguments.length;s<l;s++)if(f=s===-1?n:arguments[s],cee(f))for(u=iee(f),zC(i+u),a=0;a<u;a++,i++)a in f&&HC(r,i,f[a]);else zC(i+1),HC(r,i++,f);return r.length=i,r}});var dee=et,VC=lf,hee=dv,pee=Et,qC=Yu,vee=Mn,gee=xr,mee=hf,yee=Ot,_ee=df,wee=Ts,See=_ee("slice"),bee=yee("species"),Wy=Array,Tee=Math.max;dee({target:"Array",proto:!0,forced:!See},{slice:function(t,n){var r=gee(this),i=vee(r),s=qC(t,i),a=qC(n===void 0?i:n,i),l,u,f;if(VC(r)&&(l=r.constructor,hee(l)&&(l===Wy||VC(l.prototype))?l=void 0:pee(l)&&(l=l[bee],l===null&&(l=void 0)),l===Wy||l===void 0))return wee(r,s,a);for(u=new(l===void 0?Wy:l)(Tee(a-s,0)),f=0;s<a;s++,f++)s in r&&mee(u,f,r[s]);return u.length=f,u}});var Eee=tn,kee=tN,Iee=function(e,t,n,r){try{return r?t(Eee(n)[0],n[1]):t(n)}catch(i){kee(e,"throw",i)}},Cee=fo,Ree=wt,xee=Nn,$ee=Iee,Pee=nb,Aee=dv,Oee=Mn,GC=hf,Nee=rb,Mee=bv,KC=Array,Lee=function(t){var n=xee(t),r=Aee(this),i=arguments.length,s=i>1?arguments[1]:void 0,a=s!==void 0;a&&(s=Cee(s,i>2?arguments[2]:void 0));var l=Mee(n),u=0,f,d,p,v,m,y;if(l&&!(this===KC&&Pee(l)))for(d=r?new this:[],v=Nee(n,l),m=v.next;!(p=Ree(m,v)).done;u++)y=a?$ee(v,s,[p.value,u],!0):p.value,GC(d,u,y);else for(f=Oee(n),d=r?new this(f):KC(f);f>u;u++)y=a?s(n[u],u):n[u],GC(d,u,y);return d.length=u,d},Dee=et,Fee=Lee,jee=Ev,Uee=!jee(function(e){Array.from(e)});Dee({target:"Array",stat:!0,forced:Uee},{from:Fee});var ob=He,Bee=Ui,Wee=Gn,zee=ws,Hee=ob("".charAt),QC=ob("".charCodeAt),Vee=ob("".slice),qee=function(e){return function(t,n){var r=Wee(zee(t)),i=Bee(n),s=r.length,a,l;return i<0||i>=s?e?"":void 0:(a=QC(r,i),a<55296||a>56319||i+1===s||(l=QC(r,i+1))<56320||l>57343?e?Hee(r,i):a:e?Vee(r,i,i+2):(a-55296<<10)+(l-56320)+65536)}},HN={charAt:qee(!0)},Gee=HN.charAt,Kee=Gn,VN=Si,Qee=ib,JC=sb,qN="String Iterator",Jee=VN.set,Yee=VN.getterFor(qN);Qee(String,"String",function(e){Jee(this,{type:qN,string:Kee(e),index:0})},function(){var t=Yee(this),n=t.string,r=t.index,i;return r>=n.length?JC(void 0,!0):(i=Gee(n,r),t.index+=i.length,JC(i,!1))});var Xee=tn,GN=function(){var e=Xee(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t},ub=Ne,Zee=Ke,lb=Zee.RegExp,cb=ub(function(){var e=lb("a","y");return e.lastIndex=2,e.exec("abcd")!==null});cb||ub(function(){return!lb("a","y").sticky});var ete=cb||ub(function(){var e=lb("^r","gy");return e.lastIndex=2,e.exec("str")!==null}),KN={BROKEN_CARET:ete,UNSUPPORTED_Y:cb},tte=Ne,nte=Ke,rte=nte.RegExp,ite=tte(function(){var e=rte(".","s");return!(e.dotAll&&e.test(`
`)&&e.flags==="s")}),ste=Ne,ate=Ke,ote=ate.RegExp,ute=ste(function(){var e=ote("(?<a>b)","g");return e.exec("b").groups.a!=="b"||"b".replace(e,"$<a>c")!=="bc"}),uu=wt,kv=He,lte=Gn,cte=GN,fte=KN,dte=Qu,hte=co,pte=Si.get,vte=ite,gte=ute,mte=dte("native-string-replace",String.prototype.replace),Ip=RegExp.prototype.exec,Qw=Ip,yte=kv("".charAt),_te=kv("".indexOf),wte=kv("".replace),zy=kv("".slice),Jw=function(){var e=/a/,t=/b*/g;return uu(Ip,e,"a"),uu(Ip,t,"a"),e.lastIndex!==0||t.lastIndex!==0}(),QN=fte.BROKEN_CARET,Yw=/()??/.exec("")[1]!==void 0,Ste=Jw||Yw||QN||vte||gte;Ste&&(Qw=function(t){var n=this,r=pte(n),i=lte(t),s=r.raw,a,l,u,f,d,p,v;if(s)return s.lastIndex=n.lastIndex,a=uu(Qw,s,i),n.lastIndex=s.lastIndex,a;var m=r.groups,y=QN&&n.sticky,E=uu(cte,n),T=n.source,w=0,b=i;if(y&&(E=wte(E,"y",""),_te(E,"g")===-1&&(E+="g"),b=zy(i,n.lastIndex),n.lastIndex>0&&(!n.multiline||n.multiline&&yte(i,n.lastIndex-1)!==`
`)&&(T="(?: "+T+")",b=" "+b,w++),l=new RegExp("^(?:"+T+")",E)),Yw&&(l=new RegExp("^"+T+"$(?!\\s)",E)),Jw&&(u=n.lastIndex),f=uu(Ip,y?l:n,b),y?f?(f.input=zy(f.input,w),f[0]=zy(f[0],w),f.index=n.lastIndex,n.lastIndex+=f[0].length):n.lastIndex=0:Jw&&f&&(n.lastIndex=n.global?f.index+f[0].length:u),Yw&&f&&f.length>1&&uu(mte,f[0],l,function(){for(d=1;d<arguments.length-2;d++)arguments[d]===void 0&&(f[d]=void 0)}),f&&m)for(f.groups=p=hte(null),d=0;d<m.length;d++)v=m[d],p[v[0]]=f[v[1]];return f});var fb=Qw,bte=et,YC=fb;bte({target:"RegExp",proto:!0,forced:/./.exec!==YC},{exec:YC});var Tte=et,XC=wt,Ete=Tt,ZC=tn,kte=Gn,Ite=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},t.test("abc")===!0&&e}(),Cte=/./.test;Tte({target:"RegExp",proto:!0,forced:!Ite},{test:function(e){var t=ZC(this),n=kte(e),r=t.exec;if(!Ete(r))return XC(Cte,t,n);var i=XC(r,t,n);return i===null?!1:(ZC(i),!0)}});var Rte=et,xte=At,$te=Ke,ah=He,Pte=Gt,Ate=Tt,Ote=Ss,Nte=Gn,Mte=ga,Lte=A0,es=$te.Symbol,Pa=es&&es.prototype;if(xte&&Ate(es)&&(!("description"in Pa)||es().description!==void 0)){var eR={},oh=function(){var t=arguments.length<1||arguments[0]===void 0?void 0:Nte(arguments[0]),n=Ote(Pa,this)?new es(t):t===void 0?es():es(t);return t===""&&(eR[n]=!0),n};Lte(oh,es),oh.prototype=Pa,Pa.constructor=oh;var Dte=String(es("description detection"))==="Symbol(description detection)",Fte=ah(Pa.valueOf),jte=ah(Pa.toString),Ute=/^Symbol\((.*)\)[^)]+$/,Bte=ah("".replace),Wte=ah("".slice);Mte(Pa,"description",{configurable:!0,get:function(){var t=Fte(this);if(Pte(eR,t))return"";var n=jte(t),r=Dte?Wte(n,7,-1):Bte(n,Ute,"$1");return r===""?void 0:r}}),Rte({global:!0,constructor:!0,forced:!0},{Symbol:oh})}var zte=NO;zte("iterator");var JN={exports:{}},YN={exports:{}};(function(e){var t=RN;function n(r){if(Array.isArray(r))return t(r)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(YN);var Hte=YN.exports,XN={exports:{}};(function(e){function t(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(XN);var Vte=XN.exports,ZN={exports:{}};(function(e){function t(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(ZN);var qte=ZN.exports;(function(e){var t=Hte,n=Vte,r=xN,i=qte;function s(a){return t(a)||n(a)||r(a)||i()}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports})(JN);var db=JN.exports,Gte=et,Kte=cv.includes,Qte=Ne,Jte=AN,Yte=Qte(function(){return!Array(1).includes()});Gte({target:"Array",proto:!0,forced:Yte},{includes:function(t){return Kte(this,t,arguments.length>1?arguments[1]:void 0)}});Jte("includes");var Xte=et,Zte=He,ene=nf,tne=xr,nne=yv,rne=Zte([].join),ine=ene!==Object,sne=ine||!nne("join",",");Xte({target:"Array",proto:!0,forced:sne},{join:function(t){return rne(tne(this),t===void 0?",":t)}});var ane=Et,one=Math.floor,eM=Number.isInteger||function(t){return!ane(t)&&isFinite(t)&&one(t)===t},une=et,lne=eM;une({target:"Number",stat:!0},{isInteger:lne});var cne=Tt,fne=Et,tR=Xu,Iv=function(e,t,n){var r,i;return tR&&cne(r=t.constructor)&&r!==n&&fne(i=r.prototype)&&i!==n.prototype&&tR(e,i),e},dne=He,hne=dne(1.1.valueOf),pne=`	
\v\f\r \u2028\u2029\uFEFF`,vne=He,gne=ws,mne=Gn,Xw=pne,nR=vne("".replace),yne=RegExp("^["+Xw+"]+"),_ne=RegExp("(^|[^"+Xw+"])["+Xw+"]+$"),wne=function(e){return function(t){var n=mne(gne(t));return e&1&&(n=nR(n,yne,"")),e&2&&(n=nR(n,_ne,"$1")),n}},Sne={trim:wne(3)},bne=et,tM=iq,Tne=At,nM=Ke,rM=D0,iM=He,Ene=fv,rR=Gt,kne=Iv,Ine=Ss,Cne=Ku,sM=C0,Rne=Ne,xne=lo.f,$ne=da.f,Pne=qn.f,Ane=hne,One=Sne.trim,Cv="Number",yu=nM[Cv];rM[Cv];var hb=yu.prototype,Nne=nM.TypeError,Mne=iM("".slice),uh=iM("".charCodeAt),Lne=function(e){var t=sM(e,"number");return typeof t=="bigint"?t:Dne(t)},Dne=function(e){var t=sM(e,"number"),n,r,i,s,a,l,u,f;if(Cne(t))throw new Nne("Cannot convert a Symbol value to a number");if(typeof t=="string"&&t.length>2){if(t=One(t),n=uh(t,0),n===43||n===45){if(r=uh(t,2),r===88||r===120)return NaN}else if(n===48){switch(uh(t,1)){case 66:case 98:i=2,s=49;break;case 79:case 111:i=8,s=55;break;default:return+t}for(a=Mne(t,2),l=a.length,u=0;u<l;u++)if(f=uh(a,u),f<48||f>s)return NaN;return parseInt(a,i)}}return+t},pb=Ene(Cv,!yu(" 0o1")||!yu("0b1")||yu("+0x1")),Fne=function(e){return Ine(hb,e)&&Rne(function(){Ane(e)})},Rv=function(t){var n=arguments.length<1?0:yu(Lne(t));return Fne(this)?kne(Object(n),this,Rv):n};Rv.prototype=hb;pb&&!tM&&(hb.constructor=Rv);bne({global:!0,constructor:!0,wrap:!0,forced:pb},{Number:Rv});var jne=function(e,t){for(var n=Tne?xne(t):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),r=0,i;n.length>r;r++)rR(t,i=n[r])&&!rR(e,i)&&Pne(e,i,$ne(t,i))};(pb||tM)&&jne(rM[Cv],yu);var aM=At,Une=Ne,oM=He,Bne=bf,Wne=uf,zne=xr,Hne=tf.f,uM=oM(Hne),Vne=oM([].push),qne=aM&&Une(function(){var e=Object.create(null);return e[2]=2,!uM(e,2)}),Gne=function(e){return function(t){for(var n=zne(t),r=Wne(n),i=qne&&Bne(n)===null,s=r.length,a=0,l=[],u;s>a;)u=r[a++],(!aM||(i?u in n:uM(n,u)))&&Vne(l,e?[u,n[u]]:n[u]);return l}},Kne={entries:Gne(!0)},Qne=et,Jne=Kne.entries;Qne({target:"Object",stat:!0},{entries:function(t){return Jne(t)}});/*
@license
Copyright (c) 2021 Twilio Inc.

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.


*/Object.defineProperty(Tn,"__esModule",{value:!0});var Yne=vo,Xne=PN,Zne=db,ere=vf,tre=pf,nre=mf,rre=yf,ire=go;function ya(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var _u=ya(Yne),gs=ya(Xne),Hy=ya(Zne),sre=ya(ere),are=ya(tre),ore=ya(nre),ure=ya(rre),iR=ya(ire),Es=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return{checks:n}},lM=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Es(function(i){for(var s=!1,a=[],l=0,u=n;l<u.length;l++){var f=u[l];if(typeof f=="string"){s=s||_u.default(i)===f,a.push("of type ".concat(f));continue}s=s||i instanceof f,a.push("an instance of ".concat(f.name))}return[s,a]})},lre=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Es(function(i){for(var s=!1,a=[],l=0,u=n;l<u.length;l++){var f=u[l];s=s||i===f,a.push(typeof f=="string"?'"'.concat(f,'"'):"".concat(f))}return[s,a]})};function cre(e){var t=fre();return function(){var r=iR.default(e),i;if(t){var s=iR.default(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return ure.default(this,i)}}function fre(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Bc(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=dre(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(f){throw f},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,l;return{s:function(){n=n.call(e)},n:function(){var f=n.next();return s=f.done,f},e:function(f){a=!0,l=f},f:function(){try{!s&&n.return!=null&&n.return()}finally{if(a)throw l}}}}function dre(e,t){if(e){if(typeof e=="string")return sR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sR(e,t)}}function sR(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xv=function(t,n){if(n.length>t.length)throw new Error("Expected at most ".concat(t.length," argument(s), but got ").concat(n.length));for(;n.length<t.length;)n.push(void 0);var r=Bc(n.entries()),i;try{for(r.s();!(i=r.n()).done;){var s=gs.default(i.value,2),a=s[0],l=s[1],u=Pv(t[a],l),f=gs.default(u,4),d=f[0],p=f[1],v=f[2],m=f[3];if(!d){var y=a+1;throw new Error("Argument ".concat(y," is expected to be ").concat(v).concat(m," but got ").concat(p))}}}catch(E){r.e(E)}finally{r.f()}},cM=function(t){var n,r,i=["undefined","boolean","number","bigint","string"];if(i.includes(_u.default(t))&&(r=typeof t=="string"?'"'.concat(t,'"'):"".concat(t)),_u.default(t)==="object"&&(t==null||(n=t.constructor)===null||n===void 0?void 0:n.name)!=="Object"){var s;r=t===null?"null":"instance of ".concat(t==null||(s=t.constructor)===null||s===void 0?void 0:s.name)}return r||(r=_u.default(t)),r},hre=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=vb(n);return function(s){return function(a){ore.default(u,a);var l=cre(u);function u(){are.default(this,u);for(var f=arguments.length,d=new Array(f),p=0;p<f;p++)d[p]=arguments[p];return xv(i,d),l.call.apply(l,[this].concat(d))}return sre.default(u)}(s)}},pre=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=vb(n);return function(s,a,l){if(typeof l.value!="function")throw new Error("The validateTypes decorator can only be applied to methods");var u=l.value;l.value=function(){for(var f=arguments.length,d=new Array(f),p=0;p<f;p++)d[p]=arguments[p];return xv(i,d),u.apply(this,d)}}},vre=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=vb(n);return function(s,a,l){if(typeof l.value!="function")throw new Error("The validateTypesAsync decorator can only be applied to methods");var u=l.value;l.value=function(){for(var f=arguments.length,d=new Array(f),p=0;p<f;p++)d[p]=arguments[p];try{xv(i,d)}catch(v){return Promise.reject(v)}return u.apply(this,d)}}},vb=function(t){var n=[],r=Bc(t),i;try{for(r.s();!(i=r.n()).done;){var s=i.value;n.push($v(s))}}catch(a){r.e(a)}finally{r.f()}return n},$v=function(t){var n=[],r=Array.isArray(t)?t:[t],i=Bc(r),s;try{for(i.s();!(s=i.n()).done;){var a=s.value;if(typeof a=="string"||typeof a=="function"){n.push(lM(a));continue}n.push(a)}}catch(l){i.e(l)}finally{i.f()}return n},Pv=function(t,n){var r=[],i,s=!1,a=Bc(t),l;try{for(a.s();!(l=a.n()).done;){var u=l.value,f=Bc(u.checks),d;try{for(f.s();!(d=f.n()).done;){var p=d.value,v=p(n),m=gs.default(v,3),y=m[0],E=m[1],T=m[2];s=s||y,!i&&T&&(i=T),E&&(r=typeof E=="string"?[].concat(Hy.default(r),[E]):[].concat(Hy.default(r),Hy.default(E)))}}catch(N){f.e(N)}finally{f.f()}}}catch(N){a.e(N)}finally{a.f()}if(s)return[!0];var w=i||cM(n),b=r.length-1,$=b>0?"".concat(r.slice(0,b).join(", ")," or ").concat(r[b]):r.join(", ");return[!1,w,$,b>1?";":","]};function gre(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=mre(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(f){throw f},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,l;return{s:function(){n=n.call(e)},n:function(){var f=n.next();return s=f.done,f},e:function(f){a=!0,l=f},f:function(){try{!s&&n.return!=null&&n.return()}finally{if(a)throw l}}}}function mre(e,t){if(e){if(typeof e=="string")return aR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aR(e,t)}}function aR(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var yre=function(t,n){return Es(function(r){if(!Array.isArray(r)||r.length<1)return[!1,"a non-empty array of ".concat(t)];var i=gre(r.entries()),s;try{for(i.s();!(s=i.n()).done;){var a=gs.default(s.value,2),l=a[0],u=a[1],f=Pv($v(n),u),d=gs.default(f,3),p=d[0],v=d[1],m=d[2];if(!p)return[!1,"a valid non-empty array of ".concat(t," (index ").concat(l," should be ").concat(m,")"),"malformed array of ".concat(t," (index ").concat(l," is ").concat(v,")")]}}catch(y){i.e(y)}finally{i.f()}return[!0]})},_re=Es(function(e){return[typeof e=="string"&&e.length>0,"a non-empty string"]}),wre=Es(function(e){return[typeof e=="number"&&Number.isInteger(e)&&e>=0,"a non-negative integer"]}),Sre=Es(function(e){return[_u.default(e)==="object"&&e!==null&&!Array.isArray(e),"a pure object (non-null and non-array)"]}),bre=function(t,n){return Es(function(r){if(_u.default(r)!=="object"||r===null||Array.isArray(r))return[!1,"valid ".concat(t," (should be a pure object)")];for(var i=0,s=Object.entries(n);i<s.length;i++){var a=gs.default(s[i],2),l=a[0],u=a[1],f=Pv($v(u),r[l]),d=gs.default(f,3),p=d[0],v=d[1],m=d[2];if(!p)return[!1,"valid ".concat(t,' (key "').concat(l,'" should be ').concat(m,")"),"malformed ".concat(t,' (key "').concat(l,'" is ').concat(v,")")]}return[!0]})};function Tre(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ere(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(f){throw f},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,l;return{s:function(){n=n.call(e)},n:function(){var f=n.next();return s=f.done,f},e:function(f){a=!0,l=f},f:function(){try{!s&&n.return!=null&&n.return()}finally{if(a)throw l}}}}function Ere(e,t){if(e){if(typeof e=="string")return oR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oR(e,t)}}function oR(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var kre=function(t,n){return Es(function(r){if(!Array.isArray(r))return[!1,"an array of ".concat(t)];var i=Tre(r.entries()),s;try{for(i.s();!(s=i.n()).done;){var a=gs.default(s.value,2),l=a[0],u=a[1],f=Pv($v(n),u),d=gs.default(f,3),p=d[0],v=d[1],m=d[2];if(!p)return[!1,"a valid array of ".concat(t," (index ").concat(l," should be ").concat(m,")"),"malformed array of ".concat(t," (index ").concat(l," is ").concat(v,")")]}}catch(y){i.e(y)}finally{i.f()}return[!0]})};Tn.array=kre;Tn.custom=Es;Tn.literal=lre;Tn.nonEmptyArray=yre;Tn.nonEmptyString=_re;Tn.nonNegativeInteger=wre;Tn.objectSchema=bre;Tn.pureObject=Sre;Tn.runtimeTypeValidation=xv;Tn.stringifyReceivedType=cM;Tn.type=lM;Tn.validateConstructorTypes=hre;Tn.validateTypes=pre;Tn.validateTypesAsync=vre;var fM={},dM={exports:{}},hM={exports:{}};(function(e){var t=go;function n(r,i){for(;!{}.hasOwnProperty.call(r,i)&&(r=t(r))!==null;);return r}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(hM);var Ire=hM.exports;(function(e){var t=Ire;function n(){return e.exports=n=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(r,i,s){var a=t(r,i);if(a){var l=Object.getOwnPropertyDescriptor(a,i);return l.get?l.get.call(arguments.length<3?r:s):l.value}},e.exports.__esModule=!0,e.exports.default=e.exports,n.apply(null,arguments)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(dM);var gb=dM.exports,Cre=Ke,Rre=Ne,uR=Cre.RegExp,xre=!Rre(function(){var e=!0;try{uR(".","d")}catch{e=!1}var t={},n="",r=e?"dgimsy":"gimsy",i=function(u,f){Object.defineProperty(t,u,{get:function(){return n+=f,!0}})},s={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};e&&(s.hasIndices="d");for(var a in s)i(a,s[a]);var l=Object.getOwnPropertyDescriptor(uR.prototype,"flags").get.call(t);return l!==r||n!==r}),$re={correct:xre},Pre=wt,Are=Gt,Ore=Ss,lR=$re,Nre=GN,Mre=RegExp.prototype,mb=lR.correct?function(e){return e.flags}:function(e){return!lR.correct&&Ore(Mre,e)&&!Are(e,"flags")?Pre(Nre,e):e.flags},Lre=rf.PROPER,Dre=$r,Fre=tn,cR=Gn,jre=Ne,Ure=mb,yb="toString",pM=RegExp.prototype,vM=pM[yb],Bre=jre(function(){return vM.call({source:"a",flags:"b"})!=="/a/b"}),Wre=Lre&&vM.name!==yb;(Bre||Wre)&&Dre(pM,yb,function(){var t=Fre(this),n=cR(t.source),r=cR(Ure(t));return"/"+n+"/"+r},{unsafe:!0});var gM={exports:{}},zre=Ne,Hre=zre(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),Vre=Ne,qre=Et,Gre=_s,fR=Hre,Gh=Object.isExtensible,Kre=Vre(function(){Gh(1)}),Qre=Kre||fR?function(t){return!qre(t)||fR&&Gre(t)==="ArrayBuffer"?!1:Gh?Gh(t):!0}:Gh,Jre=Ne,Yre=!Jre(function(){return Object.isExtensible(Object.preventExtensions({}))}),Xre=et,Zre=He,eie=sf,tie=Et,_b=Gt,nie=qn.f,dR=lo,rie=M0,wb=Qre,iie=Ju,sie=Yre,mM=!1,ms=iie("meta"),aie=0,Sb=function(e){nie(e,ms,{value:{objectID:"O"+aie++,weakData:{}}})},oie=function(e,t){if(!tie(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!_b(e,ms)){if(!wb(e))return"F";if(!t)return"E";Sb(e)}return e[ms].objectID},uie=function(e,t){if(!_b(e,ms)){if(!wb(e))return!0;if(!t)return!1;Sb(e)}return e[ms].weakData},lie=function(e){return sie&&mM&&wb(e)&&!_b(e,ms)&&Sb(e),e},cie=function(){fie.enable=function(){},mM=!0;var e=dR.f,t=Zre([].splice),n={};n[ms]=1,e(n).length&&(dR.f=function(r){for(var i=e(r),s=0,a=i.length;s<a;s++)if(i[s]===ms){t(i,s,1);break}return i},Xre({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:rie.f}))},fie=gM.exports={enable:cie,fastKey:oie,getWeakData:uie,onFreeze:lie};eie[ms]=!0;var yM=gM.exports,die=et,hie=Ke,pie=He,hR=fv,vie=$r,gie=yM,mie=Tv,yie=_f,_ie=Tt,wie=Vu,Vy=Et,qy=Ne,Sie=Ev,bie=ma,Tie=Iv,_M=function(e,t,n){var r=e.indexOf("Map")!==-1,i=e.indexOf("Weak")!==-1,s=r?"set":"add",a=hie[e],l=a&&a.prototype,u=a,f={},d=function(w){var b=pie(l[w]);vie(l,w,w==="add"?function(N){return b(this,N===0?0:N),this}:w==="delete"?function($){return i&&!Vy($)?!1:b(this,$===0?0:$)}:w==="get"?function(N){return i&&!Vy(N)?void 0:b(this,N===0?0:N)}:w==="has"?function(N){return i&&!Vy(N)?!1:b(this,N===0?0:N)}:function(N,z){return b(this,N===0?0:N,z),this})},p=hR(e,!_ie(a)||!(i||l.forEach&&!qy(function(){new a().entries().next()})));if(p)u=n.getConstructor(t,e,r,s),gie.enable();else if(hR(e,!0)){var v=new u,m=v[s](i?{}:-0,1)!==v,y=qy(function(){v.has(1)}),E=Sie(function(w){new a(w)}),T=!i&&qy(function(){for(var w=new a,b=5;b--;)w[s](b,b);return!w.has(-0)});E||(u=t(function(w,b){yie(w,l);var $=Tie(new a,w,u);return wie(b)||mie(b,$[s],{that:$,AS_ENTRIES:r}),$}),u.prototype=l,l.constructor=u),(y||T)&&(d("delete"),d("has"),r&&d("get")),(T||m)&&d(s),i&&l.clear&&delete l.clear}return f[e]=u,die({global:!0,constructor:!0,forced:u!==a},f),bie(u,e),i||n.setStrong(u,e,r),u},Eie=$r,wM=function(e,t,n){for(var r in t)Eie(e,r,t[r],n);return e},pR=co,kie=ga,vR=wM,Iie=fo,Cie=_f,Rie=Vu,xie=Tv,$ie=ib,lh=sb,Pie=Q0,Hl=At,gR=yM.fastKey,SM=Si,mR=SM.set,Gy=SM.getterFor,bM={getConstructor:function(e,t,n,r){var i=e(function(f,d){Cie(f,s),mR(f,{type:t,index:pR(null),first:null,last:null,size:0}),Hl||(f.size=0),Rie(d)||xie(d,f[r],{that:f,AS_ENTRIES:n})}),s=i.prototype,a=Gy(t),l=function(f,d,p){var v=a(f),m=u(f,d),y,E;return m?m.value=p:(v.last=m={index:E=gR(d,!0),key:d,value:p,previous:y=v.last,next:null,removed:!1},v.first||(v.first=m),y&&(y.next=m),Hl?v.size++:f.size++,E!=="F"&&(v.index[E]=m)),f},u=function(f,d){var p=a(f),v=gR(d),m;if(v!=="F")return p.index[v];for(m=p.first;m;m=m.next)if(m.key===d)return m};return vR(s,{clear:function(){for(var d=this,p=a(d),v=p.first;v;)v.removed=!0,v.previous&&(v.previous=v.previous.next=null),v=v.next;p.first=p.last=null,p.index=pR(null),Hl?p.size=0:d.size=0},delete:function(f){var d=this,p=a(d),v=u(d,f);if(v){var m=v.next,y=v.previous;delete p.index[v.index],v.removed=!0,y&&(y.next=m),m&&(m.previous=y),p.first===v&&(p.first=m),p.last===v&&(p.last=y),Hl?p.size--:d.size--}return!!v},forEach:function(d){for(var p=a(this),v=Iie(d,arguments.length>1?arguments[1]:void 0),m;m=m?m.next:p.first;)for(v(m.value,m.key,this);m&&m.removed;)m=m.previous},has:function(d){return!!u(this,d)}}),vR(s,n?{get:function(d){var p=u(this,d);return p&&p.value},set:function(d,p){return l(this,d===0?0:d,p)}}:{add:function(d){return l(this,d=d===0?0:d,d)}}),Hl&&kie(s,"size",{configurable:!0,get:function(){return a(this).size}}),i},setStrong:function(e,t,n){var r=t+" Iterator",i=Gy(t),s=Gy(r);$ie(e,t,function(a,l){mR(this,{type:r,target:a,state:i(a),kind:l,last:null})},function(){for(var a=s(this),l=a.kind,u=a.last;u&&u.removed;)u=u.previous;return!a.target||!(a.last=u=u?u.next:a.state.first)?(a.target=null,lh(void 0,!0)):lh(l==="keys"?u.key:l==="values"?u.value:[u.key,u.value],!1)},n?"entries":"values",!n,!0),Pie(t)}},Aie=_M,Oie=bM;Aie("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},Oie);var TM={exports:{}};(function(e,t){(function(r,i){e.exports=i()})(di,function(){return function(n){var r={};function i(s){if(r[s])return r[s].exports;var a=r[s]={i:s,l:!1,exports:{}};return n[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=n,i.c=r,i.i=function(s){return s},i.d=function(s,a,l){i.o(s,a)||Object.defineProperty(s,a,{configurable:!1,enumerable:!0,get:l})},i.n=function(s){var a=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(a,"a",a),a},i.o=function(s,a){return Object.prototype.hasOwnProperty.call(s,a)},i.p="",i(i.s=5)}([function(n,r,i){n.exports=function(s,a){var l,u,f;for(l=1;l<arguments.length;l++){u=arguments[l];for(f in u)u.hasOwnProperty(f)&&(s[f]=u[f])}return s}},function(n,r,i){var s=i(0);n.exports={build:function(a,l){var u,f,d,p=l.plugins;for(u=0,f=p.length;u<f;u++)d=p[u],d.methods&&s(a,d.methods),d.properties&&Object.defineProperties(a,d.properties)},hook:function(a,l,u){var f,d,p,v,m=a.config.plugins,y=[a.context];for(u&&(y=y.concat(u)),f=0,d=m.length;f<d;f++)v=m[f],p=m[f][l],p&&p.apply(v,y)}}},function(n,r,i){function s(a){if(a.length===0)return a;var l,u,f=a.split(/[_-]/);if(f.length===1&&f[0][0].toLowerCase()===f[0][0])return a;for(u=f[0].toLowerCase(),l=1;l<f.length;l++)u=u+f[l].charAt(0).toUpperCase()+f[l].substring(1).toLowerCase();return u}s.prepended=function(a,l){return l=s(l),a+l[0].toUpperCase()+l.substring(1)},n.exports=s},function(n,r,i){var s=i(0),a=i(2);function l(u,f){u=u||{},this.options=u,this.defaults=f.defaults,this.states=[],this.transitions=[],this.map={},this.lifecycle=this.configureLifecycle(),this.init=this.configureInitTransition(u.init),this.data=this.configureData(u.data),this.methods=this.configureMethods(u.methods),this.map[this.defaults.wildcard]={},this.configureTransitions(u.transitions||[]),this.plugins=this.configurePlugins(u.plugins,f.plugin)}s(l.prototype,{addState:function(u){this.map[u]||(this.states.push(u),this.addStateLifecycleNames(u),this.map[u]={})},addStateLifecycleNames:function(u){this.lifecycle.onEnter[u]=a.prepended("onEnter",u),this.lifecycle.onLeave[u]=a.prepended("onLeave",u),this.lifecycle.on[u]=a.prepended("on",u)},addTransition:function(u){this.transitions.indexOf(u)<0&&(this.transitions.push(u),this.addTransitionLifecycleNames(u))},addTransitionLifecycleNames:function(u){this.lifecycle.onBefore[u]=a.prepended("onBefore",u),this.lifecycle.onAfter[u]=a.prepended("onAfter",u),this.lifecycle.on[u]=a.prepended("on",u)},mapTransition:function(u){var f=u.name,d=u.from,p=u.to;return this.addState(d),typeof p!="function"&&this.addState(p),this.addTransition(f),this.map[d][f]=u,u},configureLifecycle:function(){return{onBefore:{transition:"onBeforeTransition"},onAfter:{transition:"onAfterTransition"},onEnter:{state:"onEnterState"},onLeave:{state:"onLeaveState"},on:{transition:"onTransition"}}},configureInitTransition:function(u){return typeof u=="string"?this.mapTransition(s({},this.defaults.init,{to:u,active:!0})):typeof u=="object"?this.mapTransition(s({},this.defaults.init,u,{active:!0})):(this.addState(this.defaults.init.from),this.defaults.init)},configureData:function(u){return typeof u=="function"?u:typeof u=="object"?function(){return u}:function(){return{}}},configureMethods:function(u){return u||{}},configurePlugins:function(u,f){u=u||[];var d,p,v;for(d=0,p=u.length;d<p;d++)v=u[d],typeof v=="function"&&(u[d]=v=v()),v.configure&&v.configure(this);return u},configureTransitions:function(u){var f,d,p,v,m,y=this.defaults.wildcard;for(d=0;d<u.length;d++)for(p=u[d],v=Array.isArray(p.from)?p.from:[p.from||y],m=p.to||y,f=0;f<v.length;f++)this.mapTransition({name:p.name,from:v[f],to:m})},transitionFor:function(u,f){var d=this.defaults.wildcard;return this.map[u][f]||this.map[d][f]},transitionsFor:function(u){var f=this.defaults.wildcard;return Object.keys(this.map[u]).concat(Object.keys(this.map[f]))},allStates:function(){return this.states},allTransitions:function(){return this.transitions}}),n.exports=l},function(n,r,i){var s=i(0),a=i(6),l=i(1),u=[null,[]];function f(d,p){this.context=d,this.config=p,this.state=p.init.from,this.observers=[d]}s(f.prototype,{init:function(d){if(s(this.context,this.config.data.apply(this.context,d)),l.hook(this,"init"),this.config.init.active)return this.fire(this.config.init.name,[])},is:function(d){return Array.isArray(d)?d.indexOf(this.state)>=0:this.state===d},isPending:function(){return this.pending},can:function(d){return!this.isPending()&&!!this.seek(d)},cannot:function(d){return!this.can(d)},allStates:function(){return this.config.allStates()},allTransitions:function(){return this.config.allTransitions()},transitions:function(){return this.config.transitionsFor(this.state)},seek:function(d,p){var v=this.config.defaults.wildcard,m=this.config.transitionFor(this.state,d),y=m&&m.to;return typeof y=="function"?y.apply(this.context,p):y===v?this.state:y},fire:function(d,p){return this.transit(d,this.state,this.seek(d,p),p)},transit:function(d,p,v,m){var y=this.config.lifecycle,E=this.config.options.observeUnchangedState||p!==v;return v?this.isPending()?this.context.onPendingTransition(d,p,v):(this.config.addState(v),this.beginTransit(),m.unshift({transition:d,from:p,to:v,fsm:this.context}),this.observeEvents([this.observersForEvent(y.onBefore.transition),this.observersForEvent(y.onBefore[d]),E?this.observersForEvent(y.onLeave.state):u,E?this.observersForEvent(y.onLeave[p]):u,this.observersForEvent(y.on.transition),E?["doTransit",[this]]:u,E?this.observersForEvent(y.onEnter.state):u,E?this.observersForEvent(y.onEnter[v]):u,E?this.observersForEvent(y.on[v]):u,this.observersForEvent(y.onAfter.transition),this.observersForEvent(y.onAfter[d]),this.observersForEvent(y.on[d])],m)):this.context.onInvalidTransition(d,p,v)},beginTransit:function(){this.pending=!0},endTransit:function(d){return this.pending=!1,d},failTransit:function(d){throw this.pending=!1,d},doTransit:function(d){this.state=d.to},observe:function(d){if(d.length===2){var p={};p[d[0]]=d[1],this.observers.push(p)}else this.observers.push(d[0])},observersForEvent:function(d){for(var p=0,v=this.observers.length,m,y=[];p<v;p++)m=this.observers[p],m[d]&&y.push(m);return[d,y,!0]},observeEvents:function(d,p,v,m){if(d.length===0)return this.endTransit(m===void 0?!0:m);var y=d[0][0],E=d[0][1],T=d[0][2];if(p[0].event=y,y&&T&&y!==v&&l.hook(this,"lifecycle",p),E.length===0)return d.shift(),this.observeEvents(d,p,y,m);var w=E.shift(),b=w[y].apply(w,p);return b&&typeof b.then=="function"?b.then(this.observeEvents.bind(this,d,p,y)).catch(this.failTransit.bind(this)):b===!1?this.endTransit(!1):this.observeEvents(d,p,y,b)},onInvalidTransition:function(d,p,v){throw new a("transition is invalid in current state",d,p,v,this.state)},onPendingTransition:function(d,p,v){throw new a("transition is invalid while previous transition is still in progress",d,p,v,this.state)}}),n.exports=f},function(n,r,i){var s=i(0),a=i(2),l=i(1),u=i(3),f=i(4),d={is:function(T){return this._fsm.is(T)},can:function(T){return this._fsm.can(T)},cannot:function(T){return this._fsm.cannot(T)},observe:function(){return this._fsm.observe(arguments)},transitions:function(){return this._fsm.transitions()},allTransitions:function(){return this._fsm.allTransitions()},allStates:function(){return this._fsm.allStates()},onInvalidTransition:function(T,w,b){return this._fsm.onInvalidTransition(T,w,b)},onPendingTransition:function(T,w,b){return this._fsm.onPendingTransition(T,w,b)}},p={state:{configurable:!1,enumerable:!0,get:function(){return this._fsm.state},set:function(T){throw Error("use transitions to change state")}}};function v(T){return y(this||{},T)}function m(){var T,w;typeof arguments[0]=="function"?(T=arguments[0],w=arguments[1]||{}):(T=function(){this._fsm.apply(this,arguments)},w=arguments[0]||{});var b=new u(w,v);return E(T.prototype,b),T.prototype._fsm.config=b,T}function y(T,w){var b=new u(w,v);return E(T,b),T._fsm(),T}function E(T,w){if(typeof T!="object"||Array.isArray(T))throw Error("StateMachine can only be applied to objects");l.build(T,w),Object.defineProperties(T,p),s(T,d),s(T,w.methods),w.allTransitions().forEach(function(b){T[a(b)]=function(){return this._fsm.fire(b,[].slice.call(arguments))}}),T._fsm=function(){this._fsm=new f(this,w),this._fsm.init(arguments)}}v.version="3.0.1",v.factory=m,v.apply=y,v.defaults={wildcard:"*",init:{name:"init",from:"none"}},n.exports=v},function(n,r,i){n.exports=function(s,a,l,u,f){this.message=s,this.transition=a,this.from=l,this.to=u,this.current=f}}])})})(TM);var Nie=TM.exports,Zw={exports:{}},yR=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(yR){var _R=new Uint8Array(16);Zw.exports=function(){return yR(_R),_R}}else{var wR=new Array(16);Zw.exports=function(){for(var t=0,n;t<16;t++)t&3||(n=Math.random()*4294967296),wR[t]=n>>>((t&3)<<3)&255;return wR}}var EM=Zw.exports,kM=[];for(var ch=0;ch<256;++ch)kM[ch]=(ch+256).toString(16).substr(1);function Mie(e,t){var n=t||0,r=kM;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")}var IM=Mie,Lie=EM,Die=IM,SR,Ky,Qy=0,Jy=0;function Fie(e,t,n){var r=t&&n||0,i=t||[];e=e||{};var s=e.node||SR,a=e.clockseq!==void 0?e.clockseq:Ky;if(s==null||a==null){var l=Lie();s==null&&(s=SR=[l[0]|1,l[1],l[2],l[3],l[4],l[5]]),a==null&&(a=Ky=(l[6]<<8|l[7])&16383)}var u=e.msecs!==void 0?e.msecs:new Date().getTime(),f=e.nsecs!==void 0?e.nsecs:Jy+1,d=u-Qy+(f-Jy)/1e4;if(d<0&&e.clockseq===void 0&&(a=a+1&16383),(d<0||u>Qy)&&e.nsecs===void 0&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Qy=u,Jy=f,Ky=a,u+=122192928e5;var p=((u&268435455)*1e4+f)%4294967296;i[r++]=p>>>24&255,i[r++]=p>>>16&255,i[r++]=p>>>8&255,i[r++]=p&255;var v=u/4294967296*1e4&268435455;i[r++]=v>>>8&255,i[r++]=v&255,i[r++]=v>>>24&15|16,i[r++]=v>>>16&255,i[r++]=a>>>8|128,i[r++]=a&255;for(var m=0;m<6;++m)i[r+m]=s[m];return t||Die(i)}var jie=Fie,Uie=EM,Bie=IM;function Wie(e,t,n){var r=t&&n||0;typeof e=="string"&&(t=e==="binary"?new Array(16):null,e=null),e=e||{};var i=e.random||(e.rng||Uie)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t)for(var s=0;s<16;++s)t[r+s]=i[s];return t||Bie(i)}var zie=Wie,Hie=jie,CM=zie,bb=CM;bb.v1=Hie;bb.v4=CM;var RM=bb,bR=wt,TR=$r,Vie=fb,ER=Ne,xM=Ot,qie=bs,Gie=xM("species"),Yy=RegExp.prototype,Av=function(e,t,n,r){var i=xM(e),s=!ER(function(){var f={};return f[i]=function(){return 7},""[e](f)!==7}),a=s&&!ER(function(){var f=!1,d=/a/;if(e==="split"){var p={};p[Gie]=function(){return d},d={constructor:p,flags:""},d[i]=/./[i]}return d.exec=function(){return f=!0,null},d[i](""),!f});if(!s||!a||n){var l=/./[i],u=t(i,""[e],function(f,d,p,v,m){var y=d.exec;return y===Vie||y===Yy.exec?s&&!m?{done:!0,value:bR(l,d,p,v)}:{done:!0,value:bR(f,p,d,v)}:{done:!1}});TR(String.prototype,e,u[0]),TR(Yy,i,u[1])}r&&qie(Yy[i],"sham",!0)},Kie=HN.charAt,Tb=function(e,t,n){return t+(n?Kie(e,t).length:1)},Eb=He,Qie=Nn,Jie=Math.floor,Xy=Eb("".charAt),Yie=Eb("".replace),Zy=Eb("".slice),Xie=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Zie=/\$([$&'`]|\d{1,2})/g,ese=function(e,t,n,r,i,s){var a=n+e.length,l=r.length,u=Zie;return i!==void 0&&(i=Qie(i),u=Xie),Yie(s,u,function(f,d){var p;switch(Xy(d,0)){case"$":return"$";case"&":return e;case"`":return Zy(t,0,n);case"'":return Zy(t,a);case"<":p=i[Zy(d,1,-1)];break;default:var v=+d;if(v===0)return f;if(v>l){var m=Jie(v/10);return m===0?f:m<=l?r[m-1]===void 0?Xy(d,1):r[m-1]+Xy(d,1):f}p=r[v-1]}return p===void 0?"":p})},kR=wt,tse=tn,nse=Tt,rse=_s,ise=fb,sse=TypeError,Ov=function(e,t){var n=e.exec;if(nse(n)){var r=kR(n,e,t);return r!==null&&tse(r),r}if(rse(e)==="RegExp")return kR(ise,e,t);throw new sse("RegExp#exec called on incompatible receiver")},ase=ho,IR=wt,Nv=He,ose=Av,use=Ne,lse=tn,cse=Tt,fse=Et,dse=Ui,hse=pa,Aa=Gn,pse=ws,vse=Tb,gse=uo,mse=ese,yse=mb,_se=Ov,wse=Ot,eS=wse("replace"),Sse=Math.max,bse=Math.min,Tse=Nv([].concat),e_=Nv([].push),fh=Nv("".indexOf),CR=Nv("".slice),Ese=function(e){return e===void 0?e:String(e)},kse=function(){return"a".replace(/./,"$0")==="$0"}(),RR=function(){return/./[eS]?/./[eS]("a","$0")==="":!1}(),Ise=!use(function(){var e=/./;return e.exec=function(){var t=[];return t.groups={a:"7"},t},"".replace(e,"$<a>")!=="7"});ose("replace",function(e,t,n){var r=RR?"$":"$0";return[function(s,a){var l=pse(this),u=fse(s)?gse(s,eS):void 0;return u?IR(u,s,l,a):IR(t,Aa(l),s,a)},function(i,s){var a=lse(this),l=Aa(i);if(typeof s=="string"&&fh(s,r)===-1&&fh(s,"$<")===-1){var u=n(t,a,l,s);if(u.done)return u.value}var f=cse(s);f||(s=Aa(s));var d=Aa(yse(a)),p=fh(d,"g")!==-1,v;p&&(v=fh(d,"u")!==-1,a.lastIndex=0);for(var m=[],y;y=_se(a,l),!(y===null||(e_(m,y),!p));){var E=Aa(y[0]);E===""&&(a.lastIndex=vse(l,hse(a.lastIndex),v))}for(var T="",w=0,b=0;b<m.length;b++){y=m[b];for(var $=Aa(y[0]),N=Sse(bse(dse(y.index),l.length),0),z=[],H,K=1;K<y.length;K++)e_(z,Ese(y[K]));var P=y.groups;if(f){var ee=Tse([$],z,N,l);P!==void 0&&e_(ee,P),H=Aa(ase(s,void 0,ee))}else H=mse($,l,N,z,P,s);N>=w&&(T+=CR(l,w,N)+H,w=N+$.length)}return T+CR(l,w)}]},!Ise||!kse||RR);var tS={exports:{}},$M=typeof ArrayBuffer<"u"&&typeof DataView<"u",Cse=$M,PM=At,kr=Ke,AM=Tt,kb=Et,Wc=Gt,OM=va,Rse=oo,xse=bs,$se=$r,Pse=ga,Ase=Ss,Mv=bf,Tf=Xu,Ose=Ot,Nse=Ju,NM=Si,MM=NM.enforce,Mse=NM.get,Cp=kr.Int8Array,nS=Cp&&Cp.prototype,xR=kr.Uint8ClampedArray,$R=xR&&xR.prototype,Ha=Cp&&Mv(Cp),hi=nS&&Mv(nS),Lse=Object.prototype,Ib=kr.TypeError,PR=Ose("toStringTag"),rS=Nse("TYPED_ARRAY_TAG"),Rp="TypedArrayConstructor",ua=Cse&&!!Tf&&OM(kr.opera)!=="Opera",LM=!1,rr,qs,wu,el={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},DM={BigInt64Array:8,BigUint64Array:8},FM=function(e){var t=Mv(e);if(kb(t)){var n=Mse(t);return n&&Wc(n,Rp)?n[Rp]:FM(t)}},jM=function(e){if(!kb(e))return!1;var t=OM(e);return Wc(el,t)||Wc(DM,t)},Dse=function(e){if(jM(e))return e;throw new Ib("Target is not a typed array")},Fse=function(e){if(AM(e)&&(!Tf||Ase(Ha,e)))return e;throw new Ib(Rse(e)+" is not a typed array constructor")},jse=function(e,t,n,r){if(PM){if(n)for(var i in el){var s=kr[i];if(s&&Wc(s.prototype,e))try{delete s.prototype[e]}catch{try{s.prototype[e]=t}catch{}}}(!hi[e]||n)&&$se(hi,e,n?t:ua&&nS[e]||t,r)}};for(rr in el)qs=kr[rr],wu=qs&&qs.prototype,wu?MM(wu)[Rp]=qs:ua=!1;for(rr in DM)qs=kr[rr],wu=qs&&qs.prototype,wu&&(MM(wu)[Rp]=qs);if((!ua||!AM(Ha)||Ha===Function.prototype)&&(Ha=function(){throw new Ib("Incorrect invocation")},ua))for(rr in el)kr[rr]&&Tf(kr[rr],Ha);if((!ua||!hi||hi===Lse)&&(hi=Ha.prototype,ua))for(rr in el)kr[rr]&&Tf(kr[rr].prototype,hi);ua&&Mv($R)!==hi&&Tf($R,hi);if(PM&&!Wc(hi,PR)){LM=!0,Pse(hi,PR,{configurable:!0,get:function(){return kb(this)?this[rS]:void 0}});for(rr in el)kr[rr]&&xse(kr[rr],rS,rr)}var St={NATIVE_ARRAY_BUFFER_VIEWS:ua,TYPED_ARRAY_TAG:LM&&rS,aTypedArray:Dse,aTypedArrayConstructor:Fse,exportTypedArrayMethod:jse,getTypedArrayConstructor:FM,isTypedArray:jM,TypedArray:Ha,TypedArrayPrototype:hi},UM=Ke,t_=Ne,Use=Ev,Bse=St.NATIVE_ARRAY_BUFFER_VIEWS,Wse=UM.ArrayBuffer,Oa=UM.Int8Array,zse=!Bse||!t_(function(){Oa(1)})||!t_(function(){new Oa(-1)})||!Use(function(e){new Oa,new Oa(null),new Oa(1.5),new Oa(e)},!0)||t_(function(){return new Oa(new Wse(2),1,void 0).length!==1}),Hse=Ui,Vse=pa,qse=RangeError,BM=function(e){if(e===void 0)return 0;var t=Hse(e),n=Vse(t);if(t!==n)throw new qse("Wrong length or index");return n},Gse=Math.sign||function(t){var n=+t;return n===0||n!==n?n:n<0?-1:1},Kse=2220446049250313e-31,AR=1/Kse,Qse=function(e){return e+AR-AR},Jse=Gse,Yse=Qse,Xse=Math.abs,Zse=2220446049250313e-31,eae=function(e,t,n,r){var i=+e,s=Xse(i),a=Jse(i);if(s<r)return a*Yse(s/r/t)*r*t;var l=(1+t/Zse)*s,u=l-(l-s);return u>n||u!==u?a*(1/0):a*u},tae=eae,nae=11920928955078125e-23,rae=34028234663852886e22,iae=11754943508222875e-54,sae=Math.fround||function(t){return tae(t,nae,rae,iae)},aae=Array,oae=Math.abs,ts=Math.pow,uae=Math.floor,lae=Math.log,cae=Math.LN2,fae=function(e,t,n){var r=aae(n),i=n*8-t-1,s=(1<<i)-1,a=s>>1,l=t===23?ts(2,-24)-ts(2,-77):0,u=e<0||e===0&&1/e<0?1:0,f=0,d,p,v;for(e=oae(e),e!==e||e===1/0?(p=e!==e?1:0,d=s):(d=uae(lae(e)/cae),v=ts(2,-d),e*v<1&&(d--,v*=2),d+a>=1?e+=l/v:e+=l*ts(2,1-a),e*v>=2&&(d++,v/=2),d+a>=s?(p=0,d=s):d+a>=1?(p=(e*v-1)*ts(2,t),d+=a):(p=e*ts(2,a-1)*ts(2,t),d=0));t>=8;)r[f++]=p&255,p/=256,t-=8;for(d=d<<t|p,i+=t;i>0;)r[f++]=d&255,d/=256,i-=8;return r[f-1]|=u*128,r},dae=function(e,t){var n=e.length,r=n*8-t-1,i=(1<<r)-1,s=i>>1,a=r-7,l=n-1,u=e[l--],f=u&127,d;for(u>>=7;a>0;)f=f*256+e[l--],a-=8;for(d=f&(1<<-a)-1,f>>=-a,a+=t;a>0;)d=d*256+e[l--],a-=8;if(f===0)f=1-s;else{if(f===i)return d?NaN:u?-1/0:1/0;d+=ts(2,t),f-=s}return(u?-1:1)*d*ts(2,f-t)},hae={pack:fae,unpack:dae},pae=Nn,OR=Yu,vae=Mn,WM=function(t){for(var n=pae(this),r=vae(n),i=arguments.length,s=OR(i>1?arguments[1]:void 0,r),a=i>2?arguments[2]:void 0,l=a===void 0?r:OR(a,r);l>s;)n[s++]=t;return n},Lv=Ke,Cb=He,n_=At,gae=$M,zM=rf,mae=bs,yae=ga,NR=wM,r_=Ne,dh=_f,_ae=Ui,wae=pa,xp=BM,Sae=sae,HM=hae,bae=bf,MR=Xu,Tae=WM,Eae=Ts,kae=Iv,Iae=A0,VM=ma,Rb=Si,Cae=zM.PROPER,LR=zM.CONFIGURABLE,Su="ArrayBuffer",Dv="DataView",bu="prototype",Rae="Wrong length",qM="Wrong index",DR=Rb.getterFor(Su),wc=Rb.getterFor(Dv),FR=Rb.set,ai=Lv[Su],yr=ai,Wo=yr&&yr[bu],Oi=Lv[Dv],Na=Oi&&Oi[bu],jR=Object.prototype,xae=Lv.Array,$p=Lv.RangeError,$ae=Cb(Tae),Pae=Cb([].reverse),GM=HM.pack,UR=HM.unpack,BR=function(e){return[e&255]},WR=function(e){return[e&255,e>>8&255]},zR=function(e){return[e&255,e>>8&255,e>>16&255,e>>24&255]},HR=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},Aae=function(e){return GM(Sae(e),23,4)},Oae=function(e){return GM(e,52,8)},hh=function(e,t,n){yae(e[bu],t,{configurable:!0,get:function(){return n(this)[t]}})},Ds=function(e,t,n,r){var i=wc(e),s=xp(n),a=!!r;if(s+t>i.byteLength)throw new $p(qM);var l=i.bytes,u=s+i.byteOffset,f=Eae(l,u,u+t);return a?f:Pae(f)},Fs=function(e,t,n,r,i,s){var a=wc(e),l=xp(n),u=r(+i),f=!!s;if(l+t>a.byteLength)throw new $p(qM);for(var d=a.bytes,p=l+a.byteOffset,v=0;v<t;v++)d[p+v]=u[f?v:t-v-1]};if(!gae)yr=function(t){dh(this,Wo);var n=xp(t);FR(this,{type:Su,bytes:$ae(xae(n),0),byteLength:n}),n_||(this.byteLength=n,this.detached=!1)},Wo=yr[bu],Oi=function(t,n,r){dh(this,Na),dh(t,Wo);var i=DR(t),s=i.byteLength,a=_ae(n);if(a<0||a>s)throw new $p("Wrong offset");if(r=r===void 0?s-a:wae(r),a+r>s)throw new $p(Rae);FR(this,{type:Dv,buffer:t,byteLength:r,byteOffset:a,bytes:i.bytes}),n_||(this.buffer=t,this.byteLength=r,this.byteOffset=a)},Na=Oi[bu],n_&&(hh(yr,"byteLength",DR),hh(Oi,"buffer",wc),hh(Oi,"byteLength",wc),hh(Oi,"byteOffset",wc)),NR(Na,{getInt8:function(t){return Ds(this,1,t)[0]<<24>>24},getUint8:function(t){return Ds(this,1,t)[0]},getInt16:function(t){var n=Ds(this,2,t,arguments.length>1?arguments[1]:!1);return(n[1]<<8|n[0])<<16>>16},getUint16:function(t){var n=Ds(this,2,t,arguments.length>1?arguments[1]:!1);return n[1]<<8|n[0]},getInt32:function(t){return HR(Ds(this,4,t,arguments.length>1?arguments[1]:!1))},getUint32:function(t){return HR(Ds(this,4,t,arguments.length>1?arguments[1]:!1))>>>0},getFloat32:function(t){return UR(Ds(this,4,t,arguments.length>1?arguments[1]:!1),23)},getFloat64:function(t){return UR(Ds(this,8,t,arguments.length>1?arguments[1]:!1),52)},setInt8:function(t,n){Fs(this,1,t,BR,n)},setUint8:function(t,n){Fs(this,1,t,BR,n)},setInt16:function(t,n){Fs(this,2,t,WR,n,arguments.length>2?arguments[2]:!1)},setUint16:function(t,n){Fs(this,2,t,WR,n,arguments.length>2?arguments[2]:!1)},setInt32:function(t,n){Fs(this,4,t,zR,n,arguments.length>2?arguments[2]:!1)},setUint32:function(t,n){Fs(this,4,t,zR,n,arguments.length>2?arguments[2]:!1)},setFloat32:function(t,n){Fs(this,4,t,Aae,n,arguments.length>2?arguments[2]:!1)},setFloat64:function(t,n){Fs(this,8,t,Oae,n,arguments.length>2?arguments[2]:!1)}});else{var VR=Cae&&ai.name!==Su;!r_(function(){ai(1)})||!r_(function(){new ai(-1)})||r_(function(){return new ai,new ai(1.5),new ai(NaN),ai.length!==1||VR&&!LR})?(yr=function(t){return dh(this,Wo),kae(new ai(xp(t)),this,yr)},yr[bu]=Wo,Wo.constructor=yr,Iae(yr,ai)):VR&&LR&&mae(ai,"name",Su),MR&&bae(Na)!==jR&&MR(Na,jR);var ph=new Oi(new yr(2)),qR=Cb(Na.setInt8);ph.setInt8(0,2147483648),ph.setInt8(1,2147483649),(ph.getInt8(0)||!ph.getInt8(1))&&NR(Na,{setInt8:function(t,n){qR(this,t,n<<24>>24)},setUint8:function(t,n){qR(this,t,n<<24>>24)}},{unsafe:!0})}VM(yr,Su);VM(Oi,Dv);var Nae={ArrayBuffer:yr,DataView:Oi},Mae=Ui,Lae=RangeError,Dae=function(e){var t=Mae(e);if(t<0)throw new Lae("The argument can't be less than 0");return t},Fae=Dae,jae=RangeError,KM=function(e,t){var n=Fae(e);if(n%t)throw new jae("Wrong offset");return n},Uae=Math.round,Bae=function(e){var t=Uae(e);return t<0?0:t>255?255:t&255},Wae=va,zae=function(e){var t=Wae(e);return t==="BigInt64Array"||t==="BigUint64Array"},Hae=C0,Vae=TypeError,QM=function(e){var t=Hae(e,"number");if(typeof t=="number")throw new Vae("Can't convert number to bigint");return BigInt(t)},qae=fo,Gae=wt,Kae=V0,Qae=Nn,Jae=Mn,Yae=rb,Xae=bv,Zae=nb,eoe=zae,toe=St.aTypedArrayConstructor,noe=QM,roe=function(t){var n=Kae(this),r=Qae(t),i=arguments.length,s=i>1?arguments[1]:void 0,a=s!==void 0,l=Xae(r),u,f,d,p,v,m,y,E;if(l&&!Zae(l))for(y=Yae(r,l),E=y.next,r=[];!(m=Gae(E,y)).done;)r.push(m.value);for(a&&i>2&&(s=qae(s,arguments[2])),f=Jae(r),d=new(toe(n))(f),p=eoe(d),u=0;f>u;u++)v=a?s(r[u],u):r[u],d[u]=p?noe(v):+v;return d},ioe=Mn,JM=function(e,t,n){for(var r=0,i=arguments.length>2?n:ioe(t),s=new e(i);i>r;)s[r]=t[r++];return s},GR=et,YM=Ke,KR=wt,soe=At,aoe=zse,Ef=St,XM=Nae,QR=_f,ooe=Hu,Vl=bs,uoe=eM,loe=pa,JR=BM,i_=KM,coe=Bae,ZM=ov,ql=Gt,foe=va,iS=Et,doe=Ku,hoe=co,poe=Ss,vh=Xu,voe=lo.f,YR=roe,goe=Zr.forEach,moe=Q0,yoe=ga,eL=qn,tL=da,XR=JM,xb=Si,_oe=Iv,sS=xb.get,woe=xb.set,Soe=xb.enforce,nL=eL.f,boe=tL.f,s_=YM.RangeError,rL=XM.ArrayBuffer,Toe=rL.prototype,Eoe=XM.DataView,gh=Ef.NATIVE_ARRAY_BUFFER_VIEWS,ZR=Ef.TYPED_ARRAY_TAG,ex=Ef.TypedArray,Gl=Ef.TypedArrayPrototype,aS=Ef.isTypedArray,mh="BYTES_PER_ELEMENT",a_="Wrong length",yh=function(e,t){yoe(e,t,{configurable:!0,get:function(){return sS(this)[t]}})},tx=function(e){var t;return poe(Toe,e)||(t=foe(e))==="ArrayBuffer"||t==="SharedArrayBuffer"},iL=function(e,t){return aS(e)&&!doe(t)&&t in e&&uoe(+t)&&t>=0},nx=function(t,n){return n=ZM(n),iL(t,n)?ooe(2,t[n]):boe(t,n)},rx=function(t,n,r){return n=ZM(n),iL(t,n)&&iS(r)&&ql(r,"value")&&!ql(r,"get")&&!ql(r,"set")&&!r.configurable&&(!ql(r,"writable")||r.writable)&&(!ql(r,"enumerable")||r.enumerable)?(t[n]=r.value,t):nL(t,n,r)};soe?(gh||(tL.f=nx,eL.f=rx,yh(Gl,"buffer"),yh(Gl,"byteOffset"),yh(Gl,"byteLength"),yh(Gl,"length")),GR({target:"Object",stat:!0,forced:!gh},{getOwnPropertyDescriptor:nx,defineProperty:rx}),tS.exports=function(e,t,n){var r=e.match(/\d+/)[0]/8,i=e+(n?"Clamped":"")+"Array",s="get"+e,a="set"+e,l=YM[i],u=l,f=u&&u.prototype,d={},p=function(E,T){var w=sS(E);return w.view[s](T*r+w.byteOffset,!0)},v=function(E,T,w){var b=sS(E);b.view[a](T*r+b.byteOffset,n?coe(w):w,!0)},m=function(E,T){nL(E,T,{get:function(){return p(this,T)},set:function(w){return v(this,T,w)},enumerable:!0})};gh?aoe&&(u=t(function(E,T,w,b){return QR(E,f),_oe(function(){return iS(T)?tx(T)?b!==void 0?new l(T,i_(w,r),b):w!==void 0?new l(T,i_(w,r)):new l(T):aS(T)?XR(u,T):KR(YR,u,T):new l(JR(T))}(),E,u)}),vh&&vh(u,ex),goe(voe(l),function(E){E in u||Vl(u,E,l[E])}),u.prototype=f):(u=t(function(E,T,w,b){QR(E,f);var $=0,N=0,z,H,K;if(!iS(T))K=JR(T),H=K*r,z=new rL(H);else if(tx(T)){z=T,N=i_(w,r);var P=T.byteLength;if(b===void 0){if(P%r)throw new s_(a_);if(H=P-N,H<0)throw new s_(a_)}else if(H=loe(b)*r,H+N>P)throw new s_(a_);K=H/r}else return aS(T)?XR(u,T):KR(YR,u,T);for(woe(E,{buffer:z,byteOffset:N,byteLength:H,length:K,view:new Eoe(z)});$<K;)m(E,$++)}),vh&&vh(u,ex),f=u.prototype=hoe(Gl)),f.constructor!==u&&Vl(f,"constructor",u),Soe(f).TypedArrayConstructor=u,ZR&&Vl(f,ZR,i);var y=u!==l;d[i]=u,GR({global:!0,constructor:!0,forced:y,sham:!gh},d),mh in u||Vl(u,mh,r),mh in f||Vl(f,mh,r),moe(i)}):tS.exports=function(){};var koe=tS.exports,Ioe=koe;Ioe("Uint8",function(e){return function(n,r,i){return e(this,n,r,i)}});var sL=St,Coe=Mn,Roe=Ui,xoe=sL.aTypedArray,$oe=sL.exportTypedArrayMethod;$oe("at",function(t){var n=xoe(this),r=Coe(n),i=Roe(t),s=i>=0?i:r+i;return s<0||s>=r?void 0:n[s]});var ix=oo,Poe=TypeError,$b=function(e,t){if(!delete e[t])throw new Poe("Cannot delete property "+ix(t)+" of "+ix(e))},Aoe=Nn,o_=Yu,Ooe=Mn,Noe=$b,Moe=Math.min,Loe=[].copyWithin||function(t,n){var r=Aoe(this),i=Ooe(r),s=o_(t,i),a=o_(n,i),l=arguments.length>2?arguments[2]:void 0,u=Moe((l===void 0?i:o_(l,i))-a,i-s),f=1;for(a<s&&s<a+u&&(f=-1,a+=u-1,s+=u-1);u-- >0;)a in r?r[s]=r[a]:Noe(r,s),s+=f,a+=f;return r},Doe=He,aL=St,Foe=Loe,joe=Doe(Foe),Uoe=aL.aTypedArray,Boe=aL.exportTypedArrayMethod;Boe("copyWithin",function(t,n){return joe(Uoe(this),t,n,arguments.length>2?arguments[2]:void 0)});var oL=St,Woe=Zr.every,zoe=oL.aTypedArray,Hoe=oL.exportTypedArrayMethod;Hoe("every",function(t){return Woe(zoe(this),t,arguments.length>1?arguments[1]:void 0)});var uL=St,Voe=WM,qoe=QM,Goe=va,Koe=wt,Qoe=He,Joe=Ne,Yoe=uL.aTypedArray,Xoe=uL.exportTypedArrayMethod,Zoe=Qoe("".slice),eue=Joe(function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),e!==1});Xoe("fill",function(t){var n=arguments.length;Yoe(this);var r=Zoe(Goe(this),0,3)==="Big"?qoe(t):+t;return Koe(Voe,this,r,n>1?arguments[1]:void 0,n>2?arguments[2]:void 0)},eue);var tue=JM,nue=St.getTypedArrayConstructor,rue=function(e,t){return tue(nue(e),t)},lL=St,iue=Zr.filter,sue=rue,aue=lL.aTypedArray,oue=lL.exportTypedArrayMethod;oue("filter",function(t){var n=iue(aue(this),t,arguments.length>1?arguments[1]:void 0);return sue(this,n)});var cL=St,uue=Zr.find,lue=cL.aTypedArray,cue=cL.exportTypedArrayMethod;cue("find",function(t){return uue(lue(this),t,arguments.length>1?arguments[1]:void 0)});var fL=St,fue=Zr.findIndex,due=fL.aTypedArray,hue=fL.exportTypedArrayMethod;hue("findIndex",function(t){return fue(due(this),t,arguments.length>1?arguments[1]:void 0)});var dL=St,pue=Zr.forEach,vue=dL.aTypedArray,gue=dL.exportTypedArrayMethod;gue("forEach",function(t){pue(vue(this),t,arguments.length>1?arguments[1]:void 0)});var hL=St,mue=cv.includes,yue=hL.aTypedArray,_ue=hL.exportTypedArrayMethod;_ue("includes",function(t){return mue(yue(this),t,arguments.length>1?arguments[1]:void 0)});var pL=St,wue=cv.indexOf,Sue=pL.aTypedArray,bue=pL.exportTypedArrayMethod;bue("indexOf",function(t){return wue(Sue(this),t,arguments.length>1?arguments[1]:void 0)});var Tue=Ke,Eue=Ne,Pb=He,vL=St,Ab=jN,kue=Ot,Ob=kue("iterator"),sx=Tue.Uint8Array,Iue=Pb(Ab.values),Cue=Pb(Ab.keys),Rue=Pb(Ab.entries),Nb=vL.aTypedArray,Fv=vL.exportTypedArrayMethod,Go=sx&&sx.prototype,jv=!Eue(function(){Go[Ob].call([1])}),gL=!!Go&&Go.values&&Go[Ob]===Go.values&&Go.values.name==="values",mL=function(){return Iue(Nb(this))};Fv("entries",function(){return Rue(Nb(this))},jv);Fv("keys",function(){return Cue(Nb(this))},jv);Fv("values",mL,jv||!gL,{name:"values"});Fv(Ob,mL,jv||!gL,{name:"values"});var yL=St,xue=He,$ue=yL.aTypedArray,Pue=yL.exportTypedArrayMethod,Aue=xue([].join);Pue("join",function(t){return Aue($ue(this),t)});var Oue=ho,Nue=xr,Mue=Ui,Lue=Mn,Due=yv,Fue=Math.min,oS=[].lastIndexOf,_L=!!oS&&1/[1].lastIndexOf(1,-0)<0,jue=Due("lastIndexOf"),Uue=_L||!jue,Bue=Uue?function(t){if(_L)return Oue(oS,this,arguments)||0;var n=Nue(this),r=Lue(n);if(r===0)return-1;var i=r-1;for(arguments.length>1&&(i=Fue(i,Mue(arguments[1]))),i<0&&(i=r+i);i>=0;i--)if(i in n&&n[i]===t)return i||0;return-1}:oS,wL=St,Wue=ho,zue=Bue,Hue=wL.aTypedArray,Vue=wL.exportTypedArrayMethod;Vue("lastIndexOf",function(t){var n=arguments.length;return Wue(zue,Hue(this),n>1?[t,arguments[1]]:[t])});var Mb=St,que=Zr.map,Gue=Mb.aTypedArray,Kue=Mb.getTypedArrayConstructor,Que=Mb.exportTypedArrayMethod;Que("map",function(t){return que(Gue(this),t,arguments.length>1?arguments[1]:void 0,function(n,r){return new(Kue(n))(r)})});var Jue=Xr,Yue=Nn,Xue=nf,Zue=Mn,ax=TypeError,ox="Reduce of empty array with no initial value",ux=function(e){return function(t,n,r,i){var s=Yue(t),a=Xue(s),l=Zue(s);if(Jue(n),l===0&&r<2)throw new ax(ox);var u=e?l-1:0,f=e?-1:1;if(r<2)for(;;){if(u in a){i=a[u],u+=f;break}if(u+=f,e?u<0:l<=u)throw new ax(ox)}for(;e?u>=0:l>u;u+=f)u in a&&(i=n(i,a[u],u,s));return i}},SL={left:ux(!1),right:ux(!0)},bL=St,ele=SL.left,tle=bL.aTypedArray,nle=bL.exportTypedArrayMethod;nle("reduce",function(t){var n=arguments.length;return ele(tle(this),t,n,n>1?arguments[1]:void 0)});var TL=St,rle=SL.right,ile=TL.aTypedArray,sle=TL.exportTypedArrayMethod;sle("reduceRight",function(t){var n=arguments.length;return rle(ile(this),t,n,n>1?arguments[1]:void 0)});var EL=St,ale=EL.aTypedArray,ole=EL.exportTypedArrayMethod,ule=Math.floor;ole("reverse",function(){for(var t=this,n=ale(t).length,r=ule(n/2),i=0,s;i<r;)s=t[i],t[i++]=t[--n],t[n]=s;return t});var kL=Ke,IL=wt,Lb=St,lle=Mn,cle=KM,fle=Nn,CL=Ne,dle=kL.RangeError,uS=kL.Int8Array,lx=uS&&uS.prototype,RL=lx&&lx.set,hle=Lb.aTypedArray,ple=Lb.exportTypedArrayMethod,lS=!CL(function(){var e=new Uint8ClampedArray(2);return IL(RL,e,{length:1,0:3},1),e[1]!==3}),vle=lS&&Lb.NATIVE_ARRAY_BUFFER_VIEWS&&CL(function(){var e=new uS(2);return e.set(1),e.set("2",1),e[0]!==0||e[1]!==2});ple("set",function(t){hle(this);var n=cle(arguments.length>1?arguments[1]:void 0,1),r=fle(t);if(lS)return IL(RL,this,r,n);var i=this.length,s=lle(r),a=0;if(s+n>i)throw new dle("Wrong length");for(;a<s;)this[n+a]=r[a++]},!lS||vle);var Db=St,gle=Ne,mle=Ts,yle=Db.aTypedArray,_le=Db.getTypedArrayConstructor,wle=Db.exportTypedArrayMethod,Sle=gle(function(){new Int8Array(1).slice()});wle("slice",function(t,n){for(var r=mle(yle(this),t,n),i=_le(this),s=0,a=r.length,l=new i(a);a>s;)l[s]=r[s++];return l},Sle);var xL=St,ble=Zr.some,Tle=xL.aTypedArray,Ele=xL.exportTypedArrayMethod;Ele("some",function(t){return ble(Tle(this),t,arguments.length>1?arguments[1]:void 0)});var cx=Ts,kle=Math.floor,cS=function(e,t){var n=e.length;if(n<8)for(var r=1,i,s;r<n;){for(s=r,i=e[r];s&&t(e[s-1],i)>0;)e[s]=e[--s];s!==r++&&(e[s]=i)}else for(var a=kle(n/2),l=cS(cx(e,0,a),t),u=cS(cx(e,a),t),f=l.length,d=u.length,p=0,v=0;p<f||v<d;)e[p+v]=p<f&&v<d?t(l[p],u[v])<=0?l[p++]:u[v++]:p<f?l[p++]:u[v++];return e},$L=cS,Ile=ha,fx=Ile.match(/firefox\/(\d+)/i),PL=!!fx&&+fx[1],Cle=ha,AL=/MSIE|Trident/.test(Cle),Rle=ha,dx=Rle.match(/AppleWebKit\/(\d+)\./),OL=!!dx&&+dx[1],xle=Ke,$le=MO,fS=Ne,Ple=Xr,Ale=$L,NL=St,hx=PL,Ole=AL,px=qu,vx=OL,Nle=NL.aTypedArray,Mle=NL.exportTypedArrayMethod,zc=xle.Uint16Array,Tu=zc&&$le(zc.prototype.sort),Lle=!!Tu&&!(fS(function(){Tu(new zc(2),null)})&&fS(function(){Tu(new zc(2),{})})),gx=!!Tu&&!fS(function(){if(px)return px<74;if(hx)return hx<67;if(Ole)return!0;if(vx)return vx<602;var e=new zc(516),t=Array(516),n,r;for(n=0;n<516;n++)r=n%4,e[n]=515-n,t[n]=n-2*r+3;for(Tu(e,function(i,s){return(i/4|0)-(s/4|0)}),n=0;n<516;n++)if(e[n]!==t[n])return!0}),Dle=function(e){return function(t,n){return e!==void 0?+e(t,n)||0:n!==n?-1:t!==t?1:t===0&&n===0?1/t>0&&1/n<0?1:-1:t>n}};Mle("sort",function(t){return t!==void 0&&Ple(t),gx?Tu(this,t):Ale(Nle(this),Dle(t))},!gx||Lle);var Fb=St,Fle=pa,mx=Yu,jle=Fb.aTypedArray,Ule=Fb.getTypedArrayConstructor,Ble=Fb.exportTypedArrayMethod;Ble("subarray",function(t,n){var r=jle(this),i=r.length,s=mx(t,i),a=Ule(r);return new a(r.buffer,r.byteOffset+s*r.BYTES_PER_ELEMENT,Fle((n===void 0?i:mx(n,i))-s))});var Wle=Ke,zle=ho,ML=St,dS=Ne,yx=Ts,Pp=Wle.Int8Array,_x=ML.aTypedArray,Hle=ML.exportTypedArrayMethod,LL=[].toLocaleString,Vle=!!Pp&&dS(function(){LL.call(new Pp(1))}),qle=dS(function(){return[1,2].toLocaleString()!==new Pp([1,2]).toLocaleString()})||!dS(function(){Pp.prototype.toLocaleString.call([1,2])});Hle("toLocaleString",function(){return zle(LL,Vle?yx(_x(this)):_x(this),yx(arguments))},qle);var Gle=St.exportTypedArrayMethod,Kle=Ne,Qle=Ke,Jle=He,wx=Qle.Uint8Array,Yle=wx&&wx.prototype||{},Ap=[].toString,Xle=Jle([].join);Kle(function(){Ap.call({})})&&(Ap=function(){return Xle(this)});var Zle=Yle.toString!==Ap;Gle("toString",Ap,Zle);var u_=wt,DL=He,ece=Av,tce=tn,nce=Et,rce=ws,ice=M2,sce=Tb,ace=pa,Sx=Gn,oce=uo,bx=Ov,uce=KN,lce=Ne,zo=uce.UNSUPPORTED_Y,cce=4294967295,fce=Math.min,l_=DL([].push),c_=DL("".slice),dce=!lce(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return n.length!==2||n[0]!=="a"||n[1]!=="b"}),Tx="abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length;ece("split",function(e,t,n){var r="0".split(void 0,0).length?function(i,s){return i===void 0&&s===0?[]:u_(t,this,i,s)}:t;return[function(s,a){var l=rce(this),u=nce(s)?oce(s,e):void 0;return u?u_(u,s,l,a):u_(r,Sx(l),s,a)},function(i,s){var a=tce(this),l=Sx(i);if(!Tx){var u=n(r,a,l,s,r!==t);if(u.done)return u.value}var f=ice(a,RegExp),d=a.unicode,p=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(zo?"g":"y"),v=new f(zo?"^(?:"+a.source+")":a,p),m=s===void 0?cce:s>>>0;if(m===0)return[];if(l.length===0)return bx(v,l)===null?[l]:[];for(var y=0,E=0,T=[];E<l.length;){v.lastIndex=zo?0:E;var w=bx(v,zo?c_(l,E):l),b;if(w===null||(b=fce(ace(v.lastIndex+(zo?E:0)),l.length))===y)E=sce(l,E,d);else{if(l_(T,c_(l,y,E)),T.length===m)return T;for(var $=1;$<=w.length-1;$++)if(l_(T,w[$]),T.length===m)return T;E=y=b}}return l_(T,c_(l,y)),T}]},Tx||!dce,zo);var FL={exports:{}},jL={exports:{}};(function(e){function t(n){try{return Function.toString.call(n).indexOf("[native code]")!==-1}catch{return typeof n=="function"}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(jL);var hce=jL.exports,UL={exports:{}},BL={exports:{}};(function(e){function t(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e.exports=t=function(){return!!n},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(BL);var pce=BL.exports;(function(e){var t=pce,n=G0;function r(i,s,a){if(t())return Reflect.construct.apply(null,arguments);var l=[null];l.push.apply(l,s);var u=new(i.bind.apply(i,l));return a&&n(u,a.prototype),u}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(UL);var vce=UL.exports;(function(e){var t=go,n=G0,r=hce,i=vce;function s(a){var l=typeof Map=="function"?new Map:void 0;return e.exports=s=function(f){if(f===null||!r(f))return f;if(typeof f!="function")throw new TypeError("Super expression must either be null or a function");if(l!==void 0){if(l.has(f))return l.get(f);l.set(f,d)}function d(){return i(f,arguments,t(this).constructor)}return d.prototype=Object.create(f.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),n(d,f)},e.exports.__esModule=!0,e.exports.default=e.exports,s(a)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports})(FL);var WL=FL.exports,tl={};/*
@license
Copyright (c) 2016, Twilio, Inc.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted, provided that the above
copyright notice and this permission notice appear in all copies.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY
SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION
OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN
CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.

*/Object.defineProperty(tl,"__esModule",{value:!0});var gce=pf,mce=vf,yce=gf,_ce=mf,wce=yf,Sce=go,bce=_v;function mo(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var jb=mo(gce),Ub=mo(mce),is=mo(yce),Bb=mo(_ce),zL=mo(wce),Op=mo(Sce),ss=mo(bce),Tce;function ra(){}ra.prototype=Object.create(null);function dt(){dt.init.call(this)}dt.EventEmitter=dt;dt.usingDomains=!1;dt.prototype.domain=void 0;dt.prototype._events=void 0;dt.prototype._maxListeners=void 0;dt.defaultMaxListeners=10;dt.init=function(){this.domain=null,dt.usingDomains&&Tce.active,(!this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=new ra,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};dt.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this};function HL(e){return e._maxListeners===void 0?dt.defaultMaxListeners:e._maxListeners}dt.prototype.getMaxListeners=function(){return HL(this)};function Ece(e,t,n){if(t)e.call(n);else for(var r=e.length,i=kf(e,r),s=0;s<r;++s)i[s].call(n)}function kce(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,s=kf(e,i),a=0;a<i;++a)s[a].call(n,r)}function Ice(e,t,n,r,i){if(t)e.call(n,r,i);else for(var s=e.length,a=kf(e,s),l=0;l<s;++l)a[l].call(n,r,i)}function Cce(e,t,n,r,i,s){if(t)e.call(n,r,i,s);else for(var a=e.length,l=kf(e,a),u=0;u<a;++u)l[u].call(n,r,i,s)}function Rce(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,s=kf(e,i),a=0;a<i;++a)s[a].apply(n,r)}dt.prototype.emit=function(t){var n,r,i,s,a,l,u,f=t==="error";if(l=this._events,l)f=f&&l.error==null;else if(!f)return!1;if(u=this.domain,f){if(n=arguments[1],u)n||(n=new Error('Uncaught, unspecified "error" event')),n.domainEmitter=this,n.domain=u,n.domainThrown=!1,u.emit("error",n);else{if(n instanceof Error)throw n;var d=new Error('Uncaught, unspecified "error" event. ('+n+")");throw d.context=n,d}return!1}if(r=l[t],!r)return!1;var p=typeof r=="function";switch(i=arguments.length,i){case 1:Ece(r,p,this);break;case 2:kce(r,p,this,arguments[1]);break;case 3:Ice(r,p,this,arguments[1],arguments[2]);break;case 4:Cce(r,p,this,arguments[1],arguments[2],arguments[3]);break;default:for(s=new Array(i-1),a=1;a<i;a++)s[a-1]=arguments[a];Rce(r,p,this,s)}return!0};function VL(e,t,n,r){var i,s,a;if(typeof n!="function")throw new TypeError('"listener" argument must be a function');if(s=e._events,s?(s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),a=s[t]):(s=e._events=new ra,e._eventsCount=0),!a)a=s[t]=n,++e._eventsCount;else if(typeof a=="function"?a=s[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(i=HL(e),i&&i>0&&a.length>i)){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,xce(l)}return e}function xce(e){typeof console.warn=="function"?console.warn(e):console.log(e)}dt.prototype.addListener=function(t,n){return VL(this,t,n,!1)};dt.prototype.on=dt.prototype.addListener;dt.prototype.prependListener=function(t,n){return VL(this,t,n,!0)};function qL(e,t,n){var r=!1;function i(){e.removeListener(t,i),r||(r=!0,n.apply(e,arguments))}return i.listener=n,i}dt.prototype.once=function(t,n){if(typeof n!="function")throw new TypeError('"listener" argument must be a function');return this.on(t,qL(this,t,n)),this};dt.prototype.prependOnceListener=function(t,n){if(typeof n!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(t,qL(this,t,n)),this};dt.prototype.removeListener=function(t,n){var r,i,s,a,l;if(typeof n!="function")throw new TypeError('"listener" argument must be a function');if(i=this._events,!i)return this;if(r=i[t],!r)return this;if(r===n||r.listener&&r.listener===n)--this._eventsCount===0?this._events=new ra:(delete i[t],i.removeListener&&this.emit("removeListener",t,r.listener||n));else if(typeof r!="function"){for(s=-1,a=r.length;a-- >0;)if(r[a]===n||r[a].listener&&r[a].listener===n){l=r[a].listener,s=a;break}if(s<0)return this;if(r.length===1){if(r[0]=void 0,--this._eventsCount===0)return this._events=new ra,this;delete i[t]}else $ce(r,s);i.removeListener&&this.emit("removeListener",t,l||n)}return this};dt.prototype.off=function(e,t){return this.removeListener(e,t)};dt.prototype.removeAllListeners=function(t){var n,r;if(r=this._events,!r)return this;if(!r.removeListener)return arguments.length===0?(this._events=new ra,this._eventsCount=0):r[t]&&(--this._eventsCount===0?this._events=new ra:delete r[t]),this;if(arguments.length===0){for(var i=Object.keys(r),s=0,a;s<i.length;++s)a=i[s],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=new ra,this._eventsCount=0,this}if(n=r[t],typeof n=="function")this.removeListener(t,n);else if(n)do this.removeListener(t,n[n.length-1]);while(n[0]);return this};dt.prototype.listeners=function(t){var n,r,i=this._events;return i?(n=i[t],n?typeof n=="function"?r=[n.listener||n]:r=Pce(n):r=[]):r=[],r};dt.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):GL.call(e,t)};dt.prototype.listenerCount=GL;function GL(e){var t=this._events;if(t){var n=t[e];if(typeof n=="function")return 1;if(n)return n.length}return 0}dt.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function $ce(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}function kf(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}function Pce(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function KL(e){var t=Ace();return function(){var r=Op.default(e),i;if(t){var s=Op.default(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return zL.default(this,i)}}function Ace(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var QL=function(e){Bb.default(n,e);var t=KL(n);function n(r){var i;return jb.default(this,n),i=t.call(this),ss.default(is.default(i),"timeout",null),ss.default(is.default(i),"startTimestamp",-1),i.minDelay=r.min,i.maxDelay=r.max,i.initialDelay=r.initial||0,i.maxAttemptsCount=r.maxAttemptsCount||0,i.maxAttemptsTime=r.maxAttemptsTime||0,i.randomness=r.randomness||0,i.inProgress=!1,i.attemptNum=0,i.prevDelay=0,i.currDelay=0,i}return Ub.default(n,[{key:"attempt",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.attemptNum++,this.emit("attempt",this)}},{key:"nextDelay",value:function(i){if(typeof i=="number")return this.prevDelay=0,this.currDelay=i,i;if(this.attemptNum==0)return this.initialDelay;if(this.attemptNum==1)return this.currDelay=this.minDelay,this.currDelay;this.prevDelay=this.currDelay;var s=this.currDelay+this.prevDelay;return this.maxDelay&&s>this.maxDelay&&(this.currDelay=this.maxDelay,s=this.maxDelay),this.currDelay=s,s}},{key:"randomize",value:function(i){var s=i*this.randomness,a=Math.round(Math.random()*s*2-s);return Math.max(0,i+a)}},{key:"scheduleAttempt",value:function(i){var s=this;if(this.maxAttemptsCount&&this.attemptNum>=this.maxAttemptsCount){this.cleanup(),this.emit("failed",new Error("Maximum attempt count limit reached"));return}var a=this.nextDelay(i);if(a=this.randomize(a),this.maxAttemptsTime&&this.startTimestamp+this.maxAttemptsTime<Date.now()+a){this.cleanup(),this.emit("failed",new Error("Maximum attempt time limit reached"));return}this.timeout=setTimeout(function(){return s.attempt()},a)}},{key:"cleanup",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.inProgress=!1,this.attemptNum=0,this.prevDelay=0,this.currDelay=0}},{key:"start",value:function(){if(this.inProgress)throw new Error("Retrier is already in progress");this.inProgress=!0,this.startTimestamp=Date.now(),this.scheduleAttempt(this.initialDelay)}},{key:"cancel",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null,this.inProgress=!1,this.emit("cancelled"))}},{key:"succeeded",value:function(i){this.emit("succeeded",i)}},{key:"failed",value:function(i,s){if(this.timeout)throw new Error("Retrier attempt is already in progress");this.scheduleAttempt(s)}}]),n}(dt),Oce=function(e){Bb.default(n,e);var t=KL(n);function n(r){var i;return jb.default(this,n),i=t.call(this),ss.default(is.default(i),"resolve",function(){}),ss.default(is.default(i),"reject",function(){}),i.retrier=new QL(r),i}return Ub.default(n,[{key:"run",value:function(i){var s=this;return this.retrier.on("attempt",function(){i().then(function(a){return s.retrier.succeeded(a)}).catch(function(a){return s.retrier.failed(a)})}),this.retrier.on("succeeded",function(a){return s.resolve(a)}),this.retrier.on("cancelled",function(){return s.reject(new Error("Cancelled"))}),this.retrier.on("failed",function(a){return s.reject(a)}),new Promise(function(a,l){s.resolve=a,s.reject=l,s.retrier.start()})}},{key:"cancel",value:function(){this.retrier.cancel()}}]),n}(dt);function Nce(e){var t=Mce();return function(){var r=Op.default(e),i;if(t){var s=Op.default(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return zL.default(this,i)}}function Mce(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _h(e){return e!=null}var Lce=function(e){Bb.default(n,e);var t=Nce(n);function n(r){var i;jb.default(this,n),i=t.call(this),ss.default(is.default(i),"backoffDelay",0),ss.default(is.default(i),"nextBackoffDelay",0),ss.default(is.default(i),"backoffNumber",0),ss.default(is.default(i),"timeoutID",null),ss.default(is.default(i),"maxNumberOfRetry",-1),r=r||{};var s=r,a=s.initialDelay,l=s.maxDelay,u=s.randomisationFactor,f=s.factor;if(_h(a)&&a<1)throw new Error("The initial timeout must be equal to or greater than 1.");if(_h(l)&&l<=1)throw new Error("The maximal timeout must be greater than 1.");if(_h(u)&&(u<0||u>1))throw new Error("The randomisation factor must be between 0 and 1.");if(_h(f)&&f<=1)throw new Error("Exponential factor should be greater than 1.");if(i.initialDelay=a||100,i.maxDelay=l||1e4,i.maxDelay<=i.initialDelay)throw new Error("The maximal backoff delay must be greater than the initial backoff delay.");return i.randomisationFactor=u||0,i.factor=f||2,i.reset(),i}return Ub.default(n,[{key:"backoff",value:function(i){this.timeoutID==null&&(this.backoffNumber===this.maxNumberOfRetry?(this.emit("fail",i),this.reset()):(this.backoffDelay=this.next(),this.timeoutID=setTimeout(this.onBackoff.bind(this),this.backoffDelay),this.emit("backoff",this.backoffNumber,this.backoffDelay,i)))}},{key:"reset",value:function(){this.backoffDelay=0,this.nextBackoffDelay=this.initialDelay,this.backoffNumber=0,this.timeoutID&&clearTimeout(this.timeoutID),this.timeoutID=null}},{key:"failAfter",value:function(i){if(i<=0)throw new Error("Expected a maximum number of retry greater than 0 but got ".concat(i));this.maxNumberOfRetry=i}},{key:"next",value:function(){this.backoffDelay=Math.min(this.nextBackoffDelay,this.maxDelay),this.nextBackoffDelay=this.backoffDelay*this.factor;var i=1+Math.random()*this.randomisationFactor;return Math.min(this.maxDelay,Math.round(this.backoffDelay*i))}},{key:"onBackoff",value:function(){this.timeoutID=null,this.emit("ready",this.backoffNumber,this.backoffDelay),this.backoffNumber++}}],[{key:"exponential",value:function(i){return new n(i)}}]),n}(dt);tl.AsyncRetrier=Oce;tl.Backoff=Lce;tl.Retrier=QL;var Uv={};/*
@license
Copyright (c) 2021 Twilio Inc.

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

*/Object.defineProperty(Uv,"__esModule",{value:!0});var Dce=db,Fce=pf,jce=vf,Uce=gf,Bce=gb,Wce=mf,zce=yf,Hce=go,Vce=_v;function ks(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var Ex=ks(Dce),qce=ks(Fce),Gce=ks(jce),Kce=ks(Uce),Ma=ks(Bce),Qce=ks(Wce),Jce=ks(zce),ns=ks(Hce),Yce=ks(Vce),Xce;function ia(){}ia.prototype=Object.create(null);function _t(){_t.init.call(this)}_t.EventEmitter=_t;_t.usingDomains=!1;_t.prototype.domain=void 0;_t.prototype._events=void 0;_t.prototype._maxListeners=void 0;_t.defaultMaxListeners=10;_t.init=function(){this.domain=null,_t.usingDomains&&Xce.active,(!this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=new ia,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};_t.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this};function JL(e){return e._maxListeners===void 0?_t.defaultMaxListeners:e._maxListeners}_t.prototype.getMaxListeners=function(){return JL(this)};function Zce(e,t,n){if(t)e.call(n);else for(var r=e.length,i=If(e,r),s=0;s<r;++s)i[s].call(n)}function efe(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,s=If(e,i),a=0;a<i;++a)s[a].call(n,r)}function tfe(e,t,n,r,i){if(t)e.call(n,r,i);else for(var s=e.length,a=If(e,s),l=0;l<s;++l)a[l].call(n,r,i)}function nfe(e,t,n,r,i,s){if(t)e.call(n,r,i,s);else for(var a=e.length,l=If(e,a),u=0;u<a;++u)l[u].call(n,r,i,s)}function rfe(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,s=If(e,i),a=0;a<i;++a)s[a].apply(n,r)}_t.prototype.emit=function(t){var n,r,i,s,a,l,u,f=t==="error";if(l=this._events,l)f=f&&l.error==null;else if(!f)return!1;if(u=this.domain,f){if(n=arguments[1],u)n||(n=new Error('Uncaught, unspecified "error" event')),n.domainEmitter=this,n.domain=u,n.domainThrown=!1,u.emit("error",n);else{if(n instanceof Error)throw n;var d=new Error('Uncaught, unspecified "error" event. ('+n+")");throw d.context=n,d}return!1}if(r=l[t],!r)return!1;var p=typeof r=="function";switch(i=arguments.length,i){case 1:Zce(r,p,this);break;case 2:efe(r,p,this,arguments[1]);break;case 3:tfe(r,p,this,arguments[1],arguments[2]);break;case 4:nfe(r,p,this,arguments[1],arguments[2],arguments[3]);break;default:for(s=new Array(i-1),a=1;a<i;a++)s[a-1]=arguments[a];rfe(r,p,this,s)}return!0};function YL(e,t,n,r){var i,s,a;if(typeof n!="function")throw new TypeError('"listener" argument must be a function');if(s=e._events,s?(s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),a=s[t]):(s=e._events=new ia,e._eventsCount=0),!a)a=s[t]=n,++e._eventsCount;else if(typeof a=="function"?a=s[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(i=JL(e),i&&i>0&&a.length>i)){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,ife(l)}return e}function ife(e){typeof console.warn=="function"?console.warn(e):console.log(e)}_t.prototype.addListener=function(t,n){return YL(this,t,n,!1)};_t.prototype.on=_t.prototype.addListener;_t.prototype.prependListener=function(t,n){return YL(this,t,n,!0)};function XL(e,t,n){var r=!1;function i(){e.removeListener(t,i),r||(r=!0,n.apply(e,arguments))}return i.listener=n,i}_t.prototype.once=function(t,n){if(typeof n!="function")throw new TypeError('"listener" argument must be a function');return this.on(t,XL(this,t,n)),this};_t.prototype.prependOnceListener=function(t,n){if(typeof n!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(t,XL(this,t,n)),this};_t.prototype.removeListener=function(t,n){var r,i,s,a,l;if(typeof n!="function")throw new TypeError('"listener" argument must be a function');if(i=this._events,!i)return this;if(r=i[t],!r)return this;if(r===n||r.listener&&r.listener===n)--this._eventsCount===0?this._events=new ia:(delete i[t],i.removeListener&&this.emit("removeListener",t,r.listener||n));else if(typeof r!="function"){for(s=-1,a=r.length;a-- >0;)if(r[a]===n||r[a].listener&&r[a].listener===n){l=r[a].listener,s=a;break}if(s<0)return this;if(r.length===1){if(r[0]=void 0,--this._eventsCount===0)return this._events=new ia,this;delete i[t]}else sfe(r,s);i.removeListener&&this.emit("removeListener",t,l||n)}return this};_t.prototype.off=function(e,t){return this.removeListener(e,t)};_t.prototype.removeAllListeners=function(t){var n,r;if(r=this._events,!r)return this;if(!r.removeListener)return arguments.length===0?(this._events=new ia,this._eventsCount=0):r[t]&&(--this._eventsCount===0?this._events=new ia:delete r[t]),this;if(arguments.length===0){for(var i=Object.keys(r),s=0,a;s<i.length;++s)a=i[s],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=new ia,this._eventsCount=0,this}if(n=r[t],typeof n=="function")this.removeListener(t,n);else if(n)do this.removeListener(t,n[n.length-1]);while(n[0]);return this};_t.prototype.listeners=function(t){var n,r,i=this._events;return i?(n=i[t],n?typeof n=="function"?r=[n.listener||n]:r=afe(n):r=[]):r=[],r};_t.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):ZL.call(e,t)};_t.prototype.listenerCount=ZL;function ZL(e){var t=this._events;if(t){var n=t[e];if(typeof n=="function")return 1;if(n)return n.length}return 0}_t.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function sfe(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}function If(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}function afe(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function ofe(e){var t=ufe();return function(){var r=ns.default(e),i;if(t){var s=ns.default(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return Jce.default(this,i)}}function ufe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var lfe=function(e){Qce.default(n,e);var t=ofe(n);function n(){var r;return qce.default(this,n),r=t.call(this),Yce.default(Kce.default(r),"eventHistory",new Map),r}return Gce.default(n,[{key:"on",value:function(i,s){return Ma.default(ns.default(n.prototype),"on",this).call(this,i,s)}},{key:"once",value:function(i,s){return Ma.default(ns.default(n.prototype),"once",this).call(this,i,s)}},{key:"off",value:function(i,s){return Ma.default(ns.default(n.prototype),"off",this).call(this,i,s)}},{key:"emit",value:function(i){for(var s,a=arguments.length,l=new Array(a>1?a-1:0),u=1;u<a;u++)l[u-1]=arguments[u];return this.eventHistory.set(i,l),(s=Ma.default(ns.default(n.prototype),"emit",this)).call.apply(s,[this,i].concat(l))}},{key:"addListener",value:function(i,s){return Ma.default(ns.default(n.prototype),"addListener",this).call(this,i,s)}},{key:"removeListener",value:function(i,s){return Ma.default(ns.default(n.prototype),"removeListener",this).call(this,i,s)}},{key:"addListenerWithReplay",value:function(i,s){var a=this.eventHistory.get(i);return a!==void 0&&s.apply(void 0,Ex.default(a)),this.addListener(i,s)}},{key:"onWithReplay",value:function(i,s){return this.addListenerWithReplay(i,s)}},{key:"onceWithReplay",value:function(i,s){var a=this.eventHistory.get(i);return a!==void 0?(s.apply(void 0,Ex.default(a)),this):Ma.default(ns.default(n.prototype),"once",this).call(this,i,s)}}]),n}(_t);Uv.ReplayEventEmitter=lfe;var cfe=_M,ffe=bM;cfe("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},ffe);var Np={exports:{}};/*!
 * Platform.js v1.3.6
 * Copyright 2014-2020 Benjamin Tan
 * Copyright 2011-2013 John-David Dalton
 * Available under MIT license
 */Np.exports;(function(e,t){(function(){var n={function:!0,object:!0},r=n[typeof window]&&window||this,i=t,s=e&&!e.nodeType&&e,a=i&&s&&typeof di=="object"&&di;a&&(a.global===a||a.window===a||a.self===a)&&(r=a);var l=Math.pow(2,53)-1,u=/\bOpera/,f=Object.prototype,d=f.hasOwnProperty,p=f.toString;function v(P){return P=String(P),P.charAt(0).toUpperCase()+P.slice(1)}function m(P,ee,Y){var oe={"10.0":"10","6.4":"10 Technical Preview","6.3":"8.1","6.2":"8","6.1":"Server 2008 R2 / 7","6.0":"Server 2008 / Vista","5.2":"Server 2003 / XP 64-bit","5.1":"XP","5.01":"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return ee&&Y&&/^Win/i.test(P)&&!/^Windows Phone /i.test(P)&&(oe=oe[/[\d.]+$/.exec(P)])&&(P="Windows "+oe),P=String(P),ee&&Y&&(P=P.replace(RegExp(ee,"i"),Y)),P=E(P.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0]),P}function y(P,ee){var Y=-1,oe=P?P.length:0;if(typeof oe=="number"&&oe>-1&&oe<=l)for(;++Y<oe;)ee(P[Y],Y,P);else T(P,ee)}function E(P){return P=z(P),/^(?:webOS|i(?:OS|P))/.test(P)?P:v(P)}function T(P,ee){for(var Y in P)d.call(P,Y)&&ee(P[Y],Y,P)}function w(P){return P==null?v(P):p.call(P).slice(8,-1)}function b(P,ee){var Y=P!=null?typeof P[ee]:"number";return!/^(?:boolean|number|string|undefined)$/.test(Y)&&(Y=="object"?!!P[ee]:!0)}function $(P){return String(P).replace(/([ -])(?!$)/g,"$1?")}function N(P,ee){var Y=null;return y(P,function(oe,de){Y=ee(Y,oe,de,P)}),Y}function z(P){return String(P).replace(/^ +| +$/g,"")}function H(P){var ee=r,Y=P&&typeof P=="object"&&w(P)!="String";Y&&(ee=P,P=null);var oe=ee.navigator||{},de=oe.userAgent||"";P||(P=de);var me=Y?!!oe.likeChrome:/\bChrome\b/.test(P)&&!/internal|\n/i.test(p.toString()),we="Object",ke=Y?we:"ScriptBridgingProxyObject",_e=Y?we:"Environment",Me=Y&&ee.java?"JavaPackage":w(ee.java),te=Y?we:"RuntimeObject",ve=/\bJava/.test(Me)&&ee.java,be=ve&&w(ee.environment)==_e,W=ve?"a":"",Re=ve?"b":"",kt=ee.document||{},De=ee.operamini||ee.opera,ht=u.test(ht=Y&&De?De["[[Class]]"]:w(De))?ht:De=null,B,he=P,je=[],Ar=null,cn=P==de,Ie=cn&&De&&typeof De.version=="function"&&De.version(),bi,Ye=yo([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),ue=Bi(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),Le=Ti([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),zt=nl({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),ce=Ln(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function yo(Xt){return N(Xt,function(ut,Ve){return ut||RegExp("\\b"+(Ve.pattern||$(Ve))+"\\b","i").exec(P)&&(Ve.label||Ve)})}function nl(Xt){return N(Xt,function(ut,Ve,gn){return ut||(Ve[Le]||Ve[/^[a-z]+(?: +[a-z]+\b)*/i.exec(Le)]||RegExp("\\b"+$(gn)+"(?:\\b|\\w*\\d)","i").exec(P))&&gn})}function Bi(Xt){return N(Xt,function(ut,Ve){return ut||RegExp("\\b"+(Ve.pattern||$(Ve))+"\\b","i").exec(P)&&(Ve.label||Ve)})}function Ln(Xt){return N(Xt,function(ut,Ve){var gn=Ve.pattern||$(Ve);return!ut&&(ut=RegExp("\\b"+gn+"(?:/[\\d.]+|[ \\w.]*)","i").exec(P))&&(ut=m(ut,gn,Ve.label||Ve)),ut})}function Ti(Xt){return N(Xt,function(ut,Ve){var gn=Ve.pattern||$(Ve);return!ut&&(ut=RegExp("\\b"+gn+" *\\d+[.\\w_]*","i").exec(P)||RegExp("\\b"+gn+" *\\w+-[\\w]*","i").exec(P)||RegExp("\\b"+gn+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(P))&&((ut=String(Ve.label&&!RegExp(gn,"i").test(Ve.label)?Ve.label:ut).split("/"))[1]&&!/[\d.]+/.test(ut[0])&&(ut[0]+=" "+ut[1]),Ve=Ve.label||Ve,ut=E(ut[0].replace(RegExp(gn,"i"),Ve).replace(RegExp("; *(?:"+Ve+"[_-])?","i")," ").replace(RegExp("("+Ve+")[-_.]?(\\w)","i"),"$1 $2"))),ut})}function Wi(Xt){return N(Xt,function(ut,Ve){return ut||(RegExp(Ve+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(P)||0)[1]||null})}function rl(){return this.description||""}if(Ye&&(Ye=[Ye]),/\bAndroid\b/.test(ce)&&!Le&&(B=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(P))&&(Le=z(B[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),zt&&!Le?Le=Ti([zt]):zt&&Le&&(Le=Le.replace(RegExp("^("+$(zt)+")[-_.\\s]","i"),zt+" ").replace(RegExp("^("+$(zt)+")[-_.]?(\\w)","i"),zt+" $2")),(B=/\bGoogle TV\b/.exec(Le))&&(Le=B[0]),/\bSimulator\b/i.test(P)&&(Le=(Le?Le+" ":"")+"Simulator"),ue=="Opera Mini"&&/\bOPiOS\b/.test(P)&&je.push("running in Turbo/Uncompressed mode"),ue=="IE"&&/\blike iPhone OS\b/.test(P)?(B=H(P.replace(/like iPhone OS/,"")),zt=B.manufacturer,Le=B.product):/^iP/.test(Le)?(ue||(ue="Safari"),ce="iOS"+((B=/ OS ([\d_]+)/i.exec(P))?" "+B[1].replace(/_/g,"."):"")):ue=="Konqueror"&&/^Linux\b/i.test(ce)?ce="Kubuntu":zt&&zt!="Google"&&(/Chrome/.test(ue)&&!/\bMobile Safari\b/i.test(P)||/\bVita\b/.test(Le))||/\bAndroid\b/.test(ce)&&/^Chrome/.test(ue)&&/\bVersion\//i.test(P)?(ue="Android Browser",ce=/\bAndroid\b/.test(ce)?ce:"Android"):ue=="Silk"?(/\bMobi/i.test(P)||(ce="Android",je.unshift("desktop mode")),/Accelerated *= *true/i.test(P)&&je.unshift("accelerated")):ue=="UC Browser"&&/\bUCWEB\b/.test(P)?je.push("speed mode"):ue=="PaleMoon"&&(B=/\bFirefox\/([\d.]+)\b/.exec(P))?je.push("identifying as Firefox "+B[1]):ue=="Firefox"&&(B=/\b(Mobile|Tablet|TV)\b/i.exec(P))?(ce||(ce="Firefox OS"),Le||(Le=B[1])):!ue||(B=!/\bMinefield\b/i.test(P)&&/\b(?:Firefox|Safari)\b/.exec(ue))?(ue&&!Le&&/[\/,]|^[^(]+?\)/.test(P.slice(P.indexOf(B+"/")+8))&&(ue=null),(B=Le||zt||ce)&&(Le||zt||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(ce))&&(ue=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(ce)?ce:B)+" Browser")):ue=="Electron"&&(B=(/\bChrome\/([\d.]+)\b/.exec(P)||0)[1])&&je.push("Chromium "+B),Ie||(Ie=Wi(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",$(ue),"(?:Firefox|Minefield|NetFront)"])),(B=Ye=="iCab"&&parseFloat(Ie)>3&&"WebKit"||/\bOpera\b/.test(ue)&&(/\bOPR\b/.test(P)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(P)&&!/^(?:Trident|EdgeHTML)$/.test(Ye)&&"WebKit"||!Ye&&/\bMSIE\b/i.test(P)&&(ce=="Mac OS"?"Tasman":"Trident")||Ye=="WebKit"&&/\bPlayStation\b(?! Vita\b)/i.test(ue)&&"NetFront")&&(Ye=[B]),ue=="IE"&&(B=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(P)||0)[1])?(ue+=" Mobile",ce="Windows Phone "+(/\+$/.test(B)?B:B+".x"),je.unshift("desktop mode")):/\bWPDesktop\b/i.test(P)?(ue="IE Mobile",ce="Windows Phone 8.x",je.unshift("desktop mode"),Ie||(Ie=(/\brv:([\d.]+)/.exec(P)||0)[1])):ue!="IE"&&Ye=="Trident"&&(B=/\brv:([\d.]+)/.exec(P))&&(ue&&je.push("identifying as "+ue+(Ie?" "+Ie:"")),ue="IE",Ie=B[1]),cn){if(b(ee,"global"))if(ve&&(B=ve.lang.System,he=B.getProperty("os.arch"),ce=ce||B.getProperty("os.name")+" "+B.getProperty("os.version")),be){try{Ie=ee.require("ringo/engine").version.join("."),ue="RingoJS"}catch{(B=ee.system)&&B.global.system==ee.system&&(ue="Narwhal",ce||(ce=B[0].os||null))}ue||(ue="Rhino")}else typeof ee.process=="object"&&!ee.process.browser&&(B=ee.process)&&(typeof B.versions=="object"&&(typeof B.versions.electron=="string"?(je.push("Node "+B.versions.node),ue="Electron",Ie=B.versions.electron):typeof B.versions.nw=="string"&&(je.push("Chromium "+Ie,"Node "+B.versions.node),ue="NW.js",Ie=B.versions.nw)),ue||(ue="Node.js",he=B.arch,ce=B.platform,Ie=/[\d.]+/.exec(B.version),Ie=Ie?Ie[0]:null));else w(B=ee.runtime)==ke?(ue="Adobe AIR",ce=B.flash.system.Capabilities.os):w(B=ee.phantom)==te?(ue="PhantomJS",Ie=(B=B.version||null)&&B.major+"."+B.minor+"."+B.patch):typeof kt.documentMode=="number"&&(B=/\bTrident\/(\d+)/i.exec(P))?(Ie=[Ie,kt.documentMode],(B=+B[1]+4)!=Ie[1]&&(je.push("IE "+Ie[1]+" mode"),Ye&&(Ye[1]=""),Ie[1]=B),Ie=ue=="IE"?String(Ie[1].toFixed(1)):Ie[0]):typeof kt.documentMode=="number"&&/^(?:Chrome|Firefox)\b/.test(ue)&&(je.push("masking as "+ue+" "+Ie),ue="IE",Ie="11.0",Ye=["Trident"],ce="Windows");ce=ce&&E(ce)}if(Ie&&(B=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(Ie)||/(?:alpha|beta)(?: ?\d)?/i.exec(P+";"+(cn&&oe.appMinorVersion))||/\bMinefield\b/i.test(P)&&"a")&&(Ar=/b/i.test(B)?"beta":"alpha",Ie=Ie.replace(RegExp(B+"\\+?$"),"")+(Ar=="beta"?Re:W)+(/\d+\+?/.exec(B)||"")),ue=="Fennec"||ue=="Firefox"&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(ce))ue="Firefox Mobile";else if(ue=="Maxthon"&&Ie)Ie=Ie.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(Le))Le=="Xbox 360"&&(ce=null),Le=="Xbox 360"&&/\bIEMobile\b/.test(P)&&je.unshift("mobile mode");else if((/^(?:Chrome|IE|Opera)$/.test(ue)||ue&&!Le&&!/Browser|Mobi/.test(ue))&&(ce=="Windows CE"||/Mobi/i.test(P)))ue+=" Mobile";else if(ue=="IE"&&cn)try{ee.external===null&&je.unshift("platform preview")}catch{je.unshift("embedded")}else(/\bBlackBerry\b/.test(Le)||/\bBB10\b/.test(P))&&(B=(RegExp(Le.replace(/ +/g," *")+"/([.\\d]+)","i").exec(P)||0)[1]||Ie)?(B=[B,/BB10/.test(P)],ce=(B[1]?(Le=null,zt="BlackBerry"):"Device Software")+" "+B[0],Ie=null):this!=T&&Le!="Wii"&&(cn&&De||/Opera/.test(ue)&&/\b(?:MSIE|Firefox)\b/i.test(P)||ue=="Firefox"&&/\bOS X (?:\d+\.){2,}/.test(ce)||ue=="IE"&&(ce&&!/^Win/.test(ce)&&Ie>5.5||/\bWindows XP\b/.test(ce)&&Ie>8||Ie==8&&!/\bTrident\b/.test(P)))&&!u.test(B=H.call(T,P.replace(u,"")+";"))&&B.name&&(B="ing as "+B.name+((B=B.version)?" "+B:""),u.test(ue)?(/\bIE\b/.test(B)&&ce=="Mac OS"&&(ce=null),B="identify"+B):(B="mask"+B,ht?ue=E(ht.replace(/([a-z])([A-Z])/g,"$1 $2")):ue="Opera",/\bIE\b/.test(B)&&(ce=null),cn||(Ie=null)),Ye=["Presto"],je.push(B));(B=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(P)||0)[1])&&(B=[parseFloat(B.replace(/\.(\d)$/,".0$1")),B],ue=="Safari"&&B[1].slice(-1)=="+"?(ue="WebKit Nightly",Ar="alpha",Ie=B[1].slice(0,-1)):(Ie==B[1]||Ie==(B[2]=(/\bSafari\/([\d.]+\+?)/i.exec(P)||0)[1]))&&(Ie=null),B[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(P)||0)[1],B[0]==537.36&&B[2]==537.36&&parseFloat(B[1])>=28&&Ye=="WebKit"&&(Ye=["Blink"]),!cn||!me&&!B[1]?(Ye&&(Ye[1]="like Safari"),B=(B=B[0],B<400?1:B<500?2:B<526?3:B<533?4:B<534?"4+":B<535?5:B<537?6:B<538?7:B<601?8:B<602?9:B<604?10:B<606?11:B<608?12:"12")):(Ye&&(Ye[1]="like Chrome"),B=B[1]||(B=B[0],B<530?1:B<532?2:B<532.05?3:B<533?4:B<534.03?5:B<534.07?6:B<534.1?7:B<534.13?8:B<534.16?9:B<534.24?10:B<534.3?11:B<535.01?12:B<535.02?"13+":B<535.07?15:B<535.11?16:B<535.19?17:B<536.05?18:B<536.1?19:B<537.01?20:B<537.11?"21+":B<537.13?23:B<537.18?24:B<537.24?25:B<537.36?26:Ye!="Blink"?"27":"28")),Ye&&(Ye[1]+=" "+(B+=typeof B=="number"?".x":/[.+]/.test(B)?"":"+")),ue=="Safari"&&(!Ie||parseInt(Ie)>45)?Ie=B:ue=="Chrome"&&/\bHeadlessChrome/i.test(P)&&je.unshift("headless")),ue=="Opera"&&(B=/\bzbov|zvav$/.exec(ce))?(ue+=" ",je.unshift("desktop mode"),B=="zvav"?(ue+="Mini",Ie=null):ue+="Mobile",ce=ce.replace(RegExp(" *"+B+"$"),"")):ue=="Safari"&&/\bChrome\b/.exec(Ye&&Ye[1])?(je.unshift("desktop mode"),ue="Chrome Mobile",Ie=null,/\bOS X\b/.test(ce)?(zt="Apple",ce="iOS 4.3+"):ce=null):/\bSRWare Iron\b/.test(ue)&&!Ie&&(Ie=Wi("Chrome")),Ie&&Ie.indexOf(B=/[\d.]+$/.exec(ce))==0&&P.indexOf("/"+B+"-")>-1&&(ce=z(ce.replace(B,""))),ce&&ce.indexOf(ue)!=-1&&!RegExp(ue+" OS").test(ce)&&(ce=ce.replace(RegExp(" *"+$(ue)+" *"),"")),Ye&&!/\b(?:Avant|Nook)\b/.test(ue)&&(/Browser|Lunascape|Maxthon/.test(ue)||ue!="Safari"&&/^iOS/.test(ce)&&/\bSafari\b/.test(Ye[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(ue)&&Ye[1])&&(B=Ye[Ye.length-1])&&je.push(B),je.length&&(je=["("+je.join("; ")+")"]),zt&&Le&&Le.indexOf(zt)<0&&je.push("on "+zt),Le&&je.push((/^on /.test(je[je.length-1])?"":"on ")+Le),ce&&(B=/ ([\d.+]+)$/.exec(ce),bi=B&&ce.charAt(ce.length-B[0].length-1)=="/",ce={architecture:32,family:B&&!bi?ce.replace(B[0],""):ce,version:B?B[1]:null,toString:function(){var Xt=this.version;return this.family+(Xt&&!bi?" "+Xt:"")+(this.architecture==64?" 64-bit":"")}}),(B=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(he))&&!/\bi686\b/i.test(he)?(ce&&(ce.architecture=64,ce.family=ce.family.replace(RegExp(" *"+B),"")),ue&&(/\bWOW64\b/i.test(P)||cn&&/\w(?:86|32)$/.test(oe.cpuClass||oe.platform)&&!/\bWin64; x64\b/i.test(P))&&je.unshift("32-bit")):ce&&/^OS X/.test(ce.family)&&ue=="Chrome"&&parseFloat(Ie)>=39&&(ce.architecture=64),P||(P=null);var Dt={};return Dt.description=P,Dt.layout=Ye&&Ye[0],Dt.manufacturer=zt,Dt.name=ue,Dt.prerelease=Ar,Dt.product=Le,Dt.ua=P,Dt.version=ue&&Ie,Dt.os=ce||{architecture:null,family:null,version:null,toString:function(){return"null"}},Dt.parse=H,Dt.toString=rl,Dt.version&&je.unshift(Ie),Dt.name&&je.unshift(ue),ce&&ue&&!(ce==String(ce).split(" ")[0]&&(ce==ue.split(" ")[0]||Le))&&je.push(Le?"("+ce+")":"on "+ce),je.length&&(Dt.description=je.join(" ")),Dt}var K=H();i&&s?T(K,function(P,ee){i[ee]=P}):r.platform=K}).call(di)})(Np,Np.exports);var eD=Np.exports,dfe=wt,hfe=He,pfe=Av,vfe=tn,gfe=Et,mfe=pa,wh=Gn,yfe=ws,_fe=uo,wfe=Tb,Sfe=mb,kx=Ov,Ix=hfe("".indexOf);pfe("match",function(e,t,n){return[function(i){var s=yfe(this),a=gfe(i)?_fe(i,e):void 0;return a?dfe(a,i,s):new RegExp(i)[e](wh(s))},function(r){var i=vfe(this),s=wh(r),a=n(t,i,s);if(a.done)return a.value;var l=wh(Sfe(i));if(Ix(l,"g")===-1)return kx(i,s);var u=Ix(l,"u")!==-1;i.lastIndex=0;for(var f=[],d=0,p;(p=kx(i,s))!==null;){var v=wh(p[0]);f[d]=v,v===""&&(i.lastIndex=wfe(s,mfe(i.lastIndex),u)),d++}return d===0?null:f}]});var bfe=Object.is||function(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n},Tfe=wt,Efe=Av,kfe=tn,Ife=Et,Cfe=ws,Cx=bfe,Rx=Gn,Rfe=uo,xfe=Ov;Efe("search",function(e,t,n){return[function(i){var s=Cfe(this),a=Ife(i)?Rfe(i,e):void 0;return a?Tfe(a,i,s):new RegExp(i)[e](Rx(s))},function(r){var i=kfe(this),s=Rx(r),a=n(t,i,s);if(a.done)return a.value;var l=i.lastIndex;Cx(l,0)||(i.lastIndex=0);var u=xfe(i,s);return Cx(i.lastIndex,l)||(i.lastIndex=l),u===null?-1:u.index}]});var $fe=At,Pfe=lf,Afe=TypeError,Ofe=Object.getOwnPropertyDescriptor,Nfe=$fe&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}(),Mfe=Nfe?function(e,t){if(Pfe(e)&&!Ofe(e,"length").writable)throw new Afe("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t},Lfe=et,Dfe=Nn,Ffe=Yu,jfe=Ui,Ufe=Mn,Bfe=Mfe,Wfe=WN,zfe=j0,Hfe=hf,f_=$b,Vfe=df,qfe=Vfe("splice"),Gfe=Math.max,Kfe=Math.min;Lfe({target:"Array",proto:!0,forced:!qfe},{splice:function(t,n){var r=Dfe(this),i=Ufe(r),s=Ffe(t,i),a=arguments.length,l,u,f,d,p,v;for(a===0?l=u=0:a===1?(l=0,u=i-s):(l=a-2,u=Kfe(Gfe(jfe(n),0),i-s)),Wfe(i+l-u),f=zfe(r,u),d=0;d<u;d++)p=s+d,p in r&&Hfe(f,d,r[p]);if(f.length=u,l<u){for(d=s;d<i-u;d++)p=d+u,v=d+l,p in r?r[v]=r[p]:f_(r,v);for(d=i;d>i-u+l;d--)f_(r,d-1)}else if(l>u)for(d=i-u;d>s;d--)p=d+u-1,v=d+l-1,p in r?r[v]=r[p]:f_(r,v);for(d=0;d<l;d++)r[d+s]=arguments[d+2];return Bfe(r,i-u+l),f}});/*
@license
The following license applies to all parts of this software except as
documented below.

    Copyright (c) 2016, Twilio, inc.
    All rights reserved.

    Redistribution and use in source and binary forms, with or without
    modification, are permitted provided that the following conditions are
    met:

      1. Redistributions of source code must retain the above copyright
         notice, this list of conditions and the following disclaimer.

      2. Redistributions in binary form must reproduce the above copyright
         notice, this list of conditions and the following disclaimer in
         the documentation and/or other materials provided with the
         distribution.

      3. Neither the name of Twilio nor the names of its contributors may
         be used to endorse or promote products derived from this software
         without specific prior written permission.

    THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
    "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
    LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
    A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
    HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
    SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
    LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
    DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
    THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
    (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
    OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

This software includes javascript-state-machine under the following license.

    Copyright (c) 2012, 2013, 2014, 2015, Jake Gordon and contributors

    Permission is hereby granted, free of charge, to any person obtaining a copy
    of this software and associated documentation files (the "Software"), to deal
    in the Software without restriction, including without limitation the rights
    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
    copies of the Software, and to permit persons to whom the Software is
    furnished to do so, subject to the following conditions:

    The above copyright notice and this permission notice shall be included in all
    copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE

This software includes loglevel under the following license.

    Copyright (c) 2013 Tim Perry

    Permission is hereby granted, free of charge, to any person
    obtaining a copy of this software and associated documentation
    files (the "Software"), to deal in the Software without
    restriction, including without limitation the rights to use,
    copy, modify, merge, publish, distribute, sublicense, and/or sell
    copies of the Software, and to permit persons to whom the
    Software is furnished to do so, subject to the following
    conditions:

    The above copyright notice and this permission notice shall be
    included in all copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
    OTHER DEALINGS IN THE SOFTWARE.


*/(function(e){var t=typeof t<"u"?t:typeof self<"u"?self:typeof window<"u"?window:{};Object.defineProperty(e,"__esModule",{value:!0});var n=S2,r=gf,i=gb,s=mf,a=yf,l=go,u=vf,f=pf,d=_v,p=_N,v=vo,m=Tn,y=no,E=Nie,T=RM,w=WL,b=tl,$=Uv,N=eD;function z(M){return M&&typeof M=="object"&&"default"in M?M:{default:M}}function H(M){if(M&&M.__esModule)return M;var F=Object.create(null);return M&&Object.keys(M).forEach(function(R){if(R!=="default"){var I=Object.getOwnPropertyDescriptor(M,R);Object.defineProperty(F,R,I.get?I:{enumerable:!0,get:function(){return M[R]}})}}),F.default=M,Object.freeze(F)}var K=z(n),P=z(r),ee=z(i),Y=z(s),oe=z(a),de=z(l),me=z(u),we=z(f),ke=z(d),_e=z(p),Me=z(v),te=H(y),ve=H(E),be=z(w),W=H(N);function Re(M,F,R,I){var S=arguments.length,O=S<3?F:I===null?I=Object.getOwnPropertyDescriptor(F,R):I,x;if((typeof Reflect>"u"?"undefined":Me.default(Reflect))==="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(M,F,R,I);else for(var Q=M.length-1;Q>=0;Q--)(x=M[Q])&&(O=(S<3?x(O):S>3?x(F,R,O):x(F,R))||O);return S>3&&O&&Object.defineProperty(F,R,O),O}function kt(M,F){if((typeof Reflect>"u"?"undefined":Me.default(Reflect))==="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(M,F)}var De=te.getLogger("twilsock");function ht(M,F){return["".concat(new Date().toISOString()," Twilsock ").concat(M,":")].concat(Array.from(F))}var B=function(){function M(F){we.default(this,M),ke.default(this,"prefix",""),this.prefix=F!=null&&F.length>0?" "+F+":":""}return me.default(M,[{key:"setLevel",value:function(R){De.setLevel(R)}},{key:"trace",value:function(){if(De.getLevel()==De.levels.TRACE){for(var R=arguments.length,I=new Array(R),S=0;S<R;S++)I[S]=arguments[S];De.debug.apply(null,ht("T",I))}}},{key:"debug",value:function(){for(var R=arguments.length,I=new Array(R),S=0;S<R;S++)I[S]=arguments[S];De.debug.apply(null,ht("D",I))}},{key:"info",value:function(){for(var R=arguments.length,I=new Array(R),S=0;S<R;S++)I[S]=arguments[S];De.info.apply(null,ht("I",I))}},{key:"warn",value:function(){for(var R=arguments.length,I=new Array(R),S=0;S<R;S++)I[S]=arguments[S];De.warn.apply(null,ht("W",I))}},{key:"error",value:function(){for(var R=arguments.length,I=new Array(R),S=0;S<R;S++)I[S]=arguments[S];De.error.apply(null,ht("E",I))}}],[{key:"setLevel",value:function(R){De.setLevel(R)}},{key:"trace",value:function(){if(De.getLevel()==De.levels.TRACE){for(var R=arguments.length,I=new Array(R),S=0;S<R;S++)I[S]=arguments[S];De.debug.apply(null,ht("T",I))}}},{key:"debug",value:function(){for(var R=arguments.length,I=new Array(R),S=0;S<R;S++)I[S]=arguments[S];De.debug.apply(null,ht("D",I))}},{key:"info",value:function(){for(var R=arguments.length,I=new Array(R),S=0;S<R;S++)I[S]=arguments[S];De.info.apply(null,ht("I",I))}},{key:"warn",value:function(){for(var R=arguments.length,I=new Array(R),S=0;S<R;S++)I[S]=arguments[S];De.warn.apply(null,ht("W",I))}},{key:"error",value:function(){for(var R=arguments.length,I=new Array(R),S=0;S<R;S++)I[S]=arguments[S];De.error.apply(null,ht("E",I))}}]),M}(),he=new B(""),je="0.13.12",Ar=function(){function M(F,R,I){we.default(this,M),ke.default(this,"confirmedCapabilities",new Set),this.activeGrant=R,this._token=F;var S=I.region||"us1",O="wss://tsock.".concat(S,".twilio.com/v3/wsconnect"),x=I.twilsock||I.Twilsock||{};this.url=x.uri||O,this._continuationToken=I.continuationToken?I.continuationToken:null,this.logLevel=I.logLevel?I.logLevel:"error",this.retryPolicy=I.retryPolicy?I.retryPolicy:{min:1*1e3,max:2*60*1e3,randomness:.2},this.clientMetadata=I.clientMetadata?I.clientMetadata:{},this.clientMetadata.ver=je,this.initRegistrations=I.initRegistrations?I.initRegistrations:null,this.tweaks=I.tweaks?I.tweaks:null}return me.default(M,[{key:"token",get:function(){return this._token}},{key:"continuationToken",get:function(){return this._continuationToken}},{key:"updateToken",value:function(R){this._token=R}},{key:"updateContinuationToken",value:function(R){this._continuationToken=R}}]),M}(),cn=me.default(function M(F){we.default(this,M),this.id=F||"TM".concat(T.v4())});function Ie(M){var F=bi();return function(){var I=de.default(M),S;if(F){var O=de.default(this).constructor;S=Reflect.construct(I,arguments,O)}else S=I.apply(this,arguments);return oe.default(this,S)}}function bi(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Ye=function(M){Y.default(R,M);var F=Ie(R);function R(I,S,O,x,Q){var V;return we.default(this,R),V=F.call(this),ke.default(P.default(V),"method","init"),V.token=I,V.continuation_token=S,V.metadata=O,V.registrations=x,V.tweaks=Q,V.capabilities=["client_update","offline_storage","telemetry.v1"],V}return me.default(R)}(cn);function ue(M){var F=Le();return function(){var I=de.default(M),S;if(F){var O=de.default(this).constructor;S=Reflect.construct(I,arguments,O)}else S=I.apply(this,arguments);return oe.default(this,S)}}function Le(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var zt=function(M){Y.default(R,M);var F=ue(R);function R(I,S,O,x,Q,V,se){var fe;return we.default(this,R),fe=F.call(this,I),fe.continuationToken=S,fe.continuationTokenStatus=x,fe.offlineStorage=Q,fe.initRegistrations=V,fe.debugInfo=se,fe.confirmedCapabilities=O,fe}return me.default(R)}(cn);function ce(M){var F=yo();return function(){var I=de.default(M),S;if(F){var O=de.default(this).constructor;S=Reflect.construct(I,arguments,O)}else S=I.apply(this,arguments);return oe.default(this,S)}}function yo(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var nl=function(M){Y.default(R,M);var F=ce(R);function R(I){var S;return we.default(this,R),S=F.call(this),ke.default(P.default(S),"method","update"),S.token=I,S}return me.default(R)}(cn);function Bi(M){var F=Ln();return function(){var I=de.default(M),S;if(F){var O=de.default(this).constructor;S=Reflect.construct(I,arguments,O)}else S=I.apply(this,arguments);return oe.default(this,S)}}function Ln(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Ti=function(M){Y.default(R,M);var F=Bi(R);function R(I,S,O){var x;return we.default(this,R),x=F.call(this),ke.default(P.default(x),"method","message"),x.active_grant=I,x.payload_type=S,x.http_request=O,x}return me.default(R)}(cn);function Wi(M){var F=rl();return function(){var I=de.default(M),S;if(F){var O=de.default(this).constructor;S=Reflect.construct(I,arguments,O)}else S=I.apply(this,arguments);return oe.default(this,S)}}function rl(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Dt=function(M){Y.default(R,M);var F=Wi(R);function R(I){var S;return we.default(this,R),S=F.call(this,I),ke.default(P.default(S),"method","reply"),ke.default(P.default(S),"payload_type","application/json"),ke.default(P.default(S),"status",{code:200,status:"OK"}),S}return me.default(R)}(cn);function Xt(M){var F=ut();return function(){var I=de.default(M),S;if(F){var O=de.default(this).constructor;S=Reflect.construct(I,arguments,O)}else S=I.apply(this,arguments);return oe.default(this,S)}}function ut(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Ve=function(M){Y.default(R,M);var F=Xt(R);function R(){var I;return we.default(this,R),I=F.call(this),ke.default(P.default(I),"method","close"),I}return me.default(R)}(cn);function gn(M){var F=il();return function(){var I=de.default(M),S;if(F){var O=de.default(this).constructor;S=Reflect.construct(I,arguments,O)}else S=I.apply(this,arguments);return oe.default(this,S)}}function il(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var sl=me.default(function M(F,R,I,S,O,x){we.default(this,M),this.start=F,this.end=R,this.title=I,this.details=S,this.id=O,this.type=x}),al=function(M){Y.default(R,M);var F=gn(R);function R(I){var S;return we.default(this,R),S=F.call(this),ke.default(P.default(S),"method","telemetry.v1"),S.events=I,S}return me.default(R)}(cn);function _o(M){var F=encodeURIComponent(M),R=F.replace(/%([0-9A-F]{2})/g,function(I,S){return String.fromCharCode(+("0x"+S))});return R.length}function ol(M){var F=encodeURIComponent(M),R=F.replace(/%([0-9A-F]{2})/g,function(S,O){return String.fromCharCode(+("0x"+O))}),I=new Uint8Array(R.length);return Array.prototype.forEach.call(R,function(S,O){I[O]=S.charCodeAt(0)}),I}function wo(M){var F=Array.prototype.map.call(M,function(I){return String.fromCharCode(I)}).join(""),R=F.replace(/(.)/g,function(I,S){var O=S.charCodeAt(0).toString(16).toUpperCase();return O.length<2&&(O="0"+O),"%"+O});return decodeURIComponent(R)}function So(M){return JSON.parse(wo(M))}function ul(M){for(var F="",R=0;R<M.length;++R){var I=String.fromCharCode(M[R]);if(F+=I,I==="\r"){R+=2;break}}var S=F.split(" ");return{size:R,protocol:S[0],version:S[1],headerSize:Number(S[2])}}var Pf=function(){function M(){we.default(this,M)}return me.default(M,null,[{key:"parse",value:function(R){var I=2,S=new Uint8Array(R),O=ul(S);if(O.protocol!=="TWILSOCK"||O.version!=="V3.0")return he.error("unsupported protocol: ".concat(O.protocol," ver ").concat(O.version)),null;var x;try{x=So(S.subarray(O.size,O.size+O.headerSize))}catch(fe){return he.error("failed to parse message header",fe,R),null}he.debug("message received:",x.method);var Q;if(x.payload_size>0){var V=I+O.size+O.headerSize,se=x.payload_size;if(!x.hasOwnProperty("payload_type")||x.payload_type.indexOf("application/json")===0)try{Q=So(S.subarray(V,V+se))}catch(fe){return he.error("failed to parse message body",fe,R),null}else x.payload_type.indexOf("text/plain")===0&&(Q=wo(S.subarray(V,V+se)))}return{method:x.method,header:x,payload:Q}}},{key:"createPacket",value:function(R){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";R.payload_size=_o(I);var S=JSON.stringify(R),O="TWILSOCK V3.0 "+_o(S);he.debug("send request:",O+S+I);var x=ol(O+`\r
`+S+`\r
`+I);return x.buffer}}]),M}();function Bv(M){var F=Wv();return function(){var I=de.default(M),S;if(F){var O=de.default(this).constructor;S=Reflect.construct(I,arguments,O)}else S=I.apply(this,arguments);return oe.default(this,S)}}function Wv(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var fn=function(M){Y.default(R,M);var F=Bv(R);function R(I){return we.default(this,R),F.call(this,I)}return me.default(R)}(be.default(Error));function Af(M){var F=zv();return function(){var I=de.default(M),S;if(F){var O=de.default(this).constructor;S=Reflect.construct(I,arguments,O)}else S=I.apply(this,arguments);return oe.default(this,S)}}function zv(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ll=function(M){Y.default(R,M);var F=Af(R);function R(I,S){var O;return we.default(this,R),O=F.call(this,I),O.reply=S,O}return me.default(R)}(fn);function Of(M,F){var R=Object.keys(M);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(M);F&&(I=I.filter(function(S){return Object.getOwnPropertyDescriptor(M,S).enumerable})),R.push.apply(R,I)}return R}function Nf(M){for(var F=1;F<arguments.length;F++){var R=arguments[F]!=null?arguments[F]:{};F%2?Of(Object(R),!0).forEach(function(I){ke.default(M,I,R[I])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(R)):Of(Object(R)).forEach(function(I){Object.defineProperty(M,I,Object.getOwnPropertyDescriptor(R,I))})}return M}function Mf(M){var F=Hv();return function(){var I=de.default(M),S;if(F){var O=de.default(this).constructor;S=Reflect.construct(I,arguments,O)}else S=I.apply(this,arguments);return oe.default(this,S)}}function Hv(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Vv=function(M){Y.default(R,M);var F=Mf(R);function R(I){var S;return we.default(this,R),S=F.call(this),ke.default(P.default(S),"newBackoff",null),ke.default(P.default(S),"usedBackoff",null),ke.default(P.default(S),"retrier",null),S.options=I?Nf({},I):{},S}return me.default(R,[{key:"inProgress",get:function(){return!!this.retrier}},{key:"start",value:function(){if(this.inProgress)throw new Error("Already waiting for next attempt, call finishAttempt(success : boolean) to finish it");this.createRetrier()}},{key:"stop",value:function(){this.cleanRetrier(),this.newBackoff=null,this.usedBackoff=null}},{key:"modifyBackoff",value:function(S){this.newBackoff=S}},{key:"attemptFailed",value:function(){if(!this.inProgress)throw new Error("No attempt is in progress");if(this.newBackoff){var S=!this.usedBackoff||this.usedBackoff<this.newBackoff;if(S)this.createRetrier();else{var O;(O=this.retrier)===null||O===void 0||O.failed(new Error)}}else{var x;(x=this.retrier)===null||x===void 0||x.failed(new Error)}}},{key:"cancel",value:function(){var S;(S=this.retrier)===null||S===void 0||S.cancel()}},{key:"cleanRetrier",value:function(){var S,O;(S=this.retrier)===null||S===void 0||S.removeAllListeners(),(O=this.retrier)===null||O===void 0||O.cancel(),this.retrier=null}},{key:"getRetryPolicy",value:function(){var S=Nf({},this.options);return this.newBackoff&&(S.min=this.newBackoff,S.max=this.options.max&&this.options.max>this.newBackoff?this.options.max:this.newBackoff),S.maxAttemptsCount=this.options.maxAttemptsCount?this.options.maxAttemptsCount+1:void 0,S}},{key:"createRetrier",value:function(){var S=this;this.cleanRetrier();var O=this.getRetryPolicy();this.retrier=new b.Retrier(O),this.retrier.once("attempt",function(){var x,Q;(x=S.retrier)===null||x===void 0||x.on("attempt",function(){return S.emit("attempt")}),(Q=S.retrier)===null||Q===void 0||Q.failed(new Error("Skipping first attempt"))}),this.retrier.on("failed",function(x){return S.emit("failed",x)}),this.usedBackoff=this.newBackoff,this.newBackoff=null,this.retrier.start()}}]),R}($.ReplayEventEmitter);function qv(M){var F=cl();return function(){var I=de.default(M),S;if(F){var O=de.default(this).constructor;S=Reflect.construct(I,arguments,O)}else S=I.apply(this,arguments);return oe.default(this,S)}}function cl(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Gv=3e3;function fl(M){setTimeout(M,0)}var Kv=function(M){Y.default(R,M);var F=qv(R);function R(I,S,O){var x;we.default(this,R),x=F.call(this),ke.default(P.default(x),"disconnectingTimer",null),ke.default(P.default(x),"disconnectedPromiseResolve",null),ke.default(P.default(x),"terminalStates",["disconnected","rejected"]),ke.default(P.default(x),"tokenExpiredSasCode",20104),ke.default(P.default(x),"terminationReason","Connection is not initialized"),x.websocket=I,x.websocket.on("connected",function(){return x.fsm.socketConnected()}),x.websocket.on("disconnected",function(){return x.fsm.socketClosed()}),x.websocket.on("message",function(V){return x.onIncomingMessage(V)}),x.websocket.on("socketError",function(V){x.emit("connectionError",{terminal:!1,message:"Socket error: ".concat(V.message),httpStatusCode:null,errorCode:null}),x.emit("stateChanged","retrying")}),x.transport=S,x.config=O,x.retrier=new Vv(O.retryPolicy),x.retrier.on("attempt",function(){return x.retry()}),x.retrier.on("failed",function(V){he.warn("Retrying failed: ".concat(V.message)),x.disconnect()}),typeof window<"u"&&typeof window.addEventListener<"u"&&(window.addEventListener("online",function(){he.debug("Browser reported connectivity state: online"),x.resetBackoff(),x.fsm.systemOnline()}),window.addEventListener("offline",function(){he.debug("Browser reported connectivity state: offline"),x.websocket.close(),x.fsm.socketClosed()}));var Q=ve.factory({init:"disconnected",transitions:[{name:"userConnect",from:["disconnected","rejected"],to:"connecting"},{name:"userConnect",from:["connecting","connected"]},{name:"userDisconnect",from:["connecting","initialising","connected","updating","retrying","rejected","waitSocketClosed","waitOffloadSocketClosed"],to:"disconnecting"},{name:"userRetry",from:["retrying"],to:"connecting"},{name:"socketConnected",from:["connecting"],to:"initialising"},{name:"socketClosed",from:["connecting","initialising","connected","updating","error","waitOffloadSocketClosed"],to:"retrying"},{name:"socketClosed",from:["disconnecting"],to:"disconnected"},{name:"socketClosed",from:["waitSocketClosed"],to:"disconnected"},{name:"socketClosed",from:["rejected"],to:"rejected"},{name:"initSuccess",from:["initialising"],to:"connected"},{name:"initError",from:["initialising"],to:"error"},{name:"tokenRejected",from:["initialising","updating"],to:"rejected"},{name:"protocolError",from:["initialising","connected","updating"],to:"error"},{name:"receiveClose",from:["initialising","connected","updating"],to:"waitSocketClosed"},{name:"receiveOffload",from:["initialising","connected","updating"],to:"waitOffloadSocketClosed"},{name:"unsupportedProtocol",from:["initialising","connected","updating"],to:"unsupported"},{name:"receiveFatalClose",from:["initialising","connected","updating"],to:"unsupported"},{name:"userUpdateToken",from:["disconnected","rejected","connecting","retrying"],to:"connecting"},{name:"userUpdateToken",from:["connected"],to:"updating"},{name:"updateSuccess",from:["updating"],to:"connected"},{name:"updateError",from:["updating"],to:"error"},{name:"userSend",from:["connected"],to:"connected"},{name:"systemOnline",from:["retrying"],to:"connecting"}],methods:{onConnecting:function(){x.setupSocket(),x.emit("connecting")},onEnterInitialising:function(){x.sendInit()},onLeaveInitialising:function(){x.cancelInit()},onEnterUpdating:function(){x.sendUpdate()},onLeaveUpdating:function(){x.cancelUpdate()},onEnterRetrying:function(){x.initRetry(),x.emit("connecting")},onEnterConnected:function(){x.resetBackoff(),x.onConnected()},onUserUpdateToken:function(){x.resetBackoff()},onTokenRejected:function(){x.resetBackoff(),x.closeSocket(!0),x.finalizeSocket()},onUserDisconnect:function(){x.closeSocket(!0)},onEnterDisconnecting:function(){x.startDisconnectTimer()},onLeaveDisconnecting:function(){x.cancelDisconnectTimer()},onEnterWaitSocketClosed:function(){x.startDisconnectTimer()},onLeaveWaitSocketClosed:function(){x.cancelDisconnectTimer()},onEnterWaitOffloadSocketClosed:function(){x.startDisconnectTimer()},onLeaveWaitOffloadSocketClosed:function(){x.cancelDisconnectTimer()},onDisconnected:function(){x.resetBackoff(),x.finalizeSocket()},onReceiveClose:function(){x.onCloseReceived()},onReceiveOffload:function(se,fe){he.debug("onreceiveoffload: ",fe),x.modifyBackoff(fe.body),x.onCloseReceived()},onUnsupported:function(){x.closeSocket(!0),x.finalizeSocket()},onError:function(se,fe){x.closeSocket(fe),x.finalizeSocket()},onEnterState:function(se){se.from!=="none"&&x.changeState(se)},onInvalidTransition:function(se,fe,Oe){he.warn("FSM: unexpected transition",fe,Oe)}}});return x.fsm=new Q,x}return me.default(R,[{key:"changeState",value:function(S){he.debug("FSM: ".concat(S.transition,": ").concat(S.from," --> ").concat(S.to)),this.lastEmittedState!==this.state&&(this.lastEmittedState=this.state,this.emit("stateChanged",this.state))}},{key:"resetBackoff",value:function(){he.trace("resetBackoff"),this.retrier.stop()}},{key:"modifyBackoff",value:function(S){he.trace("modifyBackoff",S);var O=S?S.backoff_policy:null;O&&typeof O.reconnect_min_ms=="number"&&this.retrier.modifyBackoff(O.reconnect_min_ms)}},{key:"startDisconnectTimer",value:function(){var S=this;he.trace("startDisconnectTimer"),this.disconnectingTimer&&(clearTimeout(this.disconnectingTimer),this.disconnectingTimer=null),this.disconnectingTimer=setTimeout(function(){he.debug("disconnecting is timed out"),S.closeSocket(!0)},Gv)}},{key:"cancelDisconnectTimer",value:function(){he.trace("cancelDisconnectTimer"),this.disconnectingTimer&&(clearTimeout(this.disconnectingTimer),this.disconnectingTimer=null)}},{key:"isConnected",get:function(){return this.state==="connected"&&this.websocket.isConnected}},{key:"state",get:function(){switch(this.fsm.state){case"connecting":case"initialising":case"retrying":case"error":return"connecting";case"updating":case"connected":return"connected";case"rejected":return"denied";case"disconnecting":case"waitSocketClosed":case"waitOffloadSocketClosed":return"disconnecting";case"disconnected":default:return"disconnected"}}},{key:"initRetry",value:function(){he.debug("initRetry"),this.retrier.inProgress?this.retrier.attemptFailed():this.retrier.start()}},{key:"retry",value:function(){this.fsm.state!="connecting"?(he.trace("retry"),this.websocket.close(),this.fsm.userRetry()):he.trace("can	 retry as already connecting")}},{key:"onConnected",value:function(){this.emit("connected")}},{key:"finalizeSocket",value:function(){he.trace("finalizeSocket"),this.websocket.close(),this.emit("disconnected"),this.disconnectedPromiseResolve&&(this.disconnectedPromiseResolve(),this.disconnectedPromiseResolve=null)}},{key:"setupSocket",value:function(){he.trace("setupSocket:",this.config.token),this.emit("beforeConnect"),this.websocket.connect()}},{key:"onIncomingMessage",value:function(S){var O=Pf.parse(S);if(O){var x=O.method,Q=O.header,V=O.payload;if(x!=="reply"&&this.confirmReceiving(Q),x==="notification")this.emit("message",Q.message_type,V);else if(Q.method==="reply")this.transport.processReply({id:Q.id,status:Q.status,header:Q,body:V});else if(Q.method==="client_update")Q.client_update_type==="token_about_to_expire"&&this.emit("tokenAboutToExpire");else if(Q.method==="close")if(Q.status.code===308)he.debug("Connection has been offloaded"),this.fsm.receiveOffload({status:Q.status.status,body:V});else if(Q.status.code===406){var se="Server closed connection because can't parse protocol: ".concat(JSON.stringify(Q.status));this.emitReplyConnectionError(se,Q,!0),he.error(se),this.fsm.receiveFatalClose()}else Q.status.code===417?(he.error("Server closed connection because can't parse client reply: ".concat(JSON.stringify(Q.status))),this.fsm.receiveFatalClose(Q.status.status)):Q.status.code===410?(he.warn("Server closed connection: ".concat(JSON.stringify(Q.status))),this.fsm.receiveClose(Q.status.status),this.emit("tokenExpired")):Q.status.code===401?(he.error("Server closed connection: ".concat(JSON.stringify(Q.status))),this.fsm.receiveClose(Q.status.status)):(he.warn("unexpected message: ",Q.status),this.fsm.receiveOffload({status:Q.status.status,body:null}))}}},{key:"sendInit",value:function(){var I=K.default(_e.default.mark(function O(){var x,Q;return _e.default.wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return he.trace("sendInit"),se.prev=1,this.emit("beforeSendInit"),se.next=5,this.transport.sendInit();case 5:x=se.sent,this.config.updateContinuationToken(x.continuationToken),this.config.confirmedCapabilities=x.confirmedCapabilities,this.fsm.initSuccess(x),this.emit("initialized",x),this.emit("tokenUpdated"),se.next=17;break;case 13:se.prev=13,se.t0=se.catch(1),se.t0 instanceof ll?(Q=!1,he.warn("Init rejected by server: ".concat(JSON.stringify(se.t0.reply.status))),this.emit("sendInitFailed"),se.t0.reply.status.code===401||se.t0.reply.status.code===403?(Q=!0,this.fsm.tokenRejected(se.t0.reply.status),se.t0.reply.status.errorCode===this.tokenExpiredSasCode&&this.emit("tokenExpired")):se.t0.reply.status.code===429?(this.modifyBackoff(se.t0.reply.body),this.fsm.initError(!0)):se.t0.reply.status.code===500?this.fsm.initError(!1):this.fsm.initError(!0),this.emitReplyConnectionError(se.t0.message,se.t0.reply,Q)):(this.terminationReason=se.t0.message,this.emit("connectionError",{terminal:!0,message:"Unknown error during connection initialisation: ".concat(se.t0.message,`
`).concat(JSON.stringify(se.t0,null,2)),httpStatusCode:null,errorCode:null}),this.fsm.initError(!0)),this.emit("tokenUpdated",se.t0);case 17:case"end":return se.stop()}},O,this,[[1,13]])}));function S(){return I.apply(this,arguments)}return S}()},{key:"sendUpdate",value:function(){var I=K.default(_e.default.mark(function O(){var x,Q,V;return _e.default.wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return he.trace("sendUpdate"),x=new nl(this.config.token),fe.prev=2,fe.next=5,this.transport.sendWithReply(x);case 5:Q=fe.sent,this.fsm.updateSuccess(Q.body),this.emit("tokenUpdated"),fe.next=14;break;case 10:fe.prev=10,fe.t0=fe.catch(2),fe.t0 instanceof ll?(V=!1,he.warn("Token update rejected by server: ".concat(JSON.stringify(fe.t0.reply.status))),fe.t0.reply.status.code===401||fe.t0.reply.status.code===403?(V=!0,this.fsm.tokenRejected(fe.t0.reply.status),fe.t0.reply.status.errorCode===this.tokenExpiredSasCode&&this.emit("tokenExpired")):fe.t0.reply.status.code===429?(this.modifyBackoff(fe.t0.reply.body),this.fsm.updateError(fe.t0.reply.status)):this.fsm.updateError(fe.t0.reply.status),this.emitReplyConnectionError(fe.t0.message,fe.t0.reply,V)):(this.emit("error",!1,fe.t0.message,null,null),this.fsm.updateError(fe.t0)),this.emit("tokenUpdated",fe.t0);case 14:case"end":return fe.stop()}},O,this,[[2,10]])}));function S(){return I.apply(this,arguments)}return S}()},{key:"emitReplyConnectionError",value:function(S,O,x){var Q=O.status&&O.status.description?O.status.description:S,V=O.status.code,se=O.status&&O.status.errorCode?O.status.errorCode:null;x&&(this.terminationReason=Q),this.emit("connectionError",{terminal:x,message:"Connection error: ".concat(Q),httpStatusCode:V,errorCode:se})}},{key:"cancelInit",value:function(){he.trace("cancelInit")}},{key:"cancelUpdate",value:function(){he.trace("cancelUpdate")}},{key:"confirmReceiving",value:function(S){he.trace("confirmReceiving");try{this.transport.send(new Dt(S.id))}catch(O){he.debug("failed to confirm packet receiving",O)}}},{key:"closeSocket",value:function(S){var O=this;he.trace("closeSocket (graceful: ".concat(S,")")),S&&this.transport.isConnected&&this.transport.sendClose(),this.websocket.close(),fl(function(){return O.fsm.socketClosed()})}},{key:"connect",value:function(){he.trace("connect"),this.fsm.userConnect()}},{key:"disconnect",value:function(){var S=this;return he.trace("disconnect"),this.fsm.is("disconnected")?Promise.resolve():new Promise(function(O){S.disconnectedPromiseResolve=O,S.fsm.userDisconnect()})}},{key:"updateToken",value:function(S){var O=this;return he.trace("updateToken:",S),new Promise(function(x,Q){O.once("tokenUpdated",function(V){V?Q(V):x()}),O.fsm.userUpdateToken()})}},{key:"isTerminalState",get:function(){return this.terminalStates.indexOf(this.fsm.state)!==-1}},{key:"getTerminationReason",get:function(){return this.terminationReason}},{key:"onCloseReceived",value:function(){this.websocket.close()}}]),R}($.ReplayEventEmitter),Qv=function(){function M(){we.default(this,M)}return me.default(M,null,[{key:"getMetadata",value:function(R){var I,S,O,x,Q,V,se,fe,Oe=R&&R.clientMetadata?R.clientMetadata:{},Qn=["ver","env","envv","os","osv","osa","type","sdk","sdkv","dev","devv","devt","app","appv"],Eo={env:(I=W.name)!==null&&I!==void 0?I:"unknown",envv:(S=W.version)!==null&&S!==void 0?S:"unknown",os:(O=(x=W.os)===null||x===void 0?void 0:x.family)!==null&&O!==void 0?O:"unknown",osv:(Q=(V=W.os)===null||V===void 0?void 0:V.version)!==null&&Q!==void 0?Q:"unknown",osa:(se=(fe=W.os)===null||fe===void 0?void 0:fe.architecture)!==null&&se!==void 0?se:"unknown",sdk:"js-default"},fr={};return Qn.filter(function(ki){return ki in Oe||ki in Eo}).forEach(function(ki){return fr[ki]=ki in Oe?Oe[ki]:Eo[ki]}),fr}}]),M}(),Jv=3e4;function Yv(M){return M>=200&&M<300}function Xv(M){switch(Me.default(M)){case"undefined":return"";case"object":return JSON.stringify(M);default:return M}}var Zv=function(){function M(F,R){var I=this;we.default(this,M),this.config=R,this.activeRequests=new Map,this.channel=F,this.channel.on("reply",function(S){return I.processReply(S)}),this.channel.on("disconnected",function(){I.activeRequests.forEach(function(S){clearTimeout(S.timeout),S.reject(new fn("disconnected"))}),I.activeRequests.clear()})}return me.default(M,[{key:"isConnected",get:function(){return this.channel.isConnected}},{key:"processReply",value:function(R){var I=this.activeRequests.get(R.id);I&&(clearTimeout(I.timeout),this.activeRequests.delete(R.id),Yv(R.status.code)?I.resolve(R):(I.reject(new ll("Transport failure: "+R.status.status,R)),he.trace("message rejected")))}},{key:"storeRequest",value:function(R,I,S){var O={resolve:I,reject:S,timeout:setTimeout(function(){he.trace("request",R,"is timed out"),S(new fn("Twilsock: request timeout: "+R))},Jv)};this.activeRequests.set(R,O)}},{key:"shutdown",value:function(){this.activeRequests.forEach(function(R){clearTimeout(R.timeout),R.reject(new fn("Twilsock: request cancelled by user"))}),this.activeRequests.clear()}},{key:"sendInit",value:function(){var F=K.default(_e.default.mark(function I(){var S,O,x;return _e.default.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return he.trace("sendInit"),S=Qv.getMetadata(this.config),O=new Ye(this.config.token,this.config.continuationToken,S,this.config.initRegistrations,this.config.tweaks),V.next=5,this.sendWithReply(O);case 5:return x=V.sent,V.abrupt("return",new zt(x.id,x.header.continuation_token,new Set(x.header.capabilities),x.header.continuation_token_status,x.header.offline_storage,x.header.init_registrations,x.header.debug_info));case 7:case"end":return V.stop()}},I,this)}));function R(){return F.apply(this,arguments)}return R}()},{key:"sendClose",value:function(){var R=new Ve;this.send(R)}},{key:"sendWithReply",value:function(R,I){var S=this;return new Promise(function(O,x){var Q=S.send(R,I);S.storeRequest(Q,O,x)})}},{key:"send",value:function(R,I){R.id=R.id||"TM".concat(T.v4());var S=Pf.createPacket(R,Xv(I));try{return this.channel.send(S),R.id}catch(O){throw he.debug("failed to send ",R,O),he.trace(O.stack),O}}}]),M}();function eg(M){var F=tg();return function(){var I=de.default(M),S;if(F){var O=de.default(this).constructor;S=Reflect.construct(I,arguments,O)}else S=I.apply(this,arguments);return oe.default(this,S)}}function tg(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Lf=function(M){Y.default(R,M);var F=eg(R);function R(I){var S;return we.default(this,R),S=F.call(this),ke.default(P.default(S),"socket",null),S.url=I,S.url=I,S.WebSocket=t.WebSocket||t.MozWebSocket||{},S}return me.default(R,[{key:"isConnected",get:function(){return!!this.socket&&this.socket.readyState===1}},{key:"connect",value:function(){var S=this;he.trace("connecting to socket");var O;try{O=new this.WebSocket(this.url)}catch(x){he.debug("Socket error: ".concat(this.url)),this.emit("socketError",x);return}O.binaryType="arraybuffer",O.onopen=function(){he.debug("socket opened ".concat(S.url)),S.emit("connected")},O.onclose=function(x){he.debug("socket closed",x),S.emit("disconnected",x)},O.onerror=function(x){he.debug("Socket error:",x),S.emit("socketError",x)},O.onmessage=function(x){S.emit("message",x.data)},this.socket=O}},{key:"send",value:function(S){return this.socket&&this.socket.send(S)}},{key:"close",value:function(){if(he.trace("closing socket"),this.socket){this.socket.onopen=null,this.socket.onclose=null,this.socket.onerror=null,this.socket.onmessage=null;try{this.socket.close()}finally{}}}}]),R}($.ReplayEventEmitter);function ng(M){var F=rg();return function(){var I=de.default(M),S;if(F){var O=de.default(this).constructor;S=Reflect.construct(I,arguments,O)}else S=I.apply(this,arguments);return oe.default(this,S)}}function rg(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ig=function(M){Y.default(R,M);var F=ng(R);function R(I){var S;return we.default(this,R),S=F.call(this),S.transport=I,S.registrations=new Map,S.registrationsInProgress=new Map,S}return me.default(R,[{key:"putNotificationContext",value:function(){var I=K.default(_e.default.mark(function O(x,Q){var V;return _e.default.wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return V={method:"put_notification_ctx",notification_ctx_id:x},fe.next=3,this.transport.sendWithReply(V,Q);case 3:case"end":return fe.stop()}},O,this)}));function S(O,x){return I.apply(this,arguments)}return S}()},{key:"deleteNotificationContext",value:function(){var I=K.default(_e.default.mark(function O(x){var Q;return _e.default.wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return Q={method:"delete_notification_ctx",notification_ctx_id:x},se.next=3,this.transport.sendWithReply(Q);case 3:case"end":return se.stop()}},O,this)}));function S(O){return I.apply(this,arguments)}return S}()},{key:"updateRegistration",value:function(){var I=K.default(_e.default.mark(function O(x,Q){var V,se;return _e.default.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return he.debug("update registration for context",x),V=this.registrationsInProgress.get(x),V||(V=new Set,this.registrationsInProgress.set(x,V)),se=T.v4(),V.add(se),Oe.prev=5,Oe.next=8,this.putNotificationContext(x,Q);case 8:he.debug("registration attempt succeeded for context",Q),V.delete(se),V.size===0&&(this.registrationsInProgress.delete(x),this.emit("registered",x)),Oe.next=19;break;case 13:Oe.prev=13,Oe.t0=Oe.catch(5),he.warn("registration attempt failed for context",Q),he.debug(Oe.t0),V.delete(se),V.size===0&&(this.registrationsInProgress.delete(x),this.emit("registrationFailed",x,Oe.t0));case 19:case"end":return Oe.stop()}},O,this,[[5,13]])}));function S(O,x){return I.apply(this,arguments)}return S}()},{key:"updateRegistrations",value:function(){var I=K.default(_e.default.mark(function O(){var x=this,Q;return _e.default.wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return he.trace("refreshing ".concat(this.registrations.size," registrations")),Q=[],this.registrations.forEach(function(fe,Oe){Q.push(x.updateRegistration(Oe,fe))}),se.next=5,Promise.all(Q);case 5:case"end":return se.stop()}},O,this)}));function S(){return I.apply(this,arguments)}return S}()},{key:"setNotificationsContext",value:function(){var I=K.default(_e.default.mark(function O(x,Q){return _e.default.wrap(function(se){for(;;)switch(se.prev=se.next){case 0:if(!(!x||!Q)){se.next=2;break}throw new fn("Invalid arguments provided");case 2:return this.registrations.set(x,Q),se.next=5,this.updateRegistration(x,Q);case 5:return se.abrupt("return",se.sent);case 6:case"end":return se.stop()}},O,this)}));function S(O,x){return I.apply(this,arguments)}return S}()},{key:"removeNotificationsContext",value:function(){var I=K.default(_e.default.mark(function O(x){return _e.default.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(this.registrations.has(x)){V.next=2;break}return V.abrupt("return");case 2:return V.next=4,this.deleteNotificationContext(x);case 4:this.transport.isConnected&&this.registrations.delete(x);case 5:case"end":return V.stop()}},O,this)}));function S(O){return I.apply(this,arguments)}return S}()}]),R}($.ReplayEventEmitter);function sg(M){var F=ag();return function(){var I=de.default(M),S;if(F){var O=de.default(this).constructor;S=Reflect.construct(I,arguments,O)}else S=I.apply(this,arguments);return oe.default(this,S)}}function ag(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var og=function(M){Y.default(R,M);var F=sg(R);function R(I,S,O){var x;return we.default(this,R),x=F.call(this,S),x.status=I,x.description=S,x.body=O,x}return me.default(R)}(fn);function bo(M){var F=ug();return function(){var I=de.default(M),S;if(F){var O=de.default(this).constructor;S=Reflect.construct(I,arguments,O)}else S=I.apply(this,arguments);return oe.default(this,S)}}function ug(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Is=function(M){Y.default(R,M);var F=bo(R);function R(I){return we.default(this,R),F.call(this,I)}return me.default(R)}(fn),lg=2e4;function cg(M){return M>=200&&M<300}function fg(M){return M&&M.header&&M.header.http_status}function Df(M){var F=M.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)(\/[^?#]*)(\?[^#]*|)(#.*|)$/);if(F){var R={protocol:F[1],host:F[2],hostname:F[3],port:F[4],pathname:F[5],search:F[6],hash:F[7],params:{}};if(R.search.length>0){var I=R.search.substring(1);R.params=I.split("&").map(function(S){return S.split("=")}).reduce(function(S,O){return S.hasOwnProperty(O[0])?Array.isArray(S[O[0]])?S[O[0]].push(O[1]):S[O[0]]=[S[O[0]],O[1]]:S[O[0]]=O[1],S},{})}return R}throw new fn("Incorrect URI: "+M)}function Ff(M,F){var R=Df(F),I={method:M,host:R.host,path:R.pathname};return R.params&&(I.params=R.params),I}function jf(M,F,R,I,S){return{to:Ff(M,F),headers:R,body:I,grant:S}}var dg=function(){function M(F,R,I){we.default(this,M),this.config=I,this.transport=F,this.pendingMessages=[],this.twilsock=R}return me.default(M,[{key:"saveMessage",value:function(R){var I=this;return new Promise(function(S,O){var x={message:R,resolve:S,reject:O,alreadyRejected:!1,timeout:setTimeout(function(){he.debug("request is timed out"),O(new fn("request '".concat(R.to.method,"' to '").concat(R.to.host,"' timed out"))),x.alreadyRejected=!0},lg)};I.pendingMessages.push(x)})}},{key:"sendPendingMessages",value:function(){for(var R=this,I=function(){var x=R.pendingMessages[0];if(!x.alreadyRejected)try{var Q=x.message;R.actualSend(Q).then(function(V){return x.resolve(V)}).catch(function(V){return x.reject(V)}),clearTimeout(x.timeout)}catch(V){return he.debug("Failed to send pending message",V),"break"}R.pendingMessages.splice(0,1)};this.pendingMessages.length>0;){var S=I();if(S==="break")break}}},{key:"rejectPendingMessages",value:function(){var R=this;this.pendingMessages.forEach(function(I){I.reject(new Is("Unable to connect: "+R.twilsock.getTerminationReason)),I.alreadyRejected=!0,clearTimeout(I.timeout)}),this.pendingMessages.splice(0,this.pendingMessages.length)}},{key:"actualSend",value:function(){var F=K.default(_e.default.mark(function I(S){var O,x,Q,V,se,fe,Oe,Qn;return _e.default.wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:return x=S.to,Q=S.headers,V=S.body,se=(O=S.grant)!==null&&O!==void 0?O:this.config.activeGrant,fe={host:x.host,path:x.path,method:x.method,params:x.params,headers:Q},Oe=new Ti(se,Q["Content-Type"]||"application/json",fe),he.trace("Sending upstream message",Oe),fr.next=9,this.transport.sendWithReply(Oe,V);case 9:if(Qn=fr.sent,he.trace("Received upstream message response",Qn),!(fg(Qn)&&!cg(Qn.header.http_status.code))){fr.next=13;break}throw new og(Qn.header.http_status.code,Qn.header.http_status.status,Qn.body);case 13:return fr.abrupt("return",{status:Qn.header.http_status,headers:Qn.header.http_headers,body:Qn.body});case 14:case"end":return fr.stop()}},I,this)}));function R(I){return F.apply(this,arguments)}return R}()},{key:"send",value:function(R,I){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},O=arguments.length>3?arguments[3]:void 0,x=arguments.length>4?arguments[4]:void 0;if(this.twilsock.isTerminalState)return Promise.reject(new Is("Unable to connect: "+this.twilsock.getTerminationReason));var Q=jf(R,I,S,O,x);return this.twilsock.isConnected?this.actualSend(Q):this.saveMessage(Q)}}]),M}(),hg=function(){function M(){var F=this;we.default(this,M),this._promise=new Promise(function(R,I){F._resolve=R,F._reject=I})}return me.default(M,[{key:"promise",get:function(){return this._promise}},{key:"update",value:function(R){this._resolve(R)}},{key:"set",value:function(R){this._resolve(R)}},{key:"fail",value:function(R){this._reject(R)}}]),M}(),pg=function(){function M(F){we.default(this,M),this.id=F}return me.default(M,null,[{key:"create",value:function(R){if(R instanceof Object&&"storage_id"in R)return new M(R.storage_id);throw new fn('Field "storage_id" is missing')}}]),M}(),Uf=function(){function M(){return we.default(this,M),ke.default(this,"initializedFlag","twilio_twilsock_token_storage"),ke.default(this,"tokenStoragePrefix","twilio_continuation_token_"),M._instance||(this.initialize(),M._instance=this),M._instance}return me.default(M,[{key:"sessionStorage",value:function(){try{return t.sessionStorage}catch{return null}}},{key:"window",value:function(){try{return t.window}catch{return null}}},{key:"storeToken",value:function(R,I){this.canStore()&&this.sessionStorage.setItem(this.getKeyName(I),R)}},{key:"getStoredToken",value:function(R){return this.canStore()?this.sessionStorage.getItem(this.getKeyName(R)):null}},{key:"initialize",value:function(){var R=this;if(this.canStore()){var I=this.sessionStorage.getItem(this.initializedFlag);I&&this.clear(),this.sessionStorage.setItem(this.initializedFlag,"true");var S=this.sessionStorage.removeItem;this.window.addEventListener("unload",function(){S(R.initializedFlag)})}}},{key:"clear",value:function(){if(this.canStore()){for(var R=[],I=0;I<this.sessionStorage.length;I++){var S=this.sessionStorage.key(I);S&&S.indexOf(this.tokenStoragePrefix)===0&&R.push(S)}var O=this.sessionStorage.removeItem;R.forEach(function(x){return O(x)}),O(this.initializedFlag)}}},{key:"getKeyName",value:function(R){return"".concat(this.tokenStoragePrefix).concat(R)}},{key:"canStore",value:function(){return!!(this.sessionStorage&&this.sessionStorage.length&&this.window)}}]),M}();ke.default(Uf,"_instance",null);var dl=new Uf,ei=function(){function M(F,R,I,S,O,x){we.default(this,M),this.title=F,this.details=R,this.start=I,this.type=O,this.id=x,this.end=S}return me.default(M,[{key:"toTelemetryEvent",value:function(){var R=new Date,I=this.start,S=this.end?this.end:R;if(S<I){var O=S;S=I,I=O}var x=I.getTime()-R.getTime(),Q=S.getTime()-R.getTime(),V=new sl(x,Q,this.title,this.details,this.id,this.type);return V}}]),M}();e.TelemetryPoint=void 0,function(M){M[M.Start=0]="Start",M[M.End=1]="End"}(e.TelemetryPoint||(e.TelemetryPoint={})),e.EventSendingLimitation=void 0,function(M){M[M.MinEventsPortion=0]="MinEventsPortion",M[M.AnyEvents=1]="AnyEvents",M[M.AnyEventsIncludingUnfinished=2]="AnyEventsIncludingUnfinished"}(e.EventSendingLimitation||(e.EventSendingLimitation={}));var hl=function(){function M(F,R){we.default(this,M),ke.default(this,"minEventsPortionToSend",50),ke.default(this,"maxEventsPortionToSend",100),ke.default(this,"pendingEvents",new Map),ke.default(this,"readyEvents",[]),ke.default(this,"hasInitializationFinished",!1),ke.default(this,"_canSendTelemetry",!1),this.config=F,this.packetInterface=R}return me.default(M,[{key:"isTelemetryEnabled",get:function(){return this.config.confirmedCapabilities.has("telemetry.v1")}},{key:"canSendTelemetry",get:function(){return this._canSendTelemetry&&this.isTelemetryEnabled},set:function(R){he.debug("TelemetryTracker.canSendTelemetry: ".concat(R," TelemetryTracker.isTelemetryEnabled: ").concat(this.isTelemetryEnabled)),this._canSendTelemetry&&!R&&(this.pendingEvents.clear(),this.readyEvents=[]),this._canSendTelemetry=R,R&&this.sendTelemetry(e.EventSendingLimitation.AnyEvents),R&&!this.hasInitializationFinished&&(this.hasInitializationFinished=!0)}},{key:"addTelemetryEvent",value:function(R){!this.canSendTelemetry&&this.hasInitializationFinished||this.readyEvents.push(R)}},{key:"addPartialEvent",value:function(R,I,S){he.debug("Adding ".concat(S===e.TelemetryPoint.Start?"starting":"ending"," timepoint for '").concat(I,"' event"));var O=this.pendingEvents.has(I);if(S===e.TelemetryPoint.Start)O&&he.debug("Overwriting starting point for '".concat(I,"' event")),this.pendingEvents.set(I,R);else{if(!O){he.info("Could not find started event for '".concat(I,"' event"));return}this.addTelemetryEvent(this.merge(this.pendingEvents.get(I),R)),this.pendingEvents.delete(I)}}},{key:"getTelemetryToSend",value:function(R){return!this.canSendTelemetry||this.readyEvents.length==0?[]:R==e.EventSendingLimitation.MinEventsPortion&&this.readyEvents.length<this.minEventsPortionToSend?[]:this.getTelemetryPortion(R==e.EventSendingLimitation.AnyEventsIncludingUnfinished)}},{key:"getTelemetryPortion",value:function(R){var I=this,S=Math.min(this.readyEvents.length,this.maxEventsPortionToSend),O=this.readyEvents.splice(0,S);return R&&O.length<this.maxEventsPortionToSend&&this.pendingEvents.forEach(function(x,Q){if(!(O.length>=I.maxEventsPortionToSend)){var V=I.pendingEvents.get(Q);I.pendingEvents.delete(Q),O.push(new ei("[UNFINISHED] ".concat(V.title),V.details,V.start,null,V.type,V.id))}}),O}},{key:"merge",value:function(R,I){return new ei(I.title?I.title:R.title,I.details?I.details:R.details,R.start,I.end,I.type?I.type:R.type,I.id?I.id:R.id)}},{key:"sendTelemetryIfMinimalPortionCollected",value:function(){this.sendTelemetry(e.EventSendingLimitation.MinEventsPortion)}},{key:"sendTelemetry",value:function(R){var I=this.getTelemetryToSend(R);if(I.length!==0)try{this.packetInterface.send(new al(I.map(function(S){return S.toTelemetryEvent()})))}catch(S){he.debug("Error while sending ".concat(I.length," telemetry events due to ").concat(S,"; they will be resubmitted")),this.readyEvents=this.readyEvents.concat(I)}}}]),M}();function pl(M){var F=vg();return function(){var I=de.default(M),S;if(F){var O=de.default(this).constructor;S=Reflect.construct(I,arguments,O)}else S=I.apply(this,arguments);return oe.default(this,S)}}function vg(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Ei=me.default(function M(){we.default(this,M)});ke.default(Ei,"TWILSOCK_CONNECT","twilsock.sdk.connect"),ke.default(Ei,"TWILSOCK_INIT","twilsock.sdk.init"),e.TwilsockClient=function(M){Y.default(R,M);var F=pl(R);function R(I,S,O){var x;we.default(this,R),x=F.call(this),ke.default(P.default(x),"version",je),ke.default(P.default(x),"offlineStorageDeferred",new hg),O.continuationToken=O.continuationToken?O.continuationToken:dl.getStoredToken(S);var Q=x.config=new Ar(I,S,O);he.setLevel(Q.logLevel);var V=new Lf(Q.url),se=new Zv(V,Q);return x.channel=new Kv(V,se,Q),x.registrations=new ig(se),x.upstream=new dg(se,x.channel,Q),x.telemetryTracker=new hl(Q,se),x.channel.on("initialized",function(){return x.telemetryTracker.canSendTelemetry=!0}),V.on("disconnected",function(){return x.telemetryTracker.canSendTelemetry=!1}),x.registrations.on("registered",function(fe){return x.emit("registered",fe)}),x.channel.on("message",function(fe,Oe){return setTimeout(function(){return x.emit("message",fe,Oe)},0)}),x.channel.on("stateChanged",function(fe){return setTimeout(function(){return x.emit("stateChanged",fe)},0)}),x.channel.on("connectionError",function(fe){return setTimeout(function(){return x.emit("connectionError",fe)},0)}),x.channel.on("tokenAboutToExpire",function(){return setTimeout(function(){return x.emit("tokenAboutToExpire")},0)}),x.channel.on("tokenExpired",function(){return setTimeout(function(){return x.emit("tokenExpired")},0)}),x.channel.on("connected",function(){return x.registrations.updateRegistrations()}),x.channel.on("connected",function(){return x.upstream.sendPendingMessages()}),x.channel.on("connected",function(){return setTimeout(function(){return x.emit("connected")},0)}),x.channel.on("beforeConnect",function(){return x.telemetryTracker.addPartialEvent(new ei("Establish WebSocket connection","",new Date),Ei.TWILSOCK_CONNECT,e.TelemetryPoint.Start)}),x.channel.on("connected",function(){return x.telemetryTracker.addPartialEvent(new ei("Establish WebSocket connection","",new Date,new Date),Ei.TWILSOCK_CONNECT,e.TelemetryPoint.End)}),x.channel.on("beforeSendInit",function(){return x.telemetryTracker.addPartialEvent(new ei("Send Twilsock init","",new Date),Ei.TWILSOCK_INIT,e.TelemetryPoint.Start)}),x.channel.on("initialized",function(){return x.telemetryTracker.addPartialEvent(new ei("Send Twilsock init","Succeeded",new Date,new Date),Ei.TWILSOCK_INIT,e.TelemetryPoint.End)}),x.channel.on("sendInitFailed",function(){return x.telemetryTracker.addPartialEvent(new ei("Send Twilsock init","Failed",new Date,new Date),Ei.TWILSOCK_INIT,e.TelemetryPoint.End)}),x.channel.on("initialized",function(fe){x.handleStorageId(S,fe),dl.storeToken(fe.continuationToken,S),setTimeout(function(){return x.emit("initialized",fe)},0)}),x.channel.on("disconnected",function(){return setTimeout(function(){return x.emit("disconnected")},0)}),x.channel.on("disconnected",function(){return x.upstream.rejectPendingMessages()}),x.channel.on("disconnected",function(){return x.offlineStorageDeferred.fail(new fn("Client disconnected"))}),x.offlineStorageDeferred.promise.catch(function(){}),x}return me.default(R,[{key:"emit",value:function(S){for(var O,x=arguments.length,Q=new Array(x>1?x-1:0),V=1;V<x;V++)Q[V-1]=arguments[V];return he.debug("Emitting ".concat(S.toString(),"(").concat(Q.map(function(se){return JSON.stringify(se)}).join(", "),")")),(O=ee.default(de.default(R.prototype),"emit",this)).call.apply(O,[this,S].concat(Q))}},{key:"handleStorageId",value:function(S,O){if(!O.offlineStorage)this.offlineStorageDeferred.fail(new fn("No offline storage id"));else if(O.offlineStorage.hasOwnProperty(S))try{this.offlineStorageDeferred.set(pg.create(O.offlineStorage[S])),he.debug("Offline storage for '".concat(S,"' product: ").concat(JSON.stringify(O.offlineStorage[S]),"."))}catch(x){this.offlineStorageDeferred.fail(new fn("Failed to parse offline storage for ".concat(S," ").concat(JSON.stringify(O.offlineStorage[S]),". ").concat(x,".")))}else this.offlineStorageDeferred.fail(new fn("No offline storage id for '".concat(S,"' product: ").concat(JSON.stringify(O.offlineStorage))))}},{key:"storageId",value:function(){return this.offlineStorageDeferred.promise}},{key:"isConnected",get:function(){return this.channel.isConnected}},{key:"state",get:function(){return this.channel.state}},{key:"updateToken",value:function(){var I=K.default(_e.default.mark(function O(x){return _e.default.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(he.trace("updating token '".concat(x,"'")),this.config.token!==x){V.next=3;break}return V.abrupt("return");case 3:return this.config.updateToken(x),V.next=6,this.channel.updateToken(x);case 6:return V.abrupt("return",V.sent);case 7:case"end":return V.stop()}},O,this)}));function S(O){return I.apply(this,arguments)}return S}()},{key:"setNotificationsContext",value:function(){var I=K.default(_e.default.mark(function O(x,Q){return _e.default.wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return se.next=2,this.registrations.setNotificationsContext(x,Q);case 2:case"end":return se.stop()}},O,this)}));function S(O,x){return I.apply(this,arguments)}return S}()},{key:"removeNotificationsContext",value:function(){var I=K.default(_e.default.mark(function O(x){return _e.default.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,this.registrations.removeNotificationsContext(x);case 2:case"end":return V.stop()}},O,this)}));function S(O){return I.apply(this,arguments)}return S}()},{key:"connect",value:function(){return this.channel.connect()}},{key:"disconnect",value:function(){var I=K.default(_e.default.mark(function O(){return _e.default.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return this.telemetryTracker.sendTelemetry(e.EventSendingLimitation.AnyEventsIncludingUnfinished),Q.next=3,this.channel.disconnect();case 3:return Q.abrupt("return",Q.sent);case 4:case"end":return Q.stop()}},O,this)}));function S(){return I.apply(this,arguments)}return S}()},{key:"get",value:function(){var I=K.default(_e.default.mark(function O(x,Q,V){return _e.default.wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return this.telemetryTracker.sendTelemetry(e.EventSendingLimitation.AnyEvents),fe.next=3,this.upstream.send("GET",x,Q,void 0,V);case 3:return fe.abrupt("return",fe.sent);case 4:case"end":return fe.stop()}},O,this)}));function S(O,x,Q){return I.apply(this,arguments)}return S}()},{key:"post",value:function(){var I=K.default(_e.default.mark(function O(x,Q,V,se){return _e.default.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return this.telemetryTracker.sendTelemetry(e.EventSendingLimitation.AnyEvents),Oe.next=3,this.upstream.send("POST",x,Q,V,se);case 3:return Oe.abrupt("return",Oe.sent);case 4:case"end":return Oe.stop()}},O,this)}));function S(O,x,Q,V){return I.apply(this,arguments)}return S}()},{key:"put",value:function(){var I=K.default(_e.default.mark(function O(x,Q,V,se){return _e.default.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return this.telemetryTracker.sendTelemetry(e.EventSendingLimitation.AnyEvents),Oe.next=3,this.upstream.send("PUT",x,Q,V,se);case 3:return Oe.abrupt("return",Oe.sent);case 4:case"end":return Oe.stop()}},O,this)}));function S(O,x,Q,V){return I.apply(this,arguments)}return S}()},{key:"delete",value:function(){var I=K.default(_e.default.mark(function O(x,Q,V,se){return _e.default.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return this.telemetryTracker.sendTelemetry(e.EventSendingLimitation.AnyEvents),Oe.next=3,this.upstream.send("DELETE",x,Q,V,se);case 3:return Oe.abrupt("return",Oe.sent);case 4:case"end":return Oe.stop()}},O,this)}));function S(O,x,Q,V){return I.apply(this,arguments)}return S}()},{key:"addTelemetryEvent",value:function(S){this.telemetryTracker.addTelemetryEvent(S),this.telemetryTracker.sendTelemetryIfMinimalPortionCollected()}},{key:"addPartialTelemetryEvent",value:function(S,O,x){this.telemetryTracker.addPartialEvent(S,O,x),x===e.TelemetryPoint.End&&this.telemetryTracker.sendTelemetryIfMinimalPortionCollected()}}]),R}($.ReplayEventEmitter),e.TwilsockClient=Re([m.validateConstructorTypes(m.nonEmptyString,m.nonEmptyString,[m.pureObject,"undefined",m.literal(null)]),kt("design:paramtypes",[String,String,Object])],e.TwilsockClient);var To=function(){function M(F){we.default(this,M),this.product=F,this.type="ers",this.notification_protocol_version=0,this.message_types=[]}return me.default(M,[{key:"populateInitRegistrations",value:function(R){var I=new Set(this.message_types);for(var S in R)I.add(R[S]);this.message_types=Array.from(I)}}]),M}();e.InitRegistration=To,e.TelemetryEventDescription=ei,e.TelemetryTracker=hl,e.TransportUnavailableError=Is,e.Twilsock=e.TwilsockClient,e.TwilsockError=fn})(fM);var xx=At,Qfe=He,Jfe=wt,Yfe=Ne,d_=uf,Xfe=af,Zfe=tf,ede=Nn,tde=nf,Ho=Object.assign,$x=Object.defineProperty,nde=Qfe([].concat),rde=!Ho||Yfe(function(){if(xx&&Ho({b:1},Ho($x({},"a",{enumerable:!0,get:function(){$x(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},t={},n=Symbol("assign detection"),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(i){t[i]=i}),Ho({},e)[n]!==7||d_(Ho({},t)).join("")!==r})?function(t,n){for(var r=ede(t),i=arguments.length,s=1,a=Xfe.f,l=Zfe.f;i>s;)for(var u=tde(arguments[s++]),f=a?nde(d_(u),a(u)):d_(u),d=f.length,p=0,v;d>p;)v=f[p++],(!xx||Jfe(l,u,v))&&(r[v]=u[v]);return r}:Ho,ide=et,Px=rde;ide({target:"Object",stat:!0,arity:2,forced:Object.assign!==Px},{assign:Px});var sde=et,tD=He,ade=Xr,ode=Nn,Ax=Mn,ude=$b,Ox=Gn,Wb=Ne,lde=$L,cde=yv,Nx=PL,fde=AL,Mx=qu,Lx=OL,Gs=[],Dx=tD(Gs.sort),dde=tD(Gs.push),hde=Wb(function(){Gs.sort(void 0)}),pde=Wb(function(){Gs.sort(null)}),vde=cde("sort"),nD=!Wb(function(){if(Mx)return Mx<70;if(!(Nx&&Nx>3)){if(fde)return!0;if(Lx)return Lx<603;var e="",t,n,r,i;for(t=65;t<76;t++){switch(n=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(i=0;i<47;i++)Gs.push({k:n+i,v:r})}for(Gs.sort(function(s,a){return a.v-s.v}),i=0;i<Gs.length;i++)n=Gs[i].k.charAt(0),e.charAt(e.length-1)!==n&&(e+=n);return e!=="DGBEFHACIJK"}}),gde=hde||!pde||!vde||!nD,mde=function(e){return function(t,n){return n===void 0?-1:t===void 0?1:e!==void 0?+e(t,n)||0:Ox(t)>Ox(n)?1:-1}};sde({target:"Array",proto:!0,forced:gde},{sort:function(t){t!==void 0&&ade(t);var n=ode(this);if(nD)return t===void 0?Dx(n):Dx(n,t);var r=[],i=Ax(n),s,a;for(a=0;a<i;a++)a in n&&dde(r,n[a]);for(lde(r,mde(t)),s=Ax(r),a=0;a<s;)n[a]=r[a++];for(;a<i;)ude(n,a++);return n}});/*
@license
The following license applies to all parts of this software except as
documented below.

    Copyright (c) 2016, Twilio, inc.
    All rights reserved.

    Redistribution and use in source and binary forms, with or without
    modification, are permitted provided that the following conditions are
    met:

      1. Redistributions of source code must retain the above copyright
         notice, this list of conditions and the following disclaimer.

      2. Redistributions in binary form must reproduce the above copyright
         notice, this list of conditions and the following disclaimer in
         the documentation and/or other materials provided with the
         distribution.

      3. Neither the name of Twilio nor the names of its contributors may
         be used to endorse or promote products derived from this software
         without specific prior written permission.

    THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
    "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
    LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
    A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
    HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
    SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
    LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
    DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
    THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
    (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
    OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

This software includes loglevel under the following license.

    Copyright (c) 2013 Tim Perry

    Permission is hereby granted, free of charge, to any person
    obtaining a copy of this software and associated documentation
    files (the "Software"), to deal in the Software without
    restriction, including without limitation the rights to use,
    copy, modify, merge, publish, distribute, sublicense, and/or sell
    copies of the Software, and to permit persons to whom the
    Software is furnished to do so, subject to the following
    conditions:

    The above copyright notice and this permission notice shall be
    included in all copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
    OTHER DEALINGS IN THE SOFTWARE.

This software includes Backoff library under the following license

    Copyright (C) 2012 Mathieu Turcotte

    Permission is hereby granted, free of charge, to any person obtaining a copy of
    this software and associated documentation files (the "Software"), to deal in
    the Software without restriction, including without limitation the rights to
    use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies
    of the Software, and to permit persons to whom the Software is furnished to do
    so, subject to the following conditions:

    The above copyright notice and this permission notice shall be included in all
    copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
    SOFTWARE.

This software includes Event-to-Promise library under the following license

    Copyright (c) 2014, Julien Fontanet <julien.fontanet@isonoe.net>.

    Permission to use, copy, modify, and/or distribute this software for any purpose
    with or without fee is hereby granted, provided that the above copyright notice
    and this permission notice appear in all copies.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND
    FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS
    OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
    TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF
    THIS SOFTWARE.

*/Object.defineProperty(Rr,"__esModule",{value:!0});var yde=S2,_de=pf,wde=vf,Sde=gf,bde=mf,Tde=yf,Ede=go,kde=_v,Ide=_N,Cde=vo,ne=Tn,Mp=fM,Rde=WL,xde=no,$de=PN,rD=tl,iD=RM,Pde=gb,zb=Uv,Ade=db,Ode=eD;function cr(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}function Hb(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(n){if(n!=="default"){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}}),t.default=e,Object.freeze(t)}var ae=cr(yde),nt=cr(_de),rt=cr(wde),ji=cr(Sde),Kn=cr(bde),_a=cr(Tde),Yt=cr(Ede),tt=cr(kde),D=cr(Ide),Br=cr(Cde),Nde=cr(Rde),Mde=Hb(xde),ac=cr($de),Lde=Hb(iD),Cf=cr(Pde),Dde=cr(Ade),Sh=Hb(Ode);function st(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if((typeof Reflect>"u"?"undefined":Br.default(Reflect))==="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(s=(i<3?a(s):i>3?a(t,n,s):a(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}function ie(e,t){if((typeof Reflect>"u"?"undefined":Br.default(Reflect))==="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}var Fu=function(){function e(t){nt.default(this,e),this.base=t,this.args=new Array,this.paths=new Array}return rt.default(e,[{key:"pathSegment",value:function(n){return this.paths.push(encodeURIComponent(n)),this}},{key:"queryParam",value:function(n,r){return typeof r<"u"&&this.args.push(encodeURIComponent(n)+"="+encodeURIComponent(r)),this}},{key:"build",value:function(){var n=this.base;return this.paths.length&&(n+="/"+this.paths.join("/")),this.args.length&&(n+="?"+this.args.join("&")),n}}]),e}();function sD(e){var t=Fde();return function(){var r=Yt.default(e),i;if(t){var s=Yt.default(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return _a.default(this,i)}}function Fde(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var lr=function(e){Kn.default(n,e);var t=sD(n);function n(r){var i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return nt.default(this,n),i=t.call(this),i.name=i.constructor.name,i.message="".concat(r," (status: ").concat(s,", code: ").concat(a,")"),i.status=s,i.code=a,i}return rt.default(n)}(Nde.default(Error)),jde=function(e){Kn.default(n,e);var t=sD(n);function n(r){var i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,l=arguments.length>3?arguments[3]:void 0;return nt.default(this,n),i=t.call(this,r,s,a),i.body=l,i}return rt.default(n)}(lr);function pi(e){return JSON.parse(JSON.stringify(e))}function aD(e){var t=e===void 0||Vb(e);if(!t)throw new lr("Invalid pageSize parameter. Expected a positive integer, was '".concat(e,"'."),400,20007)}function Ude(e){return!isNaN(parseInt(e))&&isFinite(e)}function Vb(e){return Ude(e)&&e>0}var js=Mde.getLogger("twilio-sync");function Kl(e,t){return["".concat(new Date().toISOString()," Sync ").concat(e,":")].concat(Array.from(t))}var at={setLevel:function(t){js.setLevel(t)},trace:function(){if(js.getLevel()==js.levels.TRACE){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];js.debug.apply(null,Kl("T",n))}},debug:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];js.debug.apply(null,Kl("D",n))},info:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];js.info.apply(null,Kl("I",n))},warn:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];js.warn.apply(null,Kl("W",n))},error:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];js.error.apply(null,Kl("E",n))}},Bde="/v4/Subscriptions",Wde="/v3/Maps",zde="/v3/Lists",Hde="/v3/Documents",Vde="/v3/Streams",qde="/v3/Insights";function Gde(e,t,n){return e&&typeof e[t]<"u"?e[t]:n}var Kde=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};nt.default(this,e);var n=t.region||"us1",r="https://cds.".concat(n,".twilio.com"),i=t.cdsUri||r;this.settings={subscriptionsUri:i+Bde,documentsUri:i+Hde,listsUri:i+zde,mapsUri:i+Wde,streamsUri:i+Vde,insightsUri:i+qde,sessionStorageEnabled:Gde(t.Sync,"enableSessionStorage",!0),productId:t.productId}}return rt.default(e,[{key:"subscriptionsUri",get:function(){return this.settings.subscriptionsUri}},{key:"documentsUri",get:function(){return this.settings.documentsUri}},{key:"listsUri",get:function(){return this.settings.listsUri}},{key:"mapsUri",get:function(){return this.settings.mapsUri}},{key:"streamsUri",get:function(){return this.settings.streamsUri}},{key:"insightsUri",get:function(){return this.settings.insightsUri}},{key:"backoffConfig",get:function(){return this.settings.backoffConfig||{}}},{key:"sessionStorageEnabled",get:function(){return this.settings.sessionStorageEnabled}},{key:"productId",get:function(){return this.settings.productId}}]),e}();function Ql(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Qde(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(f){throw f},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,l;return{s:function(){n=n.call(e)},n:function(){var f=n.next();return s=f.done,f},e:function(f){a=!0,l=f},f:function(){try{!s&&n.return!=null&&n.return()}finally{if(a)throw l}}}}function Qde(e,t){if(e){if(typeof e=="string")return Fx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fx(e,t)}}function Fx(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Jde=function(){function e(t){nt.default(this,e),this.localObject=t,this.pendingCorrelationId=null,this.pendingAction=null,this.established=!1,this.retryCount=0}return rt.default(e,[{key:"sid",get:function(){return this.localObject.sid}},{key:"type",get:function(){return this.localObject.type}},{key:"lastEventId",get:function(){return this.localObject.lastEventId}},{key:"indexName",get:function(){return this.localObject.indexName}},{key:"queryString",get:function(){return this.localObject.queryString}},{key:"isEstablished",get:function(){return this.established}},{key:"update",value:function(n,r){this.localObject._update(n,r)}},{key:"updatePending",value:function(n,r){this.pendingAction=n,this.pendingCorrelationId=r}},{key:"reset",value:function(){this.updatePending(null,null),this.retryCount=0,this.established=!1,this.setSubscriptionState("none")}},{key:"markAsFailed",value:function(n){this.rejectedWithError=n.error,this.updatePending(null,null),this.localObject.reportFailure(new lr("Failed to subscribe on service events: ".concat(n.error.message),n.error.status,n.error.code))}},{key:"complete",value:function(n){this.updatePending(null,null),this.established=!0,this.localObject._advanceLastEventId(n)}},{key:"setSubscriptionState",value:function(n){this.localObject._setSubscriptionState(n)}}]),e}(),Yde=function(){function e(t){var n=this;nt.default(this,e),tt.default(this,"isConnected",!1),tt.default(this,"maxBatchSize",100),tt.default(this,"subscriptionTtlTimer",null),tt.default(this,"pendingPokeReason",null),this.services=t,this.subscriptions=new Map,this.persisted=new Map,this.latestPokeResponseArrivalTimestampByCorrelationId=new Map;var r={randomisationFactor:.2,initialDelay:100,maxDelay:2*60*1e3};this.backoff=rD.Backoff.exponential(Object.assign(r,this.services.config.backoffConfig)),this.backoff.on("ready",function(){var i=n.getSubscriptionUpdateBatch(),s=i.action,a=i.subscriptions;s?n.applyNewSubscriptionUpdateBatch(s,a):(n.backoff.reset(),at.debug("All subscriptions resolved."))})}return rt.default(e,[{key:"getSubscriptionUpdateBatch",value:function(){function n(s,a,l,u){var f=[],d=Ql(s),p;try{for(d.s();!(p=d.n()).done;){var v=ac.default(p.value,2),m=v[0],y=v[1],E=a.get(m);if(!E&&l!==y.pendingAction&&!y.rejectedWithError&&(f.push(y),u&&f.length>=u))break}}catch(T){d.e(T)}finally{d.f()}return f}var r=n(this.subscriptions,this.persisted,"establish",this.maxBatchSize);if(r.length>0)return{action:"establish",subscriptions:r};var i=n(this.persisted,this.subscriptions,"cancel",this.maxBatchSize);return i.length>0?{action:"cancel",subscriptions:i}:{action:null,subscriptions:null}}},{key:"persist",value:function(){this.backoff.backoff()}},{key:"applyNewSubscriptionUpdateBatch",value:function(){var t=ae.default(D.default.mark(function r(i,s){var a=this,l,u,f,d,p,v,m,y,E,T,w,b,$,N,z,H;return D.default.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(this.isConnected){P.next=4;break}return at.debug("Twilsock connection (required for subscription) not ready; waiting"),this.backoff.reset(),P.abrupt("return");case 4:s=this.processLocalActions(i,s),l=new Date().getTime(),u=Ql(s);try{for(u.s();!(f=u.n()).done;)d=f.value,this.recordActionAttemptOn(d,i,l)}catch(ee){u.e(ee)}finally{u.f()}return p=this.pendingPokeReason,this.pendingPokeReason=null,P.prev=10,P.next=13,this.request(i,l,p,s);case 13:v=P.sent,m=v.body.max_batch_size,!isNaN(parseInt(m))&&isFinite(m)&&m>0&&(this.maxBatchSize=m),this.subscriptionTtlTimer||(y=v.body.ttl_in_s,E=!isNaN(parseFloat(y))&&isFinite(y),T=E&&y>0,T&&(this.subscriptionTtlTimer=setTimeout(function(){return a.onSubscriptionTtlElapsed()},y*1e3))),i==="establish"&&(w=v.body.estimated_delivery_in_ms,b=!isNaN(parseFloat(w))&&isFinite(w),$=b&&w>0,$?setTimeout(function(){return a.verifyPokeDelivery(l,w,s)},w):at.error("Invalid timeout: ".concat(w)),s.filter(function(ee){return ee.pendingCorrelationId===l}).forEach(function(ee){return ee.setSubscriptionState("response_in_flight")})),this.backoff.reset(),P.next=26;break;case 21:P.prev=21,P.t0=P.catch(10),N=Ql(s);try{for(N.s();!(z=N.n()).done;)H=z.value,this.recordActionFailureOn(H,i)}catch(ee){N.e(ee)}finally{N.f()}P.t0 instanceof Mp.TransportUnavailableError?(at.debug("Twilsock connection (required for subscription) not ready (c:".concat(l,"); waiting")),this.backoff.reset()):(at.debug("Failed an attempt to ".concat(i," subscriptions (c:").concat(l,"); retrying"),P.t0),this.persist());case 26:case"end":return P.stop()}},r,this,[[10,21]])}));function n(r,i){return t.apply(this,arguments)}return n}()},{key:"verifyPokeDelivery",value:function(n,r,i){var s=this,a=this.latestPokeResponseArrivalTimestampByCorrelationId.get(n),l=a?new Date().getTime()-a:r;if(l>=r)i.filter(function(f){return f.pendingCorrelationId===n}).forEach(function(f){f.updatePending(null,null),f.retryCount++,s.persisted.delete(f.sid)}),this.persist(),this.latestPokeResponseArrivalTimestampByCorrelationId.delete(n);else{var u=r-l;setTimeout(function(){return s.verifyPokeDelivery(n,r,i)},u)}}},{key:"processLocalActions",value:function(n,r){return n==="cancel"?r.filter(function(i){return!i.rejectedWithError}):r}},{key:"recordActionAttemptOn",value:function(n,r,i){if(n.setSubscriptionState("request_in_flight"),r==="establish")this.persisted.set(n.sid,n),n.updatePending(r,i);else{var s=this.persisted.get(n.sid);s&&s.updatePending(r,i)}}},{key:"recordActionFailureOn",value:function(n,r){n.setSubscriptionState("none"),n.updatePending(null,null),r==="establish"&&this.persisted.delete(n.sid)}},{key:"request",value:function(n,r,i,s){var a=s.map(function(f){return{object_sid:f.sid,object_type:f.type,last_event_id:n==="establish"?f.lastEventId:void 0,index_name:n==="establish"?f.indexName:void 0,query_string:n==="establish"?f.queryString:void 0}}),l=s.filter(function(f){return f.retryCount>0}).length;at.debug("Attempting '".concat(n,"' request (c:").concat(r,"):"),a);var u={event_protocol_version:4,action:n,correlation_id:r,retried_requests:l,ttl_in_s:-1,requests:a};return i==="ttl"&&(u.reason=i),this.services.network.post(this.services.config.subscriptionsUri,u)}},{key:"add",value:function(n,r){at.debug("Establishing intent to subscribe to ".concat(n));var i=this.subscriptions.get(n);i&&r&&i.lastEventId===r.lastEventId||(this.persisted.delete(n),this.subscriptions.set(n,new Jde(r)),this.persist())}},{key:"remove",value:function(n){at.debug("Establishing intent to unsubscribe from ".concat(n));var r=this.subscriptions.delete(n);r&&this.persist()}},{key:"acceptMessage",value:function(n,r){at.trace("Subscriptions received",n);var i=n.event_type,s=typeof n.events<"u"?n.events:[n.event],a=n.correlation_id;a&&this.latestPokeResponseArrivalTimestampByCorrelationId.set(a,new Date().getTime());var l=Ql(s),u;try{for(l.s();!(u=l.n()).done;){var f=u.value,d=void 0;switch(n.event_type){case"subscription_established":this.applySubscriptionEstablishedMessage(f,a);break;case"subscription_canceled":this.applySubscriptionCancelledMessage(f,a);break;case"subscription_failed":this.applySubscriptionFailedMessage(f,a);break;case(d=i.match(/^(?:map|list|document|stream|live_query)_/)||{}).input:{var p=void 0;switch(d[0]){case"map_":p=f.map_sid;break;case"list_":p=f.list_sid;break;case"document_":p=f.document_sid;break;case"stream_":p=f.stream_sid;break;case"live_query_":p=f.query_id,r=!1,n.strictly_ordered===!0&&(r=!0);break;default:p=void 0}this.applyEventToSubscribedEntity(p,f,i,r);break}default:at.debug("Dropping unknown message type ".concat(i));break}}}catch(v){l.e(v)}finally{l.f()}}},{key:"applySubscriptionEstablishedMessage",value:function(n,r){var i=n.object_sid,s=this.persisted.get(n.object_sid);s&&s.pendingCorrelationId===r?n.replay_status==="interrupted"?(at.debug("Event Replay for subscription to ".concat(i," (c:").concat(r,") interrupted; continuing eagerly.")),s.updatePending(null,null),this.persisted.delete(s.sid),this.backoff.reset()):n.replay_status==="completed"&&(at.debug("Event Replay for subscription to ".concat(i," (c:").concat(r,") completed. Subscription is ready.")),s.complete(n.last_event_id),this.persisted.set(n.object_sid,s),s.setSubscriptionState("established"),this.backoff.reset()):at.debug("Late message for ".concat(n.object_sid," (c:").concat(r,") dropped.")),this.persist()}},{key:"applySubscriptionCancelledMessage",value:function(n,r){var i=this.persisted.get(n.object_sid);i&&i.pendingCorrelationId===r?(i.updatePending(null,null),i.setSubscriptionState("none"),this.persisted.delete(n.object_sid)):at.debug("Late message for ".concat(n.object_sid," (c:").concat(r,") dropped.")),this.persist()}},{key:"applySubscriptionFailedMessage",value:function(n,r){var i=n.object_sid,s=this.subscriptions.get(i),a=this.persisted.get(i);s&&a?a.pendingCorrelationId===r&&(at.error("Failed to subscribe on ".concat(a.sid),n.error),a.markAsFailed(n),a.setSubscriptionState("none")):!s&&a&&(this.persisted.delete(i),a.setSubscriptionState("none")),this.persist()}},{key:"applyEventToSubscribedEntity",value:function(n,r,i,s){var a=this;if(n){s=s||function(){var u=a.persisted.get(n);return u&&u.isEstablished}();var l=this.subscriptions.get(n);l?(r.type=i,l.update(r,s)):at.debug("Message dropped for SID '".concat(n,"', for which there is no subscription."))}}},{key:"onConnectionStateChanged",value:function(n){this.isConnected=n,n&&this.poke("reconnect")}},{key:"onSubscriptionTtlElapsed",value:function(){this.isConnected&&this.poke("ttl")}},{key:"poke",value:function(n){at.debug("Triggering event replay for all subscriptions, reason=".concat(n)),this.pendingPokeReason=n,this.subscriptionTtlTimer&&(clearTimeout(this.subscriptionTtlTimer),this.subscriptionTtlTimer=null);var r=[],i=Ql(this.persisted.values()),s;try{for(i.s();!(s=i.n()).done;){var a=s.value;a.reset(),a.rejectedWithError&&r.push(a)}}catch(d){i.e(d)}finally{i.f()}this.persisted.clear();for(var l=0,u=r;l<u.length;l++){var f=u[l];this.persisted.set(f.sid,f)}this.persist()}},{key:"shutdown",value:function(){this.backoff.reset(),this.subscriptions.clear()}}]),e}(),Xde=4e3,Zde=6e4,ehe=9e4,the=.2;function jx(e){if(e.body&&e.body.message)return e.body.message;switch(e.status){case 429:return"Throttled by server";case 404:return"Not found from server";default:return"Error from server"}}function Ux(e){return e.body?e.body.code:0}function Jl(e){return e.status===409?new jde(jx(e),e.status,Ux(e),e.body):e.status?new lr(jx(e),e.status,Ux(e)):e instanceof Mp.TransportUnavailableError?e:new lr(e.message,0,0)}var nhe=function(){function e(t,n,r){nt.default(this,e),this.clientInfo=t,this.config=n,this.transport=r}return rt.default(e,[{key:"createHeaders",value:function(){return{"Content-Type":"application/json","Twilio-Sync-Client-Info":JSON.stringify(this.clientInfo),"Twilio-Request-Id":"RQ"+Lde.v4().replace(/-/g,"")}}},{key:"backoffConfig",value:function(){return Object.assign({min:Xde,max:Zde,maxAttemptsTime:ehe,randomness:the},this.config.backoffConfig)}},{key:"executeWithRetry",value:function(n){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return new Promise(function(s,a){var l=[502,503,504];i&&l.push(429);var u=new rD.Retrier(r.backoffConfig());u.on("attempt",function(){n().then(function(f){return u.succeeded(f)}).catch(function(f){if(l.includes(f.status)){var d=parseInt(f.headers?f.headers["Retry-After"]:null);u.failed(Jl(f),isNaN(d)?null:d*1e3)}else f.message==="Twilsock disconnected"?u.failed(Jl(f)):(u.removeAllListeners(),u.cancel(),a(Jl(f)))})}),u.on("succeeded",function(f){s(f)}),u.on("cancelled",function(f){return a(Jl(f))}),u.on("failed",function(f){return a(Jl(f))}),u.start()})}},{key:"get",value:function(n){var r=this,i=this.createHeaders();return at.debug("GET",n,"ID:",i["Twilio-Request-Id"]),this.executeWithRetry(function(){return r.transport.get(n,i,r.config.productId)},!0)}},{key:"post",value:function(n,r,i){var s=this,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,l=this.createHeaders();return typeof i<"u"&&i!==null&&(l["If-Match"]=i),at.debug("POST",n,"ID:",l["Twilio-Request-Id"]),this.executeWithRetry(function(){return s.transport.post(n,l,r,s.config.productId)},a)}},{key:"put",value:function(n,r,i){var s=this,a=this.createHeaders();return typeof i<"u"&&i!==null&&(a["If-Match"]=i),at.debug("PUT",n,"ID:",a["Twilio-Request-Id"]),this.executeWithRetry(function(){return s.transport.put(n,a,r,s.config.productId)},!1)}},{key:"delete",value:function(n){var r=this,i=this.createHeaders();return at.debug("DELETE",n,"ID:",i["Twilio-Request-Id"]),this.executeWithRetry(function(){return r.transport.delete(n,i,r.config.productId)},!1)}}]),e}(),rhe=function(){function e(t,n){nt.default(this,e),this.config=t,this.storageId=null;try{this.storage=n||sessionStorage}catch{}}return rt.default(e,[{key:"storageKey",value:function(n,r){return"".concat(this.storageId,"::").concat(n,"::").concat(r)}},{key:"isReady",get:function(){return this.config.sessionStorageEnabled&&!!this.storageId}},{key:"updateStorageId",value:function(n){this.storageId=n}},{key:"store",value:function(n,r,i){return this.isReady?this._store(this.storageKey(n,r),i):null}},{key:"read",value:function(n,r){return this.isReady?this._read(this.storageKey(n,r)):null}},{key:"remove",value:function(n,r,i){if(!this.isReady)return null;try{this.storage.removeItem(this.storageKey(n,r)),i&&this.storage.removeItem(this.storageKey(n,i))}catch{}}},{key:"update",value:function(n,r,i,s){if(!this.isReady)return null;this._apply(this.storageKey(n,r),s),i&&this._apply(this.storageKey(n,i),s)}},{key:"_store",value:function(n,r){try{this.storage.setItem(n,JSON.stringify(r))}catch{}}},{key:"_read",value:function(n){try{var r=this.storage.getItem(n);if(r)return JSON.parse(r)}catch{}return null}},{key:"_apply",value:function(n,r){var i=this._read(n);if(!i)return!1;this._store(n,Object.assign(i,r))}}]),e}();function ihe(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=she(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(f){throw f},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,l;return{s:function(){n=n.call(e)},n:function(){var f=n.next();return s=f.done,f},e:function(f){a=!0,l=f},f:function(){try{!s&&n.return!=null&&n.return()}finally{if(a)throw l}}}}function she(e,t){if(e){if(typeof e=="string")return Bx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bx(e,t)}}function Bx(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Rf=function(){function e(t,n){nt.default(this,e),this.services=t,this.removalHandler=n,this.subscriptionState="none",this._attachedListeners=new Map}return rt.default(e,[{key:"_advanceLastEventId",value:function(n,r){}},{key:"reportFailure",value:function(n){n.status===404?this.onRemoved(!1):this.broadcastEventToListeners("failure",n)}},{key:"_subscribe",value:function(){this.services.router._subscribe(this.sid,this)}},{key:"_unsubscribe",value:function(){this.services.router._unsubscribe(this.sid)}},{key:"_setSubscriptionState",value:function(n){this.subscriptionState=n,this.broadcastEventToListeners("_subscriptionStateChanged",n)}},{key:"close",value:function(){this._unsubscribe(),this.removalHandler!=null&&this.removalHandler(this.type,this.sid,this.uniqueName)}},{key:"attach",value:function(n){var r=n.listenerUuid,i=this._attachedListeners.get(r);i||(this._attachedListeners.size||this._subscribe(),this._attachedListeners.set(r,n))}},{key:"detach",value:function(n){this._attachedListeners.delete(n),this._attachedListeners.size||this.close()}},{key:"broadcastEventToListeners",value:function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];var a=ihe(this._attachedListeners.values()),l;try{for(a.s();!(l=a.n()).done;){var u=l.value;u.emit.apply(u,[n].concat(i))}}catch(f){a.e(f)}finally{a.f()}}}]),e}(),oD=function(){function e(t){nt.default(this,e),tt.default(this,"queuedRequests",[]),tt.default(this,"isRequestInFlight",!1),this.inputMergingFunction=t}return rt.default(e,[{key:"add",value:function(n,r){var i=this,s=new Promise(function(a,l){return i.queuedRequests.push({input:n,requestFunction:r,resolve:a,reject:l})});return this.wakeupQueue(),s}},{key:"squashAndAdd",value:function(n,r){var i=this.queuedRequests;this.queuedRequests=[];var s;i.length>0?(s=i.map(function(l){return l.input}).reduce(this.inputMergingFunction),s=this.inputMergingFunction(s,n)):s=n;var a=this.add(s,r);return i.forEach(function(l){return a.then(l.resolve,l.reject)}),a}},{key:"isEmpty",value:function(){return this.queuedRequests.length===0&&!this.isRequestInFlight}},{key:"wakeupQueue",value:function(){var n=this;if(!(this.queuedRequests.length===0||this.isRequestInFlight)){var r=this.queuedRequests.shift();this.isRequestInFlight=!0,r.requestFunction(r.input).then(r.resolve,r.reject).then(function(i){n.isRequestInFlight=!1,n.wakeupQueue()})}}}]),e}(),uD=function(){function e(t){nt.default(this,e),tt.default(this,"queueByNamespaceKey",new Map),this.inputReducer=t}return rt.default(e,[{key:"add",value:function(){var t=ae.default(D.default.mark(function r(i,s,a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",this.invokeQueueMethod(i,function(f){return f.add(s,a)}));case 1:case"end":return u.stop()}},r,this)}));function n(r,i,s){return t.apply(this,arguments)}return n}()},{key:"squashAndAdd",value:function(){var t=ae.default(D.default.mark(function r(i,s,a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",this.invokeQueueMethod(i,function(f){return f.squashAndAdd(s,a)}));case 1:case"end":return u.stop()}},r,this)}));function n(r,i,s){return t.apply(this,arguments)}return n}()},{key:"invokeQueueMethod",value:function(){var t=ae.default(D.default.mark(function r(i,s){var a,l;return D.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return this.queueByNamespaceKey.has(i)||this.queueByNamespaceKey.set(i,new oD(this.inputReducer)),a=this.queueByNamespaceKey.get(i),l=s(a),this.queueByNamespaceKey.get(i).isEmpty()&&this.queueByNamespaceKey.delete(i),f.abrupt("return",l);case 5:case"end":return f.stop()}},r,this)}));function n(r,i){return t.apply(this,arguments)}return n}()}]),e}();function ahe(e){var t=ohe();return function(){var r=Yt.default(e),i;if(t){var s=Yt.default(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return _a.default(this,i)}}function ohe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var xf=function(e){Kn.default(n,e);var t=ahe(n);function n(){var r;return nt.default(this,n),r=t.call(this),r.closed=!1,r.uuid=iD.v4(),r}return rt.default(n,[{key:"listenerUuid",get:function(){return this.uuid}},{key:"close",value:function(){this.removeAllListeners(),this.closed=!0}},{key:"ensureNotClosed",value:function(){if(this.closed)throw new Error("Invalid operation on closed object")}}]),n}(zb.ReplayEventEmitter);function lD(e){var t=uhe();return function(){var r=Yt.default(e),i;if(t){var s=Yt.default(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return _a.default(this,i)}}function uhe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var hS=function(e){Kn.default(n,e);var t=lD(n);function n(r,i,s){var a;nt.default(this,n),a=t.call(this,r,s),tt.default(ji.default(a),"isDeleted",!1);var l=function(f,d){return typeof d.ttl=="number"?{ttl:d.ttl}:f};return a.updateMergingQueue=new oD(l),a.descriptor=i,a.descriptor.data=a.descriptor.data||{},a.descriptor.date_updated=new Date(a.descriptor.date_updated),a}return rt.default(n,[{key:"uri",get:function(){return this.descriptor.url}},{key:"revision",get:function(){return this.descriptor.revision}},{key:"lastEventId",get:function(){return this.descriptor.last_event_id}},{key:"dateExpires",get:function(){return this.descriptor.date_expires}},{key:"type",get:function(){return"document"}},{key:"indexName",get:function(){}},{key:"queryString",get:function(){}},{key:"sid",get:function(){return this.descriptor.sid}},{key:"data",get:function(){return this.descriptor.data}},{key:"dateUpdated",get:function(){return this.descriptor.date_updated}},{key:"uniqueName",get:function(){return this.descriptor.unique_name||null}},{key:"_update",value:function(i){switch(i.date_created=new Date(i.date_created),i.type){case"document_updated":if(i.id<=this.lastEventId){at.trace("Document update skipped, current:",this.lastEventId,", remote:",i.id);break}var s=this.descriptor.data!==void 0?pi(this.descriptor.data):null;this.descriptor.last_event_id=i.id,this.descriptor.revision=i.document_revision,this.descriptor.date_updated=i.date_created,this.descriptor.data=i.document_data,this.broadcastEventToListeners("updated",{data:i.document_data,isLocal:!1,previousData:s}),this.services.storage.update(this.type,this.sid,this.uniqueName,{last_event_id:i.id,revision:i.document_revision,date_updated:i.date_created,data:i.document_data});break;case"document_removed":this.onRemoved(!1);break}}},{key:"set",value:function(){var r=ae.default(D.default.mark(function s(a,l){var u=this,f;return D.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return f=l||{},p.abrupt("return",this.updateMergingQueue.squashAndAdd(f,function(v){return u._setUnconditionally(a,v.ttl)}));case 2:case"end":return p.stop()}},s,this)}));function i(s,a){return r.apply(this,arguments)}return i}()},{key:"mutate",value:function(){var r=ae.default(D.default.mark(function s(a,l){var u=this,f;return D.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return f=l||{},p.abrupt("return",this.updateMergingQueue.add(f,function(v){return u._setWithIfMatch(a,v.ttl)}));case 2:case"end":return p.stop()}},s,this)}));function i(s,a){return r.apply(this,arguments)}return i}()},{key:"update",value:function(){var r=ae.default(D.default.mark(function s(a,l){return D.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",this.mutate(function(d){return Object.assign(d,a)},l));case 1:case"end":return f.stop()}},s,this)}));function i(s,a){return r.apply(this,arguments)}return i}()},{key:"setTtl",value:function(){var r=ae.default(D.default.mark(function s(a){var l;return D.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this._postUpdateToServer({ttl:a});case 2:l=f.sent,this.descriptor.date_expires=l.date_expires;case 4:case"end":return f.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"_setUnconditionally",value:function(){var r=ae.default(D.default.mark(function s(a,l){var u;return D.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this._postUpdateToServer({data:a,revision:void 0,ttl:l});case 2:return u=d.sent,this._handleSuccessfulUpdateResult(u),d.abrupt("return",this.descriptor.data);case 5:case"end":return d.stop()}},s,this)}));function i(s,a){return r.apply(this,arguments)}return i}()},{key:"_setWithIfMatch",value:function(){var r=ae.default(D.default.mark(function s(a,l){var u,f,d;return D.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(u=a(pi(this.descriptor.data)),!u){v.next=22;break}return f=this.revision,v.prev=3,v.next=6,this._postUpdateToServer({data:u,revision:f,ttl:l});case 6:return d=v.sent,this._handleSuccessfulUpdateResult(d),v.abrupt("return",this.descriptor.data);case 11:if(v.prev=11,v.t0=v.catch(3),v.t0.status!==412){v.next=19;break}return v.next=16,this._softSync();case 16:return v.abrupt("return",this._setWithIfMatch(a));case 19:throw v.t0;case 20:v.next=23;break;case 22:return v.abrupt("return",this.descriptor.data);case 23:case"end":return v.stop()}},s,this,[[3,11]])}));function i(s,a){return r.apply(this,arguments)}return i}()},{key:"_handleSuccessfulUpdateResult",value:function(i){if(!(i.last_event_id<=this.descriptor.last_event_id)){var s=this.descriptor.data!==void 0?pi(this.descriptor.data):null;this.descriptor.revision=i.revision,this.descriptor.data=i.data,this.descriptor.last_event_id=i.last_event_id,this.descriptor.date_expires=i.date_expires,this.descriptor.date_updated=new Date(i.date_updated),this.services.storage.update(this.type,this.sid,this.uniqueName,{last_event_id:i.last_event_id,revision:i.revision,date_updated:i.date_updated,data:i.data}),this.broadcastEventToListeners("updated",{data:this.descriptor.data,isLocal:!0,previousData:s})}}},{key:"_postUpdateToServer",value:function(){var r=ae.default(D.default.mark(function s(a){var l,u,f;return D.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(this.isDeleted){p.next=17;break}return l={data:a.data},a.ttl!==void 0&&(l.ttl=a.ttl),u=a.revision,p.prev=4,p.next=7,this.services.network.post(this.uri,l,u);case 7:return f=p.sent,p.abrupt("return",{revision:f.body.revision,data:a.data,last_event_id:f.body.last_event_id,date_updated:f.body.date_updated,date_expires:f.body.date_expires});case 11:throw p.prev=11,p.t0=p.catch(4),p.t0.status===404&&this.onRemoved(!1),p.t0;case 15:p.next=18;break;case 17:return p.abrupt("return",Promise.reject(new lr("The Document has been removed",404,54100)));case 18:case"end":return p.stop()}},s,this,[[4,11]])}));function i(s){return r.apply(this,arguments)}return i}()},{key:"_softSync",value:function(){var r=ae.default(D.default.mark(function s(){var a=this;return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",this.services.network.get(this.uri).then(function(f){var d={type:"document_updated",id:f.body.last_event_id,document_revision:f.body.revision,document_data:f.body.data,date_created:f.body.date_updated};return a._update(d),a}).catch(function(f){f.status===404?a.onRemoved(!1):at.error("Can't get updates for ".concat(a.sid,":"),f)}));case 1:case"end":return u.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"onRemoved",value:function(i){if(!this.isDeleted){var s=this.descriptor.data!==void 0?pi(this.descriptor.data):null;this.isDeleted=!0,this._unsubscribe(),this.removalHandler(this.type,this.sid,this.uniqueName),this.broadcastEventToListeners("removed",{isLocal:i,previousData:s})}}},{key:"removeDocument",value:function(){var r=ae.default(D.default.mark(function s(){return D.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(this.isDeleted){l.next=6;break}return l.next=3,this.services.network.delete(this.uri);case 3:this.onRemoved(!0),l.next=7;break;case 6:return l.abrupt("return",Promise.reject(new lr("The Document has been removed",404,54100)));case 7:case"end":return l.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()}],[{key:"type",get:function(){return"document"}}]),n}(Rf),Hr=function(e){Kn.default(n,e);var t=lD(n);function n(r){var i;return nt.default(this,n),i=t.call(this),i.syncDocumentImpl=r,i.syncDocumentImpl.attach(ji.default(i)),i}return rt.default(n,[{key:"uri",get:function(){return this.syncDocumentImpl.uri}},{key:"revision",get:function(){return this.syncDocumentImpl.revision}},{key:"lastEventId",get:function(){return this.syncDocumentImpl.lastEventId}},{key:"dateExpires",get:function(){return this.syncDocumentImpl.dateExpires}},{key:"type",get:function(){return hS.type}},{key:"sid",get:function(){return this.syncDocumentImpl.sid}},{key:"data",get:function(){return this.syncDocumentImpl.data}},{key:"dateUpdated",get:function(){return this.syncDocumentImpl.dateUpdated}},{key:"uniqueName",get:function(){return this.syncDocumentImpl.uniqueName}},{key:"set",value:function(){var r=ae.default(D.default.mark(function s(a,l){return D.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return this.ensureNotClosed(),f.abrupt("return",this.syncDocumentImpl.set(a,l));case 2:case"end":return f.stop()}},s,this)}));function i(s,a){return r.apply(this,arguments)}return i}()},{key:"mutate",value:function(){var r=ae.default(D.default.mark(function s(a,l){return D.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return this.ensureNotClosed(),f.abrupt("return",this.syncDocumentImpl.mutate(a,l));case 2:case"end":return f.stop()}},s,this)}));function i(s,a){return r.apply(this,arguments)}return i}()},{key:"update",value:function(){var r=ae.default(D.default.mark(function s(a,l){return D.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return this.ensureNotClosed(),f.abrupt("return",this.syncDocumentImpl.update(a,l));case 2:case"end":return f.stop()}},s,this)}));function i(s,a){return r.apply(this,arguments)}return i}()},{key:"setTtl",value:function(){var r=ae.default(D.default.mark(function s(a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.ensureNotClosed(),u.abrupt("return",this.syncDocumentImpl.setTtl(a));case 2:case"end":return u.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"removeDocument",value:function(){var r=ae.default(D.default.mark(function s(){return D.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this.ensureNotClosed(),l.abrupt("return",this.syncDocumentImpl.removeDocument());case 2:case"end":return l.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"close",value:function(){Cf.default(Yt.default(n.prototype),"close",this).call(this),this.syncDocumentImpl.detach(this.listenerUuid)}}],[{key:"type",get:function(){return hS.type}}]),n}(xf);tt.default(Hr,"removed","removed");tt.default(Hr,"updated","updated");st([ne.validateTypesAsync(ne.pureObject,["undefined",ne.objectSchema("document metadata",{ttl:[ne.nonNegativeInteger,"undefined"]})]),ie("design:type",Function),ie("design:paramtypes",[Object,Object]),ie("design:returntype",Promise)],Hr.prototype,"set",null);st([ne.validateTypesAsync("function",["undefined",ne.objectSchema("document metadata",{ttl:[ne.nonNegativeInteger,"undefined"]})]),ie("design:type",Function),ie("design:paramtypes",[Function,Object]),ie("design:returntype",Promise)],Hr.prototype,"mutate",null);st([ne.validateTypesAsync(ne.pureObject,["undefined",ne.objectSchema("document metadata",{ttl:[ne.nonNegativeInteger,"undefined"]})]),ie("design:type",Function),ie("design:paramtypes",[Object,Object]),ie("design:returntype",Promise)],Hr.prototype,"update",null);st([ne.validateTypesAsync(ne.nonNegativeInteger),ie("design:type",Function),ie("design:paramtypes",[Number]),ie("design:returntype",Promise)],Hr.prototype,"setTtl",null);var pS=function(){function e(t){nt.default(this,e),this.descriptor=t}return rt.default(e,[{key:"url",get:function(){return this.descriptor.url}},{key:"revision",get:function(){return this.descriptor.revision}},{key:"lastEventId",get:function(){return this.descriptor.lastEventId}},{key:"dateUpdated",get:function(){return this.descriptor.dateUpdated}},{key:"dateExpires",get:function(){return this.descriptor.dateExpires}},{key:"index",get:function(){return this.descriptor.index}},{key:"data",get:function(){return this.descriptor.data}},{key:"cacheKey",get:function(){return this.index}},{key:"update",value:function(n,r,i,s){return this.descriptor.lastEventId=n,this.descriptor.revision=r,this.descriptor.data=i,this.descriptor.dateUpdated=s,this}},{key:"updateDateExpires",value:function(n){this.descriptor.dateExpires=n}}]),e}(),qb=function(){function e(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;nt.default(this,e),this.items=t,this.source=n,this.prevPageItemId=r,this.nextPageItemId=i}return rt.default(e,[{key:"nextPage",value:function(){var t=ae.default(D.default.mark(function r(){return D.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(this.hasNextPage){s.next=2;break}throw new Error("No next page");case 2:return s.abrupt("return",this.source({nextPageItemId:this.nextPageItemId}));case 3:case"end":return s.stop()}},r,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"prevPage",value:function(){var t=ae.default(D.default.mark(function r(){return D.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(this.hasPrevPage){s.next=2;break}throw new Error("No previous page");case 2:return s.abrupt("return",this.source({prevPageItemId:this.prevPageItemId}));case 3:case"end":return s.stop()}},r,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"hasNextPage",get:function(){return this.nextPageItemId!==null}},{key:"hasPrevPage",get:function(){return this.prevPageItemId!==null}}]),e}();function lhe(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=che(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(f){throw f},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,l;return{s:function(){n=n.call(e)},n:function(){var f=n.next();return s=f.done,f},e:function(f){a=!0,l=f},f:function(){try{!s&&n.return!=null&&n.return()}finally{if(a)throw l}}}}function che(e,t){if(e){if(typeof e=="string")return Wx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wx(e,t)}}function Wx(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var fhe=function(){function e(t,n){nt.default(this,e),this.balanceFactor=0,this.key=t,this.value=n,this.parent=null,this.left=null,this.right=null}return rt.default(e,[{key:"isRoot",get:function(){return this.parent===null}},{key:"isLeaf",get:function(){return this.left===null&&this.right===null}},{key:"isLeftChild",get:function(){return this.parent.left===this}},{key:"update",value:function(n){this.value=n}},{key:"replace",value:function(n,r){n&&(this.left===r?this.left=r:this.right===r&&(this.right=r))}}]),e}(),dhe=function(e){function t(n,r){nt.default(this,t),this.isLessThan=n||function(i,s){return i<s},this.isEqual=r||function(i,s){return i===s},this.root=null,this.count=null}return rt.default(t,[{key:"size",get:function(){return this.count}},{key:"clear",value:function(){this.root=null,this.count=0}},{key:"set",value:function(r,i){var s=this.getNode(r);s?s.update(i):this.insert(r,i)}},{key:"insert",value:function(r,i){var s=new fhe(r,i);if(this.count++,!this.root){this.root=s;return}for(var a=this.root;;)if(this.isLessThan(r,a.key))if(a.left)a=a.left;else{a.left=s;break}else if(a.right)a=a.right;else{a.right=s;break}for(s.parent=a,a=s;a.parent;){var l=a.parent,u=l.balanceFactor;if(a.isLeftChild?l.balanceFactor++:l.balanceFactor--,Math.abs(l.balanceFactor)<Math.abs(u))break;if(l.balanceFactor<-1||l.balanceFactor>1){this.rebalance(l);break}a=l}}},{key:"get",value:function(r){for(var i=this.root;i;){if(this.isEqual(r,i.key))return i.value;this.isLessThan(r,i.key)?i=i.left:i=i.right}return null}},{key:"delete",value:function(r){var i=this.getNode(r);if(!i||i.key!==r)return null;var s=i.parent,a=i.left,l=i.right;if(!!a!=!!l){var u=a||l;!s&&!u?this.root=null:s&&!u?this.root=u:(s.replace(i,null),this.rebalance(s))}else{for(var f=i.left;f.right;)f=f.right;if(i.left===f)i.isRoot?(this.root=f,f.parent=null):(i.isLeftChild?i.parent.left=f:i.parent.right=f,f.parent=i.parent),f.right=i.right,f.right.parent=f,f.balanceFactor=i.balanceFactor,i={parent:f,isLeftChild:!0};else{var d=f.parent,p=f.left;d.right=p,p&&(p.parent=d),i.isRoot?(this.root=f,f.parent=null):(i.isLeftChild?i.parent.left=f:i.parent.right=f,f.parent=i.parent),f.right=i.right,f.right.parent=f,f.left=i.left,f.left.parent=f,f.balanceFactor=i.balanceFactor,i={parent:d,isLeftChild:!1}}}for(this.count--;i.parent;){var v=i.parent,m=v.balanceFactor;if(i.isLeftChild?v.balanceFactor-=1:v.balanceFactor+=1,Math.abs(v.balanceFactor)>Math.abs(m))if(v.balanceFactor<-1||v.balanceFactor>1)if(this.rebalance(v),v.parent.balanceFactor===0)i=v.parent;else break;else break;else i=v}return null}},{key:"getNode",value:function(r){for(var i=this.root;i;){if(this.isEqual(r,i.key))return i;this.isLessThan(r,i.key)?i=i.left:i=i.right}return null}},{key:"rebalance",value:function(r){r.balanceFactor<0?r.right.balanceFactor>0?(this.rotateRight(r.right),this.rotateLeft(r)):this.rotateLeft(r):r.balanceFactor>0&&(r.left.balanceFactor<0?(this.rotateLeft(r.left),this.rotateRight(r)):this.rotateRight(r))}},{key:"rotateLeft",value:function(r){var i=r.right;r.right=i.left,i.left!==null&&(i.left.parent=r),i.parent=r.parent,i.parent===null?this.root=i:r.isLeftChild?i.parent.left=i:i.parent.right=i,i.left=r,r.parent=i,r.balanceFactor=r.balanceFactor+1-Math.min(i.balanceFactor,0),i.balanceFactor=i.balanceFactor+1-Math.max(r.balanceFactor,0)}},{key:"rotateRight",value:function(r){var i=r.left;r.left=i.right,i.right!==null&&(i.right.parent=r),i.parent=r.parent,i.parent===null?this.root=i:r.isLeftChild?i.parent.left=i:i.parent.right=i,i.right=r,r.parent=i,r.balanceFactor=r.balanceFactor-1-Math.min(i.balanceFactor,0),i.balanceFactor=i.balanceFactor-1-Math.max(r.balanceFactor,0)}},{key:e,value:D.default.mark(function n(){var r,i,s;return D.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:r=lhe(this.getIterator()),l.prev=1,r.s();case 3:if((i=r.n()).done){l.next=9;break}return s=i.value,l.next=7,s;case 7:l.next=3;break;case 9:l.next=14;break;case 11:l.prev=11,l.t0=l.catch(1),r.e(l.t0);case 14:return l.prev=14,r.f(),l.finish(14);case 17:case"end":return l.stop()}},n,this,[[1,11,14,17]])})},{key:"getIterator",value:D.default.mark(function n(){var r,i,s,a=arguments;return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:r=a.length>0&&a[0]!==void 0?a[0]:null,i=this.root;case 2:if(!i){u.next=8;break}if(!(this.isEqual(r,i.key)||r===null&&!i.left)){u.next=5;break}return u.abrupt("break",8);case 5:this.isLessThan(r,i.key)||r===null?i=i.left:i=i.right,u.next=2;break;case 8:if(i){u.next=10;break}return u.abrupt("return",null);case 10:s=!0;case 11:if(!s){u.next=29;break}return u.next=14,[i.key,i.value];case 14:if(s=!1,!i.right){u.next=21;break}for(i=i.right;i.left;)i=i.left;s=!0,u.next=27;break;case 21:if(!i.parent){u.next=26;break}s=i.parent.left===i,i=i.parent,u.next=27;break;case 26:return u.abrupt("break",37);case 27:u.next=35;break;case 29:if(!i.parent){u.next=34;break}s=i.parent.left===i,i=i.parent,u.next=35;break;case 34:return u.abrupt("break",37);case 35:u.next=11;break;case 37:return u.abrupt("return",null);case 38:case"end":return u.stop()}},n,this)})},{key:"getReverseIterator",value:D.default.mark(function n(){var r,i,s,a=arguments;return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:r=a.length>0&&a[0]!==void 0?a[0]:null,i=this.root;case 2:if(!i){u.next=8;break}if(!(this.isEqual(r,i.key)||r===null&&!i.right)){u.next=5;break}return u.abrupt("break",8);case 5:!this.isLessThan(r,i.key)||r===null?i=i.right:i=i.left,u.next=2;break;case 8:if(i){u.next=10;break}return u.abrupt("return",null);case 10:s=!0;case 11:if(!s){u.next=29;break}return u.next=14,[i.key,i.value];case 14:if(s=!1,!i.left){u.next=21;break}for(i=i.left;i.right;)i=i.right;s=!0,u.next=27;break;case 21:if(!i.parent){u.next=26;break}s=i.parent.right===i,i=i.parent,u.next=27;break;case 26:return u.abrupt("break",37);case 27:u.next=35;break;case 29:if(!i.parent){u.next=34;break}s=i.parent.right===i,i=i.parent,u.next=35;break;case 34:return u.abrupt("break",37);case 35:u.next=11;break;case 37:return u.abrupt("return",null);case 38:case"end":return u.stop()}},n,this)})}]),t}(Symbol.iterator);function bh(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=hhe(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(f){throw f},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,l;return{s:function(){n=n.call(e)},n:function(){var f=n.next();return s=f.done,f},e:function(f){a=!0,l=f},f:function(){try{!s&&n.return!=null&&n.return()}finally{if(a)throw l}}}}function hhe(e,t){if(e){if(typeof e=="string")return zx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zx(e,t)}}function zx(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var phe=function(){function e(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;nt.default(this,e),this._data=t,this.lastEventId=n||0,this.isLeftBound=r,this.isRightBound=i}return rt.default(e,[{key:"isValid",get:function(){return!0}},{key:"value",get:function(){return this._data}}]),e}(),vhe=function(){function e(t){nt.default(this,e),this.lastEventId=t,this.isLeftBound=!1,this.isRightBound=!1}return rt.default(e,[{key:"isValid",get:function(){return!1}},{key:"value",get:function(){return null}}]),e}(),Gb=function(){function e(){nt.default(this,e),tt.default(this,"items",new dhe),tt.default(this,"beginKey",null),tt.default(this,"endKey",null),this.items.clear()}return rt.default(e,[{key:"size",get:function(){return this.items.size}},{key:"collectionBegin",get:function(){return this.beginKey}},{key:"collectionEnd",get:function(){return this.endKey}},{key:"has",value:function(n){var r,i=this.items.get(n);return(r=i==null?void 0:i.isValid)!==null&&r!==void 0?r:!1}},{key:"exists",value:function(n){var r=this.items.get(n);return!!r}},{key:"getValue",value:function(n){var r,i=this.items.get(n);return(r=i==null?void 0:i.value)!==null&&r!==void 0?r:null}},{key:"get",value:function(n){return this.items.get(n)}},{key:"getNextItem",value:function(n,r,i){return n===null?this.getFirstItem(r):i?this.getValue(n):this.getAdjacentItem(n,r)}},{key:"getFirstItem",value:function(n){var r=n==="asc"?this.beginKey:this.endKey;if(this.exists(r)){var i=this.items.get(r);return i.isValid?i.value:this.getAdjacentItem(r,n)}return null}},{key:"getAdjacentItem",value:function(n,r){var i=r==="asc"?this.items.getIterator(n):this.items.getReverseIterator(n),s=bh(i),a;try{for(s.s();!(a=s.n()).done;){var l=ac.default(a.value,2),u=l[0],f=l[1];if(r==="asc"?f.isRightBound:f.isLeftBound)break;if(f.isValid)return f.value}}catch(d){s.e(d)}finally{s.f()}return null}},{key:"store",value:function(n,r,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,l=this.items.get(n);return l&&l.lastEventId>i?l.value:(this.items.set(n,new phe(r,i,l?l.isLeftBound&&s:s,l?l.isRightBound&&a:a)),this.beginKey&&n<this.beginKey&&(this.beginKey=n),this.endKey&&this.endKey<n&&(this.endKey=n),r)}},{key:"populate",value:function(n,r,i){var s=this;if(n.length){var a=Dde.default(n);if(a.sort(function(f,d){return f.cacheKey===d.cacheKey?0:f.cacheKey>d.cacheKey?1:-1}),a.forEach(function(f,d){s.store(f.cacheKey,f,f.lastEventId,d===0,d===a.length-1)}),r){var l=a[0].cacheKey;(!this.beginKey||l<this.beginKey)&&(this.beginKey=l)}if(i){var u=a[a.length-1].cacheKey;(!this.endKey||this.endKey<u)&&(this.endKey=u)}}}},{key:"delete",value:function(n,r){var i=this.items.get(n);(i===null||r===null||i.lastEventId<r)&&this.items.set(n,new vhe(r))}},{key:"isKnown",value:function(n,r){var i=this.items.get(n);return i&&i.lastEventId>=r}},{key:"getIterator",value:D.default.mark(function t(n){var r,i,s,a;return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(n===null&&this.beginKey!==null&&(n=this.beginKey),n!==null){u.next=3;break}return u.abrupt("return");case 3:r=bh(this.items.getIterator(n)),u.prev=4,r.s();case 6:if((i=r.n()).done){u.next=16;break}if(s=ac.default(i.value,2),a=s[1],a.isValid){u.next=10;break}return u.abrupt("continue",14);case 10:return u.next=12,a;case 12:if(!a.isRightBound){u.next=14;break}return u.abrupt("break",16);case 14:u.next=6;break;case 16:u.next=21;break;case 18:u.prev=18,u.t0=u.catch(4),r.e(u.t0);case 21:return u.prev=21,r.f(),u.finish(21);case 24:case"end":return u.stop()}},t,this,[[4,18,21,24]])})},{key:"getReverseIterator",value:D.default.mark(function t(n){var r,i,s,a;return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(n===null&&this.endKey!==null&&(n=this.endKey),n!==null){u.next=3;break}return u.abrupt("return");case 3:r=bh(this.items.getReverseIterator(n)),u.prev=4,r.s();case 6:if((i=r.n()).done){u.next=16;break}if(s=ac.default(i.value,2),a=s[1],a.isValid){u.next=10;break}return u.abrupt("continue",14);case 10:return u.next=12,a;case 12:if(!a.isLeftBound){u.next=14;break}return u.abrupt("break",16);case 14:u.next=6;break;case 16:u.next=21;break;case 18:u.prev=18,u.t0=u.catch(4),r.e(u.t0);case 21:return u.prev=21,r.f(),u.finish(21);case 24:case"end":return u.stop()}},t,this,[[4,18,21,24]])})},{key:"forEach",value:function(n){if(this.items){var r=bh(this.items),i;try{for(r.s();!(i=r.n()).done;){var s=ac.default(i.value,2),a=s[0],l=s[1];l.isValid&&n(a,l.value)}}catch(u){r.e(u)}finally{r.f()}}}}]),e}(),Yl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof di<"u"?di:typeof self<"u"?self:{},$n={exports:{}};(function(e,t){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",l="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",f=500,d="__lodash_placeholder__",p=1,v=2,m=4,y=1,E=2,T=1,w=2,b=4,$=8,N=16,z=32,H=64,K=128,P=256,ee=512,Y=30,oe="...",de=800,me=16,we=1,ke=2,_e=3,Me=1/0,te=9007199254740991,ve=17976931348623157e292,be=NaN,W=4294967295,Re=W-1,kt=W>>>1,De=[["ary",K],["bind",T],["bindKey",w],["curry",$],["curryRight",N],["flip",ee],["partial",z],["partialRight",H],["rearg",P]],ht="[object Arguments]",B="[object Array]",he="[object AsyncFunction]",je="[object Boolean]",Ar="[object Date]",cn="[object DOMException]",Ie="[object Error]",bi="[object Function]",Ye="[object GeneratorFunction]",ue="[object Map]",Le="[object Number]",zt="[object Null]",ce="[object Object]",yo="[object Promise]",nl="[object Proxy]",Bi="[object RegExp]",Ln="[object Set]",Ti="[object String]",Wi="[object Symbol]",rl="[object Undefined]",Dt="[object WeakMap]",Xt="[object WeakSet]",ut="[object ArrayBuffer]",Ve="[object DataView]",gn="[object Float32Array]",il="[object Float64Array]",sl="[object Int8Array]",al="[object Int16Array]",_o="[object Int32Array]",ol="[object Uint8Array]",wo="[object Uint8ClampedArray]",So="[object Uint16Array]",ul="[object Uint32Array]",Pf=/\b__p \+= '';/g,Bv=/\b(__p \+=) '' \+/g,Wv=/(__e\(.*?\)|\b__t\)) \+\n'';/g,fn=/&(?:amp|lt|gt|quot|#39);/g,Af=/[&<>"']/g,zv=RegExp(fn.source),ll=RegExp(Af.source),Of=/<%-([\s\S]+?)%>/g,Nf=/<%([\s\S]+?)%>/g,Mf=/<%=([\s\S]+?)%>/g,Hv=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Vv=/^\w*$/,qv=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,cl=/[\\^$.*+?()[\]{}|]/g,Gv=RegExp(cl.source),fl=/^\s+/,Kv=/\s/,Qv=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Jv=/\{\n\/\* \[wrapped with (.+)\] \*/,Yv=/,? & /,Xv=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Zv=/[()=,{}\[\]\/\s]/,eg=/\\(\\)?/g,tg=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Lf=/\w*$/,ng=/^[-+]0x[0-9a-f]+$/i,rg=/^0b[01]+$/i,ig=/^\[object .+?Constructor\]$/,sg=/^0o[0-7]+$/i,ag=/^(?:0|[1-9]\d*)$/,og=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bo=/($^)/,ug=/['\n\r\u2028\u2029\\]/g,Is="\\ud800-\\udfff",lg="\\u0300-\\u036f",cg="\\ufe20-\\ufe2f",fg="\\u20d0-\\u20ff",Df=lg+cg+fg,Ff="\\u2700-\\u27bf",jf="a-z\\xdf-\\xf6\\xf8-\\xff",dg="\\xac\\xb1\\xd7\\xf7",hg="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",pg="\\u2000-\\u206f",Uf=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",dl="A-Z\\xc0-\\xd6\\xd8-\\xde",ei="\\ufe0e\\ufe0f",hl=dg+hg+pg+Uf,pl="[']",vg="["+Is+"]",Ei="["+hl+"]",To="["+Df+"]",M="\\d+",F="["+Ff+"]",R="["+jf+"]",I="[^"+Is+hl+M+Ff+jf+dl+"]",S="\\ud83c[\\udffb-\\udfff]",O="(?:"+To+"|"+S+")",x="[^"+Is+"]",Q="(?:\\ud83c[\\udde6-\\uddff]){2}",V="[\\ud800-\\udbff][\\udc00-\\udfff]",se="["+dl+"]",fe="\\u200d",Oe="(?:"+R+"|"+I+")",Qn="(?:"+se+"|"+I+")",Eo="(?:"+pl+"(?:d|ll|m|re|s|t|ve))?",fr="(?:"+pl+"(?:D|LL|M|RE|S|T|VE))?",ki=O+"?",Qb="["+ei+"]?",pD="(?:"+fe+"(?:"+[x,Q,V].join("|")+")"+Qb+ki+")*",vD="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",gD="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Jb=Qb+ki+pD,mD="(?:"+[F,Q,V].join("|")+")"+Jb,yD="(?:"+[x+To+"?",To,Q,V,vg].join("|")+")",_D=RegExp(pl,"g"),wD=RegExp(To,"g"),gg=RegExp(S+"(?="+S+")|"+yD+Jb,"g"),SD=RegExp([se+"?"+R+"+"+Eo+"(?="+[Ei,se,"$"].join("|")+")",Qn+"+"+fr+"(?="+[Ei,se+Oe,"$"].join("|")+")",se+"?"+Oe+"+"+Eo,se+"+"+fr,gD,vD,M,mD].join("|"),"g"),bD=RegExp("["+fe+Is+Df+ei+"]"),TD=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ED=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],kD=-1,xt={};xt[gn]=xt[il]=xt[sl]=xt[al]=xt[_o]=xt[ol]=xt[wo]=xt[So]=xt[ul]=!0,xt[ht]=xt[B]=xt[ut]=xt[je]=xt[Ve]=xt[Ar]=xt[Ie]=xt[bi]=xt[ue]=xt[Le]=xt[ce]=xt[Bi]=xt[Ln]=xt[Ti]=xt[Dt]=!1;var It={};It[ht]=It[B]=It[ut]=It[Ve]=It[je]=It[Ar]=It[gn]=It[il]=It[sl]=It[al]=It[_o]=It[ue]=It[Le]=It[ce]=It[Bi]=It[Ln]=It[Ti]=It[Wi]=It[ol]=It[wo]=It[So]=It[ul]=!0,It[Ie]=It[bi]=It[Dt]=!1;var ID={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},CD={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},RD={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},xD={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},$D=parseFloat,PD=parseInt,Yb=Br.default(Yl)=="object"&&Yl&&Yl.Object===Object&&Yl,AD=(typeof self>"u"?"undefined":Br.default(self))=="object"&&self&&self.Object===Object&&self,mn=Yb||AD||Function("return this")(),mg=t&&!t.nodeType&&t,wa=mg&&!0&&e&&!e.nodeType&&e,Xb=wa&&wa.exports===mg,yg=Xb&&Yb.process,Or=function(){try{var j=wa&&wa.require&&wa.require("util").types;return j||yg&&yg.binding&&yg.binding("util")}catch{}}(),Zb=Or&&Or.isArrayBuffer,e1=Or&&Or.isDate,t1=Or&&Or.isMap,n1=Or&&Or.isRegExp,r1=Or&&Or.isSet,i1=Or&&Or.isTypedArray;function dr(j,J,G){switch(G.length){case 0:return j.call(J);case 1:return j.call(J,G[0]);case 2:return j.call(J,G[0],G[1]);case 3:return j.call(J,G[0],G[1],G[2])}return j.apply(J,G)}function OD(j,J,G,Te){for(var Fe=-1,lt=j==null?0:j.length;++Fe<lt;){var nn=j[Fe];J(Te,nn,G(nn),j)}return Te}function Nr(j,J){for(var G=-1,Te=j==null?0:j.length;++G<Te&&J(j[G],G,j)!==!1;);return j}function ND(j,J){for(var G=j==null?0:j.length;G--&&J(j[G],G,j)!==!1;);return j}function s1(j,J){for(var G=-1,Te=j==null?0:j.length;++G<Te;)if(!J(j[G],G,j))return!1;return!0}function Cs(j,J){for(var G=-1,Te=j==null?0:j.length,Fe=0,lt=[];++G<Te;){var nn=j[G];J(nn,G,j)&&(lt[Fe++]=nn)}return lt}function Bf(j,J){var G=j==null?0:j.length;return!!G&&ko(j,J,0)>-1}function _g(j,J,G){for(var Te=-1,Fe=j==null?0:j.length;++Te<Fe;)if(G(J,j[Te]))return!0;return!1}function Nt(j,J){for(var G=-1,Te=j==null?0:j.length,Fe=Array(Te);++G<Te;)Fe[G]=J(j[G],G,j);return Fe}function Rs(j,J){for(var G=-1,Te=J.length,Fe=j.length;++G<Te;)j[Fe+G]=J[G];return j}function wg(j,J,G,Te){var Fe=-1,lt=j==null?0:j.length;for(Te&&lt&&(G=j[++Fe]);++Fe<lt;)G=J(G,j[Fe],Fe,j);return G}function MD(j,J,G,Te){var Fe=j==null?0:j.length;for(Te&&Fe&&(G=j[--Fe]);Fe--;)G=J(G,j[Fe],Fe,j);return G}function Sg(j,J){for(var G=-1,Te=j==null?0:j.length;++G<Te;)if(J(j[G],G,j))return!0;return!1}var LD=bg("length");function DD(j){return j.split("")}function FD(j){return j.match(Xv)||[]}function a1(j,J,G){var Te;return G(j,function(Fe,lt,nn){if(J(Fe,lt,nn))return Te=lt,!1}),Te}function Wf(j,J,G,Te){for(var Fe=j.length,lt=G+(Te?1:-1);Te?lt--:++lt<Fe;)if(J(j[lt],lt,j))return lt;return-1}function ko(j,J,G){return J===J?JD(j,J,G):Wf(j,o1,G)}function jD(j,J,G,Te){for(var Fe=G-1,lt=j.length;++Fe<lt;)if(Te(j[Fe],J))return Fe;return-1}function o1(j){return j!==j}function u1(j,J){var G=j==null?0:j.length;return G?Eg(j,J)/G:be}function bg(j){return function(J){return J==null?n:J[j]}}function Tg(j){return function(J){return j==null?n:j[J]}}function l1(j,J,G,Te,Fe){return Fe(j,function(lt,nn,bt){G=Te?(Te=!1,lt):J(G,lt,nn,bt)}),G}function UD(j,J){var G=j.length;for(j.sort(J);G--;)j[G]=j[G].value;return j}function Eg(j,J){for(var G,Te=-1,Fe=j.length;++Te<Fe;){var lt=J(j[Te]);lt!==n&&(G=G===n?lt:G+lt)}return G}function kg(j,J){for(var G=-1,Te=Array(j);++G<j;)Te[G]=J(G);return Te}function BD(j,J){return Nt(J,function(G){return[G,j[G]]})}function c1(j){return j&&j.slice(0,p1(j)+1).replace(fl,"")}function hr(j){return function(J){return j(J)}}function Ig(j,J){return Nt(J,function(G){return j[G]})}function vl(j,J){return j.has(J)}function f1(j,J){for(var G=-1,Te=j.length;++G<Te&&ko(J,j[G],0)>-1;);return G}function d1(j,J){for(var G=j.length;G--&&ko(J,j[G],0)>-1;);return G}function WD(j,J){for(var G=j.length,Te=0;G--;)j[G]===J&&++Te;return Te}var zD=Tg(ID),HD=Tg(CD);function VD(j){return"\\"+xD[j]}function qD(j,J){return j==null?n:j[J]}function Io(j){return bD.test(j)}function GD(j){return TD.test(j)}function KD(j){for(var J,G=[];!(J=j.next()).done;)G.push(J.value);return G}function Cg(j){var J=-1,G=Array(j.size);return j.forEach(function(Te,Fe){G[++J]=[Fe,Te]}),G}function h1(j,J){return function(G){return j(J(G))}}function xs(j,J){for(var G=-1,Te=j.length,Fe=0,lt=[];++G<Te;){var nn=j[G];(nn===J||nn===d)&&(j[G]=d,lt[Fe++]=G)}return lt}function zf(j){var J=-1,G=Array(j.size);return j.forEach(function(Te){G[++J]=Te}),G}function QD(j){var J=-1,G=Array(j.size);return j.forEach(function(Te){G[++J]=[Te,Te]}),G}function JD(j,J,G){for(var Te=G-1,Fe=j.length;++Te<Fe;)if(j[Te]===J)return Te;return-1}function YD(j,J,G){for(var Te=G+1;Te--;)if(j[Te]===J)return Te;return Te}function Co(j){return Io(j)?ZD(j):LD(j)}function ti(j){return Io(j)?e3(j):DD(j)}function p1(j){for(var J=j.length;J--&&Kv.test(j.charAt(J)););return J}var XD=Tg(RD);function ZD(j){for(var J=gg.lastIndex=0;gg.test(j);)++J;return J}function e3(j){return j.match(gg)||[]}function t3(j){return j.match(SD)||[]}var n3=function j(J){J=J==null?mn:Ro.defaults(mn.Object(),J,Ro.pick(mn,ED));var G=J.Array,Te=J.Date,Fe=J.Error,lt=J.Function,nn=J.Math,bt=J.Object,Rg=J.RegExp,r3=J.String,Mr=J.TypeError,Hf=G.prototype,i3=lt.prototype,xo=bt.prototype,Vf=J["__core-js_shared__"],qf=i3.toString,pt=xo.hasOwnProperty,s3=0,v1=function(){var o=/[^.]+$/.exec(Vf&&Vf.keys&&Vf.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),Gf=xo.toString,a3=qf.call(bt),o3=mn._,u3=Rg("^"+qf.call(pt).replace(cl,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Kf=Xb?J.Buffer:n,$s=J.Symbol,Qf=J.Uint8Array,g1=Kf?Kf.allocUnsafe:n,Jf=h1(bt.getPrototypeOf,bt),m1=bt.create,y1=xo.propertyIsEnumerable,Yf=Hf.splice,_1=$s?$s.isConcatSpreadable:n,gl=$s?$s.iterator:n,Sa=$s?$s.toStringTag:n,Xf=function(){try{var o=Ia(bt,"defineProperty");return o({},"",{}),o}catch{}}(),l3=J.clearTimeout!==mn.clearTimeout&&J.clearTimeout,c3=Te&&Te.now!==mn.Date.now&&Te.now,f3=J.setTimeout!==mn.setTimeout&&J.setTimeout,Zf=nn.ceil,ed=nn.floor,xg=bt.getOwnPropertySymbols,d3=Kf?Kf.isBuffer:n,w1=J.isFinite,h3=Hf.join,p3=h1(bt.keys,bt),rn=nn.max,En=nn.min,v3=Te.now,g3=J.parseInt,S1=nn.random,m3=Hf.reverse,$g=Ia(J,"DataView"),ml=Ia(J,"Map"),Pg=Ia(J,"Promise"),$o=Ia(J,"Set"),yl=Ia(J,"WeakMap"),_l=Ia(bt,"create"),td=yl&&new yl,Po={},y3=Ca($g),_3=Ca(ml),w3=Ca(Pg),S3=Ca($o),b3=Ca(yl),nd=$s?$s.prototype:n,wl=nd?nd.valueOf:n,b1=nd?nd.toString:n;function k(o){if(Ht(o)&&!Ue(o)&&!(o instanceof Xe)){if(o instanceof Lr)return o;if(pt.call(o,"__wrapped__"))return TT(o)}return new Lr(o)}var Ao=function(){function o(){}return function(c){if(!Ft(c))return{};if(m1)return m1(c);o.prototype=c;var h=new o;return o.prototype=n,h}}();function rd(){}function Lr(o,c){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=n}k.templateSettings={escape:Of,evaluate:Nf,interpolate:Mf,variable:"",imports:{_:k}},k.prototype=rd.prototype,k.prototype.constructor=k,Lr.prototype=Ao(rd.prototype),Lr.prototype.constructor=Lr;function Xe(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=W,this.__views__=[]}function T3(){var o=new Xe(this.__wrapped__);return o.__actions__=Jn(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=Jn(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=Jn(this.__views__),o}function E3(){if(this.__filtered__){var o=new Xe(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function k3(){var o=this.__wrapped__.value(),c=this.__dir__,h=Ue(o),g=c<0,_=h?o.length:0,C=DF(0,_,this.__views__),A=C.start,L=C.end,U=L-A,X=g?L:A-1,Z=this.__iteratees__,re=Z.length,ge=0,Ce=En(U,this.__takeCount__);if(!h||!g&&_==U&&Ce==U)return q1(o,this.__actions__);var $e=[];e:for(;U--&&ge<Ce;){X+=c;for(var qe=-1,Pe=o[X];++qe<re;){var Ze=Z[qe],it=Ze.iteratee,In=Ze.type,jn=it(Pe);if(In==ke)Pe=jn;else if(!jn){if(In==we)continue e;break e}}$e[ge++]=Pe}return $e}Xe.prototype=Ao(rd.prototype),Xe.prototype.constructor=Xe;function ba(o){var c=-1,h=o==null?0:o.length;for(this.clear();++c<h;){var g=o[c];this.set(g[0],g[1])}}function I3(){this.__data__=_l?_l(null):{},this.size=0}function C3(o){var c=this.has(o)&&delete this.__data__[o];return this.size-=c?1:0,c}function R3(o){var c=this.__data__;if(_l){var h=c[o];return h===u?n:h}return pt.call(c,o)?c[o]:n}function x3(o){var c=this.__data__;return _l?c[o]!==n:pt.call(c,o)}function $3(o,c){var h=this.__data__;return this.size+=this.has(o)?0:1,h[o]=_l&&c===n?u:c,this}ba.prototype.clear=I3,ba.prototype.delete=C3,ba.prototype.get=R3,ba.prototype.has=x3,ba.prototype.set=$3;function zi(o){var c=-1,h=o==null?0:o.length;for(this.clear();++c<h;){var g=o[c];this.set(g[0],g[1])}}function P3(){this.__data__=[],this.size=0}function A3(o){var c=this.__data__,h=id(c,o);if(h<0)return!1;var g=c.length-1;return h==g?c.pop():Yf.call(c,h,1),--this.size,!0}function O3(o){var c=this.__data__,h=id(c,o);return h<0?n:c[h][1]}function N3(o){return id(this.__data__,o)>-1}function M3(o,c){var h=this.__data__,g=id(h,o);return g<0?(++this.size,h.push([o,c])):h[g][1]=c,this}zi.prototype.clear=P3,zi.prototype.delete=A3,zi.prototype.get=O3,zi.prototype.has=N3,zi.prototype.set=M3;function Hi(o){var c=-1,h=o==null?0:o.length;for(this.clear();++c<h;){var g=o[c];this.set(g[0],g[1])}}function L3(){this.size=0,this.__data__={hash:new ba,map:new(ml||zi),string:new ba}}function D3(o){var c=gd(this,o).delete(o);return this.size-=c?1:0,c}function F3(o){return gd(this,o).get(o)}function j3(o){return gd(this,o).has(o)}function U3(o,c){var h=gd(this,o),g=h.size;return h.set(o,c),this.size+=h.size==g?0:1,this}Hi.prototype.clear=L3,Hi.prototype.delete=D3,Hi.prototype.get=F3,Hi.prototype.has=j3,Hi.prototype.set=U3;function Ta(o){var c=-1,h=o==null?0:o.length;for(this.__data__=new Hi;++c<h;)this.add(o[c])}function B3(o){return this.__data__.set(o,u),this}function W3(o){return this.__data__.has(o)}Ta.prototype.add=Ta.prototype.push=B3,Ta.prototype.has=W3;function ni(o){var c=this.__data__=new zi(o);this.size=c.size}function z3(){this.__data__=new zi,this.size=0}function H3(o){var c=this.__data__,h=c.delete(o);return this.size=c.size,h}function V3(o){return this.__data__.get(o)}function q3(o){return this.__data__.has(o)}function G3(o,c){var h=this.__data__;if(h instanceof zi){var g=h.__data__;if(!ml||g.length<i-1)return g.push([o,c]),this.size=++h.size,this;h=this.__data__=new Hi(g)}return h.set(o,c),this.size=h.size,this}ni.prototype.clear=z3,ni.prototype.delete=H3,ni.prototype.get=V3,ni.prototype.has=q3,ni.prototype.set=G3;function T1(o,c){var h=Ue(o),g=!h&&Ra(o),_=!h&&!g&&Ms(o),C=!h&&!g&&!_&&Lo(o),A=h||g||_||C,L=A?kg(o.length,r3):[],U=L.length;for(var X in o)(c||pt.call(o,X))&&!(A&&(X=="length"||_&&(X=="offset"||X=="parent")||C&&(X=="buffer"||X=="byteLength"||X=="byteOffset")||Ki(X,U)))&&L.push(X);return L}function E1(o){var c=o.length;return c?o[Wg(0,c-1)]:n}function K3(o,c){return md(Jn(o),Ea(c,0,o.length))}function Q3(o){return md(Jn(o))}function Ag(o,c,h){(h!==n&&!ri(o[c],h)||h===n&&!(c in o))&&Vi(o,c,h)}function Sl(o,c,h){var g=o[c];(!(pt.call(o,c)&&ri(g,h))||h===n&&!(c in o))&&Vi(o,c,h)}function id(o,c){for(var h=o.length;h--;)if(ri(o[h][0],c))return h;return-1}function J3(o,c,h,g){return Ps(o,function(_,C,A){c(g,_,h(_),A)}),g}function k1(o,c){return o&&Ci(c,dn(c),o)}function Y3(o,c){return o&&Ci(c,Xn(c),o)}function Vi(o,c,h){c=="__proto__"&&Xf?Xf(o,c,{configurable:!0,enumerable:!0,value:h,writable:!0}):o[c]=h}function Og(o,c){for(var h=-1,g=c.length,_=G(g),C=o==null;++h<g;)_[h]=C?n:hm(o,c[h]);return _}function Ea(o,c,h){return o===o&&(h!==n&&(o=o<=h?o:h),c!==n&&(o=o>=c?o:c)),o}function Dr(o,c,h,g,_,C){var A,L=c&p,U=c&v,X=c&m;if(h&&(A=_?h(o,g,_,C):h(o)),A!==n)return A;if(!Ft(o))return o;var Z=Ue(o);if(Z){if(A=jF(o),!L)return Jn(o,A)}else{var re=kn(o),ge=re==bi||re==Ye;if(Ms(o))return Q1(o,L);if(re==ce||re==ht||ge&&!_){if(A=U||ge?{}:pT(o),!L)return U?RF(o,Y3(A,o)):CF(o,k1(A,o))}else{if(!It[re])return _?o:{};A=UF(o,re,L)}}C||(C=new ni);var Ce=C.get(o);if(Ce)return Ce;C.set(o,A),zT(o)?o.forEach(function(Pe){A.add(Dr(Pe,c,h,Pe,o,C))}):BT(o)&&o.forEach(function(Pe,Ze){A.set(Ze,Dr(Pe,c,h,Ze,o,C))});var $e=X?U?Zg:Xg:U?Xn:dn,qe=Z?n:$e(o);return Nr(qe||o,function(Pe,Ze){qe&&(Ze=Pe,Pe=o[Ze]),Sl(A,Ze,Dr(Pe,c,h,Ze,o,C))}),A}function X3(o){var c=dn(o);return function(h){return I1(h,o,c)}}function I1(o,c,h){var g=h.length;if(o==null)return!g;for(o=bt(o);g--;){var _=h[g],C=c[_],A=o[_];if(A===n&&!(_ in o)||!C(A))return!1}return!0}function C1(o,c,h){if(typeof o!="function")throw new Mr(a);return Rl(function(){o.apply(n,h)},c)}function bl(o,c,h,g){var _=-1,C=Bf,A=!0,L=o.length,U=[],X=c.length;if(!L)return U;h&&(c=Nt(c,hr(h))),g?(C=_g,A=!1):c.length>=i&&(C=vl,A=!1,c=new Ta(c));e:for(;++_<L;){var Z=o[_],re=h==null?Z:h(Z);if(Z=g||Z!==0?Z:0,A&&re===re){for(var ge=X;ge--;)if(c[ge]===re)continue e;U.push(Z)}else C(c,re,g)||U.push(Z)}return U}var Ps=eT(Ii),R1=eT(Mg,!0);function Z3(o,c){var h=!0;return Ps(o,function(g,_,C){return h=!!c(g,_,C),h}),h}function sd(o,c,h){for(var g=-1,_=o.length;++g<_;){var C=o[g],A=c(C);if(A!=null&&(L===n?A===A&&!vr(A):h(A,L)))var L=A,U=C}return U}function eF(o,c,h,g){var _=o.length;for(h=We(h),h<0&&(h=-h>_?0:_+h),g=g===n||g>_?_:We(g),g<0&&(g+=_),g=h>g?0:VT(g);h<g;)o[h++]=c;return o}function x1(o,c){var h=[];return Ps(o,function(g,_,C){c(g,_,C)&&h.push(g)}),h}function yn(o,c,h,g,_){var C=-1,A=o.length;for(h||(h=WF),_||(_=[]);++C<A;){var L=o[C];c>0&&h(L)?c>1?yn(L,c-1,h,g,_):Rs(_,L):g||(_[_.length]=L)}return _}var Ng=tT(),$1=tT(!0);function Ii(o,c){return o&&Ng(o,c,dn)}function Mg(o,c){return o&&$1(o,c,dn)}function ad(o,c){return Cs(c,function(h){return Qi(o[h])})}function ka(o,c){c=Os(c,o);for(var h=0,g=c.length;o!=null&&h<g;)o=o[Ri(c[h++])];return h&&h==g?o:n}function P1(o,c,h){var g=c(o);return Ue(o)?g:Rs(g,h(o))}function Dn(o){return o==null?o===n?rl:zt:Sa&&Sa in bt(o)?LF(o):QF(o)}function Lg(o,c){return o>c}function tF(o,c){return o!=null&&pt.call(o,c)}function nF(o,c){return o!=null&&c in bt(o)}function rF(o,c,h){return o>=En(c,h)&&o<rn(c,h)}function Dg(o,c,h){for(var g=h?_g:Bf,_=o[0].length,C=o.length,A=C,L=G(C),U=1/0,X=[];A--;){var Z=o[A];A&&c&&(Z=Nt(Z,hr(c))),U=En(Z.length,U),L[A]=!h&&(c||_>=120&&Z.length>=120)?new Ta(A&&Z):n}Z=o[0];var re=-1,ge=L[0];e:for(;++re<_&&X.length<U;){var Ce=Z[re],$e=c?c(Ce):Ce;if(Ce=h||Ce!==0?Ce:0,!(ge?vl(ge,$e):g(X,$e,h))){for(A=C;--A;){var qe=L[A];if(!(qe?vl(qe,$e):g(o[A],$e,h)))continue e}ge&&ge.push($e),X.push(Ce)}}return X}function iF(o,c,h,g){return Ii(o,function(_,C,A){c(g,h(_),C,A)}),g}function Tl(o,c,h){c=Os(c,o),o=yT(o,c);var g=o==null?o:o[Ri(jr(c))];return g==null?n:dr(g,o,h)}function A1(o){return Ht(o)&&Dn(o)==ht}function sF(o){return Ht(o)&&Dn(o)==ut}function aF(o){return Ht(o)&&Dn(o)==Ar}function El(o,c,h,g,_){return o===c?!0:o==null||c==null||!Ht(o)&&!Ht(c)?o!==o&&c!==c:oF(o,c,h,g,El,_)}function oF(o,c,h,g,_,C){var A=Ue(o),L=Ue(c),U=A?B:kn(o),X=L?B:kn(c);U=U==ht?ce:U,X=X==ht?ce:X;var Z=U==ce,re=X==ce,ge=U==X;if(ge&&Ms(o)){if(!Ms(c))return!1;A=!0,Z=!1}if(ge&&!Z)return C||(C=new ni),A||Lo(o)?fT(o,c,h,g,_,C):NF(o,c,U,h,g,_,C);if(!(h&y)){var Ce=Z&&pt.call(o,"__wrapped__"),$e=re&&pt.call(c,"__wrapped__");if(Ce||$e){var qe=Ce?o.value():o,Pe=$e?c.value():c;return C||(C=new ni),_(qe,Pe,h,g,C)}}return ge?(C||(C=new ni),MF(o,c,h,g,_,C)):!1}function uF(o){return Ht(o)&&kn(o)==ue}function Fg(o,c,h,g){var _=h.length,C=_,A=!g;if(o==null)return!C;for(o=bt(o);_--;){var L=h[_];if(A&&L[2]?L[1]!==o[L[0]]:!(L[0]in o))return!1}for(;++_<C;){L=h[_];var U=L[0],X=o[U],Z=L[1];if(A&&L[2]){if(X===n&&!(U in o))return!1}else{var re=new ni;if(g)var ge=g(X,Z,U,o,c,re);if(!(ge===n?El(Z,X,y|E,g,re):ge))return!1}}return!0}function O1(o){if(!Ft(o)||HF(o))return!1;var c=Qi(o)?u3:ig;return c.test(Ca(o))}function lF(o){return Ht(o)&&Dn(o)==Bi}function cF(o){return Ht(o)&&kn(o)==Ln}function fF(o){return Ht(o)&&Td(o.length)&&!!xt[Dn(o)]}function N1(o){return typeof o=="function"?o:o==null?Zn:Br.default(o)=="object"?Ue(o)?D1(o[0],o[1]):L1(o):nE(o)}function jg(o){if(!Cl(o))return p3(o);var c=[];for(var h in bt(o))pt.call(o,h)&&h!="constructor"&&c.push(h);return c}function dF(o){if(!Ft(o))return KF(o);var c=Cl(o),h=[];for(var g in o)g=="constructor"&&(c||!pt.call(o,g))||h.push(g);return h}function Ug(o,c){return o<c}function M1(o,c){var h=-1,g=Yn(o)?G(o.length):[];return Ps(o,function(_,C,A){g[++h]=c(_,C,A)}),g}function L1(o){var c=tm(o);return c.length==1&&c[0][2]?gT(c[0][0],c[0][1]):function(h){return h===o||Fg(h,o,c)}}function D1(o,c){return rm(o)&&vT(c)?gT(Ri(o),c):function(h){var g=hm(h,o);return g===n&&g===c?pm(h,o):El(c,g,y|E)}}function od(o,c,h,g,_){o!==c&&Ng(c,function(C,A){if(_||(_=new ni),Ft(C))hF(o,c,A,h,od,g,_);else{var L=g?g(sm(o,A),C,A+"",o,c,_):n;L===n&&(L=C),Ag(o,A,L)}},Xn)}function hF(o,c,h,g,_,C,A){var L=sm(o,h),U=sm(c,h),X=A.get(U);if(X){Ag(o,h,X);return}var Z=C?C(L,U,h+"",o,c,A):n,re=Z===n;if(re){var ge=Ue(U),Ce=!ge&&Ms(U),$e=!ge&&!Ce&&Lo(U);Z=U,ge||Ce||$e?Ue(L)?Z=L:Kt(L)?Z=Jn(L):Ce?(re=!1,Z=Q1(U,!0)):$e?(re=!1,Z=J1(U,!0)):Z=[]:xl(U)||Ra(U)?(Z=L,Ra(L)?Z=qT(L):(!Ft(L)||Qi(L))&&(Z=pT(U))):re=!1}re&&(A.set(U,Z),_(Z,U,g,C,A),A.delete(U)),Ag(o,h,Z)}function F1(o,c){var h=o.length;if(h)return c+=c<0?h:0,Ki(c,h)?o[c]:n}function j1(o,c,h){c.length?c=Nt(c,function(C){return Ue(C)?function(A){return ka(A,C.length===1?C[0]:C)}:C}):c=[Zn];var g=-1;c=Nt(c,hr(xe()));var _=M1(o,function(C,A,L){var U=Nt(c,function(X){return X(C)});return{criteria:U,index:++g,value:C}});return UD(_,function(C,A){return IF(C,A,h)})}function pF(o,c){return U1(o,c,function(h,g){return pm(o,g)})}function U1(o,c,h){for(var g=-1,_=c.length,C={};++g<_;){var A=c[g],L=ka(o,A);h(L,A)&&kl(C,Os(A,o),L)}return C}function vF(o){return function(c){return ka(c,o)}}function Bg(o,c,h,g){var _=g?jD:ko,C=-1,A=c.length,L=o;for(o===c&&(c=Jn(c)),h&&(L=Nt(o,hr(h)));++C<A;)for(var U=0,X=c[C],Z=h?h(X):X;(U=_(L,Z,U,g))>-1;)L!==o&&Yf.call(L,U,1),Yf.call(o,U,1);return o}function B1(o,c){for(var h=o?c.length:0,g=h-1;h--;){var _=c[h];if(h==g||_!==C){var C=_;Ki(_)?Yf.call(o,_,1):Vg(o,_)}}return o}function Wg(o,c){return o+ed(S1()*(c-o+1))}function gF(o,c,h,g){for(var _=-1,C=rn(Zf((c-o)/(h||1)),0),A=G(C);C--;)A[g?C:++_]=o,o+=h;return A}function zg(o,c){var h="";if(!o||c<1||c>te)return h;do c%2&&(h+=o),c=ed(c/2),c&&(o+=o);while(c);return h}function Ge(o,c){return am(mT(o,c,Zn),o+"")}function mF(o){return E1(Do(o))}function yF(o,c){var h=Do(o);return md(h,Ea(c,0,h.length))}function kl(o,c,h,g){if(!Ft(o))return o;c=Os(c,o);for(var _=-1,C=c.length,A=C-1,L=o;L!=null&&++_<C;){var U=Ri(c[_]),X=h;if(U==="__proto__"||U==="constructor"||U==="prototype")return o;if(_!=A){var Z=L[U];X=g?g(Z,U,L):n,X===n&&(X=Ft(Z)?Z:Ki(c[_+1])?[]:{})}Sl(L,U,X),L=L[U]}return o}var W1=td?function(o,c){return td.set(o,c),o}:Zn,_F=Xf?function(o,c){return Xf(o,"toString",{configurable:!0,enumerable:!1,value:gm(c),writable:!0})}:Zn;function wF(o){return md(Do(o))}function Fr(o,c,h){var g=-1,_=o.length;c<0&&(c=-c>_?0:_+c),h=h>_?_:h,h<0&&(h+=_),_=c>h?0:h-c>>>0,c>>>=0;for(var C=G(_);++g<_;)C[g]=o[g+c];return C}function SF(o,c){var h;return Ps(o,function(g,_,C){return h=c(g,_,C),!h}),!!h}function ud(o,c,h){var g=0,_=o==null?g:o.length;if(typeof c=="number"&&c===c&&_<=kt){for(;g<_;){var C=g+_>>>1,A=o[C];A!==null&&!vr(A)&&(h?A<=c:A<c)?g=C+1:_=C}return _}return Hg(o,c,Zn,h)}function Hg(o,c,h,g){var _=0,C=o==null?0:o.length;if(C===0)return 0;c=h(c);for(var A=c!==c,L=c===null,U=vr(c),X=c===n;_<C;){var Z=ed((_+C)/2),re=h(o[Z]),ge=re!==n,Ce=re===null,$e=re===re,qe=vr(re);if(A)var Pe=g||$e;else X?Pe=$e&&(g||ge):L?Pe=$e&&ge&&(g||!Ce):U?Pe=$e&&ge&&!Ce&&(g||!qe):Ce||qe?Pe=!1:Pe=g?re<=c:re<c;Pe?_=Z+1:C=Z}return En(C,Re)}function z1(o,c){for(var h=-1,g=o.length,_=0,C=[];++h<g;){var A=o[h],L=c?c(A):A;if(!h||!ri(L,U)){var U=L;C[_++]=A===0?0:A}}return C}function H1(o){return typeof o=="number"?o:vr(o)?be:+o}function pr(o){if(typeof o=="string")return o;if(Ue(o))return Nt(o,pr)+"";if(vr(o))return b1?b1.call(o):"";var c=o+"";return c=="0"&&1/o==-Me?"-0":c}function As(o,c,h){var g=-1,_=Bf,C=o.length,A=!0,L=[],U=L;if(h)A=!1,_=_g;else if(C>=i){var X=c?null:AF(o);if(X)return zf(X);A=!1,_=vl,U=new Ta}else U=c?[]:L;e:for(;++g<C;){var Z=o[g],re=c?c(Z):Z;if(Z=h||Z!==0?Z:0,A&&re===re){for(var ge=U.length;ge--;)if(U[ge]===re)continue e;c&&U.push(re),L.push(Z)}else _(U,re,h)||(U!==L&&U.push(re),L.push(Z))}return L}function Vg(o,c){return c=Os(c,o),o=yT(o,c),o==null||delete o[Ri(jr(c))]}function V1(o,c,h,g){return kl(o,c,h(ka(o,c)),g)}function ld(o,c,h,g){for(var _=o.length,C=g?_:-1;(g?C--:++C<_)&&c(o[C],C,o););return h?Fr(o,g?0:C,g?C+1:_):Fr(o,g?C+1:0,g?_:C)}function q1(o,c){var h=o;return h instanceof Xe&&(h=h.value()),wg(c,function(g,_){return _.func.apply(_.thisArg,Rs([g],_.args))},h)}function qg(o,c,h){var g=o.length;if(g<2)return g?As(o[0]):[];for(var _=-1,C=G(g);++_<g;)for(var A=o[_],L=-1;++L<g;)L!=_&&(C[_]=bl(C[_]||A,o[L],c,h));return As(yn(C,1),c,h)}function G1(o,c,h){for(var g=-1,_=o.length,C=c.length,A={};++g<_;){var L=g<C?c[g]:n;h(A,o[g],L)}return A}function Gg(o){return Kt(o)?o:[]}function Kg(o){return typeof o=="function"?o:Zn}function Os(o,c){return Ue(o)?o:rm(o,c)?[o]:bT(ct(o))}var bF=Ge;function Ns(o,c,h){var g=o.length;return h=h===n?g:h,!c&&h>=g?o:Fr(o,c,h)}var K1=l3||function(o){return mn.clearTimeout(o)};function Q1(o,c){if(c)return o.slice();var h=o.length,g=g1?g1(h):new o.constructor(h);return o.copy(g),g}function Qg(o){var c=new o.constructor(o.byteLength);return new Qf(c).set(new Qf(o)),c}function TF(o,c){var h=c?Qg(o.buffer):o.buffer;return new o.constructor(h,o.byteOffset,o.byteLength)}function EF(o){var c=new o.constructor(o.source,Lf.exec(o));return c.lastIndex=o.lastIndex,c}function kF(o){return wl?bt(wl.call(o)):{}}function J1(o,c){var h=c?Qg(o.buffer):o.buffer;return new o.constructor(h,o.byteOffset,o.length)}function Y1(o,c){if(o!==c){var h=o!==n,g=o===null,_=o===o,C=vr(o),A=c!==n,L=c===null,U=c===c,X=vr(c);if(!L&&!X&&!C&&o>c||C&&A&&U&&!L&&!X||g&&A&&U||!h&&U||!_)return 1;if(!g&&!C&&!X&&o<c||X&&h&&_&&!g&&!C||L&&h&&_||!A&&_||!U)return-1}return 0}function IF(o,c,h){for(var g=-1,_=o.criteria,C=c.criteria,A=_.length,L=h.length;++g<A;){var U=Y1(_[g],C[g]);if(U){if(g>=L)return U;var X=h[g];return U*(X=="desc"?-1:1)}}return o.index-c.index}function X1(o,c,h,g){for(var _=-1,C=o.length,A=h.length,L=-1,U=c.length,X=rn(C-A,0),Z=G(U+X),re=!g;++L<U;)Z[L]=c[L];for(;++_<A;)(re||_<C)&&(Z[h[_]]=o[_]);for(;X--;)Z[L++]=o[_++];return Z}function Z1(o,c,h,g){for(var _=-1,C=o.length,A=-1,L=h.length,U=-1,X=c.length,Z=rn(C-L,0),re=G(Z+X),ge=!g;++_<Z;)re[_]=o[_];for(var Ce=_;++U<X;)re[Ce+U]=c[U];for(;++A<L;)(ge||_<C)&&(re[Ce+h[A]]=o[_++]);return re}function Jn(o,c){var h=-1,g=o.length;for(c||(c=G(g));++h<g;)c[h]=o[h];return c}function Ci(o,c,h,g){var _=!h;h||(h={});for(var C=-1,A=c.length;++C<A;){var L=c[C],U=g?g(h[L],o[L],L,h,o):n;U===n&&(U=o[L]),_?Vi(h,L,U):Sl(h,L,U)}return h}function CF(o,c){return Ci(o,nm(o),c)}function RF(o,c){return Ci(o,dT(o),c)}function cd(o,c){return function(h,g){var _=Ue(h)?OD:J3,C=c?c():{};return _(h,o,xe(g,2),C)}}function Oo(o){return Ge(function(c,h){var g=-1,_=h.length,C=_>1?h[_-1]:n,A=_>2?h[2]:n;for(C=o.length>3&&typeof C=="function"?(_--,C):n,A&&Fn(h[0],h[1],A)&&(C=_<3?n:C,_=1),c=bt(c);++g<_;){var L=h[g];L&&o(c,L,g,C)}return c})}function eT(o,c){return function(h,g){if(h==null)return h;if(!Yn(h))return o(h,g);for(var _=h.length,C=c?_:-1,A=bt(h);(c?C--:++C<_)&&g(A[C],C,A)!==!1;);return h}}function tT(o){return function(c,h,g){for(var _=-1,C=bt(c),A=g(c),L=A.length;L--;){var U=A[o?L:++_];if(h(C[U],U,C)===!1)break}return c}}function xF(o,c,h){var g=c&T,_=Il(o);function C(){var A=this&&this!==mn&&this instanceof C?_:o;return A.apply(g?h:this,arguments)}return C}function nT(o){return function(c){c=ct(c);var h=Io(c)?ti(c):n,g=h?h[0]:c.charAt(0),_=h?Ns(h,1).join(""):c.slice(1);return g[o]()+_}}function No(o){return function(c){return wg(eE(ZT(c).replace(_D,"")),o,"")}}function Il(o){return function(){var c=arguments;switch(c.length){case 0:return new o;case 1:return new o(c[0]);case 2:return new o(c[0],c[1]);case 3:return new o(c[0],c[1],c[2]);case 4:return new o(c[0],c[1],c[2],c[3]);case 5:return new o(c[0],c[1],c[2],c[3],c[4]);case 6:return new o(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new o(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var h=Ao(o.prototype),g=o.apply(h,c);return Ft(g)?g:h}}function $F(o,c,h){var g=Il(o);function _(){for(var C=arguments.length,A=G(C),L=C,U=Mo(_);L--;)A[L]=arguments[L];var X=C<3&&A[0]!==U&&A[C-1]!==U?[]:xs(A,U);if(C-=X.length,C<h)return oT(o,c,fd,_.placeholder,n,A,X,n,n,h-C);var Z=this&&this!==mn&&this instanceof _?g:o;return dr(Z,this,A)}return _}function rT(o){return function(c,h,g){var _=bt(c);if(!Yn(c)){var C=xe(h,3);c=dn(c),h=function(U){return C(_[U],U,_)}}var A=o(c,h,g);return A>-1?_[C?c[A]:A]:n}}function iT(o){return Gi(function(c){var h=c.length,g=h,_=Lr.prototype.thru;for(o&&c.reverse();g--;){var C=c[g];if(typeof C!="function")throw new Mr(a);if(_&&!A&&vd(C)=="wrapper")var A=new Lr([],!0)}for(g=A?g:h;++g<h;){C=c[g];var L=vd(C),U=L=="wrapper"?em(C):n;U&&im(U[0])&&U[1]==(K|$|z|P)&&!U[4].length&&U[9]==1?A=A[vd(U[0])].apply(A,U[3]):A=C.length==1&&im(C)?A[L]():A.thru(C)}return function(){var X=arguments,Z=X[0];if(A&&X.length==1&&Ue(Z))return A.plant(Z).value();for(var re=0,ge=h?c[re].apply(this,X):Z;++re<h;)ge=c[re].call(this,ge);return ge}})}function fd(o,c,h,g,_,C,A,L,U,X){var Z=c&K,re=c&T,ge=c&w,Ce=c&($|N),$e=c&ee,qe=ge?n:Il(o);function Pe(){for(var Ze=arguments.length,it=G(Ze),In=Ze;In--;)it[In]=arguments[In];if(Ce)var jn=Mo(Pe),gr=WD(it,jn);if(g&&(it=X1(it,g,_,Ce)),C&&(it=Z1(it,C,A,Ce)),Ze-=gr,Ce&&Ze<X){var Qt=xs(it,jn);return oT(o,c,fd,Pe.placeholder,h,it,Qt,L,U,X-Ze)}var ii=re?h:this,Yi=ge?ii[o]:o;return Ze=it.length,L?it=JF(it,L):$e&&Ze>1&&it.reverse(),Z&&U<Ze&&(it.length=U),this&&this!==mn&&this instanceof Pe&&(Yi=qe||Il(Yi)),Yi.apply(ii,it)}return Pe}function sT(o,c){return function(h,g){return iF(h,o,c(g),{})}}function dd(o,c){return function(h,g){var _;if(h===n&&g===n)return c;if(h!==n&&(_=h),g!==n){if(_===n)return g;typeof h=="string"||typeof g=="string"?(h=pr(h),g=pr(g)):(h=H1(h),g=H1(g)),_=o(h,g)}return _}}function Jg(o){return Gi(function(c){return c=Nt(c,hr(xe())),Ge(function(h){var g=this;return o(c,function(_){return dr(_,g,h)})})})}function hd(o,c){c=c===n?" ":pr(c);var h=c.length;if(h<2)return h?zg(c,o):c;var g=zg(c,Zf(o/Co(c)));return Io(c)?Ns(ti(g),0,o).join(""):g.slice(0,o)}function PF(o,c,h,g){var _=c&T,C=Il(o);function A(){for(var L=-1,U=arguments.length,X=-1,Z=g.length,re=G(Z+U),ge=this&&this!==mn&&this instanceof A?C:o;++X<Z;)re[X]=g[X];for(;U--;)re[X++]=arguments[++L];return dr(ge,_?h:this,re)}return A}function aT(o){return function(c,h,g){return g&&typeof g!="number"&&Fn(c,h,g)&&(h=g=n),c=Ji(c),h===n?(h=c,c=0):h=Ji(h),g=g===n?c<h?1:-1:Ji(g),gF(c,h,g,o)}}function pd(o){return function(c,h){return typeof c=="string"&&typeof h=="string"||(c=Ur(c),h=Ur(h)),o(c,h)}}function oT(o,c,h,g,_,C,A,L,U,X){var Z=c&$,re=Z?A:n,ge=Z?n:A,Ce=Z?C:n,$e=Z?n:C;c|=Z?z:H,c&=~(Z?H:z),c&b||(c&=-4);var qe=[o,c,_,Ce,re,$e,ge,L,U,X],Pe=h.apply(n,qe);return im(o)&&_T(Pe,qe),Pe.placeholder=g,wT(Pe,o,c)}function Yg(o){var c=nn[o];return function(h,g){if(h=Ur(h),g=g==null?0:En(We(g),292),g&&w1(h)){var _=(ct(h)+"e").split("e"),C=c(_[0]+"e"+(+_[1]+g));return _=(ct(C)+"e").split("e"),+(_[0]+"e"+(+_[1]-g))}return c(h)}}var AF=$o&&1/zf(new $o([,-0]))[1]==Me?function(o){return new $o(o)}:_m;function uT(o){return function(c){var h=kn(c);return h==ue?Cg(c):h==Ln?QD(c):BD(c,o(c))}}function qi(o,c,h,g,_,C,A,L){var U=c&w;if(!U&&typeof o!="function")throw new Mr(a);var X=g?g.length:0;if(X||(c&=-97,g=_=n),A=A===n?A:rn(We(A),0),L=L===n?L:We(L),X-=_?_.length:0,c&H){var Z=g,re=_;g=_=n}var ge=U?n:em(o),Ce=[o,c,h,g,_,Z,re,C,A,L];if(ge&&GF(Ce,ge),o=Ce[0],c=Ce[1],h=Ce[2],g=Ce[3],_=Ce[4],L=Ce[9]=Ce[9]===n?U?0:o.length:rn(Ce[9]-X,0),!L&&c&($|N)&&(c&=-25),!c||c==T)var $e=xF(o,c,h);else c==$||c==N?$e=$F(o,c,L):(c==z||c==(T|z))&&!_.length?$e=PF(o,c,h,g):$e=fd.apply(n,Ce);var qe=ge?W1:_T;return wT(qe($e,Ce),o,c)}function lT(o,c,h,g){return o===n||ri(o,xo[h])&&!pt.call(g,h)?c:o}function cT(o,c,h,g,_,C){return Ft(o)&&Ft(c)&&(C.set(c,o),od(o,c,n,cT,C),C.delete(c)),o}function OF(o){return xl(o)?n:o}function fT(o,c,h,g,_,C){var A=h&y,L=o.length,U=c.length;if(L!=U&&!(A&&U>L))return!1;var X=C.get(o),Z=C.get(c);if(X&&Z)return X==c&&Z==o;var re=-1,ge=!0,Ce=h&E?new Ta:n;for(C.set(o,c),C.set(c,o);++re<L;){var $e=o[re],qe=c[re];if(g)var Pe=A?g(qe,$e,re,c,o,C):g($e,qe,re,o,c,C);if(Pe!==n){if(Pe)continue;ge=!1;break}if(Ce){if(!Sg(c,function(Ze,it){if(!vl(Ce,it)&&($e===Ze||_($e,Ze,h,g,C)))return Ce.push(it)})){ge=!1;break}}else if(!($e===qe||_($e,qe,h,g,C))){ge=!1;break}}return C.delete(o),C.delete(c),ge}function NF(o,c,h,g,_,C,A){switch(h){case Ve:if(o.byteLength!=c.byteLength||o.byteOffset!=c.byteOffset)return!1;o=o.buffer,c=c.buffer;case ut:return!(o.byteLength!=c.byteLength||!C(new Qf(o),new Qf(c)));case je:case Ar:case Le:return ri(+o,+c);case Ie:return o.name==c.name&&o.message==c.message;case Bi:case Ti:return o==c+"";case ue:var L=Cg;case Ln:var U=g&y;if(L||(L=zf),o.size!=c.size&&!U)return!1;var X=A.get(o);if(X)return X==c;g|=E,A.set(o,c);var Z=fT(L(o),L(c),g,_,C,A);return A.delete(o),Z;case Wi:if(wl)return wl.call(o)==wl.call(c)}return!1}function MF(o,c,h,g,_,C){var A=h&y,L=Xg(o),U=L.length,X=Xg(c),Z=X.length;if(U!=Z&&!A)return!1;for(var re=U;re--;){var ge=L[re];if(!(A?ge in c:pt.call(c,ge)))return!1}var Ce=C.get(o),$e=C.get(c);if(Ce&&$e)return Ce==c&&$e==o;var qe=!0;C.set(o,c),C.set(c,o);for(var Pe=A;++re<U;){ge=L[re];var Ze=o[ge],it=c[ge];if(g)var In=A?g(it,Ze,ge,c,o,C):g(Ze,it,ge,o,c,C);if(!(In===n?Ze===it||_(Ze,it,h,g,C):In)){qe=!1;break}Pe||(Pe=ge=="constructor")}if(qe&&!Pe){var jn=o.constructor,gr=c.constructor;jn!=gr&&"constructor"in o&&"constructor"in c&&!(typeof jn=="function"&&jn instanceof jn&&typeof gr=="function"&&gr instanceof gr)&&(qe=!1)}return C.delete(o),C.delete(c),qe}function Gi(o){return am(mT(o,n,IT),o+"")}function Xg(o){return P1(o,dn,nm)}function Zg(o){return P1(o,Xn,dT)}var em=td?function(o){return td.get(o)}:_m;function vd(o){for(var c=o.name+"",h=Po[c],g=pt.call(Po,c)?h.length:0;g--;){var _=h[g],C=_.func;if(C==null||C==o)return _.name}return c}function Mo(o){var c=pt.call(k,"placeholder")?k:o;return c.placeholder}function xe(){var o=k.iteratee||mm;return o=o===mm?N1:o,arguments.length?o(arguments[0],arguments[1]):o}function gd(o,c){var h=o.__data__;return zF(c)?h[typeof c=="string"?"string":"hash"]:h.map}function tm(o){for(var c=dn(o),h=c.length;h--;){var g=c[h],_=o[g];c[h]=[g,_,vT(_)]}return c}function Ia(o,c){var h=qD(o,c);return O1(h)?h:n}function LF(o){var c=pt.call(o,Sa),h=o[Sa];try{o[Sa]=n;var g=!0}catch{}var _=Gf.call(o);return g&&(c?o[Sa]=h:delete o[Sa]),_}var nm=xg?function(o){return o==null?[]:(o=bt(o),Cs(xg(o),function(c){return y1.call(o,c)}))}:wm,dT=xg?function(o){for(var c=[];o;)Rs(c,nm(o)),o=Jf(o);return c}:wm,kn=Dn;($g&&kn(new $g(new ArrayBuffer(1)))!=Ve||ml&&kn(new ml)!=ue||Pg&&kn(Pg.resolve())!=yo||$o&&kn(new $o)!=Ln||yl&&kn(new yl)!=Dt)&&(kn=function(c){var h=Dn(c),g=h==ce?c.constructor:n,_=g?Ca(g):"";if(_)switch(_){case y3:return Ve;case _3:return ue;case w3:return yo;case S3:return Ln;case b3:return Dt}return h});function DF(o,c,h){for(var g=-1,_=h.length;++g<_;){var C=h[g],A=C.size;switch(C.type){case"drop":o+=A;break;case"dropRight":c-=A;break;case"take":c=En(c,o+A);break;case"takeRight":o=rn(o,c-A);break}}return{start:o,end:c}}function FF(o){var c=o.match(Jv);return c?c[1].split(Yv):[]}function hT(o,c,h){c=Os(c,o);for(var g=-1,_=c.length,C=!1;++g<_;){var A=Ri(c[g]);if(!(C=o!=null&&h(o,A)))break;o=o[A]}return C||++g!=_?C:(_=o==null?0:o.length,!!_&&Td(_)&&Ki(A,_)&&(Ue(o)||Ra(o)))}function jF(o){var c=o.length,h=new o.constructor(c);return c&&typeof o[0]=="string"&&pt.call(o,"index")&&(h.index=o.index,h.input=o.input),h}function pT(o){return typeof o.constructor=="function"&&!Cl(o)?Ao(Jf(o)):{}}function UF(o,c,h){var g=o.constructor;switch(c){case ut:return Qg(o);case je:case Ar:return new g(+o);case Ve:return TF(o,h);case gn:case il:case sl:case al:case _o:case ol:case wo:case So:case ul:return J1(o,h);case ue:return new g;case Le:case Ti:return new g(o);case Bi:return EF(o);case Ln:return new g;case Wi:return kF(o)}}function BF(o,c){var h=c.length;if(!h)return o;var g=h-1;return c[g]=(h>1?"& ":"")+c[g],c=c.join(h>2?", ":" "),o.replace(Qv,`{
/* [wrapped with `+c+`] */
`)}function WF(o){return Ue(o)||Ra(o)||!!(_1&&o&&o[_1])}function Ki(o,c){var h=Br.default(o);return c=c??te,!!c&&(h=="number"||h!="symbol"&&ag.test(o))&&o>-1&&o%1==0&&o<c}function Fn(o,c,h){if(!Ft(h))return!1;var g=Br.default(c);return(g=="number"?Yn(h)&&Ki(c,h.length):g=="string"&&c in h)?ri(h[c],o):!1}function rm(o,c){if(Ue(o))return!1;var h=Br.default(o);return h=="number"||h=="symbol"||h=="boolean"||o==null||vr(o)?!0:Vv.test(o)||!Hv.test(o)||c!=null&&o in bt(c)}function zF(o){var c=Br.default(o);return c=="string"||c=="number"||c=="symbol"||c=="boolean"?o!=="__proto__":o===null}function im(o){var c=vd(o),h=k[c];if(typeof h!="function"||!(c in Xe.prototype))return!1;if(o===h)return!0;var g=em(h);return!!g&&o===g[0]}function HF(o){return!!v1&&v1 in o}var VF=Vf?Qi:Sm;function Cl(o){var c=o&&o.constructor,h=typeof c=="function"&&c.prototype||xo;return o===h}function vT(o){return o===o&&!Ft(o)}function gT(o,c){return function(h){return h==null?!1:h[o]===c&&(c!==n||o in bt(h))}}function qF(o){var c=Sd(o,function(g){return h.size===f&&h.clear(),g}),h=c.cache;return c}function GF(o,c){var h=o[1],g=c[1],_=h|g,C=_<(T|w|K),A=g==K&&h==$||g==K&&h==P&&o[7].length<=c[8]||g==(K|P)&&c[7].length<=c[8]&&h==$;if(!(C||A))return o;g&T&&(o[2]=c[2],_|=h&T?0:b);var L=c[3];if(L){var U=o[3];o[3]=U?X1(U,L,c[4]):L,o[4]=U?xs(o[3],d):c[4]}return L=c[5],L&&(U=o[5],o[5]=U?Z1(U,L,c[6]):L,o[6]=U?xs(o[5],d):c[6]),L=c[7],L&&(o[7]=L),g&K&&(o[8]=o[8]==null?c[8]:En(o[8],c[8])),o[9]==null&&(o[9]=c[9]),o[0]=c[0],o[1]=_,o}function KF(o){var c=[];if(o!=null)for(var h in bt(o))c.push(h);return c}function QF(o){return Gf.call(o)}function mT(o,c,h){return c=rn(c===n?o.length-1:c,0),function(){for(var g=arguments,_=-1,C=rn(g.length-c,0),A=G(C);++_<C;)A[_]=g[c+_];_=-1;for(var L=G(c+1);++_<c;)L[_]=g[_];return L[c]=h(A),dr(o,this,L)}}function yT(o,c){return c.length<2?o:ka(o,Fr(c,0,-1))}function JF(o,c){for(var h=o.length,g=En(c.length,h),_=Jn(o);g--;){var C=c[g];o[g]=Ki(C,h)?_[C]:n}return o}function sm(o,c){if(!(c==="constructor"&&typeof o[c]=="function")&&c!="__proto__")return o[c]}var _T=ST(W1),Rl=f3||function(o,c){return mn.setTimeout(o,c)},am=ST(_F);function wT(o,c,h){var g=c+"";return am(o,BF(g,YF(FF(g),h)))}function ST(o){var c=0,h=0;return function(){var g=v3(),_=me-(g-h);if(h=g,_>0){if(++c>=de)return arguments[0]}else c=0;return o.apply(n,arguments)}}function md(o,c){var h=-1,g=o.length,_=g-1;for(c=c===n?g:c;++h<c;){var C=Wg(h,_),A=o[C];o[C]=o[h],o[h]=A}return o.length=c,o}var bT=qF(function(o){var c=[];return o.charCodeAt(0)===46&&c.push(""),o.replace(qv,function(h,g,_,C){c.push(_?C.replace(eg,"$1"):g||h)}),c});function Ri(o){if(typeof o=="string"||vr(o))return o;var c=o+"";return c=="0"&&1/o==-Me?"-0":c}function Ca(o){if(o!=null){try{return qf.call(o)}catch{}try{return o+""}catch{}}return""}function YF(o,c){return Nr(De,function(h){var g="_."+h[0];c&h[1]&&!Bf(o,g)&&o.push(g)}),o.sort()}function TT(o){if(o instanceof Xe)return o.clone();var c=new Lr(o.__wrapped__,o.__chain__);return c.__actions__=Jn(o.__actions__),c.__index__=o.__index__,c.__values__=o.__values__,c}function XF(o,c,h){(h?Fn(o,c,h):c===n)?c=1:c=rn(We(c),0);var g=o==null?0:o.length;if(!g||c<1)return[];for(var _=0,C=0,A=G(Zf(g/c));_<g;)A[C++]=Fr(o,_,_+=c);return A}function ZF(o){for(var c=-1,h=o==null?0:o.length,g=0,_=[];++c<h;){var C=o[c];C&&(_[g++]=C)}return _}function ej(){var o=arguments.length;if(!o)return[];for(var c=G(o-1),h=arguments[0],g=o;g--;)c[g-1]=arguments[g];return Rs(Ue(h)?Jn(h):[h],yn(c,1))}var tj=Ge(function(o,c){return Kt(o)?bl(o,yn(c,1,Kt,!0)):[]}),nj=Ge(function(o,c){var h=jr(c);return Kt(h)&&(h=n),Kt(o)?bl(o,yn(c,1,Kt,!0),xe(h,2)):[]}),rj=Ge(function(o,c){var h=jr(c);return Kt(h)&&(h=n),Kt(o)?bl(o,yn(c,1,Kt,!0),n,h):[]});function ij(o,c,h){var g=o==null?0:o.length;return g?(c=h||c===n?1:We(c),Fr(o,c<0?0:c,g)):[]}function sj(o,c,h){var g=o==null?0:o.length;return g?(c=h||c===n?1:We(c),c=g-c,Fr(o,0,c<0?0:c)):[]}function aj(o,c){return o&&o.length?ld(o,xe(c,3),!0,!0):[]}function oj(o,c){return o&&o.length?ld(o,xe(c,3),!0):[]}function uj(o,c,h,g){var _=o==null?0:o.length;return _?(h&&typeof h!="number"&&Fn(o,c,h)&&(h=0,g=_),eF(o,c,h,g)):[]}function ET(o,c,h){var g=o==null?0:o.length;if(!g)return-1;var _=h==null?0:We(h);return _<0&&(_=rn(g+_,0)),Wf(o,xe(c,3),_)}function kT(o,c,h){var g=o==null?0:o.length;if(!g)return-1;var _=g-1;return h!==n&&(_=We(h),_=h<0?rn(g+_,0):En(_,g-1)),Wf(o,xe(c,3),_,!0)}function IT(o){var c=o==null?0:o.length;return c?yn(o,1):[]}function lj(o){var c=o==null?0:o.length;return c?yn(o,Me):[]}function cj(o,c){var h=o==null?0:o.length;return h?(c=c===n?1:We(c),yn(o,c)):[]}function fj(o){for(var c=-1,h=o==null?0:o.length,g={};++c<h;){var _=o[c];g[_[0]]=_[1]}return g}function CT(o){return o&&o.length?o[0]:n}function dj(o,c,h){var g=o==null?0:o.length;if(!g)return-1;var _=h==null?0:We(h);return _<0&&(_=rn(g+_,0)),ko(o,c,_)}function hj(o){var c=o==null?0:o.length;return c?Fr(o,0,-1):[]}var pj=Ge(function(o){var c=Nt(o,Gg);return c.length&&c[0]===o[0]?Dg(c):[]}),vj=Ge(function(o){var c=jr(o),h=Nt(o,Gg);return c===jr(h)?c=n:h.pop(),h.length&&h[0]===o[0]?Dg(h,xe(c,2)):[]}),gj=Ge(function(o){var c=jr(o),h=Nt(o,Gg);return c=typeof c=="function"?c:n,c&&h.pop(),h.length&&h[0]===o[0]?Dg(h,n,c):[]});function mj(o,c){return o==null?"":h3.call(o,c)}function jr(o){var c=o==null?0:o.length;return c?o[c-1]:n}function yj(o,c,h){var g=o==null?0:o.length;if(!g)return-1;var _=g;return h!==n&&(_=We(h),_=_<0?rn(g+_,0):En(_,g-1)),c===c?YD(o,c,_):Wf(o,o1,_,!0)}function _j(o,c){return o&&o.length?F1(o,We(c)):n}var wj=Ge(RT);function RT(o,c){return o&&o.length&&c&&c.length?Bg(o,c):o}function Sj(o,c,h){return o&&o.length&&c&&c.length?Bg(o,c,xe(h,2)):o}function bj(o,c,h){return o&&o.length&&c&&c.length?Bg(o,c,n,h):o}var Tj=Gi(function(o,c){var h=o==null?0:o.length,g=Og(o,c);return B1(o,Nt(c,function(_){return Ki(_,h)?+_:_}).sort(Y1)),g});function Ej(o,c){var h=[];if(!(o&&o.length))return h;var g=-1,_=[],C=o.length;for(c=xe(c,3);++g<C;){var A=o[g];c(A,g,o)&&(h.push(A),_.push(g))}return B1(o,_),h}function om(o){return o==null?o:m3.call(o)}function kj(o,c,h){var g=o==null?0:o.length;return g?(h&&typeof h!="number"&&Fn(o,c,h)?(c=0,h=g):(c=c==null?0:We(c),h=h===n?g:We(h)),Fr(o,c,h)):[]}function Ij(o,c){return ud(o,c)}function Cj(o,c,h){return Hg(o,c,xe(h,2))}function Rj(o,c){var h=o==null?0:o.length;if(h){var g=ud(o,c);if(g<h&&ri(o[g],c))return g}return-1}function xj(o,c){return ud(o,c,!0)}function $j(o,c,h){return Hg(o,c,xe(h,2),!0)}function Pj(o,c){var h=o==null?0:o.length;if(h){var g=ud(o,c,!0)-1;if(ri(o[g],c))return g}return-1}function Aj(o){return o&&o.length?z1(o):[]}function Oj(o,c){return o&&o.length?z1(o,xe(c,2)):[]}function Nj(o){var c=o==null?0:o.length;return c?Fr(o,1,c):[]}function Mj(o,c,h){return o&&o.length?(c=h||c===n?1:We(c),Fr(o,0,c<0?0:c)):[]}function Lj(o,c,h){var g=o==null?0:o.length;return g?(c=h||c===n?1:We(c),c=g-c,Fr(o,c<0?0:c,g)):[]}function Dj(o,c){return o&&o.length?ld(o,xe(c,3),!1,!0):[]}function Fj(o,c){return o&&o.length?ld(o,xe(c,3)):[]}var jj=Ge(function(o){return As(yn(o,1,Kt,!0))}),Uj=Ge(function(o){var c=jr(o);return Kt(c)&&(c=n),As(yn(o,1,Kt,!0),xe(c,2))}),Bj=Ge(function(o){var c=jr(o);return c=typeof c=="function"?c:n,As(yn(o,1,Kt,!0),n,c)});function Wj(o){return o&&o.length?As(o):[]}function zj(o,c){return o&&o.length?As(o,xe(c,2)):[]}function Hj(o,c){return c=typeof c=="function"?c:n,o&&o.length?As(o,n,c):[]}function um(o){if(!(o&&o.length))return[];var c=0;return o=Cs(o,function(h){if(Kt(h))return c=rn(h.length,c),!0}),kg(c,function(h){return Nt(o,bg(h))})}function xT(o,c){if(!(o&&o.length))return[];var h=um(o);return c==null?h:Nt(h,function(g){return dr(c,n,g)})}var Vj=Ge(function(o,c){return Kt(o)?bl(o,c):[]}),qj=Ge(function(o){return qg(Cs(o,Kt))}),Gj=Ge(function(o){var c=jr(o);return Kt(c)&&(c=n),qg(Cs(o,Kt),xe(c,2))}),Kj=Ge(function(o){var c=jr(o);return c=typeof c=="function"?c:n,qg(Cs(o,Kt),n,c)}),Qj=Ge(um);function Jj(o,c){return G1(o||[],c||[],Sl)}function Yj(o,c){return G1(o||[],c||[],kl)}var Xj=Ge(function(o){var c=o.length,h=c>1?o[c-1]:n;return h=typeof h=="function"?(o.pop(),h):n,xT(o,h)});function $T(o){var c=k(o);return c.__chain__=!0,c}function Zj(o,c){return c(o),o}function yd(o,c){return c(o)}var eU=Gi(function(o){var c=o.length,h=c?o[0]:0,g=this.__wrapped__,_=function(A){return Og(A,o)};return c>1||this.__actions__.length||!(g instanceof Xe)||!Ki(h)?this.thru(_):(g=g.slice(h,+h+(c?1:0)),g.__actions__.push({func:yd,args:[_],thisArg:n}),new Lr(g,this.__chain__).thru(function(C){return c&&!C.length&&C.push(n),C}))});function tU(){return $T(this)}function nU(){return new Lr(this.value(),this.__chain__)}function rU(){this.__values__===n&&(this.__values__=HT(this.value()));var o=this.__index__>=this.__values__.length,c=o?n:this.__values__[this.__index__++];return{done:o,value:c}}function iU(){return this}function sU(o){for(var c,h=this;h instanceof rd;){var g=TT(h);g.__index__=0,g.__values__=n,c?_.__wrapped__=g:c=g;var _=g;h=h.__wrapped__}return _.__wrapped__=o,c}function aU(){var o=this.__wrapped__;if(o instanceof Xe){var c=o;return this.__actions__.length&&(c=new Xe(this)),c=c.reverse(),c.__actions__.push({func:yd,args:[om],thisArg:n}),new Lr(c,this.__chain__)}return this.thru(om)}function oU(){return q1(this.__wrapped__,this.__actions__)}var uU=cd(function(o,c,h){pt.call(o,h)?++o[h]:Vi(o,h,1)});function lU(o,c,h){var g=Ue(o)?s1:Z3;return h&&Fn(o,c,h)&&(c=n),g(o,xe(c,3))}function cU(o,c){var h=Ue(o)?Cs:x1;return h(o,xe(c,3))}var fU=rT(ET),dU=rT(kT);function hU(o,c){return yn(_d(o,c),1)}function pU(o,c){return yn(_d(o,c),Me)}function vU(o,c,h){return h=h===n?1:We(h),yn(_d(o,c),h)}function PT(o,c){var h=Ue(o)?Nr:Ps;return h(o,xe(c,3))}function AT(o,c){var h=Ue(o)?ND:R1;return h(o,xe(c,3))}var gU=cd(function(o,c,h){pt.call(o,h)?o[h].push(c):Vi(o,h,[c])});function mU(o,c,h,g){o=Yn(o)?o:Do(o),h=h&&!g?We(h):0;var _=o.length;return h<0&&(h=rn(_+h,0)),Ed(o)?h<=_&&o.indexOf(c,h)>-1:!!_&&ko(o,c,h)>-1}var yU=Ge(function(o,c,h){var g=-1,_=typeof c=="function",C=Yn(o)?G(o.length):[];return Ps(o,function(A){C[++g]=_?dr(c,A,h):Tl(A,c,h)}),C}),_U=cd(function(o,c,h){Vi(o,h,c)});function _d(o,c){var h=Ue(o)?Nt:M1;return h(o,xe(c,3))}function wU(o,c,h,g){return o==null?[]:(Ue(c)||(c=c==null?[]:[c]),h=g?n:h,Ue(h)||(h=h==null?[]:[h]),j1(o,c,h))}var SU=cd(function(o,c,h){o[h?0:1].push(c)},function(){return[[],[]]});function bU(o,c,h){var g=Ue(o)?wg:l1,_=arguments.length<3;return g(o,xe(c,4),h,_,Ps)}function TU(o,c,h){var g=Ue(o)?MD:l1,_=arguments.length<3;return g(o,xe(c,4),h,_,R1)}function EU(o,c){var h=Ue(o)?Cs:x1;return h(o,bd(xe(c,3)))}function kU(o){var c=Ue(o)?E1:mF;return c(o)}function IU(o,c,h){(h?Fn(o,c,h):c===n)?c=1:c=We(c);var g=Ue(o)?K3:yF;return g(o,c)}function CU(o){var c=Ue(o)?Q3:wF;return c(o)}function RU(o){if(o==null)return 0;if(Yn(o))return Ed(o)?Co(o):o.length;var c=kn(o);return c==ue||c==Ln?o.size:jg(o).length}function xU(o,c,h){var g=Ue(o)?Sg:SF;return h&&Fn(o,c,h)&&(c=n),g(o,xe(c,3))}var $U=Ge(function(o,c){if(o==null)return[];var h=c.length;return h>1&&Fn(o,c[0],c[1])?c=[]:h>2&&Fn(c[0],c[1],c[2])&&(c=[c[0]]),j1(o,yn(c,1),[])}),wd=c3||function(){return mn.Date.now()};function PU(o,c){if(typeof c!="function")throw new Mr(a);return o=We(o),function(){if(--o<1)return c.apply(this,arguments)}}function OT(o,c,h){return c=h?n:c,c=o&&c==null?o.length:c,qi(o,K,n,n,n,n,c)}function NT(o,c){var h;if(typeof c!="function")throw new Mr(a);return o=We(o),function(){return--o>0&&(h=c.apply(this,arguments)),o<=1&&(c=n),h}}var lm=Ge(function(o,c,h){var g=T;if(h.length){var _=xs(h,Mo(lm));g|=z}return qi(o,g,c,h,_)}),MT=Ge(function(o,c,h){var g=T|w;if(h.length){var _=xs(h,Mo(MT));g|=z}return qi(c,g,o,h,_)});function LT(o,c,h){c=h?n:c;var g=qi(o,$,n,n,n,n,n,c);return g.placeholder=LT.placeholder,g}function DT(o,c,h){c=h?n:c;var g=qi(o,N,n,n,n,n,n,c);return g.placeholder=DT.placeholder,g}function FT(o,c,h){var g,_,C,A,L,U,X=0,Z=!1,re=!1,ge=!0;if(typeof o!="function")throw new Mr(a);c=Ur(c)||0,Ft(h)&&(Z=!!h.leading,re="maxWait"in h,C=re?rn(Ur(h.maxWait)||0,c):C,ge="trailing"in h?!!h.trailing:ge);function Ce(Qt){var ii=g,Yi=_;return g=_=n,X=Qt,A=o.apply(Yi,ii),A}function $e(Qt){return X=Qt,L=Rl(Ze,c),Z?Ce(Qt):A}function qe(Qt){var ii=Qt-U,Yi=Qt-X,rE=c-ii;return re?En(rE,C-Yi):rE}function Pe(Qt){var ii=Qt-U,Yi=Qt-X;return U===n||ii>=c||ii<0||re&&Yi>=C}function Ze(){var Qt=wd();if(Pe(Qt))return it(Qt);L=Rl(Ze,qe(Qt))}function it(Qt){return L=n,ge&&g?Ce(Qt):(g=_=n,A)}function In(){L!==n&&K1(L),X=0,g=U=_=L=n}function jn(){return L===n?A:it(wd())}function gr(){var Qt=wd(),ii=Pe(Qt);if(g=arguments,_=this,U=Qt,ii){if(L===n)return $e(U);if(re)return K1(L),L=Rl(Ze,c),Ce(U)}return L===n&&(L=Rl(Ze,c)),A}return gr.cancel=In,gr.flush=jn,gr}var AU=Ge(function(o,c){return C1(o,1,c)}),OU=Ge(function(o,c,h){return C1(o,Ur(c)||0,h)});function NU(o){return qi(o,ee)}function Sd(o,c){if(typeof o!="function"||c!=null&&typeof c!="function")throw new Mr(a);var h=function g(){var _=arguments,C=c?c.apply(this,_):_[0],A=g.cache;if(A.has(C))return A.get(C);var L=o.apply(this,_);return g.cache=A.set(C,L)||A,L};return h.cache=new(Sd.Cache||Hi),h}Sd.Cache=Hi;function bd(o){if(typeof o!="function")throw new Mr(a);return function(){var c=arguments;switch(c.length){case 0:return!o.call(this);case 1:return!o.call(this,c[0]);case 2:return!o.call(this,c[0],c[1]);case 3:return!o.call(this,c[0],c[1],c[2])}return!o.apply(this,c)}}function MU(o){return NT(2,o)}var LU=bF(function(o,c){c=c.length==1&&Ue(c[0])?Nt(c[0],hr(xe())):Nt(yn(c,1),hr(xe()));var h=c.length;return Ge(function(g){for(var _=-1,C=En(g.length,h);++_<C;)g[_]=c[_].call(this,g[_]);return dr(o,this,g)})}),cm=Ge(function(o,c){var h=xs(c,Mo(cm));return qi(o,z,n,c,h)}),jT=Ge(function(o,c){var h=xs(c,Mo(jT));return qi(o,H,n,c,h)}),DU=Gi(function(o,c){return qi(o,P,n,n,n,c)});function FU(o,c){if(typeof o!="function")throw new Mr(a);return c=c===n?c:We(c),Ge(o,c)}function jU(o,c){if(typeof o!="function")throw new Mr(a);return c=c==null?0:rn(We(c),0),Ge(function(h){var g=h[c],_=Ns(h,0,c);return g&&Rs(_,g),dr(o,this,_)})}function UU(o,c,h){var g=!0,_=!0;if(typeof o!="function")throw new Mr(a);return Ft(h)&&(g="leading"in h?!!h.leading:g,_="trailing"in h?!!h.trailing:_),FT(o,c,{leading:g,maxWait:c,trailing:_})}function BU(o){return OT(o,1)}function WU(o,c){return cm(Kg(c),o)}function zU(){if(!arguments.length)return[];var o=arguments[0];return Ue(o)?o:[o]}function HU(o){return Dr(o,m)}function VU(o,c){return c=typeof c=="function"?c:n,Dr(o,m,c)}function qU(o){return Dr(o,p|m)}function GU(o,c){return c=typeof c=="function"?c:n,Dr(o,p|m,c)}function KU(o,c){return c==null||I1(o,c,dn(c))}function ri(o,c){return o===c||o!==o&&c!==c}var QU=pd(Lg),JU=pd(function(o,c){return o>=c}),Ra=A1(function(){return arguments}())?A1:function(o){return Ht(o)&&pt.call(o,"callee")&&!y1.call(o,"callee")},Ue=G.isArray,YU=Zb?hr(Zb):sF;function Yn(o){return o!=null&&Td(o.length)&&!Qi(o)}function Kt(o){return Ht(o)&&Yn(o)}function XU(o){return o===!0||o===!1||Ht(o)&&Dn(o)==je}var Ms=d3||Sm,ZU=e1?hr(e1):aF;function e4(o){return Ht(o)&&o.nodeType===1&&!xl(o)}function t4(o){if(o==null)return!0;if(Yn(o)&&(Ue(o)||typeof o=="string"||typeof o.splice=="function"||Ms(o)||Lo(o)||Ra(o)))return!o.length;var c=kn(o);if(c==ue||c==Ln)return!o.size;if(Cl(o))return!jg(o).length;for(var h in o)if(pt.call(o,h))return!1;return!0}function n4(o,c){return El(o,c)}function r4(o,c,h){h=typeof h=="function"?h:n;var g=h?h(o,c):n;return g===n?El(o,c,n,h):!!g}function fm(o){if(!Ht(o))return!1;var c=Dn(o);return c==Ie||c==cn||typeof o.message=="string"&&typeof o.name=="string"&&!xl(o)}function i4(o){return typeof o=="number"&&w1(o)}function Qi(o){if(!Ft(o))return!1;var c=Dn(o);return c==bi||c==Ye||c==he||c==nl}function UT(o){return typeof o=="number"&&o==We(o)}function Td(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=te}function Ft(o){var c=Br.default(o);return o!=null&&(c=="object"||c=="function")}function Ht(o){return o!=null&&Br.default(o)=="object"}var BT=t1?hr(t1):uF;function s4(o,c){return o===c||Fg(o,c,tm(c))}function a4(o,c,h){return h=typeof h=="function"?h:n,Fg(o,c,tm(c),h)}function o4(o){return WT(o)&&o!=+o}function u4(o){if(VF(o))throw new Fe(s);return O1(o)}function l4(o){return o===null}function c4(o){return o==null}function WT(o){return typeof o=="number"||Ht(o)&&Dn(o)==Le}function xl(o){if(!Ht(o)||Dn(o)!=ce)return!1;var c=Jf(o);if(c===null)return!0;var h=pt.call(c,"constructor")&&c.constructor;return typeof h=="function"&&h instanceof h&&qf.call(h)==a3}var dm=n1?hr(n1):lF;function f4(o){return UT(o)&&o>=-te&&o<=te}var zT=r1?hr(r1):cF;function Ed(o){return typeof o=="string"||!Ue(o)&&Ht(o)&&Dn(o)==Ti}function vr(o){return Br.default(o)=="symbol"||Ht(o)&&Dn(o)==Wi}var Lo=i1?hr(i1):fF;function d4(o){return o===n}function h4(o){return Ht(o)&&kn(o)==Dt}function p4(o){return Ht(o)&&Dn(o)==Xt}var v4=pd(Ug),g4=pd(function(o,c){return o<=c});function HT(o){if(!o)return[];if(Yn(o))return Ed(o)?ti(o):Jn(o);if(gl&&o[gl])return KD(o[gl]());var c=kn(o),h=c==ue?Cg:c==Ln?zf:Do;return h(o)}function Ji(o){if(!o)return o===0?o:0;if(o=Ur(o),o===Me||o===-Me){var c=o<0?-1:1;return c*ve}return o===o?o:0}function We(o){var c=Ji(o),h=c%1;return c===c?h?c-h:c:0}function VT(o){return o?Ea(We(o),0,W):0}function Ur(o){if(typeof o=="number")return o;if(vr(o))return be;if(Ft(o)){var c=typeof o.valueOf=="function"?o.valueOf():o;o=Ft(c)?c+"":c}if(typeof o!="string")return o===0?o:+o;o=c1(o);var h=rg.test(o);return h||sg.test(o)?PD(o.slice(2),h?2:8):ng.test(o)?be:+o}function qT(o){return Ci(o,Xn(o))}function m4(o){return o?Ea(We(o),-te,te):o===0?o:0}function ct(o){return o==null?"":pr(o)}var y4=Oo(function(o,c){if(Cl(c)||Yn(c)){Ci(c,dn(c),o);return}for(var h in c)pt.call(c,h)&&Sl(o,h,c[h])}),GT=Oo(function(o,c){Ci(c,Xn(c),o)}),kd=Oo(function(o,c,h,g){Ci(c,Xn(c),o,g)}),_4=Oo(function(o,c,h,g){Ci(c,dn(c),o,g)}),w4=Gi(Og);function S4(o,c){var h=Ao(o);return c==null?h:k1(h,c)}var b4=Ge(function(o,c){o=bt(o);var h=-1,g=c.length,_=g>2?c[2]:n;for(_&&Fn(c[0],c[1],_)&&(g=1);++h<g;)for(var C=c[h],A=Xn(C),L=-1,U=A.length;++L<U;){var X=A[L],Z=o[X];(Z===n||ri(Z,xo[X])&&!pt.call(o,X))&&(o[X]=C[X])}return o}),T4=Ge(function(o){return o.push(n,cT),dr(KT,n,o)});function E4(o,c){return a1(o,xe(c,3),Ii)}function k4(o,c){return a1(o,xe(c,3),Mg)}function I4(o,c){return o==null?o:Ng(o,xe(c,3),Xn)}function C4(o,c){return o==null?o:$1(o,xe(c,3),Xn)}function R4(o,c){return o&&Ii(o,xe(c,3))}function x4(o,c){return o&&Mg(o,xe(c,3))}function $4(o){return o==null?[]:ad(o,dn(o))}function P4(o){return o==null?[]:ad(o,Xn(o))}function hm(o,c,h){var g=o==null?n:ka(o,c);return g===n?h:g}function A4(o,c){return o!=null&&hT(o,c,tF)}function pm(o,c){return o!=null&&hT(o,c,nF)}var O4=sT(function(o,c,h){c!=null&&typeof c.toString!="function"&&(c=Gf.call(c)),o[c]=h},gm(Zn)),N4=sT(function(o,c,h){c!=null&&typeof c.toString!="function"&&(c=Gf.call(c)),pt.call(o,c)?o[c].push(h):o[c]=[h]},xe),M4=Ge(Tl);function dn(o){return Yn(o)?T1(o):jg(o)}function Xn(o){return Yn(o)?T1(o,!0):dF(o)}function L4(o,c){var h={};return c=xe(c,3),Ii(o,function(g,_,C){Vi(h,c(g,_,C),g)}),h}function D4(o,c){var h={};return c=xe(c,3),Ii(o,function(g,_,C){Vi(h,_,c(g,_,C))}),h}var F4=Oo(function(o,c,h){od(o,c,h)}),KT=Oo(function(o,c,h,g){od(o,c,h,g)}),j4=Gi(function(o,c){var h={};if(o==null)return h;var g=!1;c=Nt(c,function(C){return C=Os(C,o),g||(g=C.length>1),C}),Ci(o,Zg(o),h),g&&(h=Dr(h,p|v|m,OF));for(var _=c.length;_--;)Vg(h,c[_]);return h});function U4(o,c){return QT(o,bd(xe(c)))}var B4=Gi(function(o,c){return o==null?{}:pF(o,c)});function QT(o,c){if(o==null)return{};var h=Nt(Zg(o),function(g){return[g]});return c=xe(c),U1(o,h,function(g,_){return c(g,_[0])})}function W4(o,c,h){c=Os(c,o);var g=-1,_=c.length;for(_||(_=1,o=n);++g<_;){var C=o==null?n:o[Ri(c[g])];C===n&&(g=_,C=h),o=Qi(C)?C.call(o):C}return o}function z4(o,c,h){return o==null?o:kl(o,c,h)}function H4(o,c,h,g){return g=typeof g=="function"?g:n,o==null?o:kl(o,c,h,g)}var JT=uT(dn),YT=uT(Xn);function V4(o,c,h){var g=Ue(o),_=g||Ms(o)||Lo(o);if(c=xe(c,4),h==null){var C=o&&o.constructor;_?h=g?new C:[]:Ft(o)?h=Qi(C)?Ao(Jf(o)):{}:h={}}return(_?Nr:Ii)(o,function(A,L,U){return c(h,A,L,U)}),h}function q4(o,c){return o==null?!0:Vg(o,c)}function G4(o,c,h){return o==null?o:V1(o,c,Kg(h))}function K4(o,c,h,g){return g=typeof g=="function"?g:n,o==null?o:V1(o,c,Kg(h),g)}function Do(o){return o==null?[]:Ig(o,dn(o))}function Q4(o){return o==null?[]:Ig(o,Xn(o))}function J4(o,c,h){return h===n&&(h=c,c=n),h!==n&&(h=Ur(h),h=h===h?h:0),c!==n&&(c=Ur(c),c=c===c?c:0),Ea(Ur(o),c,h)}function Y4(o,c,h){return c=Ji(c),h===n?(h=c,c=0):h=Ji(h),o=Ur(o),rF(o,c,h)}function X4(o,c,h){if(h&&typeof h!="boolean"&&Fn(o,c,h)&&(c=h=n),h===n&&(typeof c=="boolean"?(h=c,c=n):typeof o=="boolean"&&(h=o,o=n)),o===n&&c===n?(o=0,c=1):(o=Ji(o),c===n?(c=o,o=0):c=Ji(c)),o>c){var g=o;o=c,c=g}if(h||o%1||c%1){var _=S1();return En(o+_*(c-o+$D("1e-"+((_+"").length-1))),c)}return Wg(o,c)}var Z4=No(function(o,c,h){return c=c.toLowerCase(),o+(h?XT(c):c)});function XT(o){return vm(ct(o).toLowerCase())}function ZT(o){return o=ct(o),o&&o.replace(og,zD).replace(wD,"")}function eB(o,c,h){o=ct(o),c=pr(c);var g=o.length;h=h===n?g:Ea(We(h),0,g);var _=h;return h-=c.length,h>=0&&o.slice(h,_)==c}function tB(o){return o=ct(o),o&&ll.test(o)?o.replace(Af,HD):o}function nB(o){return o=ct(o),o&&Gv.test(o)?o.replace(cl,"\\$&"):o}var rB=No(function(o,c,h){return o+(h?"-":"")+c.toLowerCase()}),iB=No(function(o,c,h){return o+(h?" ":"")+c.toLowerCase()}),sB=nT("toLowerCase");function aB(o,c,h){o=ct(o),c=We(c);var g=c?Co(o):0;if(!c||g>=c)return o;var _=(c-g)/2;return hd(ed(_),h)+o+hd(Zf(_),h)}function oB(o,c,h){o=ct(o),c=We(c);var g=c?Co(o):0;return c&&g<c?o+hd(c-g,h):o}function uB(o,c,h){o=ct(o),c=We(c);var g=c?Co(o):0;return c&&g<c?hd(c-g,h)+o:o}function lB(o,c,h){return h||c==null?c=0:c&&(c=+c),g3(ct(o).replace(fl,""),c||0)}function cB(o,c,h){return(h?Fn(o,c,h):c===n)?c=1:c=We(c),zg(ct(o),c)}function fB(){var o=arguments,c=ct(o[0]);return o.length<3?c:c.replace(o[1],o[2])}var dB=No(function(o,c,h){return o+(h?"_":"")+c.toLowerCase()});function hB(o,c,h){return h&&typeof h!="number"&&Fn(o,c,h)&&(c=h=n),h=h===n?W:h>>>0,h?(o=ct(o),o&&(typeof c=="string"||c!=null&&!dm(c))&&(c=pr(c),!c&&Io(o))?Ns(ti(o),0,h):o.split(c,h)):[]}var pB=No(function(o,c,h){return o+(h?" ":"")+vm(c)});function vB(o,c,h){return o=ct(o),h=h==null?0:Ea(We(h),0,o.length),c=pr(c),o.slice(h,h+c.length)==c}function gB(o,c,h){var g=k.templateSettings;h&&Fn(o,c,h)&&(c=n),o=ct(o),c=kd({},c,g,lT);var _=kd({},c.imports,g.imports,lT),C=dn(_),A=Ig(_,C),L,U,X=0,Z=c.interpolate||bo,re="__p += '",ge=Rg((c.escape||bo).source+"|"+Z.source+"|"+(Z===Mf?tg:bo).source+"|"+(c.evaluate||bo).source+"|$","g"),Ce="//# sourceURL="+(pt.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++kD+"]")+`
`;o.replace(ge,function(Pe,Ze,it,In,jn,gr){return it||(it=In),re+=o.slice(X,gr).replace(ug,VD),Ze&&(L=!0,re+=`' +
__e(`+Ze+`) +
'`),jn&&(U=!0,re+=`';
`+jn+`;
__p += '`),it&&(re+=`' +
((__t = (`+it+`)) == null ? '' : __t) +
'`),X=gr+Pe.length,Pe}),re+=`';
`;var $e=pt.call(c,"variable")&&c.variable;if(!$e)re=`with (obj) {
`+re+`
}
`;else if(Zv.test($e))throw new Fe(l);re=(U?re.replace(Pf,""):re).replace(Bv,"$1").replace(Wv,"$1;"),re="function("+($e||"obj")+`) {
`+($e?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(L?", __e = _.escape":"")+(U?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+re+`return __p
}`;var qe=tE(function(){return lt(C,Ce+"return "+re).apply(n,A)});if(qe.source=re,fm(qe))throw qe;return qe}function mB(o){return ct(o).toLowerCase()}function yB(o){return ct(o).toUpperCase()}function _B(o,c,h){if(o=ct(o),o&&(h||c===n))return c1(o);if(!o||!(c=pr(c)))return o;var g=ti(o),_=ti(c),C=f1(g,_),A=d1(g,_)+1;return Ns(g,C,A).join("")}function wB(o,c,h){if(o=ct(o),o&&(h||c===n))return o.slice(0,p1(o)+1);if(!o||!(c=pr(c)))return o;var g=ti(o),_=d1(g,ti(c))+1;return Ns(g,0,_).join("")}function SB(o,c,h){if(o=ct(o),o&&(h||c===n))return o.replace(fl,"");if(!o||!(c=pr(c)))return o;var g=ti(o),_=f1(g,ti(c));return Ns(g,_).join("")}function bB(o,c){var h=Y,g=oe;if(Ft(c)){var _="separator"in c?c.separator:_;h="length"in c?We(c.length):h,g="omission"in c?pr(c.omission):g}o=ct(o);var C=o.length;if(Io(o)){var A=ti(o);C=A.length}if(h>=C)return o;var L=h-Co(g);if(L<1)return g;var U=A?Ns(A,0,L).join(""):o.slice(0,L);if(_===n)return U+g;if(A&&(L+=U.length-L),dm(_)){if(o.slice(L).search(_)){var X,Z=U;for(_.global||(_=Rg(_.source,ct(Lf.exec(_))+"g")),_.lastIndex=0;X=_.exec(Z);)var re=X.index;U=U.slice(0,re===n?L:re)}}else if(o.indexOf(pr(_),L)!=L){var ge=U.lastIndexOf(_);ge>-1&&(U=U.slice(0,ge))}return U+g}function TB(o){return o=ct(o),o&&zv.test(o)?o.replace(fn,XD):o}var EB=No(function(o,c,h){return o+(h?" ":"")+c.toUpperCase()}),vm=nT("toUpperCase");function eE(o,c,h){return o=ct(o),c=h?n:c,c===n?GD(o)?t3(o):FD(o):o.match(c)||[]}var tE=Ge(function(o,c){try{return dr(o,n,c)}catch(h){return fm(h)?h:new Fe(h)}}),kB=Gi(function(o,c){return Nr(c,function(h){h=Ri(h),Vi(o,h,lm(o[h],o))}),o});function IB(o){var c=o==null?0:o.length,h=xe();return o=c?Nt(o,function(g){if(typeof g[1]!="function")throw new Mr(a);return[h(g[0]),g[1]]}):[],Ge(function(g){for(var _=-1;++_<c;){var C=o[_];if(dr(C[0],this,g))return dr(C[1],this,g)}})}function CB(o){return X3(Dr(o,p))}function gm(o){return function(){return o}}function RB(o,c){return o==null||o!==o?c:o}var xB=iT(),$B=iT(!0);function Zn(o){return o}function mm(o){return N1(typeof o=="function"?o:Dr(o,p))}function PB(o){return L1(Dr(o,p))}function AB(o,c){return D1(o,Dr(c,p))}var OB=Ge(function(o,c){return function(h){return Tl(h,o,c)}}),NB=Ge(function(o,c){return function(h){return Tl(o,h,c)}});function ym(o,c,h){var g=dn(c),_=ad(c,g);h==null&&!(Ft(c)&&(_.length||!g.length))&&(h=c,c=o,o=this,_=ad(c,dn(c)));var C=!(Ft(h)&&"chain"in h)||!!h.chain,A=Qi(o);return Nr(_,function(L){var U=c[L];o[L]=U,A&&(o.prototype[L]=function(){var X=this.__chain__;if(C||X){var Z=o(this.__wrapped__),re=Z.__actions__=Jn(this.__actions__);return re.push({func:U,args:arguments,thisArg:o}),Z.__chain__=X,Z}return U.apply(o,Rs([this.value()],arguments))})}),o}function MB(){return mn._===this&&(mn._=o3),this}function _m(){}function LB(o){return o=We(o),Ge(function(c){return F1(c,o)})}var DB=Jg(Nt),FB=Jg(s1),jB=Jg(Sg);function nE(o){return rm(o)?bg(Ri(o)):vF(o)}function UB(o){return function(c){return o==null?n:ka(o,c)}}var BB=aT(),WB=aT(!0);function wm(){return[]}function Sm(){return!1}function zB(){return{}}function HB(){return""}function VB(){return!0}function qB(o,c){if(o=We(o),o<1||o>te)return[];var h=W,g=En(o,W);c=xe(c),o-=W;for(var _=kg(g,c);++h<o;)c(h);return _}function GB(o){return Ue(o)?Nt(o,Ri):vr(o)?[o]:Jn(bT(ct(o)))}function KB(o){var c=++s3;return ct(o)+c}var QB=dd(function(o,c){return o+c},0),JB=Yg("ceil"),YB=dd(function(o,c){return o/c},1),XB=Yg("floor");function ZB(o){return o&&o.length?sd(o,Zn,Lg):n}function e6(o,c){return o&&o.length?sd(o,xe(c,2),Lg):n}function t6(o){return u1(o,Zn)}function n6(o,c){return u1(o,xe(c,2))}function r6(o){return o&&o.length?sd(o,Zn,Ug):n}function i6(o,c){return o&&o.length?sd(o,xe(c,2),Ug):n}var s6=dd(function(o,c){return o*c},1),a6=Yg("round"),o6=dd(function(o,c){return o-c},0);function u6(o){return o&&o.length?Eg(o,Zn):0}function l6(o,c){return o&&o.length?Eg(o,xe(c,2)):0}return k.after=PU,k.ary=OT,k.assign=y4,k.assignIn=GT,k.assignInWith=kd,k.assignWith=_4,k.at=w4,k.before=NT,k.bind=lm,k.bindAll=kB,k.bindKey=MT,k.castArray=zU,k.chain=$T,k.chunk=XF,k.compact=ZF,k.concat=ej,k.cond=IB,k.conforms=CB,k.constant=gm,k.countBy=uU,k.create=S4,k.curry=LT,k.curryRight=DT,k.debounce=FT,k.defaults=b4,k.defaultsDeep=T4,k.defer=AU,k.delay=OU,k.difference=tj,k.differenceBy=nj,k.differenceWith=rj,k.drop=ij,k.dropRight=sj,k.dropRightWhile=aj,k.dropWhile=oj,k.fill=uj,k.filter=cU,k.flatMap=hU,k.flatMapDeep=pU,k.flatMapDepth=vU,k.flatten=IT,k.flattenDeep=lj,k.flattenDepth=cj,k.flip=NU,k.flow=xB,k.flowRight=$B,k.fromPairs=fj,k.functions=$4,k.functionsIn=P4,k.groupBy=gU,k.initial=hj,k.intersection=pj,k.intersectionBy=vj,k.intersectionWith=gj,k.invert=O4,k.invertBy=N4,k.invokeMap=yU,k.iteratee=mm,k.keyBy=_U,k.keys=dn,k.keysIn=Xn,k.map=_d,k.mapKeys=L4,k.mapValues=D4,k.matches=PB,k.matchesProperty=AB,k.memoize=Sd,k.merge=F4,k.mergeWith=KT,k.method=OB,k.methodOf=NB,k.mixin=ym,k.negate=bd,k.nthArg=LB,k.omit=j4,k.omitBy=U4,k.once=MU,k.orderBy=wU,k.over=DB,k.overArgs=LU,k.overEvery=FB,k.overSome=jB,k.partial=cm,k.partialRight=jT,k.partition=SU,k.pick=B4,k.pickBy=QT,k.property=nE,k.propertyOf=UB,k.pull=wj,k.pullAll=RT,k.pullAllBy=Sj,k.pullAllWith=bj,k.pullAt=Tj,k.range=BB,k.rangeRight=WB,k.rearg=DU,k.reject=EU,k.remove=Ej,k.rest=FU,k.reverse=om,k.sampleSize=IU,k.set=z4,k.setWith=H4,k.shuffle=CU,k.slice=kj,k.sortBy=$U,k.sortedUniq=Aj,k.sortedUniqBy=Oj,k.split=hB,k.spread=jU,k.tail=Nj,k.take=Mj,k.takeRight=Lj,k.takeRightWhile=Dj,k.takeWhile=Fj,k.tap=Zj,k.throttle=UU,k.thru=yd,k.toArray=HT,k.toPairs=JT,k.toPairsIn=YT,k.toPath=GB,k.toPlainObject=qT,k.transform=V4,k.unary=BU,k.union=jj,k.unionBy=Uj,k.unionWith=Bj,k.uniq=Wj,k.uniqBy=zj,k.uniqWith=Hj,k.unset=q4,k.unzip=um,k.unzipWith=xT,k.update=G4,k.updateWith=K4,k.values=Do,k.valuesIn=Q4,k.without=Vj,k.words=eE,k.wrap=WU,k.xor=qj,k.xorBy=Gj,k.xorWith=Kj,k.zip=Qj,k.zipObject=Jj,k.zipObjectDeep=Yj,k.zipWith=Xj,k.entries=JT,k.entriesIn=YT,k.extend=GT,k.extendWith=kd,ym(k,k),k.add=QB,k.attempt=tE,k.camelCase=Z4,k.capitalize=XT,k.ceil=JB,k.clamp=J4,k.clone=HU,k.cloneDeep=qU,k.cloneDeepWith=GU,k.cloneWith=VU,k.conformsTo=KU,k.deburr=ZT,k.defaultTo=RB,k.divide=YB,k.endsWith=eB,k.eq=ri,k.escape=tB,k.escapeRegExp=nB,k.every=lU,k.find=fU,k.findIndex=ET,k.findKey=E4,k.findLast=dU,k.findLastIndex=kT,k.findLastKey=k4,k.floor=XB,k.forEach=PT,k.forEachRight=AT,k.forIn=I4,k.forInRight=C4,k.forOwn=R4,k.forOwnRight=x4,k.get=hm,k.gt=QU,k.gte=JU,k.has=A4,k.hasIn=pm,k.head=CT,k.identity=Zn,k.includes=mU,k.indexOf=dj,k.inRange=Y4,k.invoke=M4,k.isArguments=Ra,k.isArray=Ue,k.isArrayBuffer=YU,k.isArrayLike=Yn,k.isArrayLikeObject=Kt,k.isBoolean=XU,k.isBuffer=Ms,k.isDate=ZU,k.isElement=e4,k.isEmpty=t4,k.isEqual=n4,k.isEqualWith=r4,k.isError=fm,k.isFinite=i4,k.isFunction=Qi,k.isInteger=UT,k.isLength=Td,k.isMap=BT,k.isMatch=s4,k.isMatchWith=a4,k.isNaN=o4,k.isNative=u4,k.isNil=c4,k.isNull=l4,k.isNumber=WT,k.isObject=Ft,k.isObjectLike=Ht,k.isPlainObject=xl,k.isRegExp=dm,k.isSafeInteger=f4,k.isSet=zT,k.isString=Ed,k.isSymbol=vr,k.isTypedArray=Lo,k.isUndefined=d4,k.isWeakMap=h4,k.isWeakSet=p4,k.join=mj,k.kebabCase=rB,k.last=jr,k.lastIndexOf=yj,k.lowerCase=iB,k.lowerFirst=sB,k.lt=v4,k.lte=g4,k.max=ZB,k.maxBy=e6,k.mean=t6,k.meanBy=n6,k.min=r6,k.minBy=i6,k.stubArray=wm,k.stubFalse=Sm,k.stubObject=zB,k.stubString=HB,k.stubTrue=VB,k.multiply=s6,k.nth=_j,k.noConflict=MB,k.noop=_m,k.now=wd,k.pad=aB,k.padEnd=oB,k.padStart=uB,k.parseInt=lB,k.random=X4,k.reduce=bU,k.reduceRight=TU,k.repeat=cB,k.replace=fB,k.result=W4,k.round=a6,k.runInContext=j,k.sample=kU,k.size=RU,k.snakeCase=dB,k.some=xU,k.sortedIndex=Ij,k.sortedIndexBy=Cj,k.sortedIndexOf=Rj,k.sortedLastIndex=xj,k.sortedLastIndexBy=$j,k.sortedLastIndexOf=Pj,k.startCase=pB,k.startsWith=vB,k.subtract=o6,k.sum=u6,k.sumBy=l6,k.template=gB,k.times=qB,k.toFinite=Ji,k.toInteger=We,k.toLength=VT,k.toLower=mB,k.toNumber=Ur,k.toSafeInteger=m4,k.toString=ct,k.toUpper=yB,k.trim=_B,k.trimEnd=wB,k.trimStart=SB,k.truncate=bB,k.unescape=TB,k.uniqueId=KB,k.upperCase=EB,k.upperFirst=vm,k.each=PT,k.eachRight=AT,k.first=CT,ym(k,function(){var o={};return Ii(k,function(c,h){pt.call(k.prototype,h)||(o[h]=c)}),o}(),{chain:!1}),k.VERSION=r,Nr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){k[o].placeholder=k}),Nr(["drop","take"],function(o,c){Xe.prototype[o]=function(h){h=h===n?1:rn(We(h),0);var g=this.__filtered__&&!c?new Xe(this):this.clone();return g.__filtered__?g.__takeCount__=En(h,g.__takeCount__):g.__views__.push({size:En(h,W),type:o+(g.__dir__<0?"Right":"")}),g},Xe.prototype[o+"Right"]=function(h){return this.reverse()[o](h).reverse()}}),Nr(["filter","map","takeWhile"],function(o,c){var h=c+1,g=h==we||h==_e;Xe.prototype[o]=function(_){var C=this.clone();return C.__iteratees__.push({iteratee:xe(_,3),type:h}),C.__filtered__=C.__filtered__||g,C}}),Nr(["head","last"],function(o,c){var h="take"+(c?"Right":"");Xe.prototype[o]=function(){return this[h](1).value()[0]}}),Nr(["initial","tail"],function(o,c){var h="drop"+(c?"":"Right");Xe.prototype[o]=function(){return this.__filtered__?new Xe(this):this[h](1)}}),Xe.prototype.compact=function(){return this.filter(Zn)},Xe.prototype.find=function(o){return this.filter(o).head()},Xe.prototype.findLast=function(o){return this.reverse().find(o)},Xe.prototype.invokeMap=Ge(function(o,c){return typeof o=="function"?new Xe(this):this.map(function(h){return Tl(h,o,c)})}),Xe.prototype.reject=function(o){return this.filter(bd(xe(o)))},Xe.prototype.slice=function(o,c){o=We(o);var h=this;return h.__filtered__&&(o>0||c<0)?new Xe(h):(o<0?h=h.takeRight(-o):o&&(h=h.drop(o)),c!==n&&(c=We(c),h=c<0?h.dropRight(-c):h.take(c-o)),h)},Xe.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},Xe.prototype.toArray=function(){return this.take(W)},Ii(Xe.prototype,function(o,c){var h=/^(?:filter|find|map|reject)|While$/.test(c),g=/^(?:head|last)$/.test(c),_=k[g?"take"+(c=="last"?"Right":""):c],C=g||/^find/.test(c);_&&(k.prototype[c]=function(){var A=this.__wrapped__,L=g?[1]:arguments,U=A instanceof Xe,X=L[0],Z=U||Ue(A),re=function(it){var In=_.apply(k,Rs([it],L));return g&&ge?In[0]:In};Z&&h&&typeof X=="function"&&X.length!=1&&(U=Z=!1);var ge=this.__chain__,Ce=!!this.__actions__.length,$e=C&&!ge,qe=U&&!Ce;if(!C&&Z){A=qe?A:new Xe(this);var Pe=o.apply(A,L);return Pe.__actions__.push({func:yd,args:[re],thisArg:n}),new Lr(Pe,ge)}return $e&&qe?o.apply(this,L):(Pe=this.thru(re),$e?g?Pe.value()[0]:Pe.value():Pe)})}),Nr(["pop","push","shift","sort","splice","unshift"],function(o){var c=Hf[o],h=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",g=/^(?:pop|shift)$/.test(o);k.prototype[o]=function(){var _=arguments;if(g&&!this.__chain__){var C=this.value();return c.apply(Ue(C)?C:[],_)}return this[h](function(A){return c.apply(Ue(A)?A:[],_)})}}),Ii(Xe.prototype,function(o,c){var h=k[c];if(h){var g=h.name+"";pt.call(Po,g)||(Po[g]=[]),Po[g].push({name:c,func:h})}}),Po[fd(n,w).name]=[{name:"wrapper",func:n}],Xe.prototype.clone=T3,Xe.prototype.reverse=E3,Xe.prototype.value=k3,k.prototype.at=eU,k.prototype.chain=tU,k.prototype.commit=nU,k.prototype.next=rU,k.prototype.plant=sU,k.prototype.reverse=aU,k.prototype.toJSON=k.prototype.valueOf=k.prototype.value=oU,k.prototype.first=k.prototype.head,gl&&(k.prototype[gl]=iU),k},Ro=n3();wa?((wa.exports=Ro)._=Ro,mg._=Ro):mn._=Ro}).call(Yl)})($n,$n.exports);function Hx(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ghe(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(f){throw f},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,l;return{s:function(){n=n.call(e)},n:function(){var f=n.next();return s=f.done,f},e:function(f){a=!0,l=f},f:function(){try{!s&&n.return!=null&&n.return()}finally{if(a)throw l}}}}function ghe(e,t){if(e){if(typeof e=="string")return Vx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vx(e,t)}}function Vx(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Xl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qx(Object(n),!0).forEach(function(r){tt.default(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qx(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function cD(e){var t=mhe();return function(){var r=Yt.default(e),i;if(t){var s=Yt.default(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return _a.default(this,i)}}function mhe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var vS=function(e){Kn.default(n,e);var t=cD(n);function n(r,i,s){var a;nt.default(this,n),a=t.call(this,r,s);var l=function(f,d){return typeof d.ttl=="number"?{ttl:d.ttl}:f};return a.updateMergingQueue=new uD(l),a.cache=new Gb,a.descriptor=i,a.descriptor.date_updated=new Date(a.descriptor.date_updated),a}return rt.default(n,[{key:"uri",get:function(){return this.descriptor.url}},{key:"revision",get:function(){return this.descriptor.revision}},{key:"lastEventId",get:function(){return this.descriptor.last_event_id}},{key:"links",get:function(){return this.descriptor.links}},{key:"dateExpires",get:function(){return this.descriptor.date_expires}},{key:"type",get:function(){return"list"}},{key:"indexName",get:function(){}},{key:"queryString",get:function(){}},{key:"sid",get:function(){return this.descriptor.sid}},{key:"uniqueName",get:function(){return this.descriptor.unique_name||null}},{key:"dateUpdated",get:function(){return this.descriptor.date_updated}},{key:"_addOrUpdateItemOnServer",value:function(){var r=ae.default(D.default.mark(function s(a,l,u,f){var d,p;return D.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return d={data:l},f!==void 0&&(d.ttl=f),m.next=4,this.services.network.post(a,d,u);case 4:return p=m.sent,p.body.data=l,p.body.date_updated=new Date(p.body.date_updated),m.abrupt("return",p.body);case 8:case"end":return m.stop()}},s,this)}));function i(s,a,l,u){return r.apply(this,arguments)}return i}()},{key:"push",value:function(){var r=ae.default(D.default.mark(function s(a,l){var u,f,d;return D.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return u=(l||{}).ttl,v.next=3,this._addOrUpdateItemOnServer(this.links.items,a,void 0,u);case 3:return f=v.sent,d=Number(f.index),this._handleItemMutated(d,f.url,f.last_event_id,f.revision,a,f.date_updated,f.date_expires,!0,!1),v.abrupt("return",this.cache.getValue(d));case 7:case"end":return v.stop()}},s,this)}));function i(s,a){return r.apply(this,arguments)}return i}()},{key:"set",value:function(){var r=ae.default(D.default.mark(function s(a,l,u){var f=this,d;return D.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return d=u||{},v.abrupt("return",this.updateMergingQueue.squashAndAdd(a,d,function(m){return f._updateItemUnconditionally(a,l,m.ttl)}));case 2:case"end":return v.stop()}},s,this)}));function i(s,a,l){return r.apply(this,arguments)}return i}()},{key:"_updateItemUnconditionally",value:function(){var r=ae.default(D.default.mark(function s(a,l,u){var f,d;return D.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,this.get(a);case 2:return f=v.sent,v.next=5,this._addOrUpdateItemOnServer(f.url,l,void 0,u);case 5:return d=v.sent,this._handleItemMutated(a,d.url,d.last_event_id,d.revision,d.data,d.date_updated,d.date_expires,!1,!1),v.abrupt("return",this.cache.getValue(a));case 8:case"end":return v.stop()}},s,this)}));function i(s,a,l){return r.apply(this,arguments)}return i}()},{key:"_updateItemWithIfMatch",value:function(){var r=ae.default(D.default.mark(function s(a,l,u){var f,d,p,v;return D.default.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,this.get(a);case 2:if(f=y.sent,d=l(pi(f.data)),!d){y.next=25;break}return p=f.revision,y.prev=6,y.next=9,this._addOrUpdateItemOnServer(f.url,d,p,u);case 9:return v=y.sent,this._handleItemMutated(a,v.url,v.last_event_id,v.revision,v.data,v.date_updated,v.date_expires,!1,!1),y.abrupt("return",this.cache.getValue(a));case 14:if(y.prev=14,y.t0=y.catch(6),y.t0.status!==412){y.next=22;break}return y.next=19,this._getItemFromServer(a);case 19:return y.abrupt("return",this._updateItemWithIfMatch(a,l,u));case 22:throw y.t0;case 23:y.next=26;break;case 25:return y.abrupt("return",f);case 26:case"end":return y.stop()}},s,this,[[6,14]])}));function i(s,a,l){return r.apply(this,arguments)}return i}()},{key:"mutate",value:function(){var r=ae.default(D.default.mark(function s(a,l,u){var f=this,d;return D.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return d=u||{},v.abrupt("return",this.updateMergingQueue.add(a,d,function(m){return f._updateItemWithIfMatch(a,l,m.ttl)}));case 2:case"end":return v.stop()}},s,this)}));function i(s,a,l){return r.apply(this,arguments)}return i}()},{key:"update",value:function(){var r=ae.default(D.default.mark(function s(a,l,u){return D.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.mutate(a,function(p){return Object.assign(p,l)},u));case 1:case"end":return d.stop()}},s,this)}));function i(s,a,l){return r.apply(this,arguments)}return i}()},{key:"remove",value:function(){var r=ae.default(D.default.mark(function s(a){var l,u,f;return D.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.get(a);case 2:return l=p.sent,u=pi(l.data),p.next=6,this.services.network.delete(l.url);case 6:f=p.sent,this._handleItemRemoved(a,f.body.last_event_id,u,new Date(f.body.date_updated),!1);case 8:case"end":return p.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"get",value:function(){var r=ae.default(D.default.mark(function s(a){var l;return D.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(l=this.cache.get(a),!l){f.next=3;break}return f.abrupt("return",l.value);case 3:return f.abrupt("return",this._getItemFromServer(a));case 4:case"end":return f.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"_getItemFromServer",value:function(){var r=ae.default(D.default.mark(function s(a){var l;return D.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this._queryItemsFromServer({index:a});case 2:if(l=f.sent,!(l.items.length<1)){f.next=7;break}throw new lr("No item with index ".concat(a," found"),404,54151);case 7:return f.abrupt("return",l.items[0]);case 8:case"end":return f.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"queryItems",value:function(){var r=ae.default(D.default.mark(function s(a){var l,u,f,d,p,v,m,y,E,T,w,b,$,N,z,H,K,P,ee,Y,oe,de,me,we,ke,_e,Me,te,ve;return D.default.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if(!a.index){W.next=5;break}if(E=this.cache.get(a.index),!E){W.next=4;break}return W.abrupt("return",this.makePaginator(E.isValid?[E.value]:[],a,!1,!1));case 4:return W.abrupt("return",this._querySingleItemFromServer(a.index));case 5:T=!!a.nextPageItemId||!!a.prevPageItemId,w=Xl({},a),T&&(a.from=(b=($=a.nextPageItemId)!==null&&$!==void 0?$:a.prevPageItemId)!==null&&b!==void 0?b:a.from),N=!!a.prevPageItemId,z=a.order==="desc"?N?this.cache.getIterator((l=(u=a.prevPageItemId)!==null&&u!==void 0?u:a.from)!==null&&l!==void 0?l:null):this.cache.getReverseIterator((f=(d=a.nextPageItemId)!==null&&d!==void 0?d:a.from)!==null&&f!==void 0?f:null):N?this.cache.getReverseIterator((p=(v=a.prevPageItemId)!==null&&v!==void 0?v:a.from)!==null&&p!==void 0?p:null):this.cache.getIterator((m=(y=a.nextPageItemId)!==null&&y!==void 0?y:a.from)!==null&&m!==void 0?m:null),H=[],K=T?a.limit+1:a.limit,P=Hx(z),W.prev=13,P.s();case 15:if((ee=P.n()).done){W.next=25;break}if(Y=ee.value,!(T&&Y.value.index==a.from)){W.next=19;break}return W.abrupt("continue",23);case 19:if(H.push(Y.value),!(H.length>=a.limit)){W.next=23;break}return N&&$n.exports.reverse(H),W.abrupt("return",this.makePaginator(H,a,this._prevPageAllowed(H,a.order),this._nextPageAllowed(H,a.order)));case 23:W.next=15;break;case 25:W.next=30;break;case 27:W.prev=27,W.t0=W.catch(13),P.e(W.t0);case 30:return W.prev=30,P.f(),W.finish(30);case 33:if(H.length>0&&(a.from=$n.exports.last(H).index),oe=Math.max(K-H.length,10),N&&(a.order=a.order==="desc"?"asc":"desc"),de=a.from!==(w.order==="desc"?N?this.cache.collectionEnd:this.cache.collectionBegin:N?this.cache.collectionBegin:this.cache.collectionEnd),!de){W.next=66;break}return W.next=40,this._queryItemsFromServer(Xl(Xl({},a),{},{limit:oe}));case 40:me=W.sent,we=me.items,w.order==="desc"?(ke=!me.hasNextPage,_e=!me.hasPrevPage):(ke=!me.hasPrevPage,_e=!me.hasNextPage),this.cache.populate(we,ke,_e),Me=Hx(we),W.prev=45,Me.s();case 47:if((te=Me.n()).done){W.next=56;break}if(ve=te.value,!((H.length>0||T)&&ve.index==a.from)){W.next=51;break}return W.abrupt("continue",54);case 51:if(N?H.unshift(ve):H.push(ve),!(H.length>=a.limit)){W.next=54;break}return W.abrupt("break",56);case 54:W.next=47;break;case 56:W.next=61;break;case 58:W.prev=58,W.t1=W.catch(45),Me.e(W.t1);case 61:return W.prev=61,Me.f(),W.finish(61);case 64:W.next=67;break;case 66:N&&$n.exports.reverse(H);case 67:return W.abrupt("return",this.makePaginator(H,w,this._prevPageAllowed(H,w.order),this._nextPageAllowed(H,w.order)));case 68:case"end":return W.stop()}},s,this,[[13,27,30,33],[45,58,61,64]])}));function i(s){return r.apply(this,arguments)}return i}()},{key:"_prevPageAllowed",value:function(i,s){return i.length>0&&$n.exports.head(i).index!==(s==="desc"?this.cache.collectionEnd:this.cache.collectionBegin)}},{key:"_nextPageAllowed",value:function(i,s){return i.length>0&&$n.exports.last(i).index!==(s==="desc"?this.cache.collectionBegin:this.cache.collectionEnd)}},{key:"makePaginator",value:function(i,s,a,l){var u=this;s.nextPageItemId=s.prevPageItemId=null;var f=a&&this._prevPageAllowed(i,s.order),d=l&&this._nextPageAllowed(i,s.order);return new qb(i,function(p){return u.queryItems(Xl(Xl({},s),p))},f?$n.exports.head(i).index:null,d?$n.exports.last(i).index:null)}},{key:"_querySingleItemFromServer",value:function(){var r=ae.default(D.default.mark(function s(a){var l;return D.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this._queryItemsFromServer({index:a});case 2:return l=f.sent,l.items.length===0&&this.cache.delete(a,null),f.abrupt("return",l);case 5:case"end":return f.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"_queryItemsFromServer",value:function(){var r=ae.default(D.default.mark(function s(a){var l,u,f=this,d,p,v,m;return D.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return d=new Fu(this.links.items).queryParam("HideExpired",!0).queryParam("Index",a.index).queryParam("PageToken",a.pageToken).queryParam("From",a.from).queryParam("PageSize",a.limit).queryParam("Order",a.order).build(),E.next=3,this.services.network.get(d);case 3:return p=E.sent,v=((l=(u=p.body)===null||u===void 0?void 0:u.items)!==null&&l!==void 0?l:[]).map(function(T){T.date_updated=new Date(T.date_updated);var w=f.cache.get(T.index),b=w&&w.value;if(b)f._handleItemMutated(T.index,T.url,T.last_event_id,T.revision,T.data,T.date_updated,T.date_expires,!1,!0);else{var $=new pS({index:T.index,url:T.url,lastEventId:T.last_event_id,revision:T.revision,data:T.data,dateUpdated:T.date_updated,dateExpires:T.date_expires});f.cache.store(T.index,$,T.last_event_id)}return f.cache.getValue(T.index)}),m=p.body.meta,E.abrupt("return",this.makePaginator(v,a,!!m.previous_token,!!m.next_token));case 7:case"end":return E.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"getItems",value:function(){var r=ae.default(D.default.mark(function s(a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return a=a||{},aD(a.pageSize),a.limit=a.pageSize||a.limit||50,a.order=a.order||"asc",u.abrupt("return",this.queryItems(a));case 5:case"end":return u.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"getContext",value:function(){var r=ae.default(D.default.mark(function s(){var a;return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(this.context){u.next=5;break}return u.next=3,this.services.network.get(this.links.context);case 3:a=u.sent,this._updateContextIfRequired(a.body.data,a.body.last_event_id);case 5:return u.abrupt("return",this.context);case 6:case"end":return u.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"setTtl",value:function(){var r=ae.default(D.default.mark(function s(a){var l,u;return D.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,l={ttl:a},d.next=4,this.services.network.post(this.uri,l);case 4:u=d.sent,this.descriptor.date_expires=u.body.date_expires,d.next=12;break;case 8:throw d.prev=8,d.t0=d.catch(0),d.t0.status===404&&this.onRemoved(!1),d.t0;case 12:case"end":return d.stop()}},s,this,[[0,8]])}));function i(s){return r.apply(this,arguments)}return i}()},{key:"setItemTtl",value:function(){var r=ae.default(D.default.mark(function s(a,l){var u,f,d;return D.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,this.get(a);case 2:return u=v.sent,f={ttl:l},v.next=6,this.services.network.post(u.url,f);case 6:d=v.sent,u.updateDateExpires(d.body.date_expires);case 8:case"end":return v.stop()}},s,this)}));function i(s,a){return r.apply(this,arguments)}return i}()},{key:"removeList",value:function(){var r=ae.default(D.default.mark(function s(){return D.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.services.network.delete(this.uri);case 2:this.onRemoved(!0);case 3:case"end":return l.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"onRemoved",value:function(i){this._unsubscribe(),this.removalHandler(this.type,this.sid,this.uniqueName),this.broadcastEventToListeners("removed",{isLocal:i})}},{key:"shouldIgnoreEvent",value:function(i,s){return this.cache.isKnown(i,s)}},{key:"_update",value:function(i,s){var a=Number(i.item_index);switch(i.date_created=new Date(i.date_created),i.type){case"list_item_added":case"list_item_updated":this._handleItemMutated(a,i.item_url,i.id,i.item_revision,i.item_data,i.date_created,i.date_expires,i.type==="list_item_added",!0);break;case"list_item_removed":this._handleItemRemoved(a,i.id,i.item_data,i.date_created,!0);break;case"list_context_updated":this._handleContextUpdate(i.context_data,i.id,i.date_created);break;case"list_removed":this.onRemoved(!1);break}s&&this._advanceLastEventId(i.id,i.list_revision)}},{key:"_advanceLastEventId",value:function(i,s){this.lastEventId<i&&(this.descriptor.last_event_id=i,s&&(this.descriptor.revision=s))}},{key:"_updateRootDateUpdated",value:function(i){(!this.descriptor.date_updated||i.getTime()>this.descriptor.date_updated.getTime())&&(this.descriptor.date_updated=i,this.services.storage.update(this.type,this.sid,this.uniqueName,{date_updated:i}))}},{key:"_handleItemMutated",value:function(i,s,a,l,u,f,d,p,v){if(this.shouldIgnoreEvent(i,a)){at.trace("Item ".concat(i," update skipped, current: ").concat(this.lastEventId,", remote: ").concat(a));return}this._updateRootDateUpdated(f);var m=this.cache.getValue(i);if(!m){var y=new pS({index:i,url:s,lastEventId:a,revision:l,data:u,dateUpdated:f,dateExpires:d});this.cache.store(i,y,a),this.emitItemMutationEvent(y,v,p);return}var E=pi(m.data);m.update(a,l,u,f),this.cache.store(i,m,a),d!==void 0&&m.updateDateExpires(d),this.emitItemMutationEvent(m,v,!1,E)}},{key:"emitItemMutationEvent",value:function(i,s,a){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,u=a?"itemAdded":"itemUpdated",f={item:i,isLocal:!s};a||(f.previousItemData=l),this.broadcastEventToListeners(u,f)}},{key:"_handleItemRemoved",value:function(i,s,a,l,u){this._updateRootDateUpdated(l),this.cache.delete(i,s),this.broadcastEventToListeners("itemRemoved",{index:i,isLocal:!u,previousItemData:a})}},{key:"_handleContextUpdate",value:function(i,s,a){this._updateRootDateUpdated(a),this._updateContextIfRequired(i,s)&&this.broadcastEventToListeners("contextUpdated",{context:i,isLocal:!1})}},{key:"_updateContextIfRequired",value:function(i,s){return!this.contextEventId||s>this.contextEventId?(this.context=i,this.contextEventId=s,!0):(at.trace("Context update skipped, current:",this.lastEventId,", remote:",s),!1)}}],[{key:"type",get:function(){return"list"}}]),n}(Rf),Zt=function(e){Kn.default(n,e);var t=cD(n);function n(r){var i;return nt.default(this,n),i=t.call(this),i.syncListImpl=r,i.syncListImpl.attach(ji.default(i)),i}return rt.default(n,[{key:"uri",get:function(){return this.syncListImpl.uri}},{key:"revision",get:function(){return this.syncListImpl.revision}},{key:"lastEventId",get:function(){return this.syncListImpl.lastEventId}},{key:"links",get:function(){return this.syncListImpl.links}},{key:"dateExpires",get:function(){return this.syncListImpl.dateExpires}},{key:"type",get:function(){return vS.type}},{key:"sid",get:function(){return this.syncListImpl.sid}},{key:"uniqueName",get:function(){return this.syncListImpl.uniqueName}},{key:"dateUpdated",get:function(){return this.syncListImpl.dateUpdated}},{key:"push",value:function(){var r=ae.default(D.default.mark(function s(a,l){return D.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return this.ensureNotClosed(),f.abrupt("return",this.syncListImpl.push(a,l));case 2:case"end":return f.stop()}},s,this)}));function i(s,a){return r.apply(this,arguments)}return i}()},{key:"set",value:function(){var r=ae.default(D.default.mark(function s(a,l,u){return D.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.ensureNotClosed(),d.abrupt("return",this.syncListImpl.set(a,l,u));case 2:case"end":return d.stop()}},s,this)}));function i(s,a,l){return r.apply(this,arguments)}return i}()},{key:"mutate",value:function(){var r=ae.default(D.default.mark(function s(a,l,u){return D.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.ensureNotClosed(),d.abrupt("return",this.syncListImpl.mutate(a,l,u));case 2:case"end":return d.stop()}},s,this)}));function i(s,a,l){return r.apply(this,arguments)}return i}()},{key:"update",value:function(){var r=ae.default(D.default.mark(function s(a,l,u){return D.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.ensureNotClosed(),d.abrupt("return",this.syncListImpl.update(a,l,u));case 2:case"end":return d.stop()}},s,this)}));function i(s,a,l){return r.apply(this,arguments)}return i}()},{key:"remove",value:function(){var r=ae.default(D.default.mark(function s(a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.ensureNotClosed(),u.abrupt("return",this.syncListImpl.remove(a));case 2:case"end":return u.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"get",value:function(){var r=ae.default(D.default.mark(function s(a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.ensureNotClosed(),u.abrupt("return",this.syncListImpl.get(a));case 2:case"end":return u.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"getContext",value:function(){var r=ae.default(D.default.mark(function s(){return D.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this.ensureNotClosed(),l.abrupt("return",this.syncListImpl.getContext());case 2:case"end":return l.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"getItems",value:function(){var r=ae.default(D.default.mark(function s(a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.ensureNotClosed(),u.abrupt("return",this.syncListImpl.getItems(a));case 2:case"end":return u.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"setTtl",value:function(){var r=ae.default(D.default.mark(function s(a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.ensureNotClosed(),u.abrupt("return",this.syncListImpl.setTtl(a));case 2:case"end":return u.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"setItemTtl",value:function(){var r=ae.default(D.default.mark(function s(a,l){return D.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return this.ensureNotClosed(),f.abrupt("return",this.syncListImpl.setItemTtl(a,l));case 2:case"end":return f.stop()}},s,this)}));function i(s,a){return r.apply(this,arguments)}return i}()},{key:"removeList",value:function(){var r=ae.default(D.default.mark(function s(){return D.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this.ensureNotClosed(),l.abrupt("return",this.syncListImpl.removeList());case 2:case"end":return l.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"close",value:function(){Cf.default(Yt.default(n.prototype),"close",this).call(this),this.syncListImpl.detach(this.listenerUuid)}}],[{key:"type",get:function(){return vS.type}}]),n}(xf);tt.default(Zt,"itemAdded","itemAdded");tt.default(Zt,"itemUpdated","itemUpdated");tt.default(Zt,"itemRemoved","itemRemoved");tt.default(Zt,"removed","removed");st([ne.validateTypesAsync(ne.pureObject,["undefined",ne.objectSchema("item metadata",{ttl:[ne.nonNegativeInteger,"undefined"]})]),ie("design:type",Function),ie("design:paramtypes",[Object,Object]),ie("design:returntype",Promise)],Zt.prototype,"push",null);st([ne.validateTypesAsync(ne.nonNegativeInteger,ne.pureObject,["undefined",ne.objectSchema("item metadata",{ttl:[ne.nonNegativeInteger,"undefined"]})]),ie("design:type",Function),ie("design:paramtypes",[Number,Object,Object]),ie("design:returntype",Promise)],Zt.prototype,"set",null);st([ne.validateTypesAsync(ne.nonNegativeInteger,"function",["undefined",ne.objectSchema("item metadata",{ttl:[ne.nonNegativeInteger,"undefined"]})]),ie("design:type",Function),ie("design:paramtypes",[Number,Function,Object]),ie("design:returntype",Promise)],Zt.prototype,"mutate",null);st([ne.validateTypesAsync(ne.nonNegativeInteger,ne.pureObject,["undefined",ne.objectSchema("item metadata",{ttl:[ne.nonNegativeInteger,"undefined"]})]),ie("design:type",Function),ie("design:paramtypes",[Number,Object,Object]),ie("design:returntype",Promise)],Zt.prototype,"update",null);st([ne.validateTypesAsync(ne.nonNegativeInteger),ie("design:type",Function),ie("design:paramtypes",[Number]),ie("design:returntype",Promise)],Zt.prototype,"remove",null);st([ne.validateTypesAsync(ne.nonNegativeInteger),ie("design:type",Function),ie("design:paramtypes",[Number]),ie("design:returntype",Promise)],Zt.prototype,"get",null);st([ne.validateTypesAsync(["undefined",ne.objectSchema("query options",{from:[ne.nonNegativeInteger,"undefined"],pageSize:[ne.custom(function(e){return[Vb(e),"a positive integer"]}),"undefined"],order:[ne.custom(function(e){return[e==="asc"||e==="desc","either 'asc' or 'desc'"]}),"undefined"]})]),ie("design:type",Function),ie("design:paramtypes",[Object]),ie("design:returntype",Promise)],Zt.prototype,"getItems",null);st([ne.validateTypesAsync(ne.nonNegativeInteger),ie("design:type",Function),ie("design:paramtypes",[Number]),ie("design:returntype",Promise)],Zt.prototype,"setTtl",null);st([ne.validateTypesAsync(ne.nonNegativeInteger,ne.nonNegativeInteger),ie("design:type",Function),ie("design:paramtypes",[Number,Number]),ie("design:returntype",Promise)],Zt.prototype,"setItemTtl",null);var oc=function(){function e(t){nt.default(this,e),this.descriptor=t}return rt.default(e,[{key:"uri",get:function(){return this.descriptor.url}},{key:"revision",get:function(){return this.descriptor.revision}},{key:"lastEventId",get:function(){return this.descriptor.last_event_id}},{key:"dateExpires",get:function(){return this.descriptor.date_expires}},{key:"key",get:function(){return this.descriptor.key}},{key:"data",get:function(){return this.descriptor.data}},{key:"dateUpdated",get:function(){return this.descriptor.date_updated}},{key:"cacheKey",get:function(){return this.key}},{key:"update",value:function(n,r,i,s){return this.descriptor.last_event_id=n,this.descriptor.revision=r,this.descriptor.data=i,this.descriptor.date_updated=s,this}},{key:"updateDateExpires",value:function(n){this.descriptor.date_expires=n}}]),e}();function Gx(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=yhe(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(f){throw f},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,l;return{s:function(){n=n.call(e)},n:function(){var f=n.next();return s=f.done,f},e:function(f){a=!0,l=f},f:function(){try{!s&&n.return!=null&&n.return()}finally{if(a)throw l}}}}function yhe(e,t){if(e){if(typeof e=="string")return Kx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kx(e,t)}}function Kx(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Zl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Qx(Object(n),!0).forEach(function(r){tt.default(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qx(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fD(e){var t=_he();return function(){var r=Yt.default(e),i;if(t){var s=Yt.default(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return _a.default(this,i)}}function _he(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var gS=function(e){Kn.default(n,e);var t=fD(n);function n(r,i,s){var a;nt.default(this,n),a=t.call(this,r,s);var l=function(f,d){return typeof d.ttl=="number"?{ttl:d.ttl}:f};return a.updateMergingQueue=new uD(l),a.cache=new Gb,a.descriptor=i,a.descriptor.date_updated=new Date(a.descriptor.date_updated),i.items&&i.items.forEach(function(u){u.date_updated=new Date(u.date_updated),a.cache.store(u.key,new oc(u),u.last_event_id)}),a}return rt.default(n,[{key:"uri",get:function(){return this.descriptor.url}},{key:"links",get:function(){return this.descriptor.links}},{key:"revision",get:function(){return this.descriptor.revision}},{key:"lastEventId",get:function(){return this.descriptor.last_event_id}},{key:"dateExpires",get:function(){return this.descriptor.date_expires}},{key:"type",get:function(){return"map"}},{key:"indexName",get:function(){}},{key:"queryString",get:function(){}},{key:"sid",get:function(){return this.descriptor.sid}},{key:"uniqueName",get:function(){return this.descriptor.unique_name||null}},{key:"dateUpdated",get:function(){return this.descriptor.date_updated}},{key:"set",value:function(){var r=ae.default(D.default.mark(function s(a,l,u){var f=this,d;return D.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return d=u||{},v.abrupt("return",this.updateMergingQueue.squashAndAdd(a,d,function(m){return f._putItemUnconditionally(a,l,m.ttl)}));case 2:case"end":return v.stop()}},s,this)}));function i(s,a,l){return r.apply(this,arguments)}return i}()},{key:"get",value:function(){var r=ae.default(D.default.mark(function s(a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(a!=null){u.next=2;break}throw new lr("SyncMapItem key may not be empty",400,54209);case 2:if(!this.cache.has(a)){u.next=6;break}return u.abrupt("return",this.cache.getValue(a));case 6:return u.abrupt("return",this._getItemFromServer(a));case 7:case"end":return u.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"_getItemFromServer",value:function(){var r=ae.default(D.default.mark(function s(a){var l;return D.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this._queryItemsFromServer({key:a});case 2:if(l=f.sent,!(l.items.length<1)){f.next=7;break}throw new lr("The specified Map Item does not exist",404,54201);case 7:return f.abrupt("return",l.items[0]);case 8:case"end":return f.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"mutate",value:function(){var r=ae.default(D.default.mark(function s(a,l,u){var f=this,d;return D.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return d=u||{},v.abrupt("return",this.updateMergingQueue.add(a,d,function(m){return f._putItemWithIfMatch(a,l,m.ttl)}));case 2:case"end":return v.stop()}},s,this)}));function i(s,a,l){return r.apply(this,arguments)}return i}()},{key:"update",value:function(){var r=ae.default(D.default.mark(function s(a,l,u){return D.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.mutate(a,function(p){return Object.assign(p,l)},u));case 1:case"end":return d.stop()}},s,this)}));function i(s,a,l){return r.apply(this,arguments)}return i}()},{key:"_putItemUnconditionally",value:function(){var r=ae.default(D.default.mark(function s(a,l,u){var f,d;return D.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,this._putItemToServer(a,l,void 0,u);case 2:return f=v.sent,d=f.item,this._handleItemMutated(d.key,d.url,d.last_event_id,d.revision,d.data,d.date_updated,d.date_expires,f.added,!1),v.abrupt("return",this.cache.getValue(d.key));case 6:case"end":return v.stop()}},s,this)}));function i(s,a,l){return r.apply(this,arguments)}return i}()},{key:"_putItemWithIfMatch",value:function(){var r=ae.default(D.default.mark(function s(a,l,u){var f,d,p,v,m;return D.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,this.get(a).catch(function(T){if(T.status===404)return new oc({key:a,data:{},last_event_id:-1,revision:"-1",url:null,date_updated:null,date_expires:null});throw T});case 2:if(f=E.sent,d=l(pi(f.data)),!d){E.next=26;break}return p=f.revision,E.prev=6,E.next=9,this._putItemToServer(a,d,p,u);case 9:return v=E.sent,m=v.item,this._handleItemMutated(m.key,m.url,m.last_event_id,m.revision,m.data,m.date_updated,m.date_expires,v.added,!1),E.abrupt("return",this.cache.getValue(m.key));case 15:if(E.prev=15,E.t0=E.catch(6),E.t0.status!==412){E.next=23;break}return E.next=20,this._getItemFromServer(a);case 20:return E.abrupt("return",this._putItemWithIfMatch(a,l,u));case 23:throw E.t0;case 24:E.next=27;break;case 26:return E.abrupt("return",f);case 27:case"end":return E.stop()}},s,this,[[6,15]])}));function i(s,a,l){return r.apply(this,arguments)}return i}()},{key:"_putItemToServer",value:function(){var r=ae.default(D.default.mark(function s(a,l,u,f){var d,p,v,m,y;return D.default.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return d=new Fu(this.links.items).pathSegment(a).build(),p={data:l},f!==void 0&&(p.ttl=f),T.prev=3,T.next=6,this.services.network.put(d,p,u);case 6:return v=T.sent,m=v.body,m.data=l,m.date_updated=new Date(m.date_updated),y=v.status.code===201,T.abrupt("return",{added:y,item:m});case 14:throw T.prev=14,T.t0=T.catch(3),T.t0.status===404&&this.onRemoved(!1),T.t0;case 18:case"end":return T.stop()}},s,this,[[3,14]])}));function i(s,a,l,u){return r.apply(this,arguments)}return i}()},{key:"remove",value:function(){var r=ae.default(D.default.mark(function s(a){var l,u,f;return D.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.get(a);case 2:return l=p.sent,u=pi(l.data),p.next=6,this.services.network.delete(l.uri);case 6:f=p.sent,this._handleItemRemoved(a,f.body.last_event_id,u,new Date(f.body.date_updated),!1);case 8:case"end":return p.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"queryItems",value:function(){var r=ae.default(D.default.mark(function s(a){var l,u,f,d,p,v,m,y,E,T,w,b,$,N,z,H,K,P,ee,Y,oe,de,me,we,ke,_e,Me,te,ve;return D.default.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if(!a.key){W.next=5;break}if(E=this.cache.get(a.key),!E){W.next=4;break}return W.abrupt("return",this.makePaginator(E.isValid?[E.value]:[],a,!1,!1));case 4:return W.abrupt("return",this._querySingleItemFromServer(a.key));case 5:T=!!a.nextPageItemId||!!a.prevPageItemId,w=Zl({},a),T&&(a.from=(b=($=a.nextPageItemId)!==null&&$!==void 0?$:a.prevPageItemId)!==null&&b!==void 0?b:a.from),N=!!a.prevPageItemId,z=a.order==="desc"?N?this.cache.getIterator((l=(u=a.prevPageItemId)!==null&&u!==void 0?u:a.from)!==null&&l!==void 0?l:null):this.cache.getReverseIterator((f=(d=a.nextPageItemId)!==null&&d!==void 0?d:a.from)!==null&&f!==void 0?f:null):N?this.cache.getReverseIterator((p=(v=a.prevPageItemId)!==null&&v!==void 0?v:a.from)!==null&&p!==void 0?p:null):this.cache.getIterator((m=(y=a.nextPageItemId)!==null&&y!==void 0?y:a.from)!==null&&m!==void 0?m:null),H=[],K=T?a.limit+1:a.limit,P=Gx(z),W.prev=13,P.s();case 15:if((ee=P.n()).done){W.next=25;break}if(Y=ee.value,!(T&&Y.value.key==a.from)){W.next=19;break}return W.abrupt("continue",23);case 19:if(H.push(Y.value),!(H.length>=a.limit)){W.next=23;break}return N&&$n.exports.reverse(H),W.abrupt("return",this.makePaginator(H,a,this._prevPageAllowed(H,a.order),this._nextPageAllowed(H,a.order)));case 23:W.next=15;break;case 25:W.next=30;break;case 27:W.prev=27,W.t0=W.catch(13),P.e(W.t0);case 30:return W.prev=30,P.f(),W.finish(30);case 33:if(H.length>0&&(a.from=$n.exports.last(H).key),oe=Math.max(K-H.length,10),N&&(a.order=a.order==="desc"?"asc":"desc"),de=a.from!==(w.order==="desc"?N?this.cache.collectionEnd:this.cache.collectionBegin:N?this.cache.collectionBegin:this.cache.collectionEnd),!de){W.next=66;break}return W.next=40,this._queryItemsFromServer(Zl(Zl({},a),{},{limit:oe}));case 40:me=W.sent,we=me.items,w.order==="desc"?(ke=!me.hasNextPage,_e=!me.hasPrevPage):(ke=!me.hasPrevPage,_e=!me.hasNextPage),this.cache.populate(we,ke,_e),Me=Gx(we),W.prev=45,Me.s();case 47:if((te=Me.n()).done){W.next=56;break}if(ve=te.value,!((H.length>0||T)&&ve.key==a.from)){W.next=51;break}return W.abrupt("continue",54);case 51:if(N?H.unshift(ve):H.push(ve),!(H.length>=a.limit)){W.next=54;break}return W.abrupt("break",56);case 54:W.next=47;break;case 56:W.next=61;break;case 58:W.prev=58,W.t1=W.catch(45),Me.e(W.t1);case 61:return W.prev=61,Me.f(),W.finish(61);case 64:W.next=67;break;case 66:N&&$n.exports.reverse(H);case 67:return W.abrupt("return",this.makePaginator(H,w,this._prevPageAllowed(H,w.order),this._nextPageAllowed(H,w.order)));case 68:case"end":return W.stop()}},s,this,[[13,27,30,33],[45,58,61,64]])}));function i(s){return r.apply(this,arguments)}return i}()},{key:"_prevPageAllowed",value:function(i,s){return i.length>0&&$n.exports.head(i).key!==(s==="desc"?this.cache.collectionEnd:this.cache.collectionBegin)}},{key:"_nextPageAllowed",value:function(i,s){return i.length>0&&$n.exports.last(i).key!==(s==="desc"?this.cache.collectionBegin:this.cache.collectionEnd)}},{key:"makePaginator",value:function(i,s,a,l){var u=this;s.nextPageItemId=s.prevPageItemId=null;var f=a&&this._prevPageAllowed(i,s.order),d=l&&this._nextPageAllowed(i,s.order);return new qb(i,function(p){return u.queryItems(Zl(Zl({},s),p))},f?$n.exports.head(i).key:null,d?$n.exports.last(i).key:null)}},{key:"_querySingleItemFromServer",value:function(){var r=ae.default(D.default.mark(function s(a){var l;return D.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this._queryItemsFromServer({key:a});case 2:return l=f.sent,l.items.length===0&&this.cache.delete(a,null),f.abrupt("return",l);case 5:case"end":return f.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"_queryItemsFromServer",value:function(){var r=ae.default(D.default.mark(function s(a){var l,u,f=this,d,p,v,m;return D.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return d=new Fu(this.links.items).queryParam("HideExpired",!0).queryParam("Key",a.key).queryParam("PageToken",a.pageToken).queryParam("From",a.from).queryParam("PageSize",a.limit).queryParam("Order",a.order).build(),E.next=3,this.services.network.get(d);case 3:return p=E.sent,v=((l=(u=p.body)===null||u===void 0?void 0:u.items)!==null&&l!==void 0?l:[]).map(function(T){T.date_updated=new Date(T.date_updated);var w=f.cache.get(T.key),b=w&&w.value;if(b)f._handleItemMutated(T.key,T.url,T.last_event_id,T.revision,T.data,T.date_updated,T.date_expires,!1,!0);else{var $=new oc({key:T.key,url:T.url,last_event_id:T.last_event_id,revision:T.revision,data:T.data,date_updated:T.date_updated,date_expires:T.date_expires});f.cache.store(T.key,$,T.last_event_id)}return f.cache.getValue(T.key)}),m=p.body.meta,E.abrupt("return",this.makePaginator(v,a,!!m.previous_token,!!m.next_token));case 7:case"end":return E.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"getItems",value:function(){var r=ae.default(D.default.mark(function s(a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return a=a||{},aD(a.pageSize),a.limit=a.pageSize||a.limit||50,a.order=a.order||"asc",u.abrupt("return",this.queryItems(a));case 5:case"end":return u.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"shouldIgnoreEvent",value:function(i,s){return this.cache.isKnown(i,s)}},{key:"_update",value:function(i,s){switch(i.date_created=new Date(i.date_created),i.type){case"map_item_added":case"map_item_updated":this._handleItemMutated(i.item_key,i.item_url,i.id,i.item_revision,i.item_data,i.date_created,i.date_expires,i.type==="map_item_added",!0);break;case"map_item_removed":this._handleItemRemoved(i.item_key,i.id,i.item_data,i.date_created,!0);break;case"map_removed":this.onRemoved(!1);break}s&&this._advanceLastEventId(i.id,i.map_revision)}},{key:"_advanceLastEventId",value:function(i,s){this.lastEventId<i&&(this.descriptor.last_event_id=i,s&&(this.descriptor.revision=s))}},{key:"_updateRootDateUpdated",value:function(i){(!this.descriptor.date_updated||i.getTime()>this.descriptor.date_updated.getTime())&&(this.descriptor.date_updated=i,this.services.storage.update(this.type,this.sid,this.uniqueName,{date_updated:i}))}},{key:"_handleItemMutated",value:function(i,s,a,l,u,f,d,p,v){if(this.shouldIgnoreEvent(i,a)){at.trace("SyncMapItem ",i," update skipped, current:",this.lastEventId,", remote:",a);return}this._updateRootDateUpdated(f);var m=this.cache.getValue(i);if(!m){var y=new oc({key:i,url:s,last_event_id:a,revision:l,data:u,date_updated:f,date_expires:d});this.cache.store(i,y,a),this.emitItemMutationEvent(y,v,p);return}var E=pi(m.data);m.update(a,l,u,f),this.cache.store(i,m,a),d!==void 0&&m.updateDateExpires(d),this.emitItemMutationEvent(m,v,!1,E)}},{key:"emitItemMutationEvent",value:function(i,s,a){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,u=a?"itemAdded":"itemUpdated",f={item:i,isLocal:!s};a||(f.previousItemData=l),this.broadcastEventToListeners(u,f)}},{key:"_handleItemRemoved",value:function(i,s,a,l,u){this._updateRootDateUpdated(l),this.cache.delete(i,s),this.broadcastEventToListeners("itemRemoved",{key:i,isLocal:!u,previousItemData:a})}},{key:"onRemoved",value:function(i){this._unsubscribe(),this.removalHandler(this.type,this.sid,this.uniqueName),this.broadcastEventToListeners("removed",{isLocal:i})}},{key:"setTtl",value:function(){var r=ae.default(D.default.mark(function s(a){var l,u;return D.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,l={ttl:a},d.next=4,this.services.network.post(this.uri,l);case 4:u=d.sent,this.descriptor.date_expires=u.body.date_expires,d.next=12;break;case 8:throw d.prev=8,d.t0=d.catch(0),d.t0.status===404&&this.onRemoved(!1),d.t0;case 12:case"end":return d.stop()}},s,this,[[0,8]])}));function i(s){return r.apply(this,arguments)}return i}()},{key:"setItemTtl",value:function(){var r=ae.default(D.default.mark(function s(a,l){var u,f,d;return D.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,this.get(a);case 2:return u=v.sent,f={ttl:l},v.next=6,this.services.network.post(u.uri,f);case 6:d=v.sent,u.updateDateExpires(d.body.date_expires);case 8:case"end":return v.stop()}},s,this)}));function i(s,a){return r.apply(this,arguments)}return i}()},{key:"removeMap",value:function(){var r=ae.default(D.default.mark(function s(){return D.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.services.network.delete(this.uri);case 2:this.onRemoved(!0);case 3:case"end":return l.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()}],[{key:"type",get:function(){return"map"}}]),n}(Rf),on=function(e){Kn.default(n,e);var t=fD(n);function n(r){var i;return nt.default(this,n),i=t.call(this),i.syncMapImpl=r,i.syncMapImpl.attach(ji.default(i)),i}return rt.default(n,[{key:"uri",get:function(){return this.syncMapImpl.uri}},{key:"links",get:function(){return this.syncMapImpl.links}},{key:"revision",get:function(){return this.syncMapImpl.revision}},{key:"lastEventId",get:function(){return this.syncMapImpl.lastEventId}},{key:"dateExpires",get:function(){return this.syncMapImpl.dateExpires}},{key:"type",get:function(){return gS.type}},{key:"sid",get:function(){return this.syncMapImpl.sid}},{key:"uniqueName",get:function(){return this.syncMapImpl.uniqueName}},{key:"dateUpdated",get:function(){return this.syncMapImpl.dateUpdated}},{key:"set",value:function(){var r=ae.default(D.default.mark(function s(a,l,u){return D.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.ensureNotClosed(),d.abrupt("return",this.syncMapImpl.set(a,l,u));case 2:case"end":return d.stop()}},s,this)}));function i(s,a,l){return r.apply(this,arguments)}return i}()},{key:"get",value:function(){var r=ae.default(D.default.mark(function s(a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.ensureNotClosed(),u.abrupt("return",this.syncMapImpl.get(a));case 2:case"end":return u.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"mutate",value:function(){var r=ae.default(D.default.mark(function s(a,l,u){return D.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.ensureNotClosed(),d.abrupt("return",this.syncMapImpl.mutate(a,l,u));case 2:case"end":return d.stop()}},s,this)}));function i(s,a,l){return r.apply(this,arguments)}return i}()},{key:"update",value:function(){var r=ae.default(D.default.mark(function s(a,l,u){return D.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.ensureNotClosed(),d.abrupt("return",this.syncMapImpl.update(a,l,u));case 2:case"end":return d.stop()}},s,this)}));function i(s,a,l){return r.apply(this,arguments)}return i}()},{key:"remove",value:function(){var r=ae.default(D.default.mark(function s(a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.ensureNotClosed(),u.abrupt("return",this.syncMapImpl.remove(a));case 2:case"end":return u.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"getItems",value:function(){var r=ae.default(D.default.mark(function s(a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.ensureNotClosed(),u.abrupt("return",this.syncMapImpl.getItems(a));case 2:case"end":return u.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"setTtl",value:function(){var r=ae.default(D.default.mark(function s(a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.ensureNotClosed(),u.abrupt("return",this.syncMapImpl.setTtl(a));case 2:case"end":return u.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"setItemTtl",value:function(){var r=ae.default(D.default.mark(function s(a,l){return D.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return this.ensureNotClosed(),f.abrupt("return",this.syncMapImpl.setItemTtl(a,l));case 2:case"end":return f.stop()}},s,this)}));function i(s,a){return r.apply(this,arguments)}return i}()},{key:"removeMap",value:function(){var r=ae.default(D.default.mark(function s(){return D.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this.ensureNotClosed(),l.next=3,this.syncMapImpl.removeMap();case 3:case"end":return l.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"close",value:function(){Cf.default(Yt.default(n.prototype),"close",this).call(this),this.syncMapImpl.detach(this.listenerUuid)}}],[{key:"type",get:function(){return gS.type}}]),n}(xf);tt.default(on,"itemAdded","itemAdded");tt.default(on,"itemUpdated","itemUpdated");tt.default(on,"itemRemoved","itemRemoved");tt.default(on,"removed","removed");st([ne.validateTypesAsync("string",ne.pureObject,["undefined",ne.objectSchema("item metadata",{ttl:[ne.nonNegativeInteger,"undefined"]})]),ie("design:type",Function),ie("design:paramtypes",[String,Object,Object]),ie("design:returntype",Promise)],on.prototype,"set",null);st([ne.validateTypesAsync("string"),ie("design:type",Function),ie("design:paramtypes",[String]),ie("design:returntype",Promise)],on.prototype,"get",null);st([ne.validateTypesAsync("string","function",["undefined",ne.objectSchema("item metadata",{ttl:[ne.nonNegativeInteger,"undefined"]})]),ie("design:type",Function),ie("design:paramtypes",[String,Function,Object]),ie("design:returntype",Promise)],on.prototype,"mutate",null);st([ne.validateTypesAsync("string",ne.pureObject,["undefined",ne.objectSchema("item metadata",{ttl:[ne.nonNegativeInteger,"undefined"]})]),ie("design:type",Function),ie("design:paramtypes",[String,Object,Object]),ie("design:returntype",Promise)],on.prototype,"update",null);st([ne.validateTypesAsync("string"),ie("design:type",Function),ie("design:paramtypes",[String]),ie("design:returntype",Promise)],on.prototype,"remove",null);st([ne.validateTypesAsync(["undefined",ne.objectSchema("query options",{from:["string","undefined"],pageSize:[ne.custom(function(e){return[Vb(e),"a positive integer"]}),"undefined"],order:[ne.custom(function(e){return[e==="asc"||e==="desc","either 'asc' or 'desc'"]}),"undefined"]})]),ie("design:type",Function),ie("design:paramtypes",[Object]),ie("design:returntype",Promise)],on.prototype,"getItems",null);st([ne.validateTypesAsync(ne.nonNegativeInteger),ie("design:type",Function),ie("design:paramtypes",[Number]),ie("design:returntype",Promise)],on.prototype,"setTtl",null);st([ne.validateTypesAsync("string",ne.nonNegativeInteger),ie("design:type",Function),ie("design:paramtypes",[String,Number]),ie("design:returntype",Promise)],on.prototype,"setItemTtl",null);function dD(e){var t=whe();return function(){var r=Yt.default(e),i;if(t){var s=Yt.default(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return _a.default(this,i)}}function whe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Hc=function(e){Kn.default(n,e);var t=dD(n);function n(r,i,s){var a;return nt.default(this,n),a=t.call(this,r,s),a.descriptor=i,a}return rt.default(n,[{key:"uri",get:function(){return this.descriptor.url}},{key:"links",get:function(){return this.descriptor.links}},{key:"dateExpires",get:function(){return this.descriptor.date_expires}},{key:"type",get:function(){return"stream"}},{key:"lastEventId",get:function(){return null}},{key:"indexName",get:function(){}},{key:"queryString",get:function(){}},{key:"sid",get:function(){return this.descriptor.sid}},{key:"uniqueName",get:function(){return this.descriptor.unique_name||null}},{key:"publishMessage",value:function(){var r=ae.default(D.default.mark(function s(a){var l,u,f,d;return D.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return l={data:a},v.next=3,this.services.network.post(this.links.messages,l);case 3:return u=v.sent,f=u.body,d=this._handleMessagePublished(f.sid,a,!1),v.abrupt("return",d);case 7:case"end":return v.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"setTtl",value:function(){var r=ae.default(D.default.mark(function s(a){var l,u;return D.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,l={ttl:a},d.next=4,this.services.network.post(this.uri,l);case 4:u=d.sent,this.descriptor.date_expires=u.body.date_expires,d.next=12;break;case 8:throw d.prev=8,d.t0=d.catch(0),d.t0.status===404&&this.onRemoved(!1),d.t0;case 12:case"end":return d.stop()}},s,this,[[0,8]])}));function i(s){return r.apply(this,arguments)}return i}()},{key:"removeStream",value:function(){var r=ae.default(D.default.mark(function s(){return D.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.services.network.delete(this.uri);case 2:this.onRemoved(!0);case 3:case"end":return l.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"_update",value:function(i){switch(i.type){case"stream_message_published":{this._handleMessagePublished(i.message_sid,i.message_data,!0);break}case"stream_removed":{this.onRemoved(!1);break}}}},{key:"_handleMessagePublished",value:function(i,s,a){var l={sid:i,data:s};return this.broadcastEventToListeners("messagePublished",{message:l,isLocal:!a}),l}},{key:"onRemoved",value:function(i){this._unsubscribe(),this.removalHandler(this.type,this.sid,this.uniqueName),this.broadcastEventToListeners("removed",{isLocal:i})}}],[{key:"type",get:function(){return"stream"}}]),n}(Rf);st([ne.validateTypesAsync(ne.pureObject),ie("design:type",Function),ie("design:paramtypes",[Object]),ie("design:returntype",Promise)],Hc.prototype,"publishMessage",null);st([ne.validateTypesAsync(ne.nonNegativeInteger),ie("design:type",Function),ie("design:paramtypes",[Number]),ie("design:returntype",Promise)],Hc.prototype,"setTtl",null);var Mi=function(e){Kn.default(n,e);var t=dD(n);function n(r){var i;return nt.default(this,n),i=t.call(this),i.syncStreamImpl=r,i.syncStreamImpl.attach(ji.default(i)),i}return rt.default(n,[{key:"uri",get:function(){return this.syncStreamImpl.uri}},{key:"links",get:function(){return this.syncStreamImpl.links}},{key:"dateExpires",get:function(){return this.syncStreamImpl.dateExpires}},{key:"type",get:function(){return Hc.type}},{key:"lastEventId",get:function(){return null}},{key:"sid",get:function(){return this.syncStreamImpl.sid}},{key:"uniqueName",get:function(){return this.syncStreamImpl.uniqueName}},{key:"publishMessage",value:function(){var r=ae.default(D.default.mark(function s(a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.ensureNotClosed(),u.abrupt("return",this.syncStreamImpl.publishMessage(a));case 2:case"end":return u.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"setTtl",value:function(){var r=ae.default(D.default.mark(function s(a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.ensureNotClosed(),u.abrupt("return",this.syncStreamImpl.setTtl(a));case 2:case"end":return u.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"removeStream",value:function(){var r=ae.default(D.default.mark(function s(){return D.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this.ensureNotClosed(),l.abrupt("return",this.syncStreamImpl.removeStream());case 2:case"end":return l.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"close",value:function(){Cf.default(Yt.default(n.prototype),"close",this).call(this),this.syncStreamImpl.detach(this.listenerUuid)}}],[{key:"type",get:function(){return Hc.type}}]),n}(xf);tt.default(Mi,"messagePublished","messagePublished");tt.default(Mi,"removed","removed");st([ne.validateTypesAsync(ne.pureObject),ie("design:type",Function),ie("design:paramtypes",[Object]),ie("design:returntype",Promise)],Mi.prototype,"publishMessage",null);st([ne.validateTypesAsync(ne.nonNegativeInteger),ie("design:type",Function),ie("design:paramtypes",[Number]),ie("design:returntype",Promise)],Mi.prototype,"setTtl",null);var She=rt.default(function e(t){nt.default(this,e),this.sdk="js",this.sdkVer=t,this.os=Sh.os.family,this.osVer=Sh.os.version,this.pl=Sh.name,this.plVer=Sh.version}),bhe=function(){function e(){nt.default(this,e),this.names=new Map,this.entities=new Map}return rt.default(e,[{key:"store",value:function(n){var r=this.entities.get(n.sid);return r||(this.entities.set(n.sid,n),n.uniqueName&&this.names.set(n.type+"::"+n.uniqueName,n.sid),n)}},{key:"getResolved",value:function(n,r){var i=this.names.get(r+"::"+n);return i?this.entities.get(i):null}},{key:"get",value:function(n,r){return this.entities.get(n)||this.getResolved(n,r)||null}},{key:"remove",value:function(n){var r=this.entities.get(n);r&&(this.entities.delete(n),r.uniqueName&&this.names.delete(r.type+"::"+r.uniqueName))}}]),e}();function Kb(e){var t=The();return function(){var r=Yt.default(e),i;if(t){var s=Yt.default(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return _a.default(this,i)}}function The(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var mS=function(){function e(t,n,r){nt.default(this,e),this.key=t,this.value=n,this.lastEventId=r}return rt.default(e,[{key:"cacheKey",get:function(){return this.key}}]),e}(),yS=function(e){Kn.default(n,e);var t=Kb(n);function n(r,i,s,a){var l;return nt.default(this,n),l=t.call(this,i,s),l.descriptor=r,l.cache=new Gb,a&&a.forEach(function(u){var f=new mS(u.key,u.data,u.revision);l.cache.store(u.key,f,u.revision)}),l}return rt.default(n,[{key:"sid",get:function(){return this.descriptor.sid}},{key:"uniqueName",get:function(){return null}},{key:"type",get:function(){return n.type}},{key:"lastEventId",get:function(){return this.descriptor.last_event_id}},{key:"indexName",get:function(){return this.descriptor.indexName}},{key:"queryString",get:function(){return this.descriptor.queryExpression}},{key:"queryUri",get:function(){return this.descriptor.queryUri}},{key:"liveQueryDescriptor",get:function(){return this.descriptor}},{key:"onRemoved",value:function(){}},{key:"getItems",value:function(){var i={};return this.cache.forEach(function(s,a){i[s]=a.value}),i}},{key:"_update",value:function(i,s){switch(i.type){case"live_query_item_updated":this.handleItemMutated(i.item_key,i.item_data,i.item_revision);break;case"live_query_item_removed":this.handleItemRemoved(i.item_key,i.item_revision);break;case"live_query_updated":this.handleBatchUpdate(i.items);break}s&&this._advanceLastEventId(i.last_event_id)}},{key:"handleItemMutated",value:function(i,s,a){if(this.shouldIgnoreEvent(i,a)){at.trace("Item ".concat(i," update skipped, revision: ").concat(a));return}var l=new mS(i,s,a);this.cache.store(i,l,a),this.broadcastEventToListeners("itemUpdated",l)}},{key:"handleItemRemoved",value:function(i,s){if(this.shouldIgnoreEvent(i,s)){at.trace("Item ".concat(i," delete skipped, revision: ").concat(s));return}this.cache.delete(i,s),this.broadcastEventToListeners("itemRemoved",{key:i})}},{key:"handleBatchUpdate",value:function(i){var s=this,a={};i!=null&&i.forEach(function(u){a[u.key]={data:u.data,revision:u.revision}}),this.cache.forEach(function(u,f){var d=a[u];d!=null?s.handleItemMutated(u,d.data,d.revision):s.handleItemRemoved(u,null),delete a[u]});for(var l in a)this.handleItemMutated(l,a[l].data,a[l].revision)}},{key:"shouldIgnoreEvent",value:function(i,s){return i!=null&&s!=null&&this.cache.isKnown(i,s)}},{key:"_advanceLastEventId",value:function(i,s){this.lastEventId<i&&(this.descriptor.last_event_id=i)}}],[{key:"type",get:function(){return"live_query"}}]),n}(Rf);function hD(e){return _S.apply(this,arguments)}function _S(){return _S=ae.default(D.default.mark(function e(t){var n,r,i,s,a,l;return D.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(n=t.network,r=t.queryString,i=t.uri,s=t.type,r!=null){f.next=3;break}throw new lr("Invalid query",400,54507);case 3:return a={query_string:r},s===as.type&&(a.type=s),f.next=7,n.post(i,a,void 0,!0);case 7:return l=f.sent,f.abrupt("return",l.body);case 9:case"end":return f.stop()}},e)})),_S.apply(this,arguments)}var as=function(e){Kn.default(n,e);var t=Kb(n);function n(r){var i;return nt.default(this,n),i=t.call(this),i.liveQueryImpl=r,i.liveQueryImpl.attach(ji.default(i)),i}return rt.default(n,[{key:"type",get:function(){return yS.type}},{key:"lastEventId",get:function(){return this.liveQueryImpl.lastEventId}},{key:"sid",get:function(){return this.liveQueryImpl.sid}},{key:"close",value:function(){Cf.default(Yt.default(n.prototype),"close",this).call(this),this.liveQueryImpl.detach(this.listenerUuid)}},{key:"getItems",value:function(){return this.ensureNotClosed(),this.liveQueryImpl.getItems()}}],[{key:"type",get:function(){return yS.type}}]),n}(xf);tt.default(as,"itemUpdated","itemUpdated");tt.default(as,"itemRemoved","itemRemoved");var $f=function(e){Kn.default(n,e);var t=Kb(n);function n(r){var i;return nt.default(this,n),i=t.call(this),tt.default(ji.default(i),"queryExpression",null),tt.default(ji.default(i),"items",{}),Object.assign(ji.default(i),r),i.updateIndexName(r.indexName),i}return rt.default(n,[{key:"type",get:function(){return n.type}},{key:"search",value:function(){var r=ae.default(D.default.mark(function s(a){var l=this,u;return D.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.items={},d.prev=1,d.next=4,hD({network:this.network,uri:this.queryUri,queryString:a});case 4:u=d.sent,this.queryExpression=a,u.items&&u.items.forEach(function(p){l.items[p.key]=p.data}),this.emit("searchResult",this.getItems()),d.next=15;break;case 10:throw d.prev=10,d.t0=d.catch(1),at.error("Error '".concat(d.t0.message,"' while executing query '").concat(a,"'")),this.queryExpression=null,d.t0;case 15:case"end":return d.stop()}},s,this,[[1,10]])}));function i(s){return r.apply(this,arguments)}return i}()},{key:"subscribe",value:function(){var r=ae.default(D.default.mark(function s(){return D.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(this.queryExpression!=null){l.next=2;break}return l.abrupt("return",Promise.reject(new lr("Invalid query",400,54507)));case 2:return l.abrupt("return",this.liveQueryCreator(this.indexName,this.queryExpression));case 3:case"end":return l.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"getItems",value:function(){return this.items}},{key:"updateIndexName",value:function(i){this.indexName=i,this.queryUri=this.generateQueryUri(this.indexName)}},{key:"generateQueryUri",value:function(i){return new Fu(this.insightsUri).pathSegment(i).pathSegment("Items").build()}}],[{key:"type",get:function(){return"instant_query"}}]),n}(zb.ReplayEventEmitter);tt.default($f,"searchResult","searchResult");st([ne.validateTypesAsync("string"),ie("design:type",Function),ie("design:paramtypes",[String]),ie("design:returntype",Promise)],$f.prototype,"search",null);st([ne.validateTypes(ne.nonEmptyString),ie("design:type",Function),ie("design:paramtypes",[String]),ie("design:returntype",void 0)],$f.prototype,"updateIndexName",null);var Ehe="3.3.10";function khe(e){var t=Ihe();return function(){var r=Yt.default(e),i;if(t){var s=Yt.default(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return _a.default(this,i)}}function Ihe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Jx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Yx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Jx(Object(n),!0).forEach(function(r){tt.default(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jx(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Che="data_sync",h_=Ehe;function Th(e){if(e){if(typeof e=="string")return{id:e,mode:"open_or_create"};var t=e.mode||(e.id?"open_or_create":"create_new");return Yx(Yx({},e),{},{mode:t})}else return{mode:"create_new"}}var Xx="com.twilio.rtd.cds.document",Zx="com.twilio.rtd.cds.list",e$="com.twilio.rtd.cds.map",t$="twilio.sync.event",Pr=function(e){Kn.default(n,e);var t=khe(n);function n(r){var i,s,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(nt.default(this,n),s=t.call(this),!r)throw new Error("Sync library needs a valid Twilio token to be passed");a.hasOwnProperty("logLevel")?at.setLevel(a.logLevel):at.setLevel("silent");var l=a.productId=a.productId||Che;a.clientMetadata=a.clientMetadata||{},a.clientMetadata.hasOwnProperty("type")||(a.clientMetadata.type="sync"),a.clientMetadata.hasOwnProperty("sdk")||(a.clientMetadata.sdk="JS",a.clientMetadata.sdkv=h_);var u=!a.twilsockClient;if(!a.initRegistrations){var f=new Mp.InitRegistration(l);n.populateInitRegistrations(f),a.initRegistrations=[f]}var d=a.twilsockClient=(i=a.twilsockClient)!==null&&i!==void 0?i:new Mp.Twilsock(r,l,a);d.on("tokenAboutToExpire",function(){return s.emit("tokenAboutToExpire")}),d.on("tokenExpired",function(){return s.emit("tokenExpired")}),d.on("connectionError",function(y){return s.emit("connectionError",y)}),d.on("stateChanged",function(y){s.emit("connectionStateChanged",y),s.services.subscriptions.onConnectionStateChanged(y==="connected")}),d.on("message",function(y,E){return s._routeMessage(y,E)});var p=new Kde(a),v=new nhe(new She(h_),p,d),m=new rhe(p);return s.services={config:p,twilsock:d,network:v,storage:m,router:ji.default(s),subscriptions:null},s.services.subscriptions=new Yde(s.services),s.entities=new bhe,u&&d.connect(),s}return rt.default(n,[{key:"_routeMessage",value:function(i,s){switch(at.trace("Notification type:",i,"content:",s),i){case Xx:case Zx:case e$:this.services.subscriptions.acceptMessage(s,!1);break;case t$:this.services.subscriptions.acceptMessage(s,!0);break}}},{key:"_subscribe",value:function(i,s){this.services.subscriptions.add(i,s)}},{key:"_unsubscribe",value:function(i){this.services.subscriptions.remove(i)}},{key:"connectionState",get:function(){return this.services.twilsock.state}},{key:"ensureReady",value:function(){var r=ae.default(D.default.mark(function s(){var a;return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(this.services.config.sessionStorageEnabled){u.next=2;break}return u.abrupt("return");case 2:return u.prev=2,u.next=5,this.services.twilsock.storageId();case 5:a=u.sent,this.services.storage.updateStorageId(a.id),u.next=12;break;case 9:u.prev=9,u.t0=u.catch(2),at.warn("Failed to initialize storage",u.t0);case 12:case"end":return u.stop()}},s,this,[[2,9]])}));function i(){return r.apply(this,arguments)}return i}()},{key:"storeRootInSessionCache",value:function(i,s,a){if(!(!this.services.config.sessionStorageEnabled||!s)){var l=pi(a);(i===Zt.type||i===on.type)&&(l.last_event_id=null,delete l.items),this.services.storage.store(i,s,l)}}},{key:"readRootFromSessionCache",value:function(i,s){return!this.services.config.sessionStorageEnabled||!s?null:this.services.storage.read(i,s)}},{key:"_get",value:function(){var r=ae.default(D.default.mark(function s(a,l){var u,f,d,p=arguments;return D.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(u=p.length>2&&p[2]!==void 0?p[2]:!1,l){m.next=3;break}throw new lr("Cannot get entity without id",404);case 3:return f=new Fu(a).pathSegment(l).queryParam("Include",u?"items":void 0).build(),m.next=6,this.services.network.get(f);case 6:return d=m.sent,m.abrupt("return",d.body);case 8:case"end":return m.stop()}},s,this)}));function i(s,a){return r.apply(this,arguments)}return i}()},{key:"_createDocument",value:function(i,s,a){var l={unique_name:i,data:s||{}};return a!==void 0&&(l.ttl=a),this.services.network.post(this.services.config.documentsUri,l).then(function(u){return u.body.data=l.data,u.body})}},{key:"_getDocument",value:function(){var r=ae.default(D.default.mark(function s(a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",this.readRootFromSessionCache(Hr.type,a)||this._get(this.services.config.documentsUri,a));case 1:case"end":return u.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"_createList",value:function(i,s,a,l){var u={unique_name:i,purpose:s,context:a};return l!==void 0&&(u.ttl=l),this.services.network.post(this.services.config.listsUri,u).then(function(f){return f.body})}},{key:"_getList",value:function(){var r=ae.default(D.default.mark(function s(a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",this.readRootFromSessionCache(Zt.type,a)||this._get(this.services.config.listsUri,a));case 1:case"end":return u.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"_createMap",value:function(i,s){var a={unique_name:i};return s!==void 0&&(a.ttl=s),this.services.network.post(this.services.config.mapsUri,a).then(function(l){return l.body})}},{key:"_getMap",value:function(){var r=ae.default(D.default.mark(function s(a){var l,u=arguments;return D.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return l=u.length>1&&u[1]!==void 0?u[1]:!1,d.abrupt("return",this.readRootFromSessionCache(on.type,a)||this._get(this.services.config.mapsUri,a,l));case 2:case"end":return d.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"_getStream",value:function(){var r=ae.default(D.default.mark(function s(a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",this.readRootFromSessionCache(Mi.type,a)||this._get(this.services.config.streamsUri,a,!1));case 1:case"end":return u.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"_createStream",value:function(){var r=ae.default(D.default.mark(function s(a,l){var u,f;return D.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return u={unique_name:a},l!==void 0&&(u.ttl=l),p.next=4,this.services.network.post(this.services.config.streamsUri,u);case 4:return f=p.sent,p.abrupt("return",f.body);case 6:case"end":return p.stop()}},s,this)}));function i(s,a){return r.apply(this,arguments)}return i}()},{key:"_getLiveQuery",value:function(i){return this.readRootFromSessionCache(as.type,i)}},{key:"getCached",value:function(i,s){return i&&this.entities.get(i,s)||null}},{key:"removeFromCacheAndSession",value:function(i,s,a){this.entities.remove(s),this.services.config.sessionStorageEnabled&&this.services.storage.remove(i,s,a)}},{key:"document",value:function(){var r=ae.default(D.default.mark(function s(a){var l=this,u,f,d,p;return D.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.ensureReady();case 2:if(u=Th(a),u.mode!=="create_new"){m.next=9;break}return m.next=6,this._createDocument(u.id,u.data,u.ttl);case 6:f=m.sent,m.next=39;break;case 9:if(d=this.getCached(u.id,Hr.type),!d){m.next=14;break}return m.abrupt("return",new Hr(d));case 14:return m.prev=14,m.next=17,this._getDocument(u.id);case 17:f=m.sent,m.next=39;break;case 20:if(m.prev=20,m.t0=m.catch(14),!(m.t0.status!==404||u.mode==="open_existing")){m.next=26;break}throw m.t0;case 26:return m.prev=26,m.next=29,this._createDocument(u.id,u.data,u.ttl);case 29:f=m.sent,m.next=39;break;case 32:if(m.prev=32,m.t1=m.catch(26),m.t1.status!==409){m.next=38;break}return m.abrupt("return",this.document(a));case 38:throw m.t1;case 39:return this.storeRootInSessionCache(Hr.type,u.id,f),p=new hS(this.services,f,function(y,E,T){return l.removeFromCacheAndSession(y,E,T)}),p=this.entities.store(p),m.abrupt("return",new Hr(p));case 43:case"end":return m.stop()}},s,this,[[14,20],[26,32]])}));function i(s){return r.apply(this,arguments)}return i}()},{key:"map",value:function(){var r=ae.default(D.default.mark(function s(a){var l=this,u,f,d,p;return D.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.ensureReady();case 2:if(u=Th(a),u.mode!=="create_new"){m.next=9;break}return m.next=6,this._createMap(u.id,u.ttl);case 6:f=m.sent,m.next=39;break;case 9:if(d=this.getCached(u.id,on.type),!d){m.next=14;break}return m.abrupt("return",new on(d));case 14:return m.prev=14,m.next=17,this._getMap(u.id,u.includeItems);case 17:f=m.sent,m.next=39;break;case 20:if(m.prev=20,m.t0=m.catch(14),!(m.t0.status!==404||u.mode==="open_existing")){m.next=26;break}throw m.t0;case 26:return m.prev=26,m.next=29,this._createMap(u.id,u.ttl);case 29:f=m.sent,m.next=39;break;case 32:if(m.prev=32,m.t1=m.catch(26),m.t1.status!==409){m.next=38;break}return m.abrupt("return",this.map(a));case 38:throw m.t1;case 39:return this.storeRootInSessionCache(on.type,u.id,f),p=new gS(this.services,f,function(y,E,T){return l.removeFromCacheAndSession(y,E,T)}),p=this.entities.store(p),m.abrupt("return",new on(p));case 43:case"end":return m.stop()}},s,this,[[14,20],[26,32]])}));function i(s){return r.apply(this,arguments)}return i}()},{key:"list",value:function(){var r=ae.default(D.default.mark(function s(a){var l=this,u,f,d,p;return D.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.ensureReady();case 2:if(u=Th(a),u.mode!=="create_new"){m.next=9;break}return m.next=6,this._createList(u.id,u.purpose,u.context,u.ttl);case 6:f=m.sent,m.next=39;break;case 9:if(d=this.getCached(u.id,Zt.type),!d){m.next=14;break}return m.abrupt("return",new Zt(d));case 14:return m.prev=14,m.next=17,this._getList(u.id);case 17:f=m.sent,m.next=39;break;case 20:if(m.prev=20,m.t0=m.catch(14),!(m.t0.status!==404||u.mode==="open_existing")){m.next=26;break}throw m.t0;case 26:return m.prev=26,m.next=29,this._createList(u.id,u.purpose,u.context,u.ttl);case 29:f=m.sent,m.next=39;break;case 32:if(m.prev=32,m.t1=m.catch(26),m.t1.status!==409){m.next=38;break}return m.abrupt("return",this.list(a));case 38:throw m.t1;case 39:return this.storeRootInSessionCache(Zt.type,u.id,f),p=new vS(this.services,f,function(y,E,T){return l.removeFromCacheAndSession(y,E,T)}),p=this.entities.store(p),m.abrupt("return",new Zt(p));case 43:case"end":return m.stop()}},s,this,[[14,20],[26,32]])}));function i(s){return r.apply(this,arguments)}return i}()},{key:"stream",value:function(){var r=ae.default(D.default.mark(function s(a){var l=this,u,f,d,p,v;return D.default.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,this.ensureReady();case 2:if(u=Th(a),u.mode!=="create_new"){y.next=9;break}return y.next=6,this._createStream(u.id,u.ttl);case 6:f=y.sent,y.next=39;break;case 9:if(d=this.getCached(u.id,Mi.type),!d){y.next=14;break}return y.abrupt("return",new Mi(d));case 14:return y.prev=14,y.next=17,this._getStream(u.id);case 17:f=y.sent,y.next=39;break;case 20:if(y.prev=20,y.t0=y.catch(14),!(y.t0.status!==404||u.mode==="open_existing")){y.next=26;break}throw y.t0;case 26:return y.prev=26,y.next=29,this._createStream(u.id,u.ttl);case 29:f=y.sent,y.next=39;break;case 32:if(y.prev=32,y.t1=y.catch(26),y.t1.status!==409){y.next=38;break}return y.abrupt("return",this.stream(a));case 38:throw y.t1;case 39:return this.storeRootInSessionCache(Mi.type,u.id,f),p=function(T,w,b){return l.removeFromCacheAndSession(T,w,b)},v=new Hc(this.services,f,p),v=this.entities.store(v),y.abrupt("return",new Mi(v));case 44:case"end":return y.stop()}},s,this,[[14,20],[26,32]])}));function i(s){return r.apply(this,arguments)}return i}()},{key:"shutdown",value:function(){var r=ae.default(D.default.mark(function s(){return D.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.services.subscriptions.shutdown();case 2:return l.next=4,this.services.twilsock.disconnect();case 4:case"end":return l.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"updateToken",value:function(){var r=ae.default(D.default.mark(function s(a){return D.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",this.services.twilsock.updateToken(a).catch(function(f){var d,p=f==null||(d=f.reply)===null||d===void 0?void 0:d.status;throw(p==null?void 0:p.code)===401&&(p==null?void 0:p.status)==="UNAUTHORIZED"?new lr("Updated token was rejected by server",400,51130):f}));case 1:case"end":return u.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"liveQuery",value:function(){var r=ae.default(D.default.mark(function s(a,l){var u=this,f,d,p,v,m;return D.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,this.ensureReady();case 2:return f=new Fu(this.services.config.insightsUri).pathSegment(a).pathSegment("Items").build(),E.next=5,hD({network:this.services.network,uri:f,queryString:l,type:as.type});case 5:return d=E.sent,p=this.getCached(d.query_id,as.type),p||(v=this._getLiveQuery(d.query_id),v||(v={indexName:a,queryExpression:l,sid:d.query_id,queryUri:f,last_event_id:d.last_event_id}),m=function(w,b,$){return u.removeFromCacheAndSession(w,b,$)},p=new yS(v,this.services,m,d.items)),this.storeRootInSessionCache(as.type,d.query_id,p.liveQueryDescriptor),p=this.entities.store(p),E.abrupt("return",new as(p));case 11:case"end":return E.stop()}},s,this)}));function i(s,a){return r.apply(this,arguments)}return i}()},{key:"instantQuery",value:function(){var r=ae.default(D.default.mark(function s(a){var l=this,u;return D.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.ensureReady();case 2:return u=function(v,m){return l.liveQuery(v,m)},d.abrupt("return",new $f({indexName:a,network:this.services.network,insightsUri:this.services.config.insightsUri,liveQueryCreator:u}));case 4:case"end":return d.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()}],[{key:"populateInitRegistrations",value:function(i){i.populateInitRegistrations([t$,Xx,Zx,e$])}},{key:"version",get:function(){return h_}}]),n}(zb.ReplayEventEmitter);tt.default(Pr,"connectionStateChanged","connectionStateChanged");tt.default(Pr,"connectionError","connectionError");tt.default(Pr,"tokenAboutToExpire","tokenAboutToExpire");tt.default(Pr,"tokenExpired","tokenExpired");st([ne.validateTypesAsync(["undefined","string",ne.objectSchema("open document options",{id:["string","undefined"],mode:[ne.literal("open_or_create","open_existing","create_new"),"undefined"],ttl:[ne.nonNegativeInteger,"undefined"],data:[ne.pureObject,"undefined",ne.literal(null)]})]),ie("design:type",Function),ie("design:paramtypes",[Object]),ie("design:returntype",Promise)],Pr.prototype,"document",null);st([ne.validateTypesAsync(["undefined","string",ne.objectSchema("open map options",{id:["string","undefined"],mode:[ne.literal("open_or_create","open_existing","create_new"),"undefined"],ttl:[ne.nonNegativeInteger,"undefined"],data:[ne.pureObject,"undefined",ne.literal(null)],includeItems:["boolean","undefined"]})]),ie("design:type",Function),ie("design:paramtypes",[Object]),ie("design:returntype",Promise)],Pr.prototype,"map",null);st([ne.validateTypesAsync(["undefined","string",ne.objectSchema("open list options",{id:["string","undefined"],mode:[ne.literal("open_or_create","open_existing","create_new"),"undefined"],ttl:[ne.nonNegativeInteger,"undefined"],data:[ne.pureObject,"undefined",ne.literal(null)],purpose:["string","undefined"],context:[ne.pureObject,"undefined"],includeItems:["boolean","undefined"]})]),ie("design:type",Function),ie("design:paramtypes",[Object]),ie("design:returntype",Promise)],Pr.prototype,"list",null);st([ne.validateTypesAsync(["undefined","string",ne.objectSchema("open stream options",{id:["string","undefined"],mode:[ne.literal("open_or_create","open_existing","create_new"),"undefined"],ttl:[ne.nonNegativeInteger,"undefined"],data:[ne.pureObject,"undefined",ne.literal(null)]})]),ie("design:type",Function),ie("design:paramtypes",[Object]),ie("design:returntype",Promise)],Pr.prototype,"stream",null);st([ne.validateTypesAsync(ne.nonEmptyString),ie("design:type",Function),ie("design:paramtypes",[String]),ie("design:returntype",Promise)],Pr.prototype,"updateToken",null);st([ne.validateTypesAsync(ne.nonEmptyString,"string"),ie("design:type",Function),ie("design:paramtypes",[String,String]),ie("design:returntype",Promise)],Pr.prototype,"liveQuery",null);st([ne.validateTypesAsync(ne.nonEmptyString),ie("design:type",Function),ie("design:paramtypes",[String]),ie("design:returntype",Promise)],Pr.prototype,"instantQuery",null);var Rhe=Rr.Client=Pr;Rr.InsightsItem=mS;Rr.InstantQuery=$f;Rr.LiveQuery=as;Rr.Paginator=qb;Rr.SyncClient=Pr;Rr.SyncDocument=Hr;Rr.SyncList=Zt;Rr.SyncListItem=pS;Rr.SyncMap=on;Rr.SyncMapItem=oc;Rr.SyncStream=Mi;const n$="https://callburner-functions-2333-dev.twil.io",xhe=e=>{const t=Qe.useRef(null),[n,r]=Qe.useState([]),[i,s]=Qe.useState(!1),[a,l]=Qe.useState(null),u=Qe.useCallback(()=>{r([])},[]);return Qe.useEffect(()=>{var v;if(!e){(v=t.current)==null||v.shutdown(),t.current=null,s(!1),u();return}let f,d=!1;return(async()=>{try{console.log("[Sync] Requesting token from:",`${n$}/sync-token`);const m=await fetch(`${n$}/sync-token`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identity:`callburner-${Date.now()}`})});if(!m.ok){const b=await m.text();throw console.error("[Sync] Token request failed:",m.status,b),new Error(`Failed to get Sync token: ${m.status}`)}const y=await m.text();console.log("[Sync] Token response:",y);const E=JSON.parse(y),{token:T}=E;if(d)return;f=new Rhe(T),t.current=f,f.on("connectionStateChanged",b=>{console.log("Sync connection state:",b),s(b==="connected")});try{const b=await f.document(`call-${e}`),$=b.data;$!=null&&$.amdStatus&&l($.amdStatus),b.on("updated",N=>{const z=N.data;z!=null&&z.amdStatus&&z.amdStatus!=="Detecting"&&(console.log("AMD status updated:",z.amdStatus),l(z.amdStatus))})}catch(b){console.log("Call document not yet created:",b.message)}const w=`transcriptions-${e}`;try{const b=await f.list(w),N=(await b.getItems({limit:100})).items.map(z=>z.data);d||r(N),b.on("itemAdded",z=>{const H=z.item.data;console.log("New transcription:",H),d||r(K=>{const P=K.findIndex(ee=>ee.chunkId===H.chunkId);if(P>=0){const ee=[...K];return ee[P]=H,ee}return[...K,H]})}),b.on("itemUpdated",z=>{const H=z.item.data;console.log("Updated transcription:",H),d||r(K=>{const P=[...K],ee=P.findIndex(Y=>Y.chunkId===H.chunkId);return ee>=0?(P[ee]=H,P):[...K,H]})})}catch(b){console.log("Transcription list not yet created:",b.message)}}catch(m){console.error("Error initializing Sync:",m),s(!1)}})(),()=>{d=!0,f==null||f.shutdown(),t.current=null,s(!1)}},[e,u]),{events:n,reset:u,isConnected:i,amdStatus:a}},$he="callburner-operator",r$=e=>e.replace(/[^0-9#+*]/g,"");function Phe(){const[e]=Qe.useState($he),[t,n]=Qe.useState(""),[r,i]=Qe.useState("idle"),[s,a]=Qe.useState(),l=Qe.useRef(),[u,f]=Qe.useState(!0),[d]=Qe.useState(!0),[p,v]=Qe.useState(!1),[m,y]=Qe.useState(null),[E,T]=Qe.useState(!1),[w,b]=Qe.useState([]),[$,N]=Qe.useState(null),[z,H]=Qe.useState(null),{events:K,amdStatus:P}=xhe(s),ee=async(W,Re)=>{try{const kt=await _V(W);y(kt??{callSid:W,dialedNumber:Re,startedAt:new Date().toISOString()}),T(!0);const De=await Jk();b(De)}catch(kt){console.warn("Unable to fetch call summary",kt)}},{connect:Y,disconnect:oe,phase:de,error:me}=wV({identity:e,onCallEnded:()=>{i("ended"),v(!1),N("Call ended");const W=l.current;W&&ee(W,t)}});Qe.useEffect(()=>{i(de),de!=="recording"&&v(!1)},[de]),Qe.useEffect(()=>{me&&N(me)},[me]),Qe.useEffect(()=>{if(P&&P!==z&&P!=="Detecting"){const W={Human:" Human answered",Voicemail:" Voicemail detected",Fax:" Fax machine detected",Machine:" Machine detected"};H(P),N(W[P]||`AMD: ${P}`)}},[P,z]),Qe.useEffect(()=>{(async()=>{try{const Re=await Jk();b(Re)}catch(Re){console.warn("Unable to fetch recent calls",Re)}})()},[]);const we=Qe.useMemo(()=>t.length>=3,[t.length]),ke=W=>{n(r$(W))},_e=W=>{n(Re=>r$(`${Re}${W}`))},Me=()=>{n(W=>W.slice(0,-1))},te=async()=>{if(!we){N("Enter at least 3 digits");return}N(null);try{const W=await Y({to:t,record:u,amd:d});W.on("accept",async()=>{const Re=W.parameters.CallSid,kt=new Date().toISOString();a(Re),l.current=Re,y({callSid:Re,dialedNumber:t,startedAt:kt,amdEnabled:d}),await gV({callSid:Re,to:t,startedAt:kt,amdEnabled:d}),v(u),N("Call connected")}),W.on("error",Re=>{N(Re.message)})}catch(W){const Re=W instanceof Error?W.message:"Unable to place call";N(Re)}},ve=async()=>{oe();const W=l.current;if(W)try{await mV(W)}catch(Re){console.warn("Unable to hang up via server",Re)}},be=async()=>{const W=l.current;if(!W)return;const Re=p?"stop":"start";try{await yV(W,Re),v(!p),N(Re==="start"?"Recording started":"Recording stopped")}catch(kt){const De=kt instanceof Error?kt.message:"Unable to toggle recording";N(De)}};return pe.jsxs("div",{className:"app-shell",children:[pe.jsxs("header",{className:"top-bar",children:[pe.jsxs("div",{children:[pe.jsx("h1",{children:"CallBurner"}),pe.jsx("p",{className:"subtitle",children:"Twilio powered web dialer"})]}),pe.jsxs("div",{className:"identity-chip",children:["Signed in as ",pe.jsx("span",{children:e})]})]}),pe.jsxs("main",{className:"layout",children:[pe.jsxs("section",{className:"panel dialer-panel",children:[pe.jsxs("div",{className:"number-entry",children:[pe.jsx(W8,{value:t,onChange:ke,disabled:r==="dialing"}),pe.jsxs("label",{className:"checkbox",children:[pe.jsx("input",{type:"checkbox",checked:u,onChange:W=>f(W.target.checked)}),"Auto-start recording"]})]}),pe.jsx(U8,{onInput:_e,onBackspace:Me,disabled:r==="dialing"}),pe.jsx(B8,{callPhase:r,isRecording:p,onDial:te,onHangup:ve,onToggleRecording:be}),$&&pe.jsx("div",{className:"banner",children:$}),pe.jsxs("div",{className:"recent-calls",children:[pe.jsx("h2",{children:"Recent Calls"}),w.length===0&&pe.jsx("p",{className:"placeholder",children:"No calls yet"}),w.map(W=>pe.jsxs("button",{className:"recent-call",onClick:()=>ee(W.callSid,W.dialedNumber),children:[pe.jsx("span",{className:"number",children:W.dialedNumber}),pe.jsx("span",{className:"meta",children:new Date(W.startedAt).toLocaleString()})]},W.callSid))]})]}),pe.jsx("section",{className:"panel transcription-panel",children:pe.jsx(z8,{events:K,isStreaming:r==="in-call"||r==="recording",amdStatus:P})})]}),pe.jsx(H8,{open:E,summary:m,onClose:()=>T(!1)})]})}p_.createRoot(document.getElementById("root")).render(pe.jsx(I6.StrictMode,{children:pe.jsx(Phe,{})}));
